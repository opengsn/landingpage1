(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[58,57],{1056:function(t,e,n){var i={"./":[995,21,30,44,24,29,27,45,38,35,40,43,42,47,33],"./add-to-cart":[996,30,29,35],"./add-to-cart.js":[996,30,29,35],"./audio":[1e3,38],"./audio.js":[1e3,38],"./background":[1004],"./background.js":[1004],"./button":[1009],"./button.js":[1009],"./e-commerce-cart":[1011,37],"./e-commerce-cart.js":[1011,37],"./facebook":[1013,39],"./facebook.js":[1013,39],"./form":[1015,40,36],"./form.js":[1015,40,36],"./gmaps":[1018,41],"./gmaps.js":[1018,41],"./hotspot":[1019,42],"./hotspot.js":[1019,42],"./iframe":[1025,44,43],"./iframe.js":[1025,44,43],"./index":[995,21,30,44,24,29,27,45,38,35,40,43,42,47,33],"./index.js":[995,21,30,44,24,29,27,45,38,35,40,43,42,47,33],"./loader":[1055],"./loader.ts":[1055],"./picture":[1017],"./picture.js":[1017],"./rm-footer":[1042,21,25],"./rm-footer.js":[1042,21,25],"./rm-header":[1035,21,24,47],"./rm-header.js":[1035,21,24,47],"./shape":[1029],"./shape.js":[1029],"./shots":[1044,34],"./shots.tsx":[1044,34],"./slideshow":[1030,45],"./slideshow.js":[1030,45],"./text":[1032],"./text-v2":[1023],"./text-v2.js":[1023],"./text-v3":[1024],"./text-v3.tsx":[1024],"./text.ts":[1032],"./twitter":[1033,27,46],"./twitter.js":[1033,27,46],"./video":[1007],"./video.js":[1007]};function r(t){if(!n.o(i,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],r=e[0];return Promise.all(e.slice(1).map(n.e)).then((function(){return n(r)}))}r.keys=function(){return Object.keys(i)},r.id=1056,t.exports=r},669:function(t,e,n){"use strict";n.d(e,{wF:function(){return r},Nc:function(){return o},fh:function(){return s}});var i=n(351),r="textIndent",o=function(t){var e=t.editorState,n=t.block,o=i.Z.getBlockData({editorState:e,block:n,key:r});return"number"==typeof o?o:void 0},a=function(t){var e=t.editorState,n=t.value,o=t.block;return i.Z.setBlockData({editorState:e,block:o,key:r,value:n})},s=function(t){var e=t.editorState,n=t.method,i=o({editorState:e})||0,r=e.getSelection().toJS(),s=r.focusOffset,c=0===r.anchorOffset&&0===s;return"increase"===n&&c?a({editorState:e,value:i+28}):"decrease"===n&&c&&i>0?a({editorState:e,value:Math.max(0,i+-28)}):void 0}},654:function(t,e,n){"use strict";n.d(e,{fB:function(){return l},PP:function(){return u},z3:function(){return d},vk:function(){return h},vW:function(){return f}});var i=n(351),r=n(620),o=n(641),a=n(639);function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l="lineHeight",u=function(t){var e=t.editorState,n=t.block,r=i.Z.getBlockData({editorState:e,block:n,key:l});return"number"==typeof r?r:void 0},d=function(t){var e=t.block,n=t.editorState,r=t.lineHeight;return i.Z.setBlockData({editorState:n,block:e,key:l,value:r})},h=function(t){var e=u({editorState:t}),n="number"==typeof e&&e,i=(0,o.x6)({editorState:t}),c=(0,a.XZ)()||{project:[],global:[]},l=[].concat(s(c.project),s(c.global)).find((function(t){return t.name===i})),d=!!i&&(0,o.r_)(null==l?void 0:l.cssProperties.lineHeight);return n||d||r.BX.lineHeight},f=function(t){var e=t.editorState,n=t.method,i=h(e);if(!(i<=8))return"increase"===n?d({editorState:e,lineHeight:i+1}):"decrease"===n?d({editorState:e,lineHeight:Math.max(8,i-1)}):void 0}},655:function(t,e,n){"use strict";n.d(e,{gg:function(){return o},Z9:function(){return a},H2:function(){return s},I_:function(){return c}});var i=n(351);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="paddings",a=function(t){var e=t.editorState,n=t.block,a=i.Z.getBlockData({editorState:e,block:n,key:o});return"object"===r(a)?a:void 0},s=function(t){var e=t.block,n=t.editorState,r=t.paddings;return i.Z.setBlockData({editorState:n,block:e,key:o,value:r})},c=function(t){var e=t.blockPaddings,n=t.stylePaddings;return{left:!(!n||!e)&&Boolean(n.left&&e.left),top:!(!n||!e)&&Boolean(n.top&&e.top),bottom:!(!n||!e)&&Boolean(n.bottom&&e.bottom),right:!(!n||!e)&&Boolean(n.right&&e.right)}}},709:function(t,e,n){"use strict";n.d(e,{Yv:function(){return r},w7:function(){return o}});var i=n(351),r="sizesLinkedStatus",o=function(t){var e=t.block,n=t.editorState,o=t.linkedStatus;return i.Z.setBlockData({editorState:n,block:e,key:r,value:o})}},621:function(t,e,n){"use strict";n.d(e,{Hb:function(){return l},m7:function(){return c},AJ:function(){return u},Wg:function(){return d},Oh:function(){return h}});var i=n(622),r=n(351);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c,l="align";!function(t){t.AlignLeft="align-left",t.AlignCenter="align-center",t.AlignRight="align-right",t.AlignJustify="align-justify"}(c||(c={}));var u=a(a(a(a({},(0,i.w)({className:c.AlignLeft,label:"Left",styles:"\n      text-align: left !important;\n    "})),(0,i.w)({className:c.AlignCenter,label:"Center",styles:"\n      text-align: center !important;\n    "})),(0,i.w)({className:c.AlignRight,label:"Right",styles:"\n      text-align: right !important;\n    "})),(0,i.w)({className:c.AlignJustify,label:"Justify",styles:"\n      text-align: justify !important;\n      ".concat(Modernizr.safari||Modernizr.firefox?"white-space: normal !important;":"","\n    ")})),d=function(t){var e=t.editorState,n=t.block,i=r.Z.getBlockData({editorState:e,block:n,key:"align"});return"string"==typeof i?i:""},h=function(t){var e=t.block,n=t.editorState,i=t.align;return r.Z.setBlockData({editorState:n,block:e,key:l,value:i})}},622:function(t,e,n){"use strict";n.d(e,{w:function(){return i}});var i=function(t){var e,n,i,r=t.className,o=t.selector,a=t.label,s=t.styles,c=String(r||o);return e={},n=c,i={label:a,style:"".concat(o||"."+r," { ").concat(s," }")},n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}},645:function(t,e,n){"use strict";n.d(e,{iC:function(){return g},Hf:function(){return m},dY:function(){return p},g6:function(){return y},pb:function(){return v},lk:function(){return b},iZ:function(){return w},nq:function(){return S},XZ:function(){return x}});var i,r=n(352),o=n.n(r),a=n(622),s=n(351),c=n(646);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function u(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p,g="listStyle",m="ordered-key";!function(t){t.Unordered="unordered-list-item",t.Ordered="ordered-list-item"}(p||(p={}));var y=(f(i={},p.Unordered,{element:"li"}),f(i,p.Ordered,{element:"li"}),i),v=h(h({},(0,a.w)({className:p.Unordered,label:"Unordered list",styles:'\n      padding: 0;\n      margin: 0;\n      list-style-type: none;\n\n      div[data-offset-key]:before, & > li:before {\n        content: "â€¢ ";\n      }\n    '})),(0,a.w)({className:p.Ordered,label:"Ordered list",styles:"\n      padding: 0;\n      margin: 0;\n      list-style-type: none;\n\n      div[data-offset-key]:before, & > li:before {\n        counter-increment: ".concat(m,";\n        content: counter(").concat(m,')".";\n      }\n    ')})),b=function(t){var e=t.children,n=t.type,i=u(t,["children","type"]);return n===p.Ordered?o().createElement("ol",l({style:{counterReset:m}},i),e):o().createElement("ul",i,e)},w=(0,c.default)((function(t){var e=t.children,n=u(t,["children"]);return o().createElement(b,n,o().createElement("li",null,e))})).withConfig({displayName:"list__ListViewerWrapper",componentId:"sc-1uw1iwy-0"})([""]),S=function(t){return t===p.Ordered||t===p.Unordered},x=function(t){var e=t.editorState,n=t.block,i=s.Z.getBlockData({editorState:e,block:n,key:g});return"string"==typeof i?i:""}},620:function(t,e,n){"use strict";n.d(e,{BX:function(){return s},dP:function(){return a},XA:function(){return c},Wo:function(){return l}});var i=n(622);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a,s={fontSize:18,lineHeight:26,fontFamily:"Roboto",fontWeight:400,fontStyle:"normal",fontWeights:["n1","i1","n3","i3","n4","i4","n5","i5","n7","i7","n9","i9"],textAlign:n(621).m7.AlignLeft};!function(t){t.Unstyled="unstyled"}(a||(a={}));var c=o({},a.Unstyled,{element:"p"}),l=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,i.w)({selector:'[data-block="true"], .widget-text-v3 p:not([class]), .widget-text-v3 p[class=""]',label:"Unstyled",styles:""}))},668:function(t,e,n){"use strict";n.d(e,{hk:function(){return d},_:function(){return h},KT:function(){return f}});var i=n(641),r=n(621),o=n(655),a=n(654),s=(n(623),n(624),n(657)),c=n(669),l=n(351);n(620);var u=function(t){var e=document.createElement("div");e.classList.add("block","block-text"),e.style.position="absolute",e.style.left="-9999px",e.style.opacity="0",e.style.visibility="hidden";var n=document.createElement("div");return n.classList.add("text-preview","v2"),n.innerHTML=t,e.append(n),document.body.appendChild(e),e},d=function(t){var e=window.RM.constructorRouter,n=e.mag,i=e.getCurrentPageNum,r=t.attributes,o=t.target,a=t.classList,c=t.dataset,u=r.getNamedItem("href"),d=u&&u.value?u.value.toLowerCase():"",h=c.anchorLinkPos?parseInt(c.anchorLinkPos):0,f=c.pid,p={id:l.Z.generateRandomKey(),linkStyle:a[0],target:"_blank"===o?"_blank":"_self"};if(d.startsWith("mailto:"))p.url=d.replace("mailto:",""),p.type=s.dr.Email;else if(d.startsWith("tel:"))p.url=d.replace("tel:",""),p.type=s.dr.Phone;else if("__rm_anchor"===d)p.url="".concat(h,"px"),p.pageNum=i()||void 0,p.type=s.dr.Anchor,p.anchorPosition=h;else if("back to top"===d)p.url="",p.type=s.dr.ScrollToTop;else if("__rm_goback"===d)p.url="",p.type=s.dr.GoBack;else if(f||n.getPageId(d)){var g=n.getPageId(d);p.url=""+(f&&n.getPageUri(f)||g||d);var m=f||g;p.pageNum=m&&n.getPageNum(m)||void 0,p.type=s.dr.Page}else p.url=d,p.type=s.dr.URL;return p},h=function(t,e){var n,s={},l=(null==e?void 0:e.ignore)||{};if(!l.textStyles&&null!==(n=t.classList)&&void 0!==n&&n.length){var u=Array.from(t.classList).filter((function(t){return t.startsWith("paragraph")}));s[i.MX]=u[0]}if(!l.textAlign&&t.style.textAlign){var d=t.style.textAlign;s[r.Hb]="right"===d?r.m7.AlignRight:"center"===d?r.m7.AlignCenter:"justify"===d?r.m7.AlignJustify:r.m7.AlignLeft}if(!l.paddings){var h={};t.style.paddingLeft&&(h.left=parseInt(t.style.paddingLeft)),t.style.paddingTop&&(h.top=parseInt(t.style.paddingTop)),t.style.paddingRight&&(h.right=parseInt(t.style.paddingRight)),t.style.paddingBottom&&(h.bottom=parseInt(t.style.paddingBottom)),s[o.gg]=h}return!l.lineHeight&&t.style.lineHeight&&(s[a.fB]=parseInt(t.style.lineHeight)),!l.textIndent&&t.style.textIndent&&(s[c.wF]=parseInt(t.style.textIndent)),s},f=function(t){var e=u(t),n=Array.from(e.querySelectorAll("p"));if(n.length>1){var i=n.map((function(t){return t.innerHTML})).join("<br/>");return"<p>".concat(i,"</p>")}return t}},656:function(t,e,n){"use strict";n.d(e,{b3:function(){return o},qY:function(){return a}});var i=n(352),r=n.n(i),o="BR_ENTITY",a={strategy:function(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&n.getEntity(e).getType()===o}),e)},component:function(){return r().createElement("br",null)}}},695:function(t,e,n){"use strict";n.d(e,{t:function(){return s}});var i=n(445),r=n(657),o=n(689),a=n(656),s=new i.CompositeDecorator([r.ez,o.eq,o.$X,a.qY])},657:function(t,e,n){"use strict";n.d(e,{kM:function(){return S},dr:function(){return w},TF:function(){return x},rU:function(){return k},ez:function(){return _}});var i=n(352),r=n.n(i),o=n(658),a=n.n(o),s=(n(445),n(659)),c=n(660),l=n(666),u=n(351),d=n(623);function h(){return(h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var w,S="LINK";!function(t){t.URL="URL",t.Page="Page",t.Email="Email",t.Phone="Phone",t.Anchor="Anchor",t.ScrollToTop="ScrollToTop",t.GoBack="GoBack"}(w||(w={}));var x={name:"link-1",label:"Default Link Style",style:{link:{textColor:"0080FF64",color:"0080FF64",type:l.BM.Solid,size:1,padding:0},hover:{textColor:"0080FF64",color:"0080FF64",type:l.BM.None,size:1,padding:0},current:{textColor:"0080FF64",color:"0080FF64",type:l.BM.None,size:1,padding:0}}},k=function(t){var e=(0,i.useContext)(c.BackboneContext).model,n=(0,i.useContext)(s.T).model,o=(0,i.useContext)(s.x).model,l=y(o?o.useTextWidgetStore({partial:!1}):(0,i.useState)(null),1)[0],f=t.mag,g=t.contentState&&t.entityKey?t.contentState.getEntity(t.entityKey).getData():t.data||{},v=g.url,b=g.target,S=void 0===b?"_self":b,k=g.type,_=g.linkStyle,O=g.anchorPosition,P=g.pageNum,T=g.pageUri,L=g.id,Z=g.pageId,I=t.contentState&&t.blockKey&&"number"==typeof t.start&&"number"==typeof t.end?function(t){var e=t.contentState,n=t.start,i=t.end,r=t.blockKey,o=e.getBlockForKey(r).getCharacterList().slice(n,i),a={};if(o.size){var s=o.reduce((function(t,e){if(void 0===t)return 0;if(e){var n=e.getStyle().find((function(t){return Boolean(null==t?void 0:t.startsWith(d.f.FontSize))})),i=n&&u.Z.getCurrentInlineStylesFromString(n,d.f.FontSize),r=null!=i&&i.length?parseInt(i[0]):0;return r>t?r:t}return t}),0);s>0&&(a.fontSize=s)}return a}({contentState:t.contentState,start:t.start,end:t.end,blockKey:t.blockKey}):{},A=function(t){var e=[_||x.name].concat(m("string"==typeof t?[t]:t));if(o&&o.currentLinkStyle&&"link"!==o.currentLinkStyle&&l){var n=C(l);n&&n.id===L&&e.push(o.currentLinkStyle)}return e.join(" ")},E=function(){var t;if(!f||!P&&!T)return"";var e=window.RM.common&&window.RM.common.isDownloadedSource&&!window.RM.common.homepageRewrite&&(null===(t=window.RM.config)||void 0===t?void 0:t.root)||"/";if(Z){var n=f.getPageUri(Z);return n?"".concat(e).concat(n):"javascript:void(0)"}if(T){var i=f.getPage(T);if(i&&i._id)return"".concat(e).concat(f.getPageUri(i._id))}if(P){var r=f.getPage(P);if(r&&r._id)return"".concat(e).concat(f.getPageUri(r._id))}return"javascript:void(0)"},j=function(){if(window.RM.constructorRouter&&!window.RM.constructorRouter.previewMode)return[];if(!f||!(P||T||Z))return[];var i=[],r=t.is_global||e&&e.is_global,o=t.is_above||e&&e.is_above,a=P;if(T){var s=f.getPage(T);s&&s._id&&(a=s.num)}else if(Z){var c=f.getPageNum(Z);c&&(a=c)}var l=t.currentPageNum?t.currentPageNum===a:n&&n.currentPage&&n.currentPage.num===a,u=t.page?t.page.num===a:n&&n.page&&n.page.num===a;return(o?l:u)&&(i.push("back-to-top"),r&&i.push("current")),i};return r().createElement("a",h({},function(){switch(k){case w.URL:return{href:(t=v,/^(.*):\/\/[^\s$.?#].[^\s]*$/i.test(t)?t:"http://".concat(t)),target:S,rel:"noopener noreferrer",className:A("external-link")};case w.Email:return{href:"mailto:".concat(v),className:A("external-link")};case w.Phone:return{href:"tel:".concat(v),className:A("external-link")};case w.Anchor:return{href:"javascript:void(0)",className:A("anchor-link"),"data-anchor-link-pos":O,"data-page-uri":f&&P?P:"","data-page-id":f&&Z?Z:void 0};case w.ScrollToTop:return{href:"javascript:void(0)",className:A(["maglink","back-to-top"])};case w.GoBack:return{href:"javascript:void(0)",className:A("goback-link")};case w.Page:return{href:E(),target:S,className:A([].concat(m("_blank"===S?[]:["maglink"]),m(j())))};default:return{}}var t}(),{style:p({pointerEvents:f?void 0:"none"},I),dangerouslySetInnerHTML:"string"==typeof t.children?{__html:a().sanitize(t.children)}:void 0}),"string"!=typeof t.children?t.children:null)},_={strategy:function(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&n.getEntity(e).getType()===S}),e)},component:k},O=function(t){var e=t.getSelection(),n=t.getCurrentContent(),i=e.getStartKey(),r=e.getStartOffset();return n.getBlockForKey(i).getEntityAt(r)},C=function(t){var e=O(t);return e?t.getCurrentContent().getEntity(e).getData()||{}:null}},689:function(t,e,n){"use strict";n.d(e,{Dw:function(){return h},eq:function(){return y},$X:function(){return v}});var i=n(352),r=n.n(i),o=n(663),a=n(692),s=n(693),c=n(646),l=n(690),u=n(351);function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var h=String.fromCharCode(160),f=String.fromCharCode(8239),p=c.default.span.withConfig({displayName:"spaces__SpaceIcon",componentId:"sc-16vrwch-0"})(["&:before{content:'';height:",";padding-right:",";margin-right:-",";position:relative;left:-0.1em;background-repeat:no-repeat;"," "," ","}"],(function(t){return t.size}),(function(t){return t.size}),(function(t){return t.size}),l.backgroundImage,l.backgroundPosition,l.backgroundSize),g=a.Z.replace(/currentColor/g,o.colors.blue),m=s.Z.replace(/currentColor/g,o.colors.blue),y={strategy:function(t,e){u.Z.findSubstringIndexes(t,h).forEach((function(t){e(t,t+1)}))},component:function(t){return r().createElement(p,d({size:"0.5em",backgroundSize:"0.4em",backgroundPosition:"bottom",backgroundImage:"url('data:image/svg+xml,".concat(encodeURIComponent(g),"')")},t))}},v={strategy:function(t,e){u.Z.findSubstringIndexes(t,f).forEach((function(t){e(t,t+1)}))},component:function(t){return r().createElement(p,d({size:"0.4em",backgroundSize:"0.4em",backgroundPosition:"top",backgroundImage:"url('data:image/svg+xml,".concat(encodeURIComponent(m),"')")},t))}}},667:function(t,e,n){"use strict";n.d(e,{pL:function(){return x},Ue:function(){return m},U7:function(){return w},ZC:function(){return k},sS:function(){return S}});var i=n(445),r=n(460),o=n.n(r),a=n(511),s=n.n(a),c=n(441),l=n(351),u=n(668),d=n(620),h=n(657),f=n(623),p=n(670),g=n(641),m=(0,c.h4)({htmlToEntity:function(t,e,n){if("a"===t)return n(h.kM,"MUTABLE",(0,u.hk)(e))},htmlToStyle:function(t,e,n){return"b"===t?n.add(l.Z.getStyleValueString(f.f.FontWeight,"700")):"i"===t?n.add(l.Z.getStyleValueString(f.f.FontStyle,"italic")):n},htmlToBlock:function(t,e){if("p"===t)return{type:d.dP.Unstyled,data:(0,u._)(e,{ignore:{lineHeight:!0,textStyles:!0}})}}}),y="data-draftjs-conductor-fragment",v='[data-contents="true"] [contenteditable="false"]',b=function(t,e,n){var r,a,c,l=(n||window).getSelection();if(e.clipboardData&&l&&t&&0!==l.rangeCount&&!function(t){var e=t.anchorNode,n=t.focusNode;if(!e||!n)return!1;var i=e instanceof Element?e:e.parentElement,r=n instanceof Element?n:n.parentElement,o=i&&i.closest(v),a=r&&r.closest(v);return o&&a&&(o.contains(a)||a.contains(o))}(l)&&null!==(r=t.current)&&void 0!==r&&r._latestEditorState){var u=function(t,e){var n=s()(t,e).selectionState,i=o()(t.getCurrentContent(),n);return i.every((function(t){return Boolean(t&&0===t.getText().length)}))?null:i}(null===(a=t.current)||void 0===a?void 0:a._latestEditorState,null===(c=t.current)||void 0===c?void 0:c.editor);if(u){var d=i.ContentState.createFromBlockArray(u.toArray()),h=JSON.stringify((0,i.convertToRaw)(d)),f=document.createElement("div");f.appendChild(l.getRangeAt(0).cloneContents()),f.setAttribute(y,h),f.setAttribute("style","white-space: pre-wrap;"),e.clipboardData.setData("text/plain",l.toString()),e.clipboardData.setData("text/html",f.outerHTML),e.preventDefault()}}},w=function(t,e){var n,i=null===(n=t.current)||void 0===n?void 0:n.editor,r=function(n){b(t,n,e)};return i&&i.addEventListener("copy",r),i&&i.addEventListener("cut",r),{unregister:function(){i&&i.removeEventListener("copy",r),i&&i.removeEventListener("cut",r)}}},S=function(t){var e=t.current,n=null==e?void 0:e.editor;if(e&&n){var i=!1,r=function(t){i=(0,p.kg)({event:t,keyCode:86,ctrlOrCmd:!0,shift:!0})},o=function(t){var n,r;t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1;var o,a=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain"),s=null===(r=t.clipboardData)||void 0===r?void 0:r.getData("text/html");a&&(null!==(o=e.props)&&void 0!==o&&o.handlePaste&&e.props.handlePaste(a,s,null==e?void 0:e._latestEditorState,i))};return n.addEventListener("keydown",r,!0),n.addEventListener("paste",o,!0),{unregister:function(){n.removeEventListener("keydown",r,!0),n.removeEventListener("paste",o,!0)}}}},x=function(t){var e=t.text,n=t.html,r=t.editorState,o=t.pastedWithShift,a=l.Z.fixSelection(r),s=r.getCurrentContent(),c=l.Z.getSelectedBlocks(r),d=function(){var t=!o,d=c.some((function(t){var e=s.getBlockForKey(t);return!!(0,g.x6)({editorState:r,block:e})}));if(t&&!d){var h=n?function(t){var e=(new DOMParser).parseFromString(t,"text/html").querySelector("[".concat(y,"]"));if(e){var n=e.getAttribute(y);try{if(n){var r=JSON.parse(n);if(r)return(0,i.convertFromRaw)(r)}}catch(t){return null}}return null}(n):void 0,f=n?m((0,u.KT)(n)):void 0;if(h||f){var p=(null==h?void 0:h.getBlockMap())||(null==f?void 0:f.getBlockMap());if(p){var v=i.Modifier.replaceWithFragment(s,a,p.size>1?l.Z.mergeBlocksStyles({originStyles:r.getCurrentInlineStyle(),blockMap:p}):p);return i.EditorState.push(r,v,"insert-fragment")}}}return e?l.Z.insertText({editorState:r,text:e}):r}();if(1===c.length){var f,p=s.getBlockForKey(c[0]),v=p.getEntityAt(a.getStartOffset());if(v&&(null===(f=s.getEntity(v))||void 0===f?void 0:f.getType())===h.kM){var b=0,w=0;p.findEntityRanges((function(t){return t.getEntity()===v}),(function(t,e){b=t,w=e}));var S=(null==e?void 0:e.length)||0,x=a.getStartOffset(),k=a.getEndOffset(),_=Math.abs(k-x),O=a.merge({anchorOffset:b,focusOffset:w+S-_});d=l.Z.silentEntityToggle(d,O,v),d=i.EditorState.push(r,d.getCurrentContent(),"apply-entity");var C=x+S,P=a.merge({anchorOffset:C,focusOffset:C});d=l.Z.forceSelection(d,P)}}return d},k=function(t,e){var n=t.current,i=null==n?void 0:n.editor;if(n&&i){var r=function(t){var r;t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,n._dragCount=0,n.exitCurrentMode();var o=_(t);if(o){if(null!==(r=n.props)&&void 0!==r&&r.handleDrop){var a,s=n._internalDrag?"internal":"external";null===(a=n.props)||void 0===a||a.handleDrop(o,{},s)}n._internalDrag=!1,function(){var t=i;if(t){var n=new MouseEvent("mouseup",{view:e,bubbles:!0,cancelable:!0});t.dispatchEvent(n)}}()}};return i.addEventListener("drop",r,!0),{unregister:function(){i.removeEventListener("drop",r,!0)}}}},_=function(t){var e=null,n=null,r=function(t){return t&&t.ownerDocument?t.ownerDocument:document}(t.currentTarget);if("function"==typeof r.caretRangeFromPoint){var o=r.caretRangeFromPoint(t.x,t.y);e=o.startContainer,n=o.startOffset}else{if(!t.rangeParent)return null;e=t.rangeParent,n=t.rangeOffset}var a=function(t){var e="data-offset-key",n=t.nodeType===Node.TEXT_NODE&&t.parentElement||t;if(!n)return null;var i=n.closest("[".concat(e,"]"));if(!i)return null;var r=i.getAttribute(e),o=null==r?void 0:r.split("-");return o&&o.length?o[0]:null}(e);return a?new i.SelectionState({anchorKey:a,anchorOffset:n,focusKey:a,focusOffset:n,isBackward:!1,hasFocus:!1}):null}},635:function(t,e,n){"use strict";var i,r;function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{e:function(){return r}}),function(t){t.Smallcaps="smcp",t.StandardLigatures="liga",t.DiscretionaryLigatures="dlig",t.RequiredLigatures="rlig",t.HistoricalLigatures="hlig",t.Fractions="frac",t.Alternates="salt",t.StylisticSet01="ss01",t.StylisticSet02="ss02",t.StylisticSet03="ss03",t.StylisticSet04="ss04",t.StylisticSet05="ss05",t.StylisticSet06="ss06",t.StylisticSet07="ss07",t.StylisticSet08="ss08",t.StylisticSet09="ss09",t.StylisticSet10="ss10",t.StylisticSet11="ss11",t.StylisticSet12="ss12",t.StylisticSet13="ss13",t.StylisticSet14="ss14",t.StylisticSet15="ss15",t.StylisticSet16="ss16",t.StylisticSet17="ss17",t.StylisticSet18="ss18",t.StylisticSet19="ss19",t.StylisticSet20="ss20",t.LiningFigures="lnum",t.OldstyleFigures="onum",t.ProportionalFigures="pnum",t.TabularFigures="tnum"}(r||(r={}));o(i={},r.LiningFigures,"Lining Figures"),o(i,r.OldstyleFigures,"Oldstyle Figures"),o(i,r.ProportionalFigures,"Proportional Figures"),o(i,r.TabularFigures,"Tabular Figures")},623:function(t,e,n){"use strict";n.d(e,{f:function(){return r},b:function(){return p}});var i,r,o=n(351),a=n(624);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}!function(t){t.LetterSpacing="LETTER_SPACING",t.Color="COLOR",t.FontFeature="FONT_FEATURE",t.Stroke="STROKE",t.FontSize="FONT_SIZE",t.FontFamily="FONT_FAMILY",t.FontWeight="FONT_WEIGHT",t.FontStyle="FONT_STYLE",t.FontVariable="FONT_VARIABLE",t.IsLinkedLetterSpacing="IS_LINKED_LETTER_SPACING",t.Decoration="DECORATION",t.Transform="TRANSFORM",t.Features="FEATURES",t.FontKerning="FONT_KERNING"}(r||(r={}));var u=(s(i={},r.LetterSpacing,{name:"letterSpacing",value:function(t){return"".concat(t,"px")}}),s(i,r.FontFamily,{name:"fontFamily",value:function(t){return t}}),s(i,r.FontStyle,{name:"fontStyle",value:function(t){return t}}),s(i,r.FontWeight,{name:"fontWeight",value:function(t){return t}}),s(i,r.FontSize,{name:"fontSize",value:function(t){return"".concat(t,"px")}}),s(i,r.Color,{name:"color",value:function(t){var e=(0,a.gn)(t),n=e.r,i=e.g,r=e.b,o=e.a;return"rgba(".concat(n,", ").concat(i,", ").concat(r,", ").concat(o,")")}}),s(i,r.FontFeature,{name:"fontFeatureSettings",value:function(t){return t.split(o.Z.INLINE_STYLE_DELIMITER).filter((function(t){return t})).map((function(t){return'"'.concat(t,'"')})).join(", ")}}),s(i,r.FontVariable,{name:"fontVariationSettings",value:function(t){return t.split(o.Z.INLINE_STYLE_DELIMITER).filter((function(t){return t})).map((function(t){var e=c(t.split("|"),2),n=e[0],i=e[1];return"'".concat(n,"' ").concat(i)})).join(", ")}}),s(i,r.Stroke,{styleFn:function(t){var e=c(t.split(o.Z.INLINE_STYLE_DELIMITER),2),n=e[0],i=e[1],r=(0,a.gn)(i),s=r.r,l=r.g,u=r.b,d=r.a,h="rgba(".concat(s,", ").concat(l,", ").concat(u,", ").concat(d,")"),f="".concat(n,"px ").concat(h);return{WebkitTextStroke:f,textStroke:f}}}),s(i,r.Decoration,{name:"textDecoration",value:function(t){return t}}),s(i,r.Transform,{name:"textTransform",value:function(t){return t}}),s(i,r.Features,{styleFn:function(t){switch(t){case"superscript":return{verticalAlign:"baseline",position:"relative",top:"-0.4em",fontSize:"smaller"};case"subscript":return{verticalAlign:"baseline",position:"relative",top:"0.4em",fontSize:"smaller"};default:return{}}}}),s(i,r.FontKerning,{styleFn:function(t){return"none"===t?{}:{fontKerning:"auto",WebkitFontKerning:"auto"}}}),i);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){return Object.keys(u).reduce((function(e,n){var i=t.filter((function(t){return!!t&&t.startsWith(n)})).first();if(i){var r=i.replace("".concat(n).concat(o.Z.INLINE_STYLE_DELIMITER),""),a=u[n];if(a.styleFn)return h(h({},e),a.styleFn(r));if(a.name&&a.value)return h(h({},e),{},f({},a.name,a.value(r)))}return e}),{})}},619:function(t,e,n){"use strict";n.d(e,{J:function(){return r}});n(351);var i=["The follies of others are obvious, but our own hide from us; we love to parse othersâ€™ missteps but we cover up our own, as the cheat conceals the false die. It is in the nature of men to lay blame: we see othersâ€™ mistakes while our own passions swell, carrying us ever farther from improvement. â€” Buddhist wisdom","No one can long stand on tiptoe. He who thrusts himself forward is not a source of light. No glory comes to the self-satisfied, no honor to the boastful. The proud will not rise high. In the court of good sense, such people are like table discards, repellent to all. The sensible person does not rely on self. â€” Lao-Tzu","Simplicity in life, language and habits strengthens a nation, but a life of luxury, fancy language and effeminate habit leads to weakness and death. â€” John Ruskin","Truth is not a matter of talking but comes only through labor and observation. And when you have one truth in hand, two others, like the first leaves of a dicotyledonous plant, will probably appear. â€” John Ruskin","All things have a beginning and an end. So it is with mankind: there is a beginning and end to all  human affairs. He who understands what is a beginning and what is an end is closer to the truth. â€” Confucius","Most people are dismayed if deprived of their pleasures. The right course belongs to him who relishes even the passing away of the reason for his joy and is not bitter. â€” Pascal","When we are clear about things, we have knowledge; with knowledge, we seek the path of truth; when the search is rewarded, the heart becomes good; with the heart made good, the moral view of things that leads to virtue is attained. â€” Confucius","Wisdom has three faces: when seen from afar, it is grand and severe; on closer approach, it is tender and welcoming; when we are close enough to hear it, the words of  wisdom are severe and demanding. â€” Chinese wisdom","The sun constantly floods the world with its light, but its light is not exhausted; so your mind should send its light in all directions and not be exhausted. It should flow everywhere, without diminishment, and when it encounters an obstacle, it should react, not with annoyance or anger but should serenely clarify all that yearns to accept it, without any lessening or weariness, bringing light to all that is turned to it, leaving in shadow only that which turns its face away. â€” Marcus Aurelius","As torches and fireworks pale to invisibility in the sun, so the mind, even the mind of genius, and beauty pale and are eclipsed by the heartâ€™s goodness. â€” Schopenhauer","Music and sweet treats bring the wanderer to a stop, but wisdom has neither flavor nor smell. When looked for, it is invisible; when listened for, it is inaudible, yet its goodness is inexhaustible. The most powerful thing in the world cannot be seen, heard or touched. â€” Lao-Tzu","The best ideas are usually those that come without effort, out of the blue. The great intellectual creations come easily. Only a great person can create something great, and such a one works without strain. â€” John Ruskin","He who talks much rarely puts his words into action. But the wise person fears that his words may not be translated into action. The wise do not utter empty words, lest their actions be inconsistent with their words. â€” Chinese wisdom","Fear ignorance, but fear false knowledge even more. Turn your eyes from the deceptive world and do not trust your feelings, for they lie; rather look inward to the impersonal, eternal self. Truly, ignorance is like a sealed and airless chamber; in it, the soul sits like a caged bird, neither singing nor spreading its wings. But ignorance is better than any school of thought that is not guided by the wisdom of the soul. â€” Buddhist wisdom","Some seek their good or happiness in power; others in science, and others in the pleasures of the flesh. But those who come truly close to the good understand that it cannot consist in what can only be mastered by a few. They understand that the true good of humankind is that which can be achieved by all people, without division and without envy; its nature  is such that none can lose it if they do not so choose. â€” Pascal","The wise person asks only of himself; the unwise man demands everything from others. â€” Chinese wisdom","To know much and not to put oneâ€™s self forward as knowing is the height of morality. To know little and put oneâ€™s self forward as knowledgeable is an illness. Only by understanding the disease can one expunge it. â€” Lao-Tzu","Speak only of that which is as clear to you as the morning, or be silent. â€” Talmud","Conquer ferocity with love, evil with good, miserliness with generosity, the liar with truth. â€” Buddhist wisdom","People seek satisfaction, throwing themselves from one thing to another because they feel the emptiness of their lives but do not yet realize the emptiness of the new delight that attracts them. â€” Pascal","The skilled warrior does not rage. The skilled fighter is not angry. He who is skilled in the use of people is not provocative. This is the virtue of non-resistance. This is being in agreement with Heaven. â€” Lao-Tzu","The first and principal characteristic of a good and wise person is his consciousness that he knows very little, that many people know more and he seeks always to learn, to study, and not to teach. Those who wish to teach or direct neither teach nor lead well. â€” John Ruskin","The virtuous person seeks to follow the direct path to the end. What is to be feared is to go halfway and then to weaken. â€” Chinese wisdom"],r=function(){return i[Math.floor(Math.random()*i.length)]}},670:function(t,e,n){"use strict";n.d(e,{Bg:function(){return x},kg:function(){return w},ul:function(){return S}});var i=n(445),r=n(671),o=n(351),a=n(669),s=n(654),c=n(623),l=n(341),u=n(639),d=n(641);function h(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var p,g=function(t){var e=t.editorState,n=t.method,i=o.Z.getCurrentInlineStyles(e,c.f.LetterSpacing),r=i&&i.length?parseFloat(i[0]):0,a=(0,d.x6)({editorState:e}),s=(0,u.XZ)()||{project:[],global:[]},f=[].concat(h(s.project),h(s.global)).find((function(t){return t.name===a})),p=!!a&&(0,d.r_)(null==f?void 0:f.cssProperties.letterSpacing,!0),g=r||p||0,m="decrease"===n?-1:1;return o.Z.applyInlineStyle({key:c.f.LetterSpacing,value:l.default.decimals(g+.2*m,2),editorState:e})},m=n(620),y=function(t){var e=t.editorState,n=t.method,i=o.Z.getCurrentInlineStyles(e,c.f.FontSize),r=i&&i.length?parseInt(i[0]):m.BX.fontSize,a="decrease"===n?-1:1;return o.Z.applyInlineStyle({key:c.f.FontSize,value:r+a,editorState:e})},v=n(621),b=n(689);!function(t){t.InsertNbsp="InsertNbsp",t.InsertThinsp="InsertThinsp",t.InsertEnsp="InsertEnsp",t.IncreaseIndent="IncreaseIndent",t.DecreaseIndent="DecreaseIndent",t.DecreaseLineHeight="DecreaseLineHeight",t.IncreaseLineHeight="IncreaseLineHeight",t.DecreaseLetterSpacing="DecreaseLetterSpacing",t.IncreaseLetterSpacing="IncreaseLetterSpacing",t.ToggleTypographyPanel="ToggleTypographyPanel",t.ToggleLinkPanel="ToggleLinkPanel",t.IncreaseFontSize="IncreaseFontSize",t.DecreaseFontSize="DecreaseFontSize",t.AlignLeft="AlignLeft",t.AlignRight="AlignRight",t.AlignCenter="AlignCenter",t.SelectParagraph="SelectParagraph",t.ToggleBold="ToggleBold",t.ToggleUnderline="ToggleUnderline",t.ToggleItalic="ToggleItalic"}(p||(p={}));var w=function(t){var e=t.event,n=t.keyCode,r=t.ctrlOrCmd,o=void 0!==r&&r,a=t.shift,s=void 0!==a&&a,c=t.alt,l=void 0!==c&&c,u=i.KeyBindingUtil.usesMacOSHeuristics();return n===e.keyCode&&s===e.shiftKey&&l===e.altKey&&(u?o===e.metaKey:o===e.ctrlKey)},S=function(t){return w({event:t,keyCode:32,alt:!0})||w({event:t,keyCode:32,alt:!0,ctrlOrCmd:!0})?(r.ZP.sendEvent(r.RM.KeyPress,{eventLabel:"Non-breaking space (nbsp)"}),p.InsertNbsp):w({event:t,keyCode:32,alt:!0,ctrlOrCmd:!0,shift:!0})?(r.ZP.sendEvent(r.RM.KeyPress,{eventLabel:"Thin space (thinsp)"}),p.InsertThinsp):w({event:t,keyCode:32,alt:!0,shift:!0})?(r.ZP.sendEvent(r.RM.KeyPress,{eventLabel:"Half-size spaces (ensp)"}),p.InsertEnsp):w({event:t,keyCode:9})?p.IncreaseIndent:w({event:t,keyCode:9,shift:!0})?p.DecreaseIndent:w({event:t,keyCode:38,alt:!0})?p.DecreaseLineHeight:w({event:t,keyCode:40,alt:!0})?p.IncreaseLineHeight:w({event:t,keyCode:37,alt:!0})?p.DecreaseLetterSpacing:w({event:t,keyCode:39,alt:!0})?p.IncreaseLetterSpacing:w({event:t,keyCode:84,alt:!0,ctrlOrCmd:!0})?p.ToggleTypographyPanel:w({event:t,keyCode:75,ctrlOrCmd:!0})?p.ToggleLinkPanel:w({event:t,keyCode:190,ctrlOrCmd:!0,shift:!0})?p.IncreaseFontSize:w({event:t,keyCode:188,ctrlOrCmd:!0,shift:!0})?p.DecreaseFontSize:w({event:t,keyCode:76,ctrlOrCmd:!0,shift:!0})?p.AlignLeft:w({event:t,keyCode:82,ctrlOrCmd:!0,shift:!0})?p.AlignRight:w({event:t,keyCode:67,ctrlOrCmd:!0,shift:!0})?p.AlignCenter:w({event:t,keyCode:65,ctrlOrCmd:!0,shift:!0})?p.SelectParagraph:w({event:t,keyCode:66,ctrlOrCmd:!0})?p.ToggleBold:w({event:t,keyCode:73,ctrlOrCmd:!0})?p.ToggleItalic:w({event:t,keyCode:85,ctrlOrCmd:!0})?p.ToggleUnderline:(0,i.getDefaultKeyBinding)(t)},x=function(t){var e=t.action,n=t.editorState,i=t.workspace;if(e===p.InsertNbsp)return{status:"handled",editorState:o.Z.insertText({editorState:n,text:b.Dw})};if(e===p.InsertEnsp)return{status:"handled",editorState:o.Z.insertText({editorState:n,text:String.fromCharCode(8194)})};if(e===p.InsertThinsp)return{status:"handled",editorState:o.Z.insertText({editorState:n,text:String.fromCharCode(8201)})};if(e===p.IncreaseIndent){var r=(0,a.fh)({editorState:n,method:"increase"});if(r)return{status:"handled",editorState:r}}if("backspace"===e||e===p.DecreaseIndent){var l=(0,a.fh)({editorState:n,method:"decrease"});if(l)return{status:"handled",editorState:l}}if(e===p.DecreaseLineHeight){var u=(0,s.vW)({editorState:n,method:"decrease"});if(u)return{status:"handled",editorState:u}}if(e===p.IncreaseLineHeight){var d=(0,s.vW)({editorState:n,method:"increase"});if(d)return{status:"handled",editorState:d}}if(e===p.IncreaseLetterSpacing)if(n.getSelection().isCollapsed()){var h=o.Z.getWordCaretSelection(n,"next");if(h)return{status:"handled",editorState:h}}else{var f=g({editorState:n,method:"increase"});if(f)return{status:"handled",editorState:f}}if(e===p.DecreaseLetterSpacing)if(n.getSelection().isCollapsed()){var w=o.Z.getWordCaretSelection(n,"prev");if(w)return{status:"handled",editorState:w}}else{var S=g({editorState:n,method:"decrease"});if(S)return{status:"handled",editorState:S}}if(e===p.ToggleTypographyPanel){var x=i.controls.findControl("text_typography_new");if(x)return x.onClick.apply(x),{status:"handled",editorState:n}}if(e===p.ToggleLinkPanel){var k=i.controls.findControl("text_link_new");if(k)return k.onClick.apply(k),{status:"handled",editorState:n}}if(e===p.IncreaseFontSize)return{status:"handled",editorState:y({editorState:n,method:"increase"})};if(e===p.DecreaseFontSize)return{status:"handled",editorState:y({editorState:n,method:"decrease"})};if(e===p.AlignLeft||e===p.AlignRight||e===p.AlignCenter){var _=e===p.AlignLeft?v.m7.AlignLeft:e===p.AlignRight?v.m7.AlignRight:v.m7.AlignCenter;return{status:"handled",editorState:(0,v.Oh)({editorState:n,align:_})}}if(e===p.SelectParagraph)return{status:"handled",editorState:o.Z.selectCurrentBlock(n)};if(e===p.ToggleBold){var O=o.Z.getCurrentInlineStyles(n,c.f.FontWeight);return{status:"handled",editorState:o.Z.applyInlineStyle({editorState:n,key:c.f.FontWeight,value:O&&"700"===O[0]?m.BX.fontWeight:"700"})}}if(e===p.ToggleItalic){var C=o.Z.getCurrentInlineStyles(n,c.f.FontStyle);return{status:"handled",editorState:o.Z.applyInlineStyle({editorState:n,key:c.f.FontStyle,value:C&&"italic"===C[0]?m.BX.fontStyle:"italic"})}}if(e===p.ToggleUnderline){var P=o.Z.getCurrentInlineStyles(n,c.f.Decoration);return{status:"handled",editorState:o.Z.applyInlineStyle({editorState:n,key:c.f.Decoration,value:P&&"underline"===P[0]?"none":"underline"})}}}},639:function(t,e,n){"use strict";n.d(e,{sJ:function(){return s},XZ:function(){return c},H$:function(){return u},kh:function(){return d},SZ:function(){return f},we:function(){return p},Qc:function(){return g},qi:function(){return m}});var i=n(640);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var a=r((0,i.M)({global:[],project:[]}),3),s=a[0],c=(a[1],a[2]),l=r((0,i.M)({global:[],project:[]}),3),u=l[0],d=(l[1],l[2]),h=r((0,i.M)({global:[],project:[]}),3),f=h[0],p=(h[1],h[2]),g=r((0,i.M)({}),1)[0],m=function(t){var e=t.fontFamily,n=t.fontWeight,i=t.fontStyle;return"".concat(e,"_").concat(n,"_").concat(i)}},666:function(t,e,n){"use strict";var i,r,o,a,s;n.d(e,{Rr:function(){return i},m5:function(){return r},BM:function(){return a}}),function(t){t.top="top",t.bottom="bottom"}(i||(i={})),function(t){t.LTR="LTR",t.RTL="RTL"}(r||(r={})),function(t){t.global="global",t.project="project"}(o||(o={})),function(t){t.None="None",t.Solid="Solid",t.Dotted="Dotted",t.Dashed="Dashed"}(a||(a={})),function(t){t.Added="Added",t.Removed="Removed",t.Replaced="Replaced",t.NotChanged="NotChanged"}(s||(s={}))},641:function(t,e,n){"use strict";n.d(e,{MX:function(){return h},aR:function(){return g},Ob:function(){return m},r_:function(){return y},x6:function(){return v},ne:function(){return b},j8:function(){return w}});var i=n(642),r=n(624),o=n(351),a=n(639);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var h="textStyle",f=["fontSize","lineHeight","letterSpacing","textIndent","paddingLeft","paddingTop","paddingRight","paddingBottom","width"],p=function(t,e){if(e){if(f.includes(t))return"".concat(e,"px");if("color"===t){var n=(0,r.gn)(String(e)),i=n.r,o=n.g,a=n.b,s=n.a;return"rgba(".concat(i,", ").concat(o,", ").concat(a,", ").concat(s,")")}return e}},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object.keys(t).reduce((function(n,r){return t[r]?"".concat(n).concat((0,i.o)(r),": ").concat(p(r,t[r])).concat(e?" !important":"","; "):n}),"")},m=function(){var t=(0,a.XZ)()||window.ServerData&&window.ServerData.mags&&window.ServerData.mags.mag&&window.ServerData.mags.mag.textStyles;return t?[].concat(u(t.project||[]),u(t.global||[])).reduce((function(t,e){return c(c({},t),{},l({},e.name,{element:e.tag}))}),{}):{}},y=function(t,e){return t?e?parseFloat(String(t)):parseInt(String(t)):0},v=function(t){var e=t.editorState,n=t.block,i=o.Z.getBlockData({editorState:e,block:n,key:h});return"string"==typeof i?i:""},b=function(t){var e=t.block,n=t.editorState,i=t.styleName;return o.Z.setBlockData({editorState:n,block:e,key:h,value:i})},w=function(t){if(t&&t.cssProperties){var e=t.cssProperties,n=e.paddingTop,i=e.paddingLeft,r=e.paddingRight,o=e.paddingBottom,a={left:void 0!==i?y(i):0,top:void 0!==n?y(n):0,right:void 0!==r?y(r):0,bottom:void 0!==o?y(o):0};if(a.left||a.top||a.right||a.bottom)return a}}},351:function(t,e,n){"use strict";var i=n(352),r=n.n(i),o=n(355),a=n.n(o),s=n(323),c=n(440),l=n.n(c),u=n(441),d=n(445),h=n(619),f=n(620),p=n(623),g=n(635),m=n(636),y=n(639),v=n(641),b=n(645),w=n(654),S=n(621),x=n(655),k=n(656),_=n(344),O=n(657),C=n(667),P=n(624),T=n(308),L=n(694),Z=n(660),I=n(709),A=n(695);function E(t,e){return M(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||F(t,e)||j()}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(t){if(Array.isArray(t))return t}function R(t){return function(t){if(Array.isArray(t))return $(t)}(t)||B(t)||F(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){if(t){if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}function B(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function z(t,e,n,i,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,r)}function D(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){z(o,i,r,a,s,"next",t)}function s(t){z(o,i,r,a,s,"throw",t)}a(void 0)}))}}function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){W(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var H=(0,u.cn)({styleToHTML:function(){return r().createElement("span",null)},blockToHTML:function(){return r().createElement("p",null)},entityToHTML:function(t,e){return t.type===k.b3?r().createElement("br",null):e}}),K=function(t,e){return d.EditorState.forceSelection(t,e||t.getSelection())},q=function(t,e){return d.RichUtils.toggleInlineStyle(t,e)},G=function(t,e){return"function"==typeof t.get?t.get(e):t[e]},X=function(t,e){var n={blocks:(G(t,"blocks")||[]).map((function(n){var i,r,o=e&&(null===(i=t[e])||void 0===i?void 0:i.styles)||G(t,"styles"),a=e&&(null===(r=t[e])||void 0===r?void 0:r.blocksMeta)||G(t,"blocksMeta"),s=(o||[]).find((function(t){return t.key===n.key})),c=(a||[]).find((function(t){return t.key===n.key})),l=[];return s&&(l="object"===V(s.inlineStyles)&&s.inlineStyles.hasOwnProperty("keys")&&s.inlineStyles.hasOwnProperty("values")?vt(s.inlineStyles):(null==s?void 0:s.inlineStyles)||[]),N(N({},n),{},{data:(null==c?void 0:c.data)||n.data||{},type:s?s.type:f.dP.Unstyled,inlineStyleRanges:l})}))||[],entityMap:G(t,"entityMap")||{}};return(0,d.convertFromRaw)(n)},Y=function(t){var e=(0,d.convertToRaw)(t),n=e.blocks.map((function(t){return{key:t.key,text:t.text,entityRanges:t.entityRanges,depth:t.depth}})),i=e.blocks.map((function(t){return{key:t.key,type:t.type,inlineStyles:mt(t.inlineStyleRanges)}})),r=e.blocks.map((function(t){return{key:t.key,data:t.data||{}}}));return{blocks:n,styles:i,entityMap:e.entityMap,blocksMeta:r}},J=function(t){var e=nt(t,!0),n=t.getSelection();if(2!==e.length)return n;if(0!==n.getAnchorOffset()||0!==n.getFocusOffset())return n;var i=t.getCurrentContent(),r=n.getStartKey(),o=i.getBlockForKey(r);return new d.SelectionState({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:o.getText().length,isBackward:!1,isCollapsed:n.isCollapsed()})},Q=function(t){var e=t.content;return(t.selection||new d.SelectionState).merge({anchorKey:e.getFirstBlock().getKey(),anchorOffset:0,focusOffset:e.getLastBlock().getText().length,focusKey:e.getLastBlock().getKey()})},tt=function(t){var e=t.getCurrentInlineStyle();return(0,p.b)(e)};var et=function(t){var e=t.editorState,n=t.blockKey,i=t.data,r=t.selection||e.getSelection(),o=e.getCurrentContent(),a=o.getBlockMap(),s=o.getBlockForKey(n),c=s.get("data"),u=s.set("data",l().Map(N(N({},c?c.toObject():{}),i)));return o.merge({blockMap:a.merge(W({},s.getKey(),u)),selectionBefore:r,selectionAfter:r})},nt=function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.getSelection();if(r.isCollapsed())return[r.getStartKey()];var o=t.getCurrentContent(),a=r.getIsBackward(),s=a?r.getFocusKey():r.getAnchorKey(),c=a?r.getAnchorKey():r.getFocusKey(),l=0===r.getFocusOffset()&&0===r.getAnchorOffset()&&s!==c,u=0===r.getFocusOffset()&&s!==c&&r.getAnchorOffset()===(null===(e=o.getBlockForKey(r.getAnchorKey()))||void 0===e||null===(n=e.getCharacterList())||void 0===n?void 0:n.size),d=o.getBlockMap().toIndexedSeq(),h=d.map((function(t){return t&&t.getKey()})).toJS(),f=[],p=h.indexOf(s),g=h.indexOf(c);return p>-1&&g>-1&&(f=h.slice(p,g+1)),(!i&&l||u)&&f.pop(),f},it=function(t){var e=t.getSelection(),n=e.getIsBackward(),i=n?e.getFocusKey():e.getAnchorKey(),r=n?e.getAnchorKey():e.getFocusKey(),o=n?e.getEndOffset():e.getStartOffset(),a=n?e.getStartOffset():e.getEndOffset();if(0===o&&0===a){var s=n?r:i;return{startKey:s,endKey:s,startOffset:0,endOffset:t.getCurrentContent().getBlockForKey(s).getCharacterList().size}}return{startKey:i,endKey:r,startOffset:o,endOffset:a}},rt=function(t){return t.some((function(t){return t&&t.style.length}))},ot=function(t){var e=function(t){return"text"===t.type},n=t.some((function(t){return e(t)&&3===t.version})),i=t.some((function(t){var n;return"hotspot"===t.type&&(null===(n=t.wids)||void 0===n?void 0:n.some((function(t){return e(t)&&3===t.version})))})),r=t.some((function(t){return"slideshow"===t.type&&2===t.version}));return n||i||r},at=/url\((?:"|'|)(.*?)(?:"|'|)\)/g;function st(t){return ct.apply(this,arguments)}function ct(){return(ct=D(regeneratorRuntime.mark((function t(e){var n,i,r,o,a,s,c,l,u,d,h,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={},t.t0=regeneratorRuntime.keys(document.styleSheets);case 2:if((t.t1=t.t0()).done){t.next=24;break}i=t.t1.value,r=document.styleSheets[i],o=null,t.prev=6,o=r.rules||r.cssRules,t.next=16;break;case 10:if(t.prev=10,t.t2=t.catch(6),!r.href||r.href.includes("cloudfront.net")){t.next=16;break}return t.next=15,lt(r.href);case 15:o=t.sent;case 16:if(o){t.next=21;break}if(!r.href||r.href.includes("cloudfront.net")){t.next=21;break}return t.next=20,lt(r.href);case 20:o=t.sent;case 21:if(o)for(a in o)(s=o[a])&&s instanceof CSSFontFaceRule&&(l=null===(c=s.style)||void 0===c?void 0:c.getPropertyValue("src"),null!=(u=null==l?void 0:l.match(at))&&u.length&&(h=u[u.length-1].slice(4,-1).replace(/"/g,"").replace(/'/g,""),f=null===(d=s.style)||void 0===d?void 0:d.getPropertyValue("font-family").replace(/['"]+/g,""),n[f]=h));t.next=2;break;case 24:if(!e){t.next=26;break}return t.abrupt("return",n[e]||null);case 26:return t.abrupt("return",n);case 27:case"end":return t.stop()}}),t,null,[[6,10]])})))).apply(this,arguments)}var lt=function(){var t=D(regeneratorRuntime.mark((function t(e){var n,i,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.text()})).catch((function(t){console.error("Error while getting stylesheet from url ".concat(e,": "),t)}));case 2:if(!(n=t.sent)){t.next=12;break}return(i=document.createElement("style")).type="text/css",i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),document.head.appendChild(i),r=i.sheet||i.styleSheet,o=r&&(r.rules||r.cssRules)?r.rules||r.cssRules:null,document.head.removeChild(i),t.abrupt("return",o);case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ut=function(t,e){var n=t;return"string"==typeof n&&/^\d+$/.test(n)&&(n=Number(n)),"string"==typeof n?"v":"".concat(e[0].toLowerCase()).concat(Math.floor(n/100))},dt=function(){var t=D(regeneratorRuntime.mark((function t(e){var n,i,r,o,a,s,c,l,u,d,h,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.fontFamily,i=e.fontWeight,r=e.fontStyle,o={features:[],variations:[],characters:[]},a=window.RM.constructorRouter.fonts.findFontByCSSName(n),s=ut(i,r),a&&a.variations&&a.variations.includes(s)){t.next=6;break}return t.abrupt("return",o);case 6:if(c={weight:s},!a||"custom"!==a.provider){t.next=11;break}c.id=a._id,t.next=15;break;case 11:return t.next=13,st(n);case 13:(l=t.sent)&&(c.url=l);case 15:if(a&&"system"===a.provider&&(c.systemFontName=a.name),!(!c.url&&!c.id&&!c.systemFontName||c.id&&!c.weight)){t.next=19;break}return t.abrupt("return",void 0);case 19:return t.prev=19,t.next=22,(0,m.WN)(c);case 22:return u=t.sent,d=u.data,(h=d&&d.features)&&h.length&&(f=Object.values(g.e),p=f.filter((function(t){return h.some((function(e){return e.toLowerCase()===t.toLowerCase()}))})),o.features=p||[]),o.variations=d&&d.variations,o.characters=d&&d.characters,t.abrupt("return",o);case 31:throw t.prev=31,t.t0=t.catch(19),new Error(t.t0||"Can't detect font features");case 34:case"end":return t.stop()}}),t,null,[[19,31]])})));return function(e){return t.apply(this,arguments)}}(),ht=";",ft=function(t,e){return"".concat(t).concat(ht).concat(e)},pt=function(t,e){var n=kt.getSelectionOffset(t),i=n.startOffset,r=n.endOffset,o=t.getSelection(),a=kt.getSelectedBlocks(t),s=t.getCurrentContent().getBlockMap();return s.forEach((function(t){if(t){var n=t.getKey();if(a.includes(n)){var o=t.getCharacterList().map((function(t,o){if(!t||void 0===o)return t;var s=t.getStyle().filter((function(t){return!!t&&t.startsWith(e)})).toJS(),c=function(t,e){return d.CharacterMetadata.removeStyle(t,e)};if(1===a.length){if(o>=i&&o<r)return s.reduce(c,t)}else if(a[0]===n){if(o>=i)return s.reduce(c,t)}else{if(a[a.length-1]!==n)return s.reduce(c,t);if(o<r)return s.reduce(c,t)}return t})),c=t.set("characterList",o);s=s.set(n,c)}}})),kt.forceSelection(d.EditorState.push(t,d.ContentState.createFromBlockArray(s.toArray()),"change-inline-style"),o)},gt=function(t,e){return t.replace("".concat(e).concat(ht),"").split(ht)},mt=function(t){var e=[],n=[],i=[];return t.forEach((function(t){var r,o=e.findIndex((function(e){return e.offset===t.offset&&e.length===t.length})),a=t.style.split(ht),s=M(r=a)||B(r)||F(r)||j(),c=s[0],l=s.slice(1).join(ht),u=n.indexOf(c);-1===u&&(n.push(c),u=n.length-1);var d=i.indexOf(l);-1===d&&(i.push(l),d=i.length-1);var h="".concat(u).concat(ht).concat(d);o>-1?e[o].styles.includes(t.style)||e[o].styles.push(h):e.push({offset:t.offset,length:t.length,styles:[h]})})),{styles:yt(e),keys:n,values:i}},yt=function(t){var e=null,n=[];return t.forEach((function(t,i){if(null===e)e=i,n.push(t);else if(n[n.length-1]){var r=n[n.length-1],o=r.offset,a=r.length,c=r.styles;o+a===t.offset&&(0,s.isEqual)(c,t.styles)?n[n.length-1]=N(N({},n[n.length-1]),{},{length:a+t.length}):(e=i,n.push(t))}})),n},vt=function(t){var e=t.keys,n=t.values,i=t.styles,r=[];return i.forEach((function(t){t.styles.forEach((function(i){var o=E(i.split(ht),2),a=o[0],s=o[1];r.push({offset:t.offset,length:t.length,style:"".concat(e[Number(a)]).concat(ht).concat(n[Number(s)])})}))})),r},bt={},wt=Math.pow(2,24),St=function(t){return"text"===t.type},xt=function(t,e){var n=document.createElement("canvas").getContext("2d");return n?(n.font=function(t){return[t.fontStyle,t.fontWeight,t.fontSize?"".concat(t.fontSize,"px"):null,t.fontFamily?'"'.concat(t.fontFamily,'"'):null].filter((function(t){return t})).join(" ")}(e),{width:n.measureText(t).width,height:parseInt(n.font)}):null},kt={forceSelection:K,toggleInlineStyle:q,getCurrentBlock:function(t){return t.getCurrentContent().getBlockForKey(t.getSelection().getStartKey())},getCurrentBlockType:function(t){return t.getCurrentContent().getBlockForKey(t.getSelection().getStartKey()).getType()},toggleBlockType:function(t,e){return d.RichUtils.toggleBlockType(t,e)},importTextContent:X,exportTextContent:Y,creatNewWidgetContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.text,n=t.html,i=n?(0,C.Ue)(n):d.ContentState.createFromText(e||(0,h.J)());return Y(i)},fixSelection:J,getAllTextSelection:Q,clearSelection:function(t){var e=d.EditorState.moveSelectionToEnd(t).getSelection();return K(t,e)},hasSelectedText:function(t){var e=t.getSelection();return e.getAnchorKey()!==e.getFocusKey()||e.getAnchorOffset()!==e.getFocusOffset()},clearStylesFromBlock:function(t){var e,n=t.editorState,i=t.block,r=n.getCurrentContent().getBlockMap(),o=i,a="";o?a=o.getKey():(a=n.getSelection().getAnchorKey(),o=r.get(a));var s=o.getCharacterList().map((function(t){return t?t.set("style",t.get("style").clear()):t})),c=o.get("data"),u=l().Map(N(N({},c?c.toObject():{}),{},(W(e={},w.fB,void 0),W(e,S.Hb,void 0),W(e,x.gg,void 0),e))),h=o.set("characterList",s).set("data",u),f=r.set(a,h);return d.EditorState.push(n,d.ContentState.createFromBlockArray(f.toArray()),"change-inline-style")},getStyleFromSelection:tt,getBlockData:function(t){var e,n=t.editorState,i=t.block,r=t.key;if(i)e=i;else if(n){var o=n.getSelection().getAnchorKey();e=n.getCurrentContent().getBlockMap().get(o)}if(!e)return"";var a=e.getData().toObject();return r?a&&a[r]||void 0:a},setBlockData:function(t){var e=t.editorState,n=t.block,i=t.key,r=t.value,o=J(e);if(n){var a=et({editorState:e,selection:o,blockKey:n.getKey(),data:W({},i,r)});return d.EditorState.push(e,a,"change-block-data")}return nt(e).reduce((function(t,n){var a=et({editorState:t,selection:o,blockKey:n,data:W({},i,r)});return d.EditorState.push(e,a,"change-block-data")}),e)},getSelectedBlocks:nt,isBlockSelected:function(t,e){return nt(t).includes(e)},insertText:function(t){var e=t.editorState,n=t.text,i=t.selection,r=e.getCurrentInlineStyle(),o=i||e.getSelection(),a=e.getCurrentContent(),s=o.isCollapsed()?d.Modifier.insertText(a,o,n,r):d.Modifier.replaceText(a,o,n,r);return d.EditorState.push(e,s,1===n.length?"insert-characters":"insert-fragment")},removeText:function(t){var e=t.editorState,n=t.selection,i=e.getCurrentContent(),r=d.Modifier.removeRange(i,n,"forward");return d.EditorState.push(e,r,"remove-range")},getTextFromTextWidget:function(t){if(3===t.get("version")){var e=X(t.attributes),n=H(e);if(n){var i=document.createElement("span");return i.innerHTML=n,i.textContent||i.innerText}}return""},findSubstringIndexes:function(t,e){var n=t.getText();return Array.from(a()(n,RegExp(e,"g")),(function(t){return t.index})).filter((function(t){return"number"==typeof t}))},reverseSelection:function(t){return t.getIsBackward()?t.merge({isBackward:!1,anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset()}):t},getSelectionOffset:it,doesSelectionHaveStyle:function(t){if(t.getSelection().isCollapsed()){var e=tt(t);return Boolean(e&&Object.keys(e).length)}var n=t.getCurrentContent(),i=it(t),r=i.startKey,o=i.endKey,a=i.startOffset,s=i.endOffset;if(r===o){var c=n.getBlockForKey(r).getCharacterList().slice(a,s).toJS();return rt(c)}return nt(t).some((function(t){var e=n.getBlockForKey(t).getCharacterList(),i=r===t?a:0,c=o===t?s:e.size,l=e.slice(i,c).toJS();return rt(l)}))},selectCurrentBlock:function(t){var e=t.getSelection(),n=e.getStartKey();if(n===e.getEndKey()){var i=t.getCurrentContent(),r=e.merge({anchorKey:n,anchorOffset:0,focusOffset:i.getBlockForKey(n).getText().length,focusKey:n});return K(t,r)}return t},getWordCaretSelection:function(t,e){var n=t.getSelection();if(n.isCollapsed()){var i=t.getCurrentContent(),r=it(t),o=r.startKey,a=r.endKey,s=r.startOffset;r.endOffset;if(o===a){var c=i.getBlockForKey(o).getText(),l=null;if("next"===e)for(var u=s+1;u<=c.length;u++)null!==l||" "!==c[u]&&u!==c.length||(l=u);else if("prev"===e)for(var d=s-1;d>=0;d--)null===l&&(" "===c[d]&&Math.abs(s-d)>1||0===d)&&(l=0===d?0:d+1);if(null!==l){var h=n.merge({anchorKey:o,anchorOffset:l,focusOffset:a,focusKey:l});return K(t,h)}}}},cloneStylesOnReturn:function(t){var e=t.getSelection();if(e.isCollapsed()){var n=t.getCurrentContent(),i=e.getStartKey(),r=n.getBlockForKey(i);if(r){var o=r.getData(),a=d.Modifier.splitBlock(t.getCurrentContent(),t.getSelection()),s=d.EditorState.push(t,a,"split-block"),c=s.getSelection(),l=d.Modifier.mergeBlockData(s.getCurrentContent(),c,o);return{status:"handled",editorState:s=d.EditorState.push(t,l,"split-block")}}}},hasNewTextWidgets:function(t){if(!t)return!1;var e=N({},t);return!(!e.pages||!e.pages.length)&&e.pages.some((function(t){return t.wids&&t.wids.length&&ot(t.wids)}))},someTextWidgets:ot,getAllEntities:function(t,e){var n,i=t.getCurrentContent().getEntityMap(),r=null==i||null===(n=i.__getAll())||void 0===n?void 0:n.toJS();return r?e?(0,s.pick)(r,(function(t){return t.type===e})):r:{}},generateRandomKey:function(){for(var t;void 0===t||bt.hasOwnProperty(t)||!isNaN(+t);)t=Math.floor(Math.random()*wt).toString(32);return bt[t]=!0,t},getLigaturesType:function(t){var e=[g.e.RequiredLigatures,g.e.StandardLigatures,g.e.HistoricalLigatures,g.e.DiscretionaryLigatures];return t.filter((function(t){return e.includes(t)}))},getStylisticSets:function(t){var e=/^ss[\d]{2}$/i,n=Object.values(g.e).filter((function(t){return e.test(t)}));return t.filter((function(t){return n.includes(t)}))},getNumericVariations:function(t){var e=[g.e.LiningFigures,g.e.OldstyleFigures,g.e.ProportionalFigures,g.e.TabularFigures];return t.filter((function(t){return e.includes(t)}))},getFontWeightString:ut,getFontWeightFromString:function(t){var e=t&&R(t),n="v"===e[0];return{style:e[0]&&"i"===e[0]?"italic":"normal",weight:n?"initial":e[1]?100*parseInt(e[1]):400}},getFontFeatures:dt,getTextWidgetFontsList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={},i=!1,r=function(t){var e=t.fontFamily,n=t.fontStyle,i=t.fontWeight,r=[];if(e){var o=gt(e,p.f.FontFamily);if(r.push(o),o){r.push(n?gt(n,p.f.FontStyle):f.BX.fontStyle);var a=i?gt(String(i),p.f.FontWeight):f.BX.fontWeight;"number"!=typeof a&&"normal"===a[0]&&(a=f.BX.fontWeight),r.push("initial"===String(a)?"variable":a)}}return r.length?r.join("|"):null},o=(0,y.XZ)(),a=o||{project:[],global:[]},s=function(t,e){return e.filter((function(e){return e.offset<=t&&e.offset+e.length>=t}))},c=function(e){e.model;var n,i,o=e.viewport,c={},l=G(t,"blocks"),u=o&&(null===(n=t[o])||void 0===n?void 0:n.styles)||G(t,"styles")||[],d=o&&(null===(i=t[o])||void 0===i?void 0:i.blocksMeta)||G(t,"blocksMeta"),h=new Set([]),g=(0,y.we)()||{project:[],global:[]};return l.forEach((function(t){var e,n=d?d.find((function(e){return e.key===t.key})):t,i=n&&n.data;if(i){var o=i.textStyle;if(o&&(e=[].concat(R(a.project),R(a.global)).find((function(t){return!!t.name&&t.name.toLowerCase()===o.toLowerCase()})))){var c=e.cssProperties||{},l=c.fontFamily,m=c.fontWeight,y=c.fontStyle,v=r({fontFamily:l,fontStyle:y,fontWeight:m});v&&h.add(v)}var b=i.listStyle;if(b){var w=[].concat(R(g.project),R(g.global)).find((function(t){return!!t.name&&t.name.toLowerCase()===b.toLowerCase()}));if(w){var S=w.cssProperties||{},x=S.fontFamily,k=S.fontWeight,_=S.fontStyle,O=r({fontFamily:x,fontStyle:_,fontWeight:k});O&&h.add(O)}}}var C=u.find((function(e){return e.key===t.key}));if(C){var P,T=null===(P=C.inlineStyles.styles)||void 0===P?void 0:P.reduce((function(t,e){return t.push(e.offset),t.push(e.offset+e.length),t}),[0]);if(T)T.map((function(t){return s(t,C.inlineStyles.styles).reduce((function(t,e){return e.styles.forEach((function(e){var n=E(e.split(";"),2),i=n[0],r=n[1];t[C.inlineStyles.keys[i]]=C.inlineStyles.values[r]})),t}),{})})).forEach((function(t){var n=e&&e.cssProperties||{},i=t[p.f.FontFamily]||n.fontFamily||f.BX.fontFamily,o=t[p.f.FontStyle]||n.fontStyle||f.BX.fontStyle,a=t[p.f.FontWeight]||n.fontWeight||f.BX.fontWeight,s=r({fontFamily:i,fontStyle:o,fontWeight:a});s&&h.add(s)}))}})),h.forEach((function(t){c[t]=1})),c};if(t&&G(t,"blocks")&&(e.length?e:_.ZP.viewport_listall).map((function(e){var i=c({viewport:e,model:t});n=N(N({},n),i)})),i){var l=[f.BX.fontFamily,f.BX.fontStyle,f.BX.fontWeight].join("|");n[l]=1}return n},INLINE_STYLE_DELIMITER:ht,getStyleValueString:ft,applyInlineStyle:function(t){var e=t.key,n=t.value,i=t.editorState;if(i.getSelection().isCollapsed())return i;var r=pt(i,e);if(void 0===V(n))return r;var o=Array.isArray(n)?n.filter((function(t){return t})).length?n.filter((function(t){return t})).join(ht):null:n;return"string"==typeof o||"number"==typeof o||Array.isArray(o)?kt.toggleInlineStyle(r,ft(e,o)):r},removeInlineStyle:pt,getCurrentInlineStylesFromString:gt,getCurrentInlineStyles:function(t,e){var n=t.getCurrentInlineStyle().toJS();if(!e)return n;var i=n.find((function(t){return t.startsWith(e)}));return i?gt(i,e):[]},minifyStyles:mt,unminifyStyles:vt,getInlineStyleForSelection:function(t){var e=t.editorState,n=t.key,i=t.defaultValue,r=kt.fixSelection(e),o=e.getCurrentContent(),a=kt.getSelectedBlocks(e).map((function(t){return o.getBlockForKey(t)})),c=[];if(!r.isCollapsed()){var l=function(t){var e=(0,s.uniq)(null==t?void 0:t.getStyle().toJS()).filter((function(t){return!n||t.startsWith(n)}));e.length?c.push.apply(c,R(e)):i&&n&&c.push(kt.getStyleValueString(n,i))};if(1===a.length)a[0].getCharacterList().slice(r.getStartOffset(),r.getEndOffset()).forEach(l);else a.length>1&&a.forEach((function(t,e){var n=t.getCharacterList();0===e?n.slice(r.getStartOffset()).forEach(l):e===a.length-1&&n.slice(0,r.getEndOffset()).forEach(l),n.forEach(l)}))}return(0,s.uniq)(c)},getUsedTextStyles:function(t){var e=t.filter((function(t){return St(t)&&3===t.version})),n=(0,y.XZ)(),i=e.reduce((function(t,e){var n=(e.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[v.MX]}));return _.ZP.viewport_listall.map((function(t){var i=e[t];i&&n.push.apply(n,R((i.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[v.MX]}))))})),n.length?[].concat(R(t),R(n)):t}),[]).filter((function(t){return t})),r=(0,s.uniq)(i);return[].concat(R(n.global),R(n.project)).filter((function(t){return r.includes(t.name)}))},getUsedLinkStyles:function(t){var e=t.filter((function(t){return St(t)&&3===t.version})),n=(0,y.kh)(),i=e.reduce((function(t,e){var n=Object.values(e.entityMap||{}).filter((function(t){return t.type===O.kM&&!!t.data})).map((function(t){return t.data.linkStyle}));return _.ZP.viewport_listall.map((function(t){var i=e[t];i&&n.push.apply(n,R(Object.values(i.entityMap||{}).filter((function(t){return t.type===O.kM&&!!t.data})).map((function(t){return t.data.linkStyle}))))})),n.length?[].concat(R(t),R(n)).filter((function(t){return t})):t}),[]),r=(0,s.uniq)(i);return[].concat(R(n.global),R(n.project)).filter((function(t){return r.includes(t.name)}))},getUsedListStyles:function(t){var e=t.filter((function(t){return St(t)&&3===t.version})),n=(0,y.we)(),i=e.reduce((function(t,e){var n=(e.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[b.iC]}));return _.ZP.viewport_listall.map((function(t){var i=e[t];i&&n.push.apply(n,R((i.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[b.iC]}))))})),n.length?[].concat(R(t),R(n)):t}),[]).filter((function(t){return t})),r=(0,s.uniq)(i);return[].concat(R(n.global),R(n.project)).filter((function(t){return r.includes(t.name)}))},canUseCustomFonts:function(t){return window.RM.constructorRouter.isOwner?(window.RM.constructorRouter.me&&window.RM.constructorRouter.me.get("permissions")||{}).can_use_custom_fonts:t.get("permissions").can_use_custom_fonts},insertBreakLine:function(t){return d.RichUtils.insertSoftNewline(t)},moveText:function(t){var e=t.editorState,n=t.dropSelection,i=d.Modifier.moveText(e.getCurrentContent(),e.getSelection(),n);return d.EditorState.push(e,i,"insert-fragment")},isWholeBlockSelected:function(t){var e=t.getSelection(),n=t.getCurrentContent();if(!e.isCollapsed()){var i=nt(t);if(!i.length)return!1;if(1===i.length&&e.getStartKey()===e.getEndKey()){var r=n.getBlockForKey(e.getStartKey()).getText().length;if(e.getEndOffset()-e.getStartOffset()===r)return!0}else{if(1===i.length&&0===e.getStartOffset()&&0===e.getEndOffset()&&e.getStartKey()!==e.getEndKey())return!0;var o=n.getBlockForKey(e.getEndKey()).getText().length,a=e.getStartOffset(),s=e.getEndOffset();if(0===a&&s===o)return!0}}return!1},getBaseLineHeightStyle:function(t){var e=t.block,n=t.width;if(!e)return{};var i,r=e.getType(),o=(0,v.x6)({block:e});if(r||o){var a=(0,y.XZ)()||{project:[],global:[]};i=[].concat(R(a.project),R(a.global)).find((function(t){return!!t.name&&(t.name.toLowerCase()===r.toLowerCase()||t.name.toLowerCase()===o.toLowerCase())}))}for(var s=i&&i.cssProperties||{},c=0,l=0,u=[],d=e.getCharacterList(),h=e.getText(),f=h.length;c<f;){var g=d.get(c);if(g){var m,b=(null===(m=g.getStyle())||void 0===m?void 0:m.toJS())||[],w=h[c],S=b.find((function(t){return t.startsWith(p.f.FontFamily)})),x=b.find((function(t){return t.startsWith(p.f.FontStyle)})),k=b.find((function(t){return t.startsWith(p.f.FontWeight)})),_=b.find((function(t){return t.startsWith(p.f.FontSize)})),O={fontFamily:S&&gt(S,p.f.FontFamily)[0]||s.fontFamily,fontStyle:x&&gt(x,p.f.FontStyle)[0]||s.fontStyle,fontSize:_&&gt(_,p.f.FontSize)[0]||String(s.fontSize),fontWeight:k?parseInt(gt(k,p.f.FontWeight)[0]):s.fontWeight},C=xt(w,O);C&&(l+=C.width,u.push({fontFamily:O.fontFamily,fontSize:O.fontSize,fontWeight:O.fontWeight}))}if(c+=1,l>=n)break}var P={},T={},L={};u.map((function(t){t.fontFamily&&(P[t.fontFamily]=(P[t.fontFamily]||0)+1),t.fontSize&&(L[t.fontSize]=(L[t.fontSize]||0)+1),t.fontWeight&&(T[t.fontWeight]=(T[t.fontWeight]||0)+1)}));var Z=function(t){var e=Object.keys(t);if(e.length)return e.reduce((function(e,n){return t[e]>t[n]?e:n}))},I=Z(P)||s.fontFamily,A=Z(L)||(s.fontSize?String(s.fontSize):void 0);return{fontFamily:I,fontWeight:Z(T)||(s.fontWeight?parseInt(String(s.fontWeight)):void 0),fontSize:A?A.includes("px")?A:"".concat(A,"px"):void 0}},getTextSize:xt,setDefaultStyles:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!!e[v.MX],i=n?{}:f.BX,r=n?null:(0,P.tZ)(T.ZP.textWidget.initialColor),o=[{key:p.f.FontSize,value:e[p.f.FontSize]||i.fontSize},{key:p.f.FontFamily,value:e[p.f.FontFamily]||i.fontFamily},{key:p.f.FontWeight,value:e[p.f.FontWeight]||i.fontWeight},{key:p.f.FontStyle,value:e[p.f.FontStyle]||i.fontStyle},{key:p.f.Color,value:e[p.f.Color]||r},{key:w.fB,value:e[w.fB]||i.lineHeight},{key:S.Hb,value:e[S.Hb]||i.textAlign},{key:I.Yv,value:e[I.Yv]||!0},{key:v.MX,value:e[v.MX]}];return e[p.f.LetterSpacing]&&(o[p.f.LetterSpacing]=e[p.f.LetterSpacing]),e[p.f.FontFeature]&&(o[p.f.FontFeature]=e[p.f.FontFeature]),o.reduce((function(t,e){return e.value?e.key===w.fB?(0,w.z3)({editorState:t,lineHeight:e.value}):e.key===S.Hb?(0,S.Oh)({editorState:t,align:e.value}):e.key===I.Yv?(0,I.w7)({editorState:t,linkedStatus:e.value}):e.key===v.MX?(0,v.ne)({editorState:t,styleName:e.value}):q(t,ft(e.key,e.value)):t}),K(t,Q({content:t.getCurrentContent(),selection:t.getSelection()})))},preserveBlockInlineStyles:function(t,e){var n=e.getCurrentContent().getBlockMap(),i=t.getCurrentContent().getBlockMap(),r=String.fromCharCode(8205),o=i.filter((function(t){if(t){var e=n.get(t.getKey());if(!e||!e.getText().length)return;var i=t.getText().length;return!(0,v.x6)({block:t})&&!i}return!1})),a=i.filter((function(t){var e=null==t?void 0:t.getText();return e&&e.length>1&&e.includes(r)}));if(a.size){var s=a.reduce((function(t,e){if(e){var n=e.getKey(),i=e.getText(),o=i.indexOf(r),a=e.getCharacterList().delete(o),s=e.set("characterList",a).set("text",i.replace(r,""));return t.set(n,s)}return t}),i);return d.EditorState.set(t,{currentContent:d.ContentState.createFromBlockArray(s.toArray())})}if(o.size){var c=o.reduce((function(t,e){if(e){var i=e.getKey(),o=n.get(i),a=n.last(),s=o?o.getCharacterList().slice(0,1):a.getCharacterList().slice(-1),c=e.set("text",r).set("characterList",s);return t.set(i,c)}return t}),i);return d.EditorState.set(t,{currentContent:d.ContentState.createFromBlockArray(c.toArray())})}return t},silentEntityToggle:function(t,e,n){var i=t.getSelection(),r=d.Modifier.applyEntity(t.getCurrentContent(),e,n);return d.EditorState.set(t,{currentContent:r,selection:i})},mergeBlocksStyles:function(t){var e=t.originStyles,n=t.blockMap,i=t.forceOverride,r=void 0!==i&&i;return n.map((function(t){if(t){var n=t.getCharacterList().map((function(t){var n=t;if(n){var i=e;if(r)n=n.set("style",n.get("style").clear());else{var o=n.getStyle().toArray().map((function(t){return E(t.split(kt.INLINE_STYLE_DELIMITER),1)[0]}));i=e.filter((function(t){if(t){var e=E(t.split(kt.INLINE_STYLE_DELIMITER),1)[0];return!o.includes(e)}return!0}))}return i.toArray().reduce((function(t,e){return d.CharacterMetadata.applyStyle(t,e)}),n)}return n}));return t.set("characterList",n)}}))},getRealContentHeight:function(t){var e=t.editorState,n=t.width,i=t.model,o=document.createElement("div");o.style.position="absolute",o.style.left="-9999px",o.style.opacity="0",o.style.visibility="hidden",o.style.width="".concat(n,"px"),(0,Z.renderReact)({component:function(){return r().createElement(L.Z,{editorState:e})},model:i,domElement:o}),document.body.appendChild(o);var a=o.clientHeight;return document.body.removeChild(o),a},isUrl:function(t){return/^(.*):\/\/[^\s$.?#].[^\s]*$/i.test(t)||/^[\da-z.-]+\.[a-z-]{2,}.*/i.test(t)},getDefaultListTextColor:function(t){var e=t.getCharacterList();if(e){var n=e.first();if(n){var i=n.getStyle().find((function(t){return!!t&&t.startsWith(p.f.Color)}));if(i){var r=E(i.split(ht),2);r[0];return r[1]}}}return(0,P.tZ)(T.ZP.textWidget.initialColor)},calculateLetterSpacing:function(t){var e=t.letterSpacing,n=t.fontSize,i=e+e/n*(t.newFontSize-n);return parseFloat((Math.round(100*i)/100).toFixed(2))},createStateFromModel:function(t){if(!(t&&t.get("blocks")))return d.EditorState.createEmpty(A.t);var e=X(t.attributes);return e?d.EditorState.createWithContent(e,A.t):d.EditorState.createEmpty(A.t)},getBaseStyles:function(t){var e,n=t.editorState,i=t.lastStyle,r=n.getCurrentInlineStyle(),o=(0,w.vk)(n),a=(0,S.Wg)({editorState:n}),s=(0,v.x6)({editorState:n});return r.toArray().reduce((function(t,e){if(e){var n=E(e.split(kt.INLINE_STYLE_DELIMITER),2),i=n[0],r=n[1];return N(N({},t),{},W({},i,r))}return t}),N(N({},r.size&&i||{}),{},(W(e={},S.Hb,a),W(e,w.fB,o),W(e,v.MX,s),e)))},getDocumentFontsList:function(){var t=Array.from(document.querySelectorAll("link.fonts, style.fonts"));return t.map((function(t){var e,n=t.tagName.toLowerCase();return"style"===n?{tag:n,style:t.innerHTML}:{tag:n,href:(e=t.getAttribute("href"),Modernizr.safari?"".concat(e,"&edit_mode=true"):e),type:t.getAttribute("type")}}))}};e.Z=kt},696:function(t,e,n){"use strict";n.d(e,{E:function(){return f}});var i=n(646),r=n(352),o=n.n(r),a=n(698),s=n(620),c=n(666),l=n(690),u=n(624),d=n(697),h=n(344),f=4,p=(0,i.default)(a.Flex).withConfig({displayName:"TextBase___StyledFlex",componentId:"sc-1o28pgm-0"})(["--editor-border-color:",";direction:",";overflow:",";",";"," & > div{","}*::selection{"," ","}.public-DraftEditor-content{white-space:normal !important;overflow-wrap:break-word;}.text-viewer{overflow-wrap:break-word;white-space:normal;}"," & div[data-contents='true'],.text-viewer{font-feature-settings:'liga' 0,'rlig' 0,'dlig' 0,'hlig' 0,'smcp' 0;font-family:",";font-weight:",";font-style:",";font-size:","px;line-height:","px;-webkit-nbsp-mode:normal;-webkit-line-break:after-white-space;white-space:pre-wrap;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;}"],(function(t){return t._css}),(function(t){return t._css2}),(function(t){return t._css3}),(function(t){return t._css4}),(function(t){return t._css5}),(function(t){return t._css6}),(function(t){return t._css7}),(function(t){return t._css8}),(function(t){return t._css9}),(function(t){return t._css10}),(function(t){return t._css11}),(function(t){return t._css12}),(function(t){return t._css13}),(function(t){return t._css14})),g=function(t,e){var n=t.textDirection,i=t.autosize,r=t.columns,a=t.verticalAlign,g=t.bgColor,m=t.shouldShowSelectionBorder,y=t.scale,v=t.viewport,b=t.viewerOptions,w=t.children,S=t.useBaseline,x=t.isEditMode,k=t.selectionColor,_=t.disableSelectionHighlight,O=g?(0,u.gn)(g):void 0,C=O?"rgba(".concat(O.r,", ").concat(O.g,", ").concat(O.b,", ").concat(O.a,")"):void 0,P=null!=k&&k.backgroundColor?(0,u.gn)(k.backgroundColor):void 0,T=_?"transparent":P?"rgba(".concat(P.r,", ").concat(P.g,", ").concat(P.b,", ").concat(P.a,")"):void 0,L=null!=k&&k.textColor?(0,u.gn)(k.textColor):void 0,Z=_?"inherit":L?"rgba(".concat(L.r,", ").concat(L.g,", ").concat(L.b,", ").concat(L.a,")"):void 0;return o().createElement(p,{ref:e,height:!i||r&&r.count>1?"100%":"auto",flexDirection:"column",justifyContent:a&&a!==c.Rr.top?"flex-end":"flex-start",bg:C,_css:m?(0,l.themeGet)("colors.blue"):"transparent",_css2:n,_css3:r&&r.count>1||!i?"hidden":"visible",_css4:x?"padding: 0 ".concat(f,"px;"):"",_css5:y&&d.Z.isOnForRatio(v||h.sJ.Default,y,b||{})&&d.Z.isCSSZoom()?"\n              width: ".concat("".concat(1/y*100,"%"),";\n              height: ","".concat(1/y*100,"%"),";\n              zoom: ",1/y,";\n              transform: ","scale(".concat(y,")"),";\n              transform-origin: left top;\n            "):"",_css6:r&&r.count>1&&"\n            min-height: 100%;\n            column-fill: auto;\n            column-count: ".concat(r.count,";\n            column-gap: ").concat(r.gap,"px;\n          "),_css7:Z?"color: ".concat(Z,";"):"",_css8:T?"background-color: ".concat(T,";"):"",_css9:S?"":"\n          .text-viewer span,\n          .text-viewer a,\n          & div[data-contents='true'] span,\n          & div[data-contents='true'] a {\n            line-height: inherit;\n            vertical-align: top;\n          }\n        ",_css10:s.BX.fontFamily,_css11:s.BX.fontWeight,_css12:s.BX.fontStyle,_css13:s.BX.fontSize,_css14:s.BX.lineHeight},w)};e.Z=o().forwardRef(g)},694:function(t,e,n){"use strict";n.d(e,{Z:function(){return W}});var i=n(646),r=n(352),o=n.n(r),a=n(440),s=n.n(a),c=n(445),l=n(658),u=n.n(l),d=n(660),h=n(666),f=n(351),p=n(623),g=n(695),m=n(441),y=n(696),v=n(657),b=n(656),w=n(659),S=n(645);function x(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var _=function t(e,n){if(n&&"function"==typeof n){for(var i=e.childNodes,r=0;r<i.length;r++)t(i[r],n);n(e)}},O=function(t){var e,n=function(t){var e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=t,e};if("undefined"!=typeof DOMParser){var i=new DOMParser;try{null!==(e=i.parseFromString(t,"text/html"))&&null!==e.body||(e=n(t))}catch(i){e=n(t)}}else e=n(t);return e},C=function(t,e){var n=Array.from(t.childNodes).reduce((function(t,n){return n.nodeName.toLowerCase()===e&&t[t.length-1]&&t[t.length-1].some((function(t){return t.nodeName.toLowerCase()===e}))?(t[t.length-1].push(n),t):[].concat(x(t),[[n]])}),[]).reduce((function(t,n){if(n.some((function(t){return t.nodeName.toLowerCase()===e}))){var i=document.createElement(e),r="ul"===e?S.dY.Unordered:S.dY.Ordered;return i.setAttribute("class",r),"ol"===e&&(i.style.counterReset=S.Hf),n.forEach((function(t){if(t.firstChild){var e,n=t.firstChild.cloneNode(!0),o=null===(e=t.getAttribute("class"))||void 0===e?void 0:e.replace(r,""),a=t.getAttribute("style");o&&n.setAttribute("class",o),a&&n.setAttribute("style",a),i.appendChild(n)}})),[].concat(x(t),[i])}return[].concat(x(t),x(n))}),[]).reduce((function(t,e){return"".concat(t).concat(e.outerHTML)}),"");t.innerHTML=n},P=function(t){_(t,(function(t){if("span"===t.nodeName.toLowerCase()&&1===t.childNodes.length&&t.firstChild&&"span"===t.firstChild.nodeName.toLowerCase()){var e=t,n=e.firstChild,i=[e.getAttribute("style"),n.getAttribute("style")];e.setAttribute("style",i.join(";")),e.innerHTML=t.firstChild.innerHTML}}))},T=function(t){_(t,(function(t){if("a"===t.nodeName.toLowerCase()&&t.childNodes.length>1){var e=Array.from(t.childNodes).reduce((function(t,e){if("span"===e.nodeName.toLowerCase()&&e.style.fontSize){var n=parseInt(e.style.fontSize);return n>t?n:t}return t}),0);e>0&&(t.style.fontSize="".concat(e,"px"))}}))},L=function(t){t.querySelectorAll("li").forEach((function(t){if(t.childNodes.length){var e=document.createElement("span");e.innerHTML=t.innerHTML,t.innerHTML=e.outerHTML,e.remove()}}))},Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{mergeSpans:!0},n=O(t);return e.mergeSpans&&P(n.body),C(n.body,"ol"),C(n.body,"ul"),L(n.body),T(n.body),n.body.innerHTML},I=n(639),A=n(308),E=n(344),j=n(624);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||$(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||$(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){if(t){if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var D=(0,i.default)(S.iZ).withConfig({displayName:"TextViewer___StyledListViewerWrapper",componentId:"sc-1w2bpbo-0"})(["&:before{","}"],(function(t){return t._css})),U=function(t){var e,n,i=t.model,a=t.scale,c=t.currentPage,l=t.viewport,d=t.viewerOptions,g=t.editorState,x=(0,r.useMemo)((function(){return g.getCurrentContent()}),[g]),k=null===(e=i.flags)||void 0===e?void 0:e.calculatedLineHeight,_=B((0,I.sJ)(),1)[0],O=(0,r.useContext)(w.T).model,C=(0,r.useMemo)((function(){return(0,m.cn)({styleToHTML:function(t){var e=s().OrderedSet([t]),n=(0,p.b)(e);if(Object.keys(n).length)return o().createElement("span",{style:n})},blockToHTML:function(t){var e=x.getBlockForKey(t.key),n=t.data,r=n.textStyle,a=n.align,s=n.lineHeight,c=n.textIndent,l=n.paddings,u=void 0===l?{}:l,d=n.listStyle,h=(0,S.nq)(t.type)?d:void 0,p=[t.type,r,a,h].filter((function(t){return t})).join(" "),g=k?f.Z.getBaseLineHeightStyle({block:e,width:i.w}):{},m=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({textIndent:c,lineHeight:s?"".concat(s,"px"):void 0,paddingLeft:u.left,paddingRight:u.right,paddingTop:u.top,paddingBottom:u.bottom},g);if((0,S.nq)(t.type)){var y="";if(!(0,S.XZ)({block:e})){var v=(0,j.gn)(f.Z.getDefaultListTextColor(e)),b=v.r,w=v.g,O=v.b,C=v.a;y="rgba(".concat(b,", ").concat(w,", ").concat(O,", ").concat(C,")")}return o().createElement(D,{type:t.type,className:p,style:m,_css:y?"color: ".concat(y,";"):""})}var P=function(t){var e=[].concat(F(_.global),F(_.project)).find((function(e){return e.name===t}));return e?e.tag:A.ZP.AVAILABLE_TEXT_TAGS[0]}(r),T={className:p,style:m};return t.text||t.entityRanges&&t.entityRanges.length?o().createElement(P,T):o().createElement(P,T,o().createElement("br",null))},entityToHTML:function(t,e){var n=e;return t.type===v.kM?o().createElement(v.rU,{is_global:i.is_global,is_above:i.is_above,page:null==O?void 0:O.page,mag:null==O?void 0:O.mag,currentPageNum:null==c?void 0:c.num,data:t.data},n):t.type===b.b3?o().createElement("br",null):n}})(x)}),[x,_,c]);return o().createElement(y.Z,{bgColor:i.bgColor,textDirection:i.textDirection||h.m5.LTR,autosize:i.autosize,columns:i.columns,verticalAlign:i.verticalAlign,scale:a,viewport:l||E.sJ.Default,viewerOptions:d,useBaseline:null===(n=i.flags)||void 0===n?void 0:n.baseline,selectionColor:i.selectionColor},o().createElement("div",{className:"text-viewer",dangerouslySetInnerHTML:{__html:u().sanitize(Z(C,{mergeSpans:!0}),{ALLOW_UNKNOWN_PROTOCOLS:!0,ADD_ATTR:["target"]})}}))},N=o().memo(U,(function(t,e){var n,i,r,o,a,s;return e.scale===t.scale&&(!e.isConstructorPreview&&(null===(n=e.model)||void 0===n||!n.is_above||!(null===(i=t.currentPage)||void 0===i||!i.num||null!==(r=e.pagesLinks)&&void 0!==r&&r.length&&null!==(o=e.currentPage)&&void 0!==o&&o.num&&null!==(a=t.currentPage)&&void 0!==a&&a.num&&(e.pagesLinks.includes(e.currentPage.num)||e.pagesLinks.includes(null===(s=t.currentPage)||void 0===s?void 0:s.num)))))})),W=function(t){var e=t.editorState,n=t.isConstructorPreview,i=(0,r.useContext)(w.T).model,a=(0,r.useContext)(d.BackboneContext).model,s=e||(0,r.useMemo)((function(){return c.EditorState.createWithContent(f.Z.importTextContent(a),g.t)}),[]),l=window.RM.constructorRouter&&!window.RM.constructorRouter.preview,u=(0,r.useMemo)((function(){if(l)return[];var t=f.Z.getAllEntities(s,v.kM);return Object.keys(t).length?Object.keys(t).filter((function(e){var n;return(null===(n=t[e].data)||void 0===n?void 0:n.type)===v.dr.Page})).map((function(e){var n;return null===(n=t[e].data)||void 0===n?void 0:n.pageNum})):[]}),[s]);return o().createElement(N,{model:a,editorState:s,scale:null==i?void 0:i.scale,currentPage:null==i?void 0:i.currentPage,viewport:null==i?void 0:i.viewport,viewerOptions:null==i?void 0:i.viewerOptions,isConstructorPreview:n,pagesLinks:u})}},659:function(t,e,n){"use strict";n.d(e,{x:function(){return o},T:function(){return a}});var i=n(352),r=n.n(i),o=r().createContext({}),a=r().createContext({})},624:function(t,e,n){"use strict";n.d(e,{vx:function(){return s},gn:function(){return c},tZ:function(){return l},vK:function(){return u}});var i=n(625),r=n.n(i);n(634);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var s=function(t){var e=Number(t).toString(16);return e.length<2?"0".concat(e):e},c=function(t){var e=t;if(!e)return{r:0,g:0,b:0,a:1};"#"===e[0]&&(e=e.slice(1));var n=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),o=parseInt(e.substring(6,8),16)/100;return{r:n,g:i,b:r,a:void 0===o||o>1?1:o<0?0:o}},l=function(t){var e=s(parseInt((100*t.a).toFixed(0))),n=r()({h:t.h,s:t.s,v:t.v}).hex().replace("#","");return"".concat(n).concat(e)},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.replace("#",""),i=r()("#".concat(n)).hsv().array(),a=o(i,3),s=a[0],c=a[1],l=a[2];return{h:s,s:c,v:l,a:e}}},660:function(t,e,n){"use strict";n.r(e),n.d(e,{BackboneContext:function(){return f},BackboneContextProvider:function(){return p},BackboneCollectionContextProvider:function(){return g},CreateContextProvider:function(){return m},renderReact:function(){return y}});var i=n(661),r=n(352),o=n.n(r),a=n(600),s=n.n(a);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var f=o().createContext({}),p=function(t){var e=t.domElement,n=t.model,i=t.children,a=t.context,c={modelSet:function(t,e){return n.set(t,e)},modelUnset:function(t,e){return n.unset(t,e)},modelSave:function(t,e){return n.save(t,e)},destroy:function(){e&&(s().unmountComponentAtNode(e),e&&e.parentNode&&e.parentNode.removeChild(e))}},u=d((0,r.useState)({model:n.attributes}),2),h=u[0],f=u[1],p=function(t){f(l(l({},h),{},{model:t.attributes}))};return(0,r.useEffect)((function(){return n.on("change",p),function(){n.off("change",p)}}),[n]),o().createElement(a.Provider,{value:l(l({},h),c)},i)},g=function(t){var e=t.domElement,n=t.collection,i=t.children,a=t.context,c={elementSet:function(t,e,i){var r=n.get(t);if(!r)throw new Error("Element not found");return r.set(e,i)},elementUnset:function(t,e,i){var r=n.get(t);if(!r)throw new Error("Element not found");return r.unset(e,i)},elementSave:function(t,e,i){var r=n.get(t);if(!r)throw new Error("Element not found");return r.save(e,i)},destroy:function(){e&&(s().unmountComponentAtNode(e),e&&e.parentNode&&e.parentNode.removeChild(e))}},u=d((0,r.useState)({collection:n.map((function(t){return t.attributes}))}),2),h=u[0],f=u[1],p=function(t){var e=t.get("_id");f((function(n){var i=n.collection.findIndex((function(t){return t._id===e}));if(-1===i)return{collection:n.collection};var r=n.collection.splice(0);return r[i]=t.attributes,{collection:r}}))},g=function(t){f((function(e){var n=e.collection.splice(0);return n.push(t.attributes),{collection:n}}))},m=function(t){var e=t.get("_id");f((function(t){var n=t.collection.findIndex((function(t){return t._id===e}));if(-1===n)return{collection:t.collection};var i=t.collection.splice(0);return i.splice(n,1),{collection:i}}))};return(0,r.useEffect)((function(){return n.on("change",p),n.on("add",g),n.on("remove",m),function(){n.off("change",p),n.off("add",g),n.on("off",m)}}),[n]),o().createElement(a.Provider,{value:l(l({},h),c)},i)},m=function(t){var e=t.model,n=t.collection,i=t.domElement,r=t.context,a=t.children;return e?o().createElement(p,{model:e,domElement:i,context:r},a):n?o().createElement(g,{collection:n,domElement:i,context:r},a):o().createElement(o().Fragment,null,a)},y=function(t){var e=t.component,n=t.domElement,r=t.model;r?s().render(o().createElement(i.Z,null,o().createElement(m,{model:r,domElement:n,context:f},o().createElement(e,null))),n):s().render(o().createElement(e,null),n)}},640:function(t,e,n){"use strict";n.d(e,{M:function(){return a}});var i=n(352);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t){var e=t,n=[];function o(t){var i=e;e=t,n.forEach((function(e){var n=e.update,r=e.options;(!r||!r.shouldUpdate||!r.shouldUpdate(i,t))&&n()}))}return[function(t){var a,s=(a=r((0,i.useState)({}),2)[1],(0,i.useCallback)((function(){a({})}),[]));return(0,i.useEffect)((function(){var e={options:t,update:s};return n.push(e),function(){!function(t,e){var n=t.indexOf(e);if(-1===n)return;t.splice(n,1)}(n,e)}})),[e,o]},o,function(){return e}]}},697:function(t,e,n){"use strict";var i=n(324),r=n(344),o={getNormalizedBox:function(t,e,n,i){return o.isOn(e,n,i)&&o.isCSSZoom()?o.getBox(t,o.getRatio(n)):t&&t.getBoundingClientRect()},getBox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t?t.getBoundingClientRect():{};return{top:n.top*e,left:n.left*e,width:n.width*e,height:n.height*e,bottom:n.bottom*e,right:n.right*e}},getRatio:function(t){return window.innerWidth/t},getLimitedRatio:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=window.innerWidth/t,o=e/t,a=i?n/t:1;return Math.max(Math.min(r,o),a)},isScaleLayout:function(t){return t&&t.scalableviewer},isOn:function(t,e,n){return o.isDesktopDefault(t)&&o.isScaleLayout(n)},isOnForRatio:function(t,e,n){return o.isDesktopDefault(t)&&o.isScaleLayout(n)},isCSSZoom:function(){return!Modernizr.firefox},isCSSTransform:function(){return Modernizr.firefox},isDesktopDefault:function(t){return i.Z.isDesktop&&t===r.sJ.Default},getMinDesktopRatio:function(t){var e=r.ZP.dictionary[r.sJ.Default].min_scale_width;return t&&e?e/t:1},equals1:function(t){return Math.abs(t-1)<1e-6},normalize:function(t,e,n,i,a){if(o.equals1(t))return 1;if(o.isDesktopDefault(n)){var s=!e||"zoom"===e&&o.isCSSZoom()||"transform"===e&&o.isCSSTransform();if(o.isScaleLayout(a)&&s){var c=r.ZP.dictionary[r.sJ.Default].min_scale_width,l=c&&i?c/i:1;return Math.max(i?l:1,t)}return 1}return t}};e.Z=o},1055:function(t,e,n){"use strict";n.r(e),n.d(e,{Widgets:function(){return u},preloadWidgets:function(){return f}});var i=n(323),r=n(1004),o=n(1009),a=n(1017),s=n(1029),c=n(1032);function l(t,e,n,i,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,r)}var u={background:r.default,button:o.default,picture:a.default,shape:s.default,text:c.default},d={addtocart:"add-to-cart",ecommercecart:"e-commerce-cart",rmheader:"rm-header",rmfooter:"rm-footer"},h=["addtocart","audio","background","button","ecommercecart","facebook","form","picture","gmaps","hotspot","iframe","shape","slideshow","text","twitter","video","rmheader","rmfooter","shots"],f=function(){var t,e=(t=regeneratorRuntime.mark((function t(e){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.default.intersection(h,i.default.difference(i.default.uniq(e),Object.keys(u))),t.next=3,Promise.all(r.map((function(t){return n(1056)("./"+(d[t]?d[t]:t))})));case 3:o=t.sent,i.default.each(r,(function(t,e){u[t]=o[e].default}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){l(o,i,r,a,s,"next",t)}function s(t){l(o,i,r,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()},1024:function(t,e,n){"use strict";n.r(e);var i=n(352),r=n.n(i),o=n(337),a=n.n(o),s=n(997),c=n(660),l=n(659),u=n(697),d=n(351),h=n(695),f=n(445),p=n(694),g=s.Z.extend({antialiasRotation:!0,initialize:function(t){this.model=new(a().Model)(t),s.Z.prototype.initialize.apply(this,arguments)},render:function(){var t=this;this.makeBox("widget-text-v3"),this.propsModel=new(a().Model)({page:this.page,currentPage:this.mag.currentPage||this.page,scale:this.page.scale,viewport:this.page.pageViewport,viewerOptions:this.mag.opts,mag:this.mag});var e=f.EditorState.createWithContent(d.Z.importTextContent(this.model),h.t);this.model["editorState"+this.page.pageViewport]=e;return(0,c.renderReact)({component:function(){return r().createElement(c.CreateContextProvider,{context:l.T,model:t.propsModel},r().createElement(p.Z,{editorState:e}))},domElement:this.$el[0],model:this.model}),this.rendered=!0,window.RM.screenshot&&!this.insideHotspot?this.waitForUsedFontsLoad():this.widgetIsLoaded(),this.seamlessFontsShow((function(){t.$el.removeClass("fonts-pending")}),(function(){t.$el.addClass("fonts-pending")})),u.Z.isDesktopDefault(this.mag.viewport)&&u.Z.isScaleLayout(this.mag.viewOpts)&&u.Z.isCSSZoom()&&this.listenTo(this.page,"resize",this.onScaleChange),this},hasFontsToLoad:function(){return!0},updatePage:function(t){var e=this.page;(!e||t&&e.num!==t.num)&&(this.page=t,this.propsModel.set({currentPage:t}))},onScaleChange:function(){this.propsModel.set({scale:this.page.scale})},waitForUsedFontsLoad:function(){this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.widgetIsLoaded):this.widgetIsLoaded()},destroy:function(){this.stopListening(this.page,"resize",this.onScaleChange);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s.Z.prototype.destroy.apply(this,e)}});e.default=g},1032:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var i=n(1024),r=n(1023);function o(t,e,n){switch(t.version){case 3:return new i.default(t,e,n);default:return new r.default(t,e,n)}}},350:function(t,e,n){"use strict";n.d(e,{f:function(){return r}});var i=n(323),r=function(t){return i.default.template(t.raw.join(""))}},1005:function(t,e,n){"use strict";var i,r,o,a,s,c,l=n(350);e.Z=(r={},o="template-viewer-widget-background",a=(0,l.f)(i||(s=['\n\t<div class="rmwidget widget-background" style="background-color: #<%=data.color%>">\n\n        <% if (data.selectedType == \'picture\') { %>\n            <div class="picture-background" style="opacity: <%=data.opacity || 1%>;"></div>\n        <% } %>\n\n        <% if (data.selectedType == \'video\') { %>\n            <div class="video-background" style="opacity: <%=data.videoopacity || 1%>;">\n                <div class="video-container"></div>\n                <div class="overlay"></div>\n            </div>\n\t\t<% } %>\n\n\t\t<% if (data.selectedType == \'slideshow\') { %>\n\t\t\t<div class="slideshow-background">\n\t\t\t\t<div class="slideshow-container"></div>\n\t\t\t\t<div class="slideshow-preload"></div>\n\t\t\t</div>\n\t\t<% } %>\n\t</div>\n'],c||(c=s.slice(0)),i=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},723:function(t,e,n){"use strict";var i=n(313),r=n(337),o=n.n(r),a=n(322),s=n(697),c=n(341),l=n(324);function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var p={LOOP_TYPES:{swing:"swing",repeat:"repeat"},EVENT_TYPES:["load","scroll","hover","click"],POINTER_EVENTS:["click","hover"],EXTERNAL_TRIGGER_BLOCK_EXCLUDE:["facebook","twitter","form","gmaps","slideshow","audio","video"],ANIMATION_BLOCK_EXCLUDE:["facebook","twitter"],POINTER_EVENTS_BLOCK_EXCLUDE:["form","gmaps","slideshow","audio","video"],DEFAULT_LOOP_TYPE:"swing",ACTIVE_TRIGGER_CLASS:"active-trigger",ACTIVE_TRIGGER_REMOVE_CLASS:"active-trigger-remove",ACTIVE_TRIGGER_HIGHLIGHT_CLASS:"active-trigger-highlight",ANIMATIONS_PLAYED_STORAGE_KEY:"animationsPlayed",DEG_TO_RAD:Math.PI/180,ANIMATION_PROPERTIES:function(){var t=!1,e="animation",n="AnimationIteration",i="AnimationEnd",r="animation-timing-function",o="@keyframes",a="transform",s="transform",c="Webkit Moz O ms Khtml".split(" "),l="webkit moz o MS Ðºhtml".split(" "),u=document.createElement("div");if(null!=u.style.animationName)t=!0,n=n.toLowerCase(),i=i.toLowerCase();else for(var d=0;d<c.length;d++)if(null!=u.style[c[d]+"AnimationName"]){e=c[d]+"Animation",n=l[d]+n,i=l[d]+i,r="-"+c[d].toLowerCase()+"-"+r,o="@-"+c[d].toLowerCase()+"-keyframes",t=!0;break}if(null==u.style.transform)for(d=0;d<c.length;d++)if(null!=u.style[c[d]+"Transform"]){a=c[d]+"Transform",s="-"+c[d].toLowerCase()+"-transform";break}return u=null,{animationSupported:t,animationJS:e,animationIterationJS:n,animationEndJS:i,animationTimingFunctionCSS:r,keyframeCSS:o,transformJS:a,transformCSS:s}}(),createAnimationTimeline:function(t){return new v(t)},getNormalizedAnimation:function(t,e,n,i,r,o,c,l){var u={dx:0,dy:0,from_opacity:100,opacity:100,from_rotate:0,rotate:0,from_scale:100,scale:100},d={use_move:["dx","dy"],use_opacity:["from_opacity","opacity"],use_rotate:["from_rotate","rotate"],use_scale:["from_scale","scale"]},h=a.Z.extend({},t),f=h.loop;h.loop=!1,h.steps=[];for(var p={dx:0,dy:0},g=0;g<t.steps.length;g++){var m=a.Z.extend({},t.steps[g]);a.Z.each(d,a.Z.bind((function(t,e){m[e]?(u[t[0]]=m[t[0]],u[t[1]]=m[t[1]]):(m[t[0]]=u[t[0]],m[t[1]]=u[t[1]])}),this)),n&&(m.dx=0,m.rotate=0,m.from_rotate=0),i&&(m.dy=0,m.rotate=0,m.from_rotate=0),"scroll"!=h.type||e||0!=g||(m.delay_px=0),1!=r&&e&&(m.dx*=r,m.dy*=r),"scroll"==h.type?(m.calcedDuration=y(m,p),m.calcedDelay=m.delay_px?m.delay_px*s.Z.normalize(r,void 0,o,c,l):0):(m.calcedDuration=m.duration||.001,m.calcedDelay=m.delay||0),m.acceleration=m.acceleration||"none","scroll"===h.type?m.loop=!1:f&&0===g&&(m.loop=f),h.steps.push(m),p=m}return h.trigger=t.trigger&&!a.Z.isArray(t.trigger)?[t.trigger]:a.Z.clone(t.trigger)||[],h;function y(t,e){var n,i=t.dx-e.dx,r=t.dy-e.dy;return n=0!=i||0!=r?Math.pow(i*i+r*r,.5)/t.speed:300/t.speed,Math.ceil(n)}},normalizeLoopValue:function(t){return!!t&&(this.LOOP_TYPES[t]||this.DEFAULT_LOOP_TYPE)},isExternalTriggerAllowed:function(t){return this.isPointerEvent(t)},normalizeAnimationTriggers:function(t){return t&&!a.Z.isArray(t)?[t]:a.Z.clone(t)||[]},normalizeAnimations:function(t){return t&&!a.Z.isArray(t)?[t]:t||[]},isEmpty:function(t){return!(t&&t.type&&"none"!==t.type&&t.steps&&t.steps.length)},isMoveOnly:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.steps&&t.steps.length&&t.steps.every((function(t){return t.use_move&&!t.use_scale&&!t.use_rotate}))},isNonMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.steps&&t.steps.length&&t.steps.every((function(t){return!t.use_move}))},getUuidHash:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return t.UUID})).filter((function(t){return t})).sort().join(",")},isPointerEvent:function(t){return-1!==this.POINTER_EVENTS.indexOf(t)},canHaveAnimation:function(t){var e=t.attributes||t.model&&t.model.attributes||{};return e.type&&-1===this.ANIMATION_BLOCK_EXCLUDE.indexOf(e.type)},arePointerEventsAllowed:function(t){var e=t.attributes||t.model&&t.model.attributes||{};return e.type&&-1===this.POINTER_EVENTS_BLOCK_EXCLUDE.indexOf(e.type)},getBlocksContainingTriggers:function(t){var e=a.Z.map(t,(function(t){return t.id||t._id}));return a.Z.reduce(t,function(t,n){var i=this.normalizeAnimations(n.model?n.model.get("animation"):n.animation),r=[].concat(h(i.reduce((function(t,e){return e.trigger?[].concat(h(t),h(p.normalizeAnimationTriggers(e&&e.trigger))):t}),[])),h(n.triggers||n.model&&n.model.get("triggers")||[]));return r.length&&a.Z.intersection(e,r).length&&t.push(n.id?n.id:n._id),t}.bind(this),[])},restoreTriggers:function(t,e,n){var i=[];return a.Z.each(t,function(t){var r=this,o=e[t],s=a.Z.find(n,{id:o});if(s&&s.getAllTriggers().length){i.push(s),s.model.getAnimations().forEach((function(t){var n=r.normalizeAnimationTriggers(t&&t.trigger);t.trigger=n.reduce((function(t,n){return e[n]?[].concat(h(t),[e[n]]):t}),[])}));var c=s.model.get("triggers");c&&s.model.set("triggers",c.reduce((function(t,n){return e[n]?[].concat(h(t),[e[n]]):t}),[]))}}.bind(this)),i},isScaleUp:function(t){return Boolean(a.Z.find(t&&t.steps,(function(t,e){return t.use_scale&&(0===e&&t.from_scale>100||t.scale>100)})))},maxScaleAnimation:function(t){return t&&t.steps&&t.steps.length?t.steps.reduce((function(t,e){return Math.max(t,e.from_scale||0,e.scale||0)}),0):0},canBeAccelerated:function(t){return!l.Z.isDesktop||!this.isScaleUp(t)},getPermanentAnimationId:function(t,e){return t.fixed_position||t.is_full_width||t.is_full_height||t.sticked?t._id:e},getAnimationsPlayed:function(){if(a.Z.isUndefined(this._animationsPlayed))try{var t=Modernizr.localstorage?window.localStorage.getItem(this.ANIMATIONS_PLAYED_STORAGE_KEY):c.default.getCookie(this.ANIMATIONS_PLAYED_STORAGE_KEY),e=t&&JSON.parse(t);this._animationsPlayed=a.Z.isArray(e)?e:[]}catch(t){this._animationsPlayed=[]}return this._animationsPlayed},persistHasPlayed:function(t){if(!this.hasPlayed(t))try{var e=JSON.stringify([].concat(this.getAnimationsPlayed(),t));Modernizr.localstorage?window.localStorage.setItem(this.ANIMATIONS_PLAYED_STORAGE_KEY,e):c.default.createCookie(this.ANIMATIONS_PLAYED_STORAGE_KEY,e),delete this._animationsPlayed}catch(t){}},hasPlayed:function(t){return t&&-1!==this.getAnimationsPlayed().indexOf(t)},hasExpired:function(t){var e=this,n=this.normalizeAnimations(t.animation);return Boolean(n.length)&&n.every((function(n){var i=e.getPermanentAnimationId(t,n.UUID);return n.playOnce&&e.hasPlayed(i)}))}},g=0,m=p.ANIMATION_PROPERTIES,y=function(){function t(e){var n=e.id,i=e.steps,r=e.initialStep;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"name",void 0),d(this,"duration",void 0),d(this,"iterationCount",void 0),d(this,"fillMode","none"),d(this,"css",void 0),d(this,"hasRotation",!1),d(this,"force3d",void 0),d(this,"loop",void 0),this.name="animation_".concat(n);var o=i.find((function(t){return t.loop}));this.loop=!!o&&p.normalizeLoopValue(o.loop),this.iterationCount=this.loop?"infinite":1,this.hasRotation=i.find((function(t,e){return Boolean(t.use_rotate&&(0===e&&0!==t.from_rotate||0!==t.rotate))})),this.duration=i.reduce((function(t,e){return t+e.calcedDelay+e.calcedDuration}),0),this.css=t.getKeyframes(n,i,this.duration,this.hasRotation,this.force3d,r)}var e,n,i;return e=t,i=[{key:"getKeyframes",value:function(t,e,n,i,r,o){for(var a=0,s=[[0]],c=e.length,l=0;l<c;l++){var u=e[l].calcedDelay/n,d=e[l].calcedDuration/n;u>=1e-4?s[s.length-1].push(a+u):u=0,a+=u+d,l==c-1&&(a=1),s.push([a])}var h="".concat(m.keyframeCSS," animation_").concat(t," {\n"),f={none:"linear","ease-in":"ease-in","ease-out":"ease-out","ease-both":"ease-in-out"};for(h+=this.getKeyframe(s[0],{dx:o?o.dx:0,dy:o?o.dy:0,opacity:o?o.opacity:e[0].from_opacity,rotate:o?o.rotate:e[0].from_rotate,scale:o?o.scale:e[0].from_scale},f[e[0].acceleration],i,r),l=0;l<c;l++)h+=this.getKeyframe(s[l+1],e[l],e[l+1]?f[e[l+1].acceleration]:void 0,i,r);return h+="}\n"}},{key:"getKeyframe",value:function(t,e,n,i,r){var o="\t";return o+=a.Z.map(t,(function(t){return 100*t+"%"})).join(", ")+" {",o+=m.transformCSS+": "+this.getTransformString({x:e.dx,y:e.dy,angle:e.rotate,scale:e.scale/100,hasRotation:i,isKeyframe:!0,force3d:r})+"; ",o+="opacity: "+(0===e.opacity?0:e.opacity/100)+"; ",n&&(o+=m.animationTimingFunctionCSS+": "+n),o+="}\n"}},{key:"getTransformString",value:function(t){var e,n=t.x,i=t.y,r=t.angle,o=t.scale,a=t.hasRotation,c=t.isKeyframe,l=t.force3d;if(o<.001&&(o=.001),a&&c)e=l?"translate3d(".concat(n,"px, ").concat(i,"px, 0) rotate(").concat(r,"deg) scale(").concat(o,")"):"translate(".concat(n,"px, ").concat(i,"px) rotate(").concat(r,"deg) scale(").concat(o,")");else{var u=o,d=0,h=",";if(r&&(r*=p.DEG_TO_RAD,u=Math.cos(r)*o,d=Math.sin(r)*o),u=Math.abs(u)<1e-6?0:u,d=Math.abs(d)<1e-6?0:d,Modernizr.edge){var f,g=null===(f=window.RM.viewerRouter)||void 0===f?void 0:f.mag;g&&(i*=s.Z.getRatio(g.getViewportWidth(g.viewport)))}var m=u+h+d,y=-d+h+u,v=n+h+i;e=l?"matrix3d(".concat(m,",0,0,").concat(y,",0,0,0,0,1,0,").concat(v,",0,1)"):"matrix(".concat(m).concat(h).concat(y).concat(h).concat(v,")")}return e}}],(n=[{key:"getDirection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?this.loop===p.LOOP_TYPES.repeat?"reverse":"alternate-reverse":this.loop===p.LOOP_TYPES.repeat?"normal":"alternate"}}])&&u(e.prototype,n),i&&u(e,i),t}(),v=o().View.extend({initialize:function(t){a.Z.bindAll(this),a.Z.extend(this,t),m.animationSupported&&(this.active=!1,this.reversed=!1,this.$el.toggleClass("force3d",!!this.force3d),"scroll"!==this.type?(this.generateKeyframeAnimation(),this.duration=this.sequences.reduce((function(t,e){return t+e.duration}),0)):(this.duration=this.steps.reduce((function(t,e){return t+e.calcedDelay+e.calcedDuration}),0),this.generateFrameByFrameAnimation()))},generateKeyframeAnimation:function(){var t=this;g+=1,this.id=g,this.sequences=this.steps.reduce((function(e,n,i){var r=t.steps.slice(i+1),o=r.findIndex((function(t){return t.loop}));return 0===i||n.loop?[].concat(h(e),[new y({id:"".concat(t.id,"_").concat(e.length+1),steps:[n].concat(h(r.slice(0,-1!==o?o:r.length))),force3d:t.force3d,initialStep:e.length?t.steps[i-1]:void 0})]):e}),[]),this.loop=this.sequences.map((function(t){return t.loop})).find((function(t){return t})),this.isFullLoop=1===this.sequences.length&&Boolean(this.sequences[0].loop),this.keyframesStyle=document.createElement("style"),this.keyframesStyle.innerHTML=this.sequences.reduce((function(t,e){return t+e.css}),""),this.$el.append(this.keyframesStyle),this.$el.on(m.animationIterationJS,(function(e){e.stopPropagation();var n=t.sequences.find((function(t){return t.name===e.originalEvent.animationName}));n&&t.onAnimationIteration(e,n)})),this.$el.on(m.animationEndJS,(function(e){e.stopPropagation();var n=t.sequences.find((function(t){return t.name===e.originalEvent.animationName})),i=t.reversed?h(t.sequences).reverse():t.sequences;n&&n.name===i[i.length-1].name&&t.onAnimationEnd(e,n)})),this.applyStepState(this.screenshotMode&&"load"===this.type?this.steps.length-1:"initial",!0)},generateFrameByFrameAnimation:function(){var t=0,e={dx:0,dy:0,opacity:this.steps[0].from_opacity,rotate:this.steps[0].from_rotate,scale:this.steps[0].from_scale};this.frames=[],this.frames.push({ind:0,isDelay:!1,params:e});for(var n=0;n<this.steps.length;n++){var i=this.steps[n];i.calcedDelay&&(this.frames.push({ind:t+1,isDelay:!0,params:e}),t+=i.calcedDelay),e={dx:i.dx,dy:i.dy,opacity:i.opacity,rotate:i.rotate,scale:i.scale,acceleration:i.acceleration},this.frames.push({ind:t+1,isDelay:!1,params:e}),t+=i.calcedDuration}this.seek(0)},applyStepState:function(t,e){var n;if(this.$el.removeClass("invisible"),"initial"===t)this.$el[0].style[m.transformJS]=y.getTransformString({x:0,y:0,angle:this.steps[0].from_rotate,scale:this.steps[0].from_scale/100,hasRotation:this.hasRotation,isKeyframe:e,force3d:this.force3d}),n=this.steps[0].from_opacity,this.$el[0].style.opacity=0===n?0:n/100;else{var i=this.steps[t];this.$el[0].style[m.transformJS]=y.getTransformString({x:i.dx,y:i.dy,angle:i.rotate,scale:i.scale/100,hasRotation:this.hasRotation,isKeyframe:e,force3d:this.force3d}),n=i.opacity,this.$el[0].style.opacity=0===n?0:n/100}var r="hover"===this.type&&this.animationTrigger.length>0&&!this.selfTriggered,o="hover"!==this.type&&("initial"!==t||this.animationTrigger.length>0);0===n&&(r||o)&&this.$el.addClass("invisible")},play:function(){if(!this.screenshotMode&&m.animationSupported){var t=m.animationJS;this.stop(),this.$el.removeClass("invisible"),this.$el.outerHeight(),window.requestAnimationFrame(function(){var e=this;this.$el[0].style[t+"Name"]=this.sequences.map((function(t){return t.name})).join(", "),this.$el[0].style[t+"Duration"]=this.sequences.map((function(t){return t.duration+"s"})).join(", "),this.$el[0].style[t+"Delay"]=this.sequences.reduce((function(t,n,i){var r=e.sequences[i-1];return[].concat(h(t),[r?"".concat(r.duration,"s"):"0s"])}),[]).join(", "),this.$el[0].style[t+"IterationCount"]=this.sequences.map((function(t){return t.iterationCount})).join(", "),this.$el[0].style[t+"Direction"]=this.sequences.map((function(t){return t.getDirection()})).join(", "),this.$el[0].style[t+"FillMode"]=this.sequences.map((function(t){return t.fillMode})).join(", "),this.$el[0].style[t+"PlayState"]=""}.bind(this)),this.active=!0,this.reversed=!1}},reverse:function(){if(!this.screenshotMode&&m.animationSupported){var t=m.animationJS;this.stop(),this.$el.removeClass("invisible"),this.$el.outerHeight();var e=h(this.sequences).reverse().filter((function(t){return t.loop!==p.LOOP_TYPES.swing}));this.$el[0].style[t+"Name"]=e.map((function(t){return t.name})).join(", "),this.$el[0].style[t+"Duration"]=e.map((function(t){return t.duration+"s"})).join(", "),this.$el[0].style[t+"Delay"]=e.reduce((function(t,n,i){var r=e[i-1];return[].concat(h(t),[r?"".concat(r.duration,"s"):"0s"])}),[]).join(", "),this.$el[0].style[t+"IterationCount"]=e.map((function(){return 1})).join(", "),this.$el[0].style[t+"Direction"]=e.map((function(t){return t.getDirection(!0)})).join(", "),this.$el[0].style[t+"FillMode"]=e.map((function(t){return t.fillMode})).join(", "),this.$el[0].style[t+"PlayState"]="",this.active=!0,this.reversed=!0}},stop:function(){this.$el.removeClass("invisible"),this.$el[0].style[m.animationJS]="",this.active=!1,this.reversed=!1},onAnimationEnd:function(){this.reversed=!this.reversed,this.active=!1,this.$el[0].style[m.animationJS]="",this.applyStepState(this.reversed?this.steps.length-1:"initial",!0),this.trigger("full-cycle-end")},onAnimationIteration:function(t,e){this.loop===p.LOOP_TYPES.swing?Math.round(t.originalEvent.elapsedTime/e.duration)%2?this.reversed=!0:(this.reversed=!1,this.trigger("full-cycle-end")):this.trigger("full-cycle-end")},resume:function(){this.screenshotMode||m.animationSupported&&(l.Z.isDesktop?this.$el[0].style[m.animationJS+"PlayState"]="running":this.play(),this.active=!0)},pause:function(){m.animationSupported&&(l.Z.isDesktop?this.$el[0].style[m.animationJS+"PlayState"]="paused":this.stop(),this.active=!1)},seek:function(t){if(m.animationSupported){t=Math.max(Math.min(t,this.duration),0);var e,n,i,r,o=this.frames.length;for(e=0;e<o&&!(this.frames[e].ind>t);e++);e--,this.frames[e].isDelay?n=a(this.frames[e].params,this.frames[e].params,0,1):(i=e?this.frames[e].ind-1:0,r=e==o-1?this.duration:this.frames[e+1].ind-1,n=a(this.frames[e?e-1:0].params,this.frames[e].params,t-i,r-i+1)),this.$el[0].style[m.transformJS]=y.getTransformString({x:n.dx,y:n.dy,angle:n.rotate,scale:n.scale/100,hasRotation:this.hasRotation,isKeyframe:!1,force3d:this.force3d}),this.$el[0].style.opacity=0==n.opacity?0:n.opacity/100,this.$el.toggleClass("invisible",0==n.opacity)}function a(t,e,n,i){if(0==n)return t;if(n==i-1)return e;var r=n/(i-1);return{dx:t.dx==e.dx?t.dx:s(t.dx,e.dx,r,e.acceleration),dy:t.dy==e.dy?t.dy:s(t.dy,e.dy,r,e.acceleration),opacity:t.opacity==e.opacity?t.opacity:s(t.opacity,e.opacity,r,e.acceleration),rotate:t.rotate==e.rotate?t.rotate:s(t.rotate,e.rotate,r,e.acceleration),scale:t.scale==e.scale?t.scale:s(t.scale,e.scale,r,e.acceleration)}}function s(t,e,n,i){return t+(e-t)*(i&&"none"!=i?"ease-in"==i?n*n:"ease-out"==i?n*(2-n):n<.5?n*n*2:2*n*(2-n)-1:n)}},destroy:function(){this.$el.off(m.animationIterationJS,this.onAnimationIteration),this.$el.off(m.animationEndJS,this.onAnimationEnd),this.$el[0].style[m.animationJS]="",this.$el[0].style[m.transformJS]="",this.$el[0].style.opacity="",this.$el.removeClass("force3d"),this.keyframesStyle&&(0,i.Z)(this.keyframesStyle).remove(),this.reversed=!1,this.active=!1}});e.Z=p},1006:function(t,e,n){"use strict";var i=n(313),r=n(337),o=n.n(r),a=n(322),s=n(922),c=o().View.extend({pictures:[],domPictures:[],preloadPictures:[],currentSlide:null,nextSlide:null,selectedSlide:null,defaultDelay:4,defaultCrossfade:.5,isAnimationRunning:!1,cursor:0,rendered:!1,lastSlideshowAnimationStart:null,initialize:function(t){this.initSlideshowData(t.data),this.$container=t.container,this.$preloadContainer=t.preloadContainer},initSlideshowData:function(t){this.pictures=t&&t.pictures?a.Z.sortBy(t.pictures,"num"):[],this.delay=t&&"number"==typeof t.delay?t.delay:this.defaultDelay,this.crossfade=t&&"number"==typeof t.crossfade?t.crossfade:this.defaultCrossfade,this.name=t&&t.name?t.name:"slideshow"+(new Date).getTime(),this.domPictures=[],this.preloadPictures=[],this.currentSlide=null,this.nextSlide=null,this.selectedSlide=null,this.isAnimationRunning=!1,this.cursor=0},render:function(t){RM.screenshot?this.pictures.length?this.addPicture(this.pictures[0]):this.trigger("loaded"):this.loadPictures(),this.isAnimationRunning||t||this.startAnimationLoop(),this.rendered=!0},rerender:function(t){this.stopAnimationLoop(),this.initSlideshowData(t),this.removePictures(),this.render(!0)},runAnimation:function(){this.isAnimationRunning||(this.rendered?this.startAnimationLoop():this.render())},setDelay:function(t){t<this.crossfade?console.error("delay mast be longer than crossfade"):this.delay=t},setCrossfade:function(t){t>this.delay?console.error("delay mast be longer than crossfade"):(this.crossfade=t,this.updateCrossfade())},updateCrossfade:function(){this.domPictures.forEach(function(t){t.css({"transition-duration":this.crossfade+"s"})}.bind(this))},updatePicture:function(t){var e=a.Z.findIndex(this.pictures,(function(e){return e.uuid===t.uuid}));this.pictures[e]=t,this.domPictures[e].css({"background-image":'url("'.concat(this.getPoorUrl(t),'")')}),s.Z.useLqipUrl(t)&&this.domPictures[e].addClass("lqip"),this.loadFullSizePicture(t)},updatePicturePosition:function(t){this.destroy(),this.initSlideshowData({pictures:t,delay:this.delay,crossfade:this.crossfade}),this.render()},addPicture:function(t){var e=this.domPictures.length===this.cursor+1,n=0===this.domPictures.length?2:e?1:0,r=0===this.domPictures.length||e?"block":"none";this.pictures.push(t),this.domPictures.push((0,i.Z)("<div>").addClass("slideshow-image fade-in".concat(s.Z.useLqipUrl(t)?" lqip":"")).css({"z-index":n,display:r,"background-image":'url("'.concat(this.getPoorUrl(t),'")'),"transition-property":"opacity","transition-duration":this.crossfade+"s","transition-timing-function":"linear"}).appendTo(this.$container)),this.loadFullSizePicture(t)},selectSlide:function(t){if(t){var e=this.pictures.findIndex((function(e){return e.uuid===t}));if(-1!==e){if(this.currentSlide&&this.selectedSlide!==this.domPictures[e]&&(this.isAnimationRunning&&this.stopAnimationLoop(),this.currentSlide!==this.domPictures[e])){var n=this.cursor;this.nextSlide&&this.nextSlide.css({"z-index":0,display:"none"}),this.domPictures[e].css({"z-index":1,display:"block"}),this.currentSlide=this.domPictures[e],this.cursor=e,this.selectedSlide=this.domPictures[e],this.domPictures.length>1?this.domPictures[e+1]?this.nextSlide=this.domPictures[e+1]:this.nextSlide=this.domPictures[0]:this.nextSlide=null,this.domPictures[n].css({"transition-duration":"0.3s"}),this.domPictures[n].removeClass("fade-in").addClass("fade-out"),setTimeout(function(){this.domPictures[n].css({"z-index":0,"transition-duration":"0s",display:"none"}).removeClass("fade-out").addClass("fade-in").css({"transition-duration":this.crossfade+"s"}),this.currentSlide.css({"z-index":2}),this.nextSlide&&this.nextSlide.css({"z-index":1,display:"block"})}.bind(this),310)}}else console.warn("Did't find slide for uuid:",t)}},removePictures:function(){this.domPictures=[],this.preloadPictures=[],this.$container.empty(),this.$preloadContainer.empty()},removePicture:function(t){if(t){var e=this.pictures.findIndex((function(e){return e.uuid===t}));if(this.domPictures[e]===this.currentSlide&&1!==this.domPictures.length&&this.selectedSlide!==this.domPictures[e]){var n=1e3*this.crossfade+1e3*this.delay+50;n=this.lastSlideshowAnimationStart?Math.abs(n-((new Date).getTime()-this.lastSlideshowAnimationStart.getTime())):n,setTimeout(function(){this.cursor&&(this.cursor-=1);var e=this.pictures.findIndex((function(e){return e.uuid===t}));this.domPictures[e].remove(),this.domPictures.splice(e,1),this.pictures.splice(e,1)}.bind(this),n)}else{if(this.domPictures[e]===this.nextSlide&&1!==this.domPictures.length&&(this.domPictures[e+1]?(this.domPictures[e+1].css({"z-index":1,display:"block"}),this.nextSlide=this.domPictures[e+1]):(this.domPictures[0].css({"z-index":1,display:"block"}),this.nextSlide=this.domPictures[0])),this.selectedSlide===this.domPictures[e]&&this.nextSlide){var i=this.domPictures.findIndex(function(t){return t===this.nextSlide}.bind(this));this.currentSlide=this.domPictures[i],this.cursor=i,this.selectedSlide=null,this.currentSlide.css({"z-index":2}),this.domPictures.length>2?this.domPictures[this.cursor+1]?this.nextSlide=this.domPictures[this.cursor+1]:this.nextSlide=this.domPictures[0]:this.nextSlide=null,this.nextSlide&&this.nextSlide.css({"z-index":1,display:"block"}),setTimeout(function(){this.startAnimationLoop()}.bind(this),0)}this.domPictures[e].remove(),this.domPictures.splice(e,1),this.pictures.splice(e,1)}}},getThumbnailUrl:function(t){return t?s.Z.useLambdaUrl(t)?s.Z.getThumbnailUrl(t):t.thumbUrl:""},getPictureUrl:function(t){return s.Z.useLambdaUrl(t)||s.Z.useLambdaUrlOldProjects(t,"background")?s.Z.getLambdaUrl(t):t.url},getPoorUrl:function(t){return s.Z.useLqipUrl(t)?s.Z.getLqipUrl(t):t.poorUrl},loadPictures:function(){this.pictures.forEach(function(t,e){this.domPictures[e]=(0,i.Z)("<div>").addClass("slideshow-image fade-in".concat(s.Z.useLqipUrl(t)?" lqip":"")).css({"z-index":0===e?2:1===e?1:0,display:0===e||1===e?"block":"none","background-image":'url("'.concat(this.getPoorUrl(t),'")'),"transition-property":"opacity","transition-duration":this.crossfade+"s","transition-timing-function":"linear"}).appendTo(this.$container)}.bind(this)),this.loadFullSizePictures()},loadFullSizePictures:function(){function t(t,e,n){this.domPictures[e].css({"background-image":'url("'.concat(t,'")')}),this.domPictures[e].removeClass("lqip"),this.preloadPictures[e].remove(),0===e&&this.trigger("loaded")}function e(t,e){this.domPictures[t].removeClass("lqip"),0===t&&this.trigger("loaded"),RM.screenshot||this.preloadPictures[t].remove()}this.preloadPictures=[],this.pictures.forEach(function(n,r){var o=this.getPictureUrl(n);this.preloadPictures[r]=(0,i.Z)("<img>").addClass("preload-slideshow-image").appendTo(this.$preloadContainer).attr("src",o).on("load",t.bind(this,o,r)).on("error",e.bind(this,r))}.bind(this))},loadFullSizePicture:function(t){var e=(0,i.Z)("<img>").addClass("preload-slideshow-image").appendTo(this.$preloadContainer).attr("src",this.getPictureUrl(t)).on("load",function(n){var i=a.Z.findIndex(this.pictures,(function(e){return t.uuid===e.uuid}));this.domPictures[i].css({"background-image":'url("'.concat(this.getPictureUrl(t),'")')}),this.domPictures[i].removeClass("lqip"),e.remove(),this.trigger("loaded")}.bind(this)).on("error",function(n){var i=a.Z.findIndex(this.pictures,(function(e){return t.uuid===e.uuid}));this.domPictures[i].removeClass("lqip"),e.remove(),this.trigger("loaded"),RM.screenshot||e.remove()}.bind(this))},initCursor:function(){this.cursor=0,this.currentSlide=this.domPictures[this.cursor],this.domPictures[this.cursor+1]&&(this.nextSlide=this.domPictures[this.cursor+1])},startAnimationLoop:function(){this.isAnimationRunning=!0,this.selectedSlide=null,this.currentSlide||this.initCursor(),this.slideshowLouncher=setTimeout(function t(){this.fadeAnimation(),this.slideshowLouncher=setTimeout(t.bind(this),1e3*this.delay)}.bind(this),1e3*this.delay)},fadeAnimation:function(){var t;this.lastSlideshowAnimationStart=new Date,this.domPictures.length<2||(this.currentSlide&&this.nextSlide||this.initCursor(),this.cursor+1<this.domPictures.length?(this.currentSlide.removeClass("fade-in").addClass("fade-out"),t=this.cursor,setTimeout(function(){this.domPictures[t]&&this.domPictures[t].css({"z-index":0,"transition-duration":"0s",display:"none"}).removeClass("fade-out").addClass("fade-in").css({"transition-duration":this.crossfade+"s"}),this.domPictures[t+1].css({"z-index":2}),this.domPictures[t+2]?this.domPictures[t+2].css({"z-index":1,display:"block"}):this.domPictures[0].css({"z-index":1,display:"block"})}.bind(this),1e3*this.crossfade),this.cursor+=1,this.currentSlide=this.domPictures[this.cursor],this.domPictures[this.cursor+1]?this.nextSlide=this.domPictures[this.cursor+1]:this.nextSlide=this.domPictures[0]):(this.currentSlide.removeClass("fade-in").addClass("fade-out"),t=this.cursor,setTimeout(function(){this.domPictures[t]&&this.domPictures[t].css({"z-index":0,"transition-duration":"0s",display:"none"}).removeClass("fade-out").addClass("fade-in").css({"transition-duration":this.crossfade+"s"}),this.domPictures[0].css({"z-index":2}),this.domPictures[1].css({"z-index":1,display:"block"})}.bind(this),1e3*this.crossfade),this.cursor=0,this.currentSlide=this.domPictures[this.cursor],this.nextSlide=this.domPictures[this.cursor+1]))},stopAnimationLoop:function(t){this.isAnimationRunning=!1,clearTimeout(this.slideshowLouncher),t&&"function"==typeof t&&t()},destroy:function(){this.rendered=!1,this.stopAnimationLoop(this.removePictures.bind(this))}});e.Z=c},1010:function(t,e,n){"use strict";n.d(e,{Z:function(){return O}});var i,r=n(313),o=n(337),a=n.n(o),s=n(322),c=n(350);var l,u,d,h,f,p,g=(l={},u="template-common-button-widget",d=(0,c.f)(i||(h=['\n\n    <div class="common-button" data-id="<%-data._id%>">\n\n        <div class="icon"></div>\n\n    </div>\n\n'],f||(f=h.slice(0)),i=Object.freeze(Object.defineProperties(h,{raw:{value:Object.freeze(f)}})))),u in l?Object.defineProperty(l,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[u]=d,l);var m,y=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},"template-constructor-block-button",(0,c.f)(p||(p=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\n    <input class="text"\n           value="<%-data.text%>"\n           type="text"\n           autocapitalize="off"\n           autocorrect="off"\n           autocomplete="off"\n           spellcheck="false"/>\n\n']))));var v=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},"template-viewer-widget-button",(0,c.f)(m||(m=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n    <div class="text"><%-data.text%></div>\n'])))),b=n(341),w={STYLE_PREFIXES:{viewer:[".rmwidget.widget-button .common-button"],viewerCurrentLink:[".maglink.current .widget-button .common-button"],constructor:[".block.button .common-button"]},generateIndividualStyleCSS:function(t){var e=this.STYLE_PREFIXES[t.env],n=t.model,i=n.tp,o=this,a=function(r){r=r||"default";var a={default:"",hover:"hovered",current:"current"},c={default:"",hover:"hover-",current:"current-"},l=s.Z.isUndefined(a[r])?a.default:a[r],u=s.Z.isUndefined(c[r])?c.default:c[r],d=s.Z.map(e,(function(t){return t+'[data-id="'+n._id+'"]'+(l?"."+l:"")})).join(",\n")+" {\n";return d+=o.generateStylesStr({model:n,attrPrefix:u,indentation:!0,lineBreaks:!0,env:t.env,state:r}),d+="}\n\n","viewer"===t.env&&("current"===r&&o.isNeedCurrentStyle(n)&&(d+=o.STYLE_PREFIXES.viewerCurrentLink+'[data-id="'+n._id+'"] {\n',d+=o.generateStylesStr({model:n,attrPrefix:u,indentation:!0,lineBreaks:!0}),d+="}\n\n"),"icon"!==i&&"text_and_icon"!==i||(d+=s.Z.map(e,(function(t){return t+'[data-id="'+n._id+'"]'+(l?"."+l:"")+" .icon"})).join(",\n")+" {\n",d+='\t background-image: url("'+(Modernizr.retina?n[u+"icon_raster2xUrl"]||n[u+"icon_b64url"]:n[u+"icon_rasterUrl"]||n[u+"icon_b64url"])+'");\n',d+="}\n\n","current"===r&&(d+=o.STYLE_PREFIXES.viewerCurrentLink+'[data-id="'+n._id+'"] .icon {\n',d+='\t background-image: url("'+(Modernizr.retina?n[u+"icon_raster2xUrl"]||n[u+"icon_b64url"]:n[u+"icon_rasterUrl"]||n[u+"icon_b64url"])+'");\n',d+="}\n\n"))),d},c=a("default");s.Z.find(s.Z.keys(n),(function(t){return/^current/.test(t)}))&&(c+=a("current")),c+=a("hover");var l="individual_button_style_"+n._id+"_"+t.env;(0,r.Z)("#"+l).remove();var u=document.createElement("style");u.type="text/css",u.id=l,u.className="button_styles",u.appendChild(document.createTextNode(c)),document.getElementsByTagName("head")[0].appendChild(u)},generateStylesStr:function(t){var e="",n=t.model,i=t.indentation?"\t":"",r=";"+(t.lineBreaks?"\n":""),o=t.attrPrefix||"";return e+=i+"background-color: "+b.default.getRGBA(a("background-color"),a("background-color-opacity")/100)+r,e+=i+"border-radius: "+s(a("border-radius"))+r,e+=i+"border-width: "+s(a("border-width"))+r,e+=i+"border-color: "+b.default.getRGBA(a("border-color"),a("border-color-opacity")/100)+r,e+=i+"font-family: "+a("font-family")+r,e+=i+"font-weight: "+a("font-weight")+r,e+=i+"font-style: "+a("font-style")+r,e+=i+"color: "+b.default.getRGBA(a("color"),a("color-opacity")/100)+r,e+=i+"font-size: "+s(a("font-size"))+r,e+=i+"letter-spacing: "+s(a("letter-spacing"))+r,n["hover-tansition-duration"]&&(e+=i+"transition: ".concat(n["hover-tansition-duration"],"s")+r),t.env&&t.state&&"viewer"===t.env&&"hover"===t.state&&n["hover-cursor"]&&(e+=i+"cursor: ".concat(n["hover-cursor"])+r),e;function a(t){var e=n[o+t];return("inherit"===e&&o||void 0===e)&&(e=n[t]),"border-color"===t&&"hover-"===o?0==n["hover-border-width"]&&(e=n["border-color"]):"border-color"===t&&"current-"!==o&&0==n["border-width"]&&(e=n["hover-border-color"]),"border-color-opacity"===t&&"hover-"===o?0==n["hover-border-width"]&&(e=n["border-color-opacity"]):"border-color-opacity"===t&&0==n["border-width"]&&(e=n["hover-border-color-opacity"]),e}function s(t){return t+(/px/i.test(t)?"":"px")}},destroyIndividualStyleCSS:function(t){var e="individual_button_style_"+t.model._id+"_"+t.env;(0,r.Z)("#"+e).remove()},isNeedCurrentStyle:function(t){var e=t.clickLink;return!(!e||!t.is_global)&&(!(/^http(s?)\:\/\//i.test(e)||/^mailto\:/i.test(e)||/^tel\:/i.test(e))&&!!t.mag.getPageUri(e))}};function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=x(x(x({},g),y),v),O=a().View.extend({MIN_ICON_MARGIN:8,initialize:function(t){t&&(s.Z.bindAll(this),this.block=t.block,this.model=t.block&&t.block.model,this.model=t.model,this.$container=t.$container,this.environment=t.environment,this.mag=t.mag,s.Z.extend(this.model,{env:this.environment}),this.generateIndividualStyleCSS({env:this.environment,model:this.model}),this.template=_["template-common-button-widget"],"constructor"===this.environment?this.text_template=_["template-constructor-block-button"]:this.text_template=_["template-viewer-widget-button"],this.render())},render:function(){this.model.tp;var t=w.generateStylesStr({model:this.model});this.setElement((0,r.Z)(this.template({data:this.model}))),(0,r.Z)(this.text_template({data:this.model})).appendTo(this.$el),this.$text=this.$(".text"),this.$icon=this.$(".icon"),this.$button=this.$text.closest(".common-button"),this.$button.attr("style",t),this.applyButtonType(this.model.tp),"circle"===this.model.form&&this.applyCircleRadius(this.model.w),this.applyTextContainerSize(this.model),this.applyIconContainerSize(this.model),this.applyIconPosition(this.model),"viewer"===this.environment&&this.$container.css("border-radius",this.$button.css("border-radius")),this.$el.appendTo(this.$container),this.renderFinishTimeout=setTimeout(function(){var t=["background-color","background-color-opacity","border-width","border-color","border-color-opacity","font-family","font-style","font-weight","color","color-opacity","font-size","letter-spacing"];"circle"!==this.model.form&&t.push("border-radius"),t.forEach(function(t){this.$button.css(t,"")}.bind(this)),this.applyTransition()}.bind(this),500)},renderButtonText:function(t){this.$el.find(".text").text(t)},renderButtonTextWithSizes:function(t,e){e&&this.applyTextContainerSize(e),this.$el.find(".text").text(t).css({display:t?"block":"none"})},applyTransition:function(){"viewer"!==this.environment||Modernizr.touch||this.model.transition&&this.$button.addClass("transition")},applyButtonType:function(t){var e="inline-block";"text"===t?(this.$text.css("display",e),this.$icon.css("display","none")):"icon"===t?(this.$icon.css("display",e),this.$text.css("display","none")):"text_and_icon"===t&&this.$icon.add(this.$text).css("display",e)},applyCircleRadius:function(t){this.$button.css("border-radius","100%")},applyTextContainerSize:function(t){var e=t["letter-spacing"],n=0,i=0;e>0?n=e:e<0&&(i=e),this.$text.css({width:t.text_w+"px","padding-left":n+"px","text-indent":i+"px",height:"viewer"===this.environment?"".concat(t.h,"px"):"".concat(t.text_h,"px"),"line-height":"viewer"===this.environment?"".concat(t.h,"px"):"".concat(t.text_h,"px")})},applyIconContainerSize:function(t){t.tp;var e=t.icon_w,n=t.icon_h;t.icon_pos;this.$icon.css({width:e+"px",height:n+"px","margin-right":"0px","margin-left":"0px"})},calcIconMarginFromText:function(t){return Math.ceil(t/4)},calcIconTopBottomMargin:function(t){return Math.ceil(t/3)},calcTextTopBottomMargin:function(t){return Math.ceil(t/6)},applyIconPosition:function(t){var e=t.icon_pos;"left"===e?this.$button.css({"flex-direction":"row","-webkit-flex-direction":"row"}):"right"===e&&this.$button.css({"flex-direction":"row-reverse","-webkit-flex-direction":"row-reverse"})},generateIndividualStyleCSS:function(t){w.generateIndividualStyleCSS({env:t.env,model:t.model})},destroy:function(){clearTimeout(this.renderFinishTimeout),w.destroyIndividualStyleCSS({env:this.environment,model:this.model}),this.$el&&this.$el.remove()}})},728:function(t,e,n){"use strict";var i=n(322),r=n(697),o={sideAngles:{top:0,right:.5*Math.PI,bottom:Math.PI,left:1.5*Math.PI},calcOrientedTriangleSquare:function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},intersectsOnAxisProjection:function(t,e,n,i){var r;return t>e&&(r=t,t=e,e=r),n>i&&(r=n,n=i,i=r),t<n&&(t=n),e>i&&(e=i),t<=e},isLinesIntersects:function(t,e,n,i){return o.intersectsOnAxisProjection(t.x,e.x,n.x,i.x)&&o.intersectsOnAxisProjection(t.y,e.y,n.y,i.y)&&o.calcOrientedTriangleSquare(t,e,n)*o.calcOrientedTriangleSquare(t,e,i)<=0&&o.calcOrientedTriangleSquare(n,i,t)*o.calcOrientedTriangleSquare(n,i,e)<=0},isConvexPolygonContainsPoint:function(t,e){for(var n=0;n<t.length;n++){var i=(n+1)%t.length;if(o.calcOrientedTriangleSquare(t[n],t[i],e)<0)return!1}return!0},isConvexPolygonsIntersects:function(t,e){var n,i,r,a;for(n=0;n<t.length;n++)if(o.isConvexPolygonContainsPoint(e,t[n]))return!0;for(n=0;n<e.length;n++)if(o.isConvexPolygonContainsPoint(t,e[n]))return!0;for(n=0;n<t.length;n++)for(i=(n+1)%t.length,r=0;r<e.length;r++)if(a=(r+1)%e.length,o.isLinesIntersects(t[n],t[i],e[r],e[a]))return!0;return!1},doBoundingBoxesIntersect:function(t,e){return t&&e&&!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)},calcBoundingBoxForBlock:function(t,e){var n=t.getBoxData();return this.calcBoundingBox({height:n.h,width:n.w,top:n.y,left:n.x,sinAngle:Math.sin(-(t.model.get("angle")||0)*Math.PI/180),cosAngle:Math.cos(-(t.model.get("angle")||0)*Math.PI/180)},Boolean(t.model.get("fixed_position")),e)},calcBoundingBox:function(t,e,n){var r=o.calcRotatedBox(t),a=i.Z.pluck(r,"x"),s=i.Z.pluck(r,"y"),c=Math.min.apply(null,a),l=Math.max.apply(null,a),u=Math.min.apply(null,s),d=c,h=u,f=l-c,p=Math.max.apply(null,s)-u;return e&&(["n","c","s"].indexOf(e)>-1&&(d=t.left),["w","c","e"].indexOf(e)>-1&&(h=t.top)),n?{width:f,height:p,left:d,top:h}:{bb_width:f,bb_height:p,bb_left:d,bb_top:h}},boxToRect:function(t){return{width:t.width,height:t.height,top:t.top,bottom:t.top+t.height,left:t.left,right:t.left+t.width}},getBoundingBoxOfElements:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.map((function(t){return t.parentElement?1!==e?r.Z.getBox(t,e):t.getBoundingClientRect():{bottom:0,height:0,left:0,right:0,top:0,width:0}}));return o.getBoundingBoxOfBoxes(n)},getBoundingBoxOfBoxes:function(t){var e=[],n=[];i.Z.each(t,(function(t){var r=void 0!==t.right?i.Z.extend({},t):o.boxToRect(t);e.push(r.left),e.push(r.right),n.push(r.top),n.push(r.bottom)}));var r={top:Math.min.apply(null,n),right:Math.max.apply(null,e),bottom:Math.max.apply(null,n),left:Math.min.apply(null,e)};return r.width=r.right-r.left,r.height=r.bottom-r.top,r},getBoundingBoxOfBlocks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map((function(t){var e=t.getBoxData({includeBoundingBox:!0,checkFixedPosition:!0});return{width:e.bb_w,height:e.bb_h,top:e.bb_y,left:e.bb_x}}));return o.getBoundingBoxOfBoxes(e)},calcRotatedBox:function(t){var e=[],n=[0,1,1,0],r=[0,0,1,1],o=t.left+t.width/2,a=t.top+t.height/2,s=t.sinAngle,c=t.cosAngle;return i.Z.each(n,(function(i,l){var u=t.left+t.width*n[l],d=t.top+t.height*r[l],h=u-o,f=a-d;u=o+c*h+s*f,d=a+s*h-c*f;e.push({x:u,y:d})})),e},getDistance:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},getBestPoints:function(t,e){for(var n,i,r,a=["right","left","bottom","top"],s={distance:1/0,fromPoint:{},toPoint:{}},c=0;c<a.length;c++)for(var l=0;l<a.length;l++)i=o.getSideCenter(t,a[c]),r=o.getSideCenter(e,a[l]),s=(n=o.getDistance(i,r))<s.distance?{distance:n,fromSide:a[c],fromPoint:i,toSide:a[l],toPoint:r}:s;return s},getSideCenter:function(t,e){var n;switch(e){case"left":n={x:t.left,y:t.top+t.height/2};break;case"top":n={x:t.left+t.width/2,y:t.top};break;case"bottom":n={x:t.left+t.width/2,y:t.top+t.height};break;case"right":default:n={x:t.left+t.width,y:t.top+t.height/2}}return n={x:(n.x-t.centerX)*t.cos-(n.y-t.centerY)*t.sin+t.centerX,y:(n.y-t.centerY)*t.cos+(n.x-t.centerX)*t.sin+t.centerY}},getPerpendicularEnd:function(t,e,n,i){var r=n.angle+o.sideAngles[t];return{x:i*Math.sin(r)+e.x,y:-i*Math.cos(r)+e.y}},getBox:function(t){var e=(t.$el&&t.$el[0]||t.length&&t[0]||t).getBoundingClientRect(),n=t.model?(t.model.attributes.angle||0)*Math.PI/180:0;return e=i.Z.extend(e,{angle:n,sin:Math.sin(n),cos:Math.cos(n)}),e=i.Z.extend(e,{centerX:e.left+e.width/2,centerY:e.top+e.height/2})},getResizedBoxNested:function(t,e,n,i){var r=n.width/e.width,o=n.height/e.height;return r="height"===i?o:r,o="width"===i?r:o,{left:(t.left-e.left)*r+n.left,top:(t.top-e.top)*o+n.top,width:t.width*r,height:t.height*o}},getResizedBoxByBB:function(t,e,n){var i=n.left+n.width/2,r=n.top+n.height/2,o=n.width/e.width,a=n.height/e.height,s=t.width*o,c=t.height*a;return{left:i-s/2,top:r-c/2,width:s,height:c}},getBoxLimits:function(t,e){var n=t.width/t.height>1,i=n?e.minheight/t.height:e.minwidth/t.width,r=n?e.maxwidth/t.width:e.maxheight/t.height;return{minwidth:e.minwidth?Math.round(t.width*i):1,minheight:e.minheight?Math.round(t.height*i):1,maxwidth:e.maxwidth?Math.round(t.width*r):1/0,maxheight:e.maxheight?Math.round(t.height*r):1/0}},isBoxInView:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=e?e*t.height:1,i=e?e*t.width:1,r=t.height&&t.bottom>=n&&t.bottom<=window.innerHeight,o=t.height&&t.top<=window.innerHeight-n&&t.top>0,a=t.width&&t.right>=i&&t.right<=window.innerWidth,s=t.width&&t.left<=window.innerWidth-i&&t.left>0;return(r||o)&&(a||s)}};e.Z=o},945:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var i,r=n(337),o=n.n(r),a=n(313),s=n(322),c=n(341),l=n(697),u=n(350);var d,h,f,p,g,m=(d={},h="template-picture-preview-box",f=(0,u.f)(i||(p=['\n  <div>\n    <div class="picture-preview-box">\n      <div class="picture-preview-box-overlay" style="background-color: <%=overlayColor%>;"></div>\n      <img class="picture-preview-box-image" srcset="<%=previewSrc%>" style="<%= Object.keys(originalStyle).map(function(key) { return key + \':\' + originalStyle[key] }).join(\'; \') %>" />\n    </div>\n  </div>\n'],g||(g=p.slice(0)),i=Object.freeze(Object.defineProperties(p,{raw:{value:Object.freeze(g)}})))),h in d?Object.defineProperty(d,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[h]=f,d),y=o().View.extend({viewportWidth:void 0,viewport:void 0,viewerOptions:void 0,initialize:function(t){s.Z.bindAll(this),s.Z.extend(this,t)},render:function(){if(this.picture){this.removing=!1,(0,a.Z)("body").addClass("picture-preview-loading"),this.originalRect=this.getRect(this.$el[0]),this.orientation=this.getOrientation(),this.originalStyle=this.getOriginalStyle();var t=m["template-picture-preview-box"];return this.$preview=(0,a.Z)(t({overlayColor:this.overlayColor,previewSrc:this.getPreviewSrc(),originalStyle:this.originalStyle})),this.$container.append(this.$preview),(0,a.Z)(window).on("scroll",this.onScroll),(0,a.Z)("body").on("keypress keyup keydown",this.onKeyPress),setTimeout(this.setVisible,100),this.$preview}},imagePreload:function(){var t=this;if(!this.removing&&this.picture){var e=this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.final3xUrl||this.picture.final2xUrl||this.picture.finalUrl;this.getPreviewSrc()!==e?(this.img=new Image,this.img.onload=function(){(0,a.Z)("body").removeClass("picture-preview-loading"),t.$preview&&setTimeout((function(){t.removing||t.$preview.find(".picture-preview-box .picture-preview-box-image").attr("src",t.img.src).removeAttr("srcset")}),100)},this.img.src=e):(0,a.Z)("body").removeClass("picture-preview-loading")}},remove:function(t){var e=this;if(this.removing=!0,(0,a.Z)("body").removeClass("picture-preview-loading"),(0,a.Z)("body").off("keypress keyup keydown",this.onKeyPress),(0,a.Z)(window).off("scroll",this.onScroll),this.img&&(this.img.src="",delete this.img),this.$preview){var n=this.$preview.find(".picture-preview-box");n.removeClass("visible loaded").removeClass(this.orientation),c.default.waitForTransitionEnd(n.find(".picture-preview-box-overlay"),300,"opacity",(function(){e.$preview&&e.$preview.remove(),delete e.$preview})),t&&t()}},changeColor:function(t){this.$preview&&this.$preview.find(".picture-preview-box-overlay").css("background-color",t)},onScroll:function(){this.remove()},setVisible:function(){var t=this;if(!this.removing){var e=this.$preview.find(".picture-preview-box img")[0],n=function n(){e.removeEventListener("load",n),t.$preview.find(".picture-preview-box").addClass("visible").addClass(t.orientation),c.default.waitForTransitionEnd(t.$preview.find(".picture-preview-box .picture-preview-box-overlay"),300,"opacity",t.imagePreload)};setTimeout((function(){e.complete?n():e.addEventListener("load",n)}),100)}},getPreviewSrc:function(){var t=this.$el.find("img")[0];return t&&(t.currentSrc||t.src)||this.picture&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl||this.picture.final2xUrl||this.picture.finalUrl)},getOriginalStyle:function(){if(!this.originalRect)return{};var t=l.Z.isOn(this.viewport,this.viewportWidth,this.viewerOptions)&&l.Z.isCSSZoom()?l.Z.getRatio(this.viewportWidth):1,e={top:Number(this.originalRect.top+.5*this.originalRect.height)*t+"px",left:Number(this.originalRect.left+.5*this.originalRect.width)*t+"px"};return"portrait"===this.orientation?e.height=this.originalRect.height*t+"px":"landscape"===this.orientation&&(e.width=this.originalRect.width*t+"px"),e},getOrientation:function(){var t=this.originalRect.height/this.originalRect.width,e=(0,a.Z)(window).width();return(0,a.Z)(window).height()/t<e?"portrait":"landscape"},bindClick:function(){var t=this;this.$preview&&this.$preview.on("click",(function(){t.remove()}))},onKeyPress:function(t){27===t.keyCode&&this.remove()},getRect:function(t){var e=s.Z.extend({},t.getBoundingClientRect());if(Modernizr.safari){var n=l.Z.isOn(this.viewport,this.viewportWidth,this.viewerOptions)&&l.Z.isCSSZoom()?l.Z.getRatio(this.viewportWidth):1;e.top=e.top+((0,a.Z)(window).scrollTop()-(0,a.Z)(window).scrollTop()/n)}return e}})},922:function(t,e,n){"use strict";var i=n(308),r=n(923);function o(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=Boolean(window&&window.viewerConfig&&window.viewerConfig.homepageRewrite),u=Boolean(window&&window.viewerConfig&&window.viewerConfig.isDownloadedSource)&&!l,d=function(t){return i.ZP.allowedLambdaExt.includes(t)},h=function(t){return Boolean(!u&&t&&t.lambdaUrl&&d(t.type))},f=function(t,e){switch(e){case"video":case"slideshow":return Boolean(!u&&t&&t.url&&d(t.type));case"background":return Boolean(!u&&t&&(t.url||t.finalUrl)&&d(t.type));default:return Boolean(!u&&t&&(t.unscaledUrl||t.unscaledOptimizedUrl)&&d(t.type))}},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.height,r=t.cropX,o=t.cropY,a=t.cropW,s=t.cropH,c=t.originalW,l=void 0===c?9999:c,u=t.originalH,d=void 0===u?9999:u,h=t.quality,f=t.ext,p=t.scale,g=t.animationScale,m=t.isStretched,y=t.dpr,v=t.lossless,b=t.nearLossless,w=t.fit,S=void 0===w?"none":w,x=window.devicePixelRatio||i.ZP.minDpr,k=y||(x<i.ZP.minDpr?i.ZP.minDpr:x),_=[],O=Math.max(p||1,1),C=g||1;if(!m&&e){var P=Math.min(Math.round(e*k*O*C),l);P<l&&_.push("w=".concat(P))}if(!m&&!e&&n){var T=Math.min(Math.round(n*k*O*C),d);T<d&&_.push("h=".concat(T))}if(h&&_.push("q=".concat(h)),f&&_.push("e=".concat(f)),v&&_.push("ll=true"),b&&_.push("nll=true"),"auto"===S&&e&&n){var L=Math.min(Math.round(n*k*O*C),d);L<d&&_.push("h=".concat(L))}return void 0!==r&&void 0!==o&&a&&s&&(a!==l||s!==d)&&(_.push("cX=".concat(r)),_.push("cY=".concat(o)),_.push("cW=".concat(a)),_.push("cH=".concat(s))),_.length?"?".concat(_.join("&")):""},g=function(t){return t?"".concat(t.lambdaUrl||function(t){if(!t)return"";try{var e=new URL(t.unscaledUrl||t.url||t.unscaledOptimizedUrl||t.finalUrl);return"".concat(i.ZP.readymag_lambda_host).concat(e.pathname)}catch(t){return""}}(t)):""},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";var n=s({},e);return f(t)&&!h(t)&&(n.cropX=void 0,n.cropY=void 0,n.cropW=e.originalW,n.cropH=e.originalH),r.Z.isSupported("webp")&&(n.ext="webp","png"===t.type&&(n.nearLossless=!0)),"".concat(g(t)).concat(p(n))};e.Z={allowedLambdaExt:d,useLambdaUrl:h,useLambdaUrlOldProjects:f,useLqipUrl:function(t){return Boolean(t&&t.lqipUrl||h(t))},getLambdaUrl:m,getOriginalLambdaUrl:g,getLambdaParams:p,getSrcset:function(t,e){var n=e.dprSet,i=void 0===n?[2,3]:n,r=o(e,["dprSet"]),a=[];(i||[]).forEach((function(e){r.dpr=e;var n=m(t,r);n!==a[a.length-1]&&a.push({dpr:e,url:n})}));var s=a.map((function(t){return"".concat(t.url," ").concat(t.dpr,"x")}));return s.length>1?s.join(", "):void 0},getLqipUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";if(t.lqipUrl)return t.lqipUrl;var n=s({dpr:1,width:i.ZP.lqipWidth,quality:i.ZP.lqipQuality},e);return m(t,n)},getThumbnailUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";var n=s({width:i.ZP.THUMB_SIZE,height:i.ZP.THUMB_SIZE,quality:i.ZP.THUMB_QUALITY,fit:"auto"},e);return m(t,n)}}},348:function(t,e,n){"use strict";n.d(e,{folderImagesPath:function(){return i},findImagePath:function(){return r},is2X:function(){return o}});var i="undefined"!=typeof window&&window.chunkURL||"https://d1id5eheivyv24.cloudfront.net/d7d85c5f/dist/",r=function(t){return"".concat(i,"img").concat(t.substring(1))},o="undefined"!=typeof window&&window.devicePixelRatio>=2},1021:function(t,e,n){"use strict";var i=n(313);window.iconSVGCache=[];var r=function(){};r.prototype={MAX_ICON_CACHE_SIZE:30,generateShapeSVG:function(t,e,n,r,o){var a,s=1e5,c=e.get("bg_color")||e.viewport_default&&e.viewport_default.bg_color,l=this.getRGBA(c||"ffffff",e.get("bg_opacity")),u=this.getRGBA(e.get("color"),e.get("opacity"));if("ellipse"==(o="hotspot"===e.get("type")?o||e.get("pin_type"):o||e.get("tp"))){var d=n/2,h=r/2,f=e.get("borders");a=L("ellipse",{cx:d,cy:h,rx:d,ry:h},l,u,f=Math.min(f,d,h),e.id+"_"+t,e.get("opacity"))}if("rectangle"==o||"polygon"==o){"hotspot"===e.get("type")&&(u=l="rgba(0, 0, 0, 0)");var p,g="rectangle"==o?4:e.get("sides"),m=(f=e.get("borders"),e.get("radius")||0),y=e.get("radius_rect_independent"),v={tlRadius:e.get("radius_rect_tl")||0,trRadius:e.get("radius_rect_tr")||0,blRadius:e.get("radius_rect_bl")||0,brRadius:e.get("radius_rect_br")||0},b=function(t,e,n,i){for(var r,o,a,c=2*Math.PI/t,l=Math.PI/2-(t%2==1?0:c/2),u=[],d=999999,h=-999999,f=999999,p=-999999,g=0;g<t;g++)r=l+g*c,o=.5+.5*Math.cos(r),a=.5-.5*Math.sin(r),u.push({x:o,y:a}),o<d&&(d=o),o>h&&(h=o),a<f&&(f=a),a>p&&(p=a);for(g=0;g<t;g++)u[g].x=(u[g].x-d)*(e/(h-d)),u[g].y=(u[g].y-f)*(n/(p-f)),u[g].x=Math.round(u[g].x*s)/s,u[g].y=Math.round(u[g].y*s)/s;return u}(g,n,r),w=function(t){if(!t)return 99999;for(var e,n=99999,i=t.length,r=0;r<i;r++){var o=t[r].x-t[(r+1)%i].x,a=t[r].y-t[(r+1)%i].y;(e=Math.sqrt(o*o+a*a))<n&&(n=e),t[r].side=e}return n}(b);a=L("path",{path:"rectangle"===o&&y?function(t,e){var n=t.tlRadius,i=t.trRadius,r=t.brRadius,o=t.blRadius,a=e.trTop,s=e.tlTop,c=e.tlLeft,l=e.blLeft,u=e.blBottom,d=e.brBottom,h=e.brRight,f=e.trRight;return"M ".concat(a.x," 0\n        L ").concat(s.x," ").concat(s.y,"\n        A ").concat(n," ").concat(n," 0 0 0 ").concat(c.x," ").concat(c.y,"\n        L ").concat(l.x," ").concat(l.y,"\n        A ").concat(o," ").concat(o," 0 0 0 ").concat(u.x," ").concat(u.y,"\n        L ").concat(d.x," ").concat(d.y,"\n        A ").concat(r," ").concat(r," 0 0 0 ").concat(h.x," ").concat(h.y,"\n        L ").concat(f.x," ").concat(f.y,"\n        A ").concat(i," ").concat(i," 0 0 0 ").concat(a.x," ").concat(a.y,"\n        Z")}(v,p=function(t,e,n){var i=e.trRadius,r=e.tlRadius,o=e.blRadius,a=e.brRadius;return i=Math.min(i,n/2),r=Math.min(r,n/2),o=Math.min(o,n/2),a=Math.min(a,n/2),{trTop:{x:t[0].x-i,y:t[0].y},tlTop:{x:t[1].x+r,y:t[1].y},tlLeft:{x:t[1].x,y:t[1].y+r},blLeft:{x:t[2].x,y:t[2].y-o},blBottom:{x:t[2].x+o,y:t[2].y},brBottom:{x:t[3].x-a,y:t[3].y},brRight:{x:t[3].x,y:t[3].y-a},trRight:{x:t[0].x,y:t[0].y+i}}}(b,v,w)):function(t,e,n){if(!t)return"";for(var i=t.length,r="",o=0;o<i;o++){var a=2*o+1,s=(2*o+2)%(2*i);if(r+=0==o?"M":"L",e){r+=e[a].x+" "+e[a].y+" ";var c=e[a].x-e[s].x,l=e[a].y-e[s].y,u=1/((c*c+l*l)/4)-1/(n*n),d=Math.sqrt(1/u);r+="A"+d+" "+d+" 0 0 0 "+e[s].x+" "+e[s].y+" "}else r+=t[o].x+" "+t[o].y+" "}return r+" Z "}(b,(p=function(t,e,n){if(!t)return{};if(e<=1e-4)return{};var i=[],r=t.length;e=Math.min(e,n/2);for(var o=0;o<r;o++){var a,c,l,u,d=t[o],h=t[(o+1)%r],f=t[o].side,p=(h.x-d.x)/f,g=(h.y-d.y)/f;a=d.x+p*e,c=d.y+g*e,l=h.x-p*e,u=h.y-g*e,a=Math.round(a*s)/s,c=Math.round(c*s)/s,l=Math.round(l*s)/s,u=Math.round(u*s)/s,i.push({x:a,y:c}),i.push({x:l,y:u})}return{points:i,radius:e}}(b,m,w)).points,p.radius)},l,u,f,e.id+"_"+t,e.get("opacity"))}if("line"==o){f=e.get("weight"),h=Math.round(r/2)+(f%2==1?.5:0);var S,x=[13*f/3,2*f/3].join(" "),k=f>1?[.001,5*f/3].join(" "):[1,2].join(" "),_=.5===f?"crispEdges":"auto",O="dotted"==e.get("stroke")?f/2:0;if(S="M"+O+" "+h+" L"+n+" "+h,"solid"==e.get("stroke")&&(a='<path d="'.concat(S,'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(f,'" shape-rendering="').concat(_,'" />')),"double"==e.get("stroke")){var C="M"+O+" "+(h+f)+" L"+n+" "+(h+f);a='<path d="'.concat("M"+O+" "+(h-f)+" L"+n+" "+(h-f),'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(f,';" shape-rendering="').concat(_,'"/>'),a+='<path d="'.concat(C,'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(f,'" shape-rendering="').concat(_,'"/>')}"dotted"==e.get("stroke")&&(a='<path d="'.concat(S,'" stroke-linecap="round" stroke-dasharray="').concat(k,'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(f,'"  shape-rendering="').concat(_,'"/>')),"dashed"==e.get("stroke")&&(a='<path d="'.concat(S,'" stroke-dasharray="').concat(x,'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(f,'" shape-rendering="').concat(_,'"/>'))}if("icon"==o){var P=this.iconData||this.current_icon_data;if(!P)return null;var T=P.$svg.clone();return T.css({width:"100%",height:"100%"}),l=this.getRGBA(c,1),T.find("*:not(.fixed-color)").each((function(){var t=(0,i.Z)(this);t.css({fill:"","fill-opacity":""}),t.get(0).removeAttribute("fill"),t.get(0).removeAttribute("fill-opacity")})),T.get(0).setAttribute("fill",l),T.get(0).setAttribute("fill-opacity",e.get("bg_opacity")),T}return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+n+'px" height="'+r+'px">'+a+"</svg>";function L(t,e,n,i,r,o,a){var s="mask_"+o,c="clip_"+o,l="",u=2;return r>0&&a>.99&&(u=1),l="<defs>",r>0&&(l+='<mask id="'+s+'">',"path"==t&&(l+='<path d="'+e.path+'" style="fill:white; stroke:black; stroke-width:'+r*u+'"/>'),"ellipse"==t&&(l+='<ellipse cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'" style="fill:white; stroke:black; stroke-width:'+r*u+'"/>'),l+="</mask>"),l+='<clippath id="'+c+'">',"path"==t&&(l+='<path d="'+e.path+'"/>'),"ellipse"==t&&(l+='<ellipse cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'"/>'),l+="</clippath>",l+="</defs>","path"==t&&(l+='<path mask="url(#'+s+')" d="'+e.path+'" style="fill:'+n+'; stroke:none; stroke-width:0; pointer-events: visiblePainted;"/>'),"ellipse"==t&&(l+='<ellipse mask="url(#'+s+')" cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'" style="fill:'+n+'; stroke:none; stroke-width:0; pointer-events: visiblePainted;"/>'),0==r||("path"==t&&(l+='<path clip-path="url(#'+c+')" d="'+e.path+'" style="fill:none; stroke:'+i+"; stroke-width:"+2*r+'; pointer-events: visiblePainted;"/>'),"ellipse"==t&&(l+='<ellipse clip-path="url(#'+c+')" cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'" style="fill:none; stroke:'+i+"; stroke-width:"+2*r+'; pointer-events: visiblePainted;"/>')),l}},getRGBA:function(t,e){if(0==e)return"none";var n=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)];return e>.99?"rgb("+n[0]+","+n[1]+","+n[2]+")":"rgba("+n[0]+","+n[1]+","+n[2]+", "+e+")"}},e.Z=r},967:function(t,e,n){"use strict";var i=n(313),r=n(322),o=function(){};o.prototype={text_viewport_attributes:["style","class","data-size-leading-linked","data-size-leading-ratio","data-anchor-link-pos"],switchTextToViewport:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if("default"===e)return t;var n=(0,i.Z)("<div>").html(t),o=this.text_viewport_attributes,a=this;n.find("*").each((function(){var t=(0,i.Z)(this);r.Z.each(o,(function(n){var i=a.getViewportAttributeName(n,e),r=a.getViewportAttributeName(n,"default"),o=t.attr(i),s=t.attr(n);t.removeAttr(r),s&&t.attr(r,s),o&&("empty"===o?t.removeAttr(n):t.attr(n,o))}))}));var s=n.html();return n.empty().remove(),s},getViewportAttributeName:function(t,e){var n=t+"-"+e;return/^data/.test(n)||(n="data-"+n),n}},e.Z=o},349:function(t,e,n){"use strict";n.d(e,{Z:function(){return x}});var i,r,o,a,s=n(313),c=n(322),l=n(308),u=n(341),d=n(344),h=n(350);function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var g=(f(a={},"template-export-pdf-typekit-substitution-news-gothic",(0,h.f)(i||(i=p(['\n<style id="export-pdf-typekit-substitution">\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic Bold Italic/c6f4e54e-1d69-4559-b813-e2fc4ff29160-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic Bold Italic/c6f4e54e-1d69-4559-b813-e2fc4ff29160-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic Bold/9aab62b7-bc6f-405a-ad75-227bcf89d9dc-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic Bold/9aab62b7-bc6f-405a-ad75-227bcf89d9dc-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic Italic/6327ba72-bfd5-4038-9658-e3a4a95a5c98-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic Italic/6327ba72-bfd5-4038-9658-e3a4a95a5c98-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 400;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic/915b0ec4-cd16-40de-883e-1d77c3d07840-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic/915b0ec4-cd16-40de-883e-1d77c3d07840-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 400;\n}\n</style>\n'])))),f(a,"template-export-pdf-typekit-substitution-georgia-pro",(0,h.f)(r||(r=p(['\n<style id="export-pdf-typekit-substitution">\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Black/4ec59c91-f66b-4751-8456-e114e9e14673-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Black/4ec59c91-f66b-4751-8456-e114e9e14673-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 900;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Bold Italic/6f283590-c3c2-416a-95c2-ca67d04aa929-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Bold Italic/6f283590-c3c2-416a-95c2-ca67d04aa929-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Bold/6f633c58-c751-4d08-9cea-2b27f74f37de-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Bold/6f633c58-c751-4d08-9cea-2b27f74f37de-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Italic/e3bc0ad4-bdaa-4467-82a0-d90f697b7266-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Italic/e3bc0ad4-bdaa-4467-82a0-d90f697b7266-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 400;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro SemiBold Italic/0e025df5-ba54-4bbb-84b4-c5b337a5b55b-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro SemiBold Italic/0e025df5-ba54-4bbb-84b4-c5b337a5b55b-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 600;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro SemiBold/60fe12ce-0223-4a9a-8e5c-b3e7bd381bc4-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro SemiBold/60fe12ce-0223-4a9a-8e5c-b3e7bd381bc4-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 600;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro/b97bef32-c0cb-4ad3-b724-1204d229731c-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro/b97bef32-c0cb-4ad3-b724-1204d229731c-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 400;\n}\n</style>\n'])))),f(a,"template-export-pdf-typekit-substitution-nitti",(0,h.f)(o||(o=p(['\n<style id="export-pdf-typekit-substitution">\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Nitti Light Italic/15aba0ec-4ceb-49e2-985c-a95134a60aed-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Nitti Light Italic/15aba0ec-4ceb-49e2-985c-a95134a60aed-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 300;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Nitti Light/6fd7c5e9-3131-4cb6-a99e-da74343b1253-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Nitti Light/6fd7c5e9-3131-4cb6-a99e-da74343b1253-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 300;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Nitti Medium/9054f262-2d2d-480f-9360-4560f110243b-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Nitti Medium/9054f262-2d2d-480f-9360-4560f110243b-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 500;\n}\n</style>\n'])))),a),m=n(309),y=n(351);function v(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var w=3500,S={STYLE_PREFIXES:{paragraph:{viewer:[".used-fonts-test p",".rmwidget.text div p"],editor:["p"],constructor:[".used-fonts-test p",".block.block-text .text-preview p",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h1":{viewer:[".used-fonts-test h1",".rmwidget.text div h1"],editor:["h1"],constructor:[".used-fonts-test h1",".block.block-text .text-preview h1",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h2":{viewer:[".used-fonts-test h2",".rmwidget.text div h2"],editor:["h2"],constructor:[".used-fonts-test h2",".block.block-text .text-preview h2",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h3":{viewer:[".used-fonts-test h3",".rmwidget.text div h3"],editor:["h3"],constructor:[".used-fonts-test h3",".block.block-text .text-preview h3",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h4":{viewer:[".used-fonts-test h4",".rmwidget.text div h4"],editor:["h4"],constructor:[".used-fonts-test h4",".block.block-text .text-preview h4",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},link:{viewer:[".rmwidget.text div a"],editor:["a"],constructor:[".block.block-text .text-preview a",".controls .control.text_link .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .link-style .style-caption"]}},fontsShortList:{},generateStylesStr:function(t){var e,n,i,r="",o=t.style,a=t.indentation?"\t":"",s=";"+(t.lineBreaks?"\n":""),c=t.attrPrefix||"";return"paragraph"==t.tp&&(r+=a+"font-family: "+l("font-family")+s,r+=a+"font-style: "+l("font-style")+s,r+=a+"font-weight: "+l("font-weight")+s,r+=a+"font-size: "+d(l("font-size"))+s,r+=a+"letter-spacing: "+d(l("letter-spacing"))+s,r+=a+"line-height: "+d(l("line-height"))+s,r+=a+"text-align: "+l("text-align")+s,r+=a+"text-decoration: "+l("text-decoration")+s,r+=a+"text-transform: "+l("text-transform")+s,r+=a+"color: "+u.default.getRGBA(l("color"),l("opacity")/100)+s,r+=a+"padding-top: "+d(l("padding-top"))+s,r+=a+"padding-right: "+d(l("padding-right"))+s,r+=a+"padding-bottom: "+d(l("padding-bottom"))+s,r+=a+"padding-left: "+d(l("padding-left"))+s),"link"==t.tp&&(r+=a+"text-decoration: none"+s,r+=a+"color: "+u.default.getRGBA(l("color"),l("opacity")/100)+s,"none"!=l("u-style")?(e=u.default.getRGBA(l("u-color"),l("u-opacity")/100),n=parseInt(l("u-size"),10),i=parseInt(l("u-offset"),10)+n,r+=a+"padding-bottom: "+d(Math.max(i,0))+s,"solid"==l("u-style")&&(r+=a+"background: linear-gradient(to right, "+e+" 0%, "+e+" 100%)"+s,r+=a+"background-size: 1px "+d(n)+s),"dotted"==l("u-style")&&(r+=a+"background: linear-gradient(to right, "+e+" 0%, "+e+" 50%, transparent 50%,transparent 100%)"+s,r+=a+"background-size: "+d(2*n)+" "+d(n)+s),"dashed"==l("u-style")&&(r+=a+"background: linear-gradient(to right, "+e+" 0%, "+e+" 66.6666%, transparent 66.6666%,transparent 100%)"+s,r+=a+"background-size: "+d(3*n)+" "+d(n)+s),r+=i<0?a+"background-position: 0 "+(100+i)+"%"+s:a+"background-position: 0 100%"+s,r+=a+"background-repeat: repeat-x"+s):r+=a+"background: none"+s),r;function l(t){var e=o[c+t];return"inherit"==e&&c&&(e=o[t]),e}function d(t){return t+(/px/i.test(t)?"":"px")}},generateCSS:function(t,e,n,i,r){if(i){var o=this.STYLE_PREFIXES[t][e],a=(r=r||{},this),u="";c.Z.each(i,(function(n){if("paragraph"==t&&(n.tag&&"p"!==n.tag&&l.ZP.AVAILABLE_TEXT_TAGS.includes(n.tag)&&(o=[].concat(a.STYLE_PREFIXES["header-"+n.tag][e],a.STYLE_PREFIXES[t][e]).filter((function(t,e,n){return n.indexOf(t)===e}))),u+=c.Z.map(o,(function(t){return t+"."+n._name})).join(",\n")+" {\n",u+=a.generateStylesStr({tp:t,style:n,indentation:!0,lineBreaks:!0}),u+="}\n\n"),"link"==t){if(r.forcePseudoState&&r.forcePseudoClass==n._name)u+=c.Z.map(o,(function(t){return t+"."+n._name})).join(",\n")+" {\n",u+=a.generateStylesStr({tp:t,style:n,attrPrefix:r.forcePseudoState+"-",indentation:!0,lineBreaks:!0}),u+="}\n\n";else u+=c.Z.map(o,(function(t){return t+"."+n._name})).join(",\n")+" {\n",u+=a.generateStylesStr({tp:t,style:n,indentation:!0,lineBreaks:!0}),u+="}\n\n",c.Z.find(c.Z.keys(n),(function(t){return/^current/.test(t)}))&&(u+=c.Z.map(o,(function(t){return t+".current."+n._name})).join(",\n")+" {\n",u+=a.generateStylesStr({tp:t,style:n,attrPrefix:"current-",indentation:!0,lineBreaks:!0}),u+="}\n\n"),u+=c.Z.map(o,(function(t){return t+".hovered."+n._name})).join(",\n")+" {\n",u+=a.generateStylesStr({tp:t,style:n,attrPrefix:"hover-",indentation:!0,lineBreaks:!0}),u+="}\n\n";u+=c.Z.map(o,(function(t){return t+"."+n._name+" *"})).join(",\n")+" {\n",u+="\tcolor: inherit !important;\n",u+="\ttext-decoration: none !important;\n",u+="}\n\n"}})),n=n||document;var d="text_styles_"+t+"_"+e;(0,s.Z)("#"+d,n).remove();var h=n.createElement("style");h.type="text/css",h.id=d,h.className="text_styles",h.appendChild(n.createTextNode(u)),n.getElementsByTagName("head")[0].appendChild(h)}},appendFontsCssToDocument:function(t,e){window.TypekitPreview&&window.TypekitPreview.setup&&window.TypekitPreview.setup({auth_id:l.ZP.TYPEKIT_ID,auth_token:l.ZP.TYPEKIT_TOKEN,default_subset:"all"});var n,i=(0,s.Z)("link.fonts, style.fonts"),r=[],o=[],a={};i.each((function(){var t=(0,s.Z)(this),e=t.attr("data-provider"),n=t.attr("data-fonts-and-variations").split("||");c.Z.each(n,(function(t){r.push(e+"|"+t)}))})),c.Z.each(t.fonts,(function(t){c.Z.each(t.used_variations||t.variations,(function(e){o.push(t.provider+"|"+t.css_name+"|"+e)}))})),n=c.Z.difference(o,r);var d={};c.Z.each(n,(function(t){var e=t.split("|"),n=e[0],i=e[1],r=e[2],o=n+"|"+i;d[o]=d[o]||[],d[o].push(r)}));var h=[];c.Z.each(d,(function(t,e){var n=e.split("|"),i=n[0],r=n[1],o=t;h.push({provider:i,css_name:r,variations:o})})),c.Z.each(h,(function(e){var n,i=e.provider,r=e.css_name+"|"+e.variations.join("||"+e.css_name+"|");if(a[i]||(a[i]=[]),"google"==i){var o=s.Z.map(e.variations,(function(t){return 100*(t.substr(1,1)-0)+("n"==t.substr(0,1)?"":"italic")}));n={fontAndVariations:r,data:e.css_name.split(" ").join("+")+":"+o.join(",")}}if("webtype"==i&&(n={fontAndVariations:r,data:e.css_name+":"+e.variations.join(",")}),"typetoday"==i&&(n={fontAndVariations:r,data:e.css_name+":"+e.variations.join(",")}),"custom"==i){var l=c.Z.findWhere(t.fonts,{provider:"custom",css_name:e.css_name});l&&l.css_url&&(n={fontAndVariations:r,data:{css_name:e.css_name,css_url:l.css_url,signed_css_url:l.signed_css_url}})}"typekit"==i&&(n={fontAndVariations:r,data:{id:e.css_name,variations:e.variations}}),n&&a[i].push(n)}));var f=RM.screenshot&&"true"==u.default.queryUrlGetParam("pdf");f&&this.loadTypekitSubstitutionFonts(a.typekit);var p=c.Z.has(a,"custom");function g(t){var e=(0,s.Z)("<link>").attr("type","text/css").attr("rel","stylesheet").attr("href",t);(0,s.Z)("head").append(e)}c.Z.each(a,(function(n,i){var r,o,a,d,h,p,m="custom"==i?1:"google"==i?22:n.length,y=Math.ceil(n.length/m),v=0,b=function(){if(o=r*m,a=Math.min((r+1)*m,n.length),d=n.slice(o,a),h=c.Z.pluck(d,"data"),p=c.Z.pluck(d,"fontAndVariations"),(0,s.Z)("link, style").addClass("existing"),"google"==i&&(S=(l.ZP.IS_FILE_PROTOCOL?"http://":"//")+"fonts.googleapis.com/css?family=",w=h.join("%7C"),"&subset=latin,vietnamese,khmer,cyrillic-ext,greek-ext,greek,devanagari,latin-ext,cyrillic",g(S+w+"&subset=latin,vietnamese,khmer,cyrillic-ext,greek-ext,greek,devanagari,latin-ext,cyrillic")),"typekit"==i){if("edit"==t.version&&!f)try{window.TypekitPreview&&window.TypekitPreview.load(h)}catch(t){}"published"==t.version&&t.typekit_url&&("undefined"!=typeof Typekit&&(Typekit=void 0),(0,s.Z)("style.typekit-kit").remove(),s.Z.getScript(t.typekit_url,(function(t,e,n){try{Typekit.load({active:function(){var t=(0,s.Z)("style").filter((function(t,e){return/typekit/i.test(e.innerHTML)}));t.addClass("typekit-kit"),b(t)}})}catch(t){}})))}var y;function b(t){t.addClass("fonts").attr("data-id",u.default.generateUUID()).attr("data-provider",i).attr("data-fonts-and-variations",p.join("||"))}"webtype"==i&&(S=RM.common.isDownloadedSource?l.ZP.readymag_host:"",(0,s.Z)('link.fonts[data-provider="webtype"]').length||(x=window.ServerData&&window.ServerData.fonts&&window.ServerData.fonts.webtype,g(S+x))),"typetoday"!=i||f||(S=RM.common.isDownloadedSource?l.ZP.readymag_host:"",(0,s.Z)('link.fonts[data-provider="typetoday"]').length||(x=window.ServerData&&window.ServerData.fonts&&window.ServerData.fonts.typetoday,g(S+x))),"custom"==i&&(k=h[0].signed_css_url||h[0].css_url,/^\/api\/fonts\//i.test(k)?(y=(0,s.Z)("<style>").attr("type","text/css"),(0,s.Z)("head").append(y),s.Z.get(k,(function(t){y.text(t),++v>=n.length&&c.Z.isFunction(e)&&e()}))):g(k)),b((0,s.Z)("link:not(.existing), style:not(.existing)")),(0,s.Z)("link, style").removeClass("existing")};for(r=0;r<y;r++){var w,S,x,k;b()}})),!p&&c.Z.isFunction(e)&&e()},loadTypekitSubstitutionFonts:function(t){t&&t.length&&c.Z.each(t,(function(t){var e,n=t.data.id,i=(t.data.variations,(e=(e=(e=c.Z.findWhere(S.fontsShortList.typekit,{id:n}))&&e.browse_info)&&e.classification)&&e.length&&e[0]||"sans-serif"),r={"sans-serif":"news-gothic",decorative:"news-gothic",handmade:"news-gothic",blackletter:"news-gothic",script:"news-gothic","slab-serif":"news-gothic",serif:"georgia-pro",monospaced:"nitti"},o=(0,g["template-export-pdf-typekit-substitution-"+(r[i]||r["sans-serif"])])({id:n});(0,s.Z)("head").append(o)}))},appendFontsCssToIFrame:function(t){var e=(0,s.Z)("link.fonts, style.fonts"),n=(0,s.Z)("link.fonts, style.fonts",t),i={},r=(0,s.Z)("head",t);n.each((function(){i[(0,s.Z)(this).attr("data-id")]=!0})),e.each((function(){var t=(0,s.Z)(this),e=this.href;if(!i[t.attr("data-id")]){var n=t.clone();e&&Modernizr.safari&&n.attr("href",e+"&edit_mode=true"),n.appendTo(r)}}))},isFastFontLoadCheckAvailable:function(){return Boolean(document.fonts&&window.Promise)},fastWaitForFontLoad:function(t,e,n){var i,r=this;if(document.fonts){var o=n+(e?" "+e:"")+" 12px "+t,a=function t(e,n){var i,r=v(document.fonts);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.family===e)return o.loaded}}catch(t){r.e(t)}finally{r.f()}return n>Date.now()-w?new Promise((function(i){setTimeout((function(){i(t(e,n))}),50)})):Promise.resolve(!1)},s=!document.fonts.check(o),c=(0,m._)("viewer.enhancedFontLoadCheck")&&!s?document.fonts.load(o).then((function(){return a(t,Date.now())})):document.fonts.load(o).then((function(){return document.fonts.check(o)?o:r.fontLoadedTimeoutCheck(o)})),l=new window.Promise((function(t,e){setTimeout(e.bind(null,o),w)}));i=window.Promise.race([c,l])}else i=window.Promise.reject();return i},exactWaitForFontLoad:function(t,e,n,i){var r=n+" "+e+" 12px "+t+", Arial",o=n+" "+e+" 12px Arial",a=(0,s.Z)('<canvas width="20" height="20"></canvas>'),c=a[0],l=c.getContext("2d"),u="",d="",h=+new Date;a.appendTo("body").css({position:"absolute",left:0,top:"-999px"}),function s(){var f=+new Date-h>1e4,p=function(){var t=r;l.clearRect(0,0,20,20),u||(u=c.toDataURL("image/png"),t=o);l.font=t,l.fillStyle="000",l.fillText("a1-&q",0,20);var e=c.toDataURL("image/png");d||(d=e);return e!=u&&e!=d}();if(p||f)return l=void 0,a.remove(),void i(p,t,e,n);setTimeout(s,100)}()},fontLoadedTimeoutCheck:function(t){var e=Date.now(),n=function n(i,r){var o=Date.now()-e;document.fonts.check(t)?i(t):o<w?setTimeout(n.bind(null,i,r),100):r(t)};return new window.Promise((function(t,e){n(t,e)}))},getHotspotTextModels:function(t){var e=[];return t.widgets_collection&&t.widgets_collection.length&&(e=t.widgets_collection.filter((function(e){return"text"==e.get("type")&&t.get("wids").indexOf(e.get("_id"))>-1}))),t._nestedWidgetsJSON&&t._nestedWidgetsJSON.length?e=c.Z.filter(t._nestedWidgetsJSON,(function(t){return"text"==t.type})):t.wids&&t.wids.length&&(e=c.Z.filter(t.wids,(function(t){return"text"==t.type}))),e},getUsedFontsFromWidgetsModels:function(t){var e={},n={},i={},r={},o={},a={},s=t.models;function u(t,e){return"function"==typeof t.get?t.get(e):t[e]}for(var h=0;h<s.length;h++){var f=s[h];if("slideshow"==u(f,"type")&&u(f,"text_style")){var p=u(f,"text_style");p["font-family"]&&p["font-weight"]&&p["font-style"]&&(n[p["font-family"]+"|"+p["font-style"]+"|"+p["font-weight"]]=1)}if("button"==u(f,"type")){u(f,"font-family")&&u(f,"font-weight")&&u(f,"font-style")&&(i[u(f,"font-family")+"|"+u(f,"font-style")+"|"+u(f,"font-weight")]=1);for(var g=0;g<d.ZP.viewports.length;g++){var m=f["viewport_"+d.ZP.viewports[g].name];m&&(i[m["font-family"]+"|"+m["font-style"]+"|"+m["font-weight"]]=1)}}if(u(f,"type")===l.ZP.ecommerceCartBlockName&&u(f,"font-family")&&u(f,"font-weight")&&u(f,"font-style")&&(o[u(f,"font-family")+"|"+u(f,"font-style")+"|"+u(f,"font-weight")]=1),u(f,"type")===l.ZP.addToCartBlockName&&(u(f,"font-family")&&u(f,"font-weight")&&u(f,"font-style")&&(a[u(f,"font-family")+"|"+u(f,"font-style")+"|"+u(f,"font-weight")]=1),u(f,"attrs-font-family")&&u(f,"attrs-font-weight")&&u(f,"attrs-font-style")&&(a[u(f,"attrs-font-family")+"|"+u(f,"attrs-font-style")+"|"+u(f,"attrs-font-weight")]=1)),"form"==u(f,"type")){var v=u(f,"style-"+u(f,"style")+"-fields"),b=c.Z.clone(u(f,"style-"+u(f,"style")+"-button-default"));c.Z.isEmpty(b)||(b["font-family"]="inherit"==b["font-family"]?v["font-family"]:b["font-family"],b["font-style"]="inherit"==b["font-style"]?v["font-style"]:b["font-style"],b["font-weight"]="inherit"==b["font-weight"]?v["font-weight"]:b["font-weight"]),r[v["font-family"]+"|"+v["font-style"]+"|"+v["font-weight"]]=1,b&&(r[b["font-family"]+"|"+b["font-style"]+"|"+b["font-weight"]]=1);for(var w=0;w<d.ZP.viewports.length;w++){var x=f["viewport_"+d.ZP.viewports[w].name];x&&(v=x["style-"+x.style+"-fields"],b=c.Z.clone(x["style-"+x.style+"-button-default"]),c.Z.isEmpty(b)||(b["font-family"]="inherit"==b["font-family"]?v["font-family"]:b["font-family"],b["font-style"]="inherit"==b["font-style"]?v["font-style"]:b["font-style"],b["font-weight"]="inherit"==b["font-weight"]?v["font-weight"]:b["font-weight"]),v&&(r[v["font-family"]+"|"+v["font-style"]+"|"+v["font-weight"]]=1),b&&(r[b["font-family"]+"|"+b["font-style"]+"|"+b["font-weight"]]=1))}}"text"===u(f,"type")&&3===u(f,"version")&&c.Z.extend(e,y.Z.getTextWidgetFontsList(f,t.activeViewports)),"text"===u(f,"type")&&u(f,"text")&&3!==u(f,"version")&&c.Z.extend(e,this.scanTextForFontsAndVariationsRaw(u(f,"text"),u(f,"version"),t.excludeUnusedDefault,t.activeViewports)),"hotspot"==u(f,"type")&&c.Z.each(this.getHotspotTextModels(f),c.Z.bind((function(n){var i=u(n,"text");i&&c.Z.extend(e,this.scanTextForFontsAndVariationsRaw(i,u(n,"version"),t.excludeUnusedDefault))}),this))}var k=c.Z.extend({},e,n,i,r,o,a),_={},O={bold:700,normal:400};c.Z.each(k,(function(t,e){var n=e.split("|"),i=n[0],r=n[1].toLowerCase(),o=n[2].toLowerCase(),a=o in O?O[o]:o;_[i]=_[i]||[],_[i].push("variable"===a?"v":("italic"===r?"i":"n")+Math.floor(a/100))}));var C,P=[],T=this;return c.Z.each(_,(function(e,n){(C=c.Z.findWhere(S.fontsShortList.webtype,{name:n}))?P.push({provider:"webtype",css_name:C.name,name:C.name,variations:C.variations,used_variations:T.calcBrowserUsedVariation(e,C.variations)}):(C=c.Z.findWhere(S.fontsShortList.typetoday,{name:n}))?P.push({provider:"typetoday",css_name:C.name,name:C.name,variations:C.variations,used_variations:T.calcBrowserUsedVariation(e,C.variations)}):(C=c.Z.findWhere(S.fontsShortList.google,{family:n}))?P.push({provider:"google",css_name:C.family,name:C.family,variations:C.variations,used_variations:T.calcBrowserUsedVariation(e,C.variations)}):(C=c.Z.findWhere(S.fontsShortList.typekit,{id:n}))?P.push({provider:"typekit",css_name:C.id,name:C.name,variations:C.variations,used_variations:T.calcBrowserUsedVariation(e,C.variations)}):t.includeCustom&&(C=c.Z.findWhere(t.customList,{css_name:n}))&&P.push({provider:"custom",css_name:C.css_name,css_url:C.css_url,name:C.name,variations:C.variations,used_variations:T.calcBrowserUsedVariation(e,C.variations)})})),P.filter((function(t){return t.used_variations&&t.used_variations.length>0}))},getUsedParagraphStylesFromWidgetsModels:function(t){var e,n,i="";for(e=0;e<t.length;e++)"text"==s(n=t[e],"type")&&s(n,"text")&&(i+=s(n,"text")),"hotspot"==s(n,"type")&&c.Z.each(this.getHotspotTextModels(n),c.Z.bind((function(t){i+=s(t,"text")||""}),this));var r=[],o=RM.constructorRouter.workspace.mag.edit_params.get("paragraph_styles");if(i)for(e=0;e<o.length;e++){var a=o[e];i.indexOf(a._name)>=0&&r.push(a)}function s(t,e){return"function"==typeof t.get?t.get(e):t[e]}return r},getUsedLinkStylesFromWidgetsModels:function(t){var e,n,i="";for(e=0;e<t.length;e++)"text"==s(n=t[e],"type")&&s(n,"text")&&(i+=s(n,"text")),"hotspot"==s(n,"type")&&c.Z.each(this.getHotspotTextModels(n),c.Z.bind((function(t){i+=s(t,"text")||""}),this));var r=[],o=RM.constructorRouter.workspace.mag.edit_params.get("link_styles");if(i)for(e=0;e<o.length;e++){var a=o[e];i.indexOf(a._name)>=0&&r.push(a)}function s(t,e){return"function"==typeof t.get?t.get(e):t[e]}return r},sortFontsByProvider:function(t){var e=[],n=[],i={};return c.Z.each(t,(function(t){"typekit"===t.provider&&e.push({id:t.css_name,variations:t.used_variations}),"custom"===t.provider&&n.push(t.css_name);var r="used_"+t.provider+"_fonts";i[r]=i[r]||[],"custom"===t.provider?i[r].push(t.css_name):i[r].push({id:t.css_name,variations:t.used_variations})})),{typekit:e,custom:n,dictionary:i}},scanTextForFontsAndVariationsRaw:function(t,e,n,i){var r,o,a,l,u,h,f,p,g,m,y={},v={},b=[],w=document.defaultView.getComputedStyle;for(r=0;r<d.ZP.viewports.length;r++)if(t.split("-"+d.ZP.viewports[r].name).length>1){if(i&&-1===i.indexOf(d.ZP.viewports[r].name))continue;b.push(d.ZP.viewports[r].name)}(a=(0,s.Z)(".used-fonts-test")).length||(a=(0,s.Z)("<div>").addClass("used-fonts-test").css({position:"absolute",display:"none !important",left:-9999,width:999}).appendTo("body")),a.removeClass("v1 v2").addClass("v"+(e||1)),(o=a[0]).innerHTML=t,h=(u=o.querySelectorAll("span,p,a")).length;var S,x=(l=w(o,null)).fontFamily+"|"+l.fontStyle+"|"+l.fontWeight;y[x]=1;for(var k=!1,_=function(t){return-1!==c.Z.findIndex(t.childNodes,(function(t){return t.nodeType===Node.TEXT_NODE&&t.textContent.replace(/\r?\n/g,"").length}))},O=c.Z.filter(u,_),C=0;C<O.length;C++)S=(l=w(O[C],null)).fontFamily+"|"+l.fontStyle+"|"+l.fontWeight,k=k||S===x,y[l.fontFamily+"|"+l.fontStyle+"|"+l.fontWeight]=1;var P=_(o);for(r=0;r<b.length;r++)if("default"!=(g=b[r])){for(C=0;C<h;C++)(f=(m=u[C]).getAttribute("data-style-"+g))&&("empty"==f?m.removeAttribute("style"):m.setAttribute("style",f)),(p=m.getAttribute("data-class-"+g))&&("empty"==p?m.removeAttribute("class"):m.setAttribute("class",p)),_(m)&&(S=(l=w(m,null)).fontFamily+"|"+l.fontStyle+"|"+l.fontWeight,k=k||S===x,y[S]=1);r<b.length-1&&(o.innerHTML=t,h=(u=o.querySelectorAll("span,p,a")).length)}return!n||k||P||delete y[x],c.Z.each(y,(function(t,e){var n=e.split("|"),i=n[0],r=n[1].toLowerCase(),o=n[2].toLowerCase();i=(i=i.split(",")[0]).replace(/'|"/g,""),o=(o=(o=o.replace(/normal/g,"400")).replace(/regular/g,"400")).replace(/bold/g,"700"),v[i+"|"+r+"|"+o]=1})),v},calcBrowserUsedVariation:function(t,e){for(var n={},i=0;i<t.length;i++){for(var r,o,a,s=t[i],l=s.substr(1,1),u=s.substr(0,1),d=99999,h="",f=0;f<e.length;f++)r=e[f].substr(1,1)-0,o=e[f].substr(0,1),l<4&&(a=10*Math.abs(r-l)+(o==u?0:1e3)+(r<=l?0:100)),l>5&&(a=10*Math.abs(r-l)+(o==u?0:1e3)+(r>=l?0:100)),4==l&&(a=5==r?0+(o==u?0:1e3)+0:10*Math.abs(r-l)+(o==u?0:1e3)+(r<=l?0:100)),5==l&&(a=10*Math.abs(r-l)+(o==u?0:1e3)+(r<=l?0:100)),l==r&&u==o&&(a=0),a<d&&(d=a,h=e[f]);n[h]=1}return c.Z.keys(n).filter((function(t){return!!t}))},getVeryShortList:function(t){var e={google:[],typekit:[],webtype:[],typetoday:[]};return c.Z.each(t,(function(t){var n,i=t.provider;switch(i){case"google":n={provider:i,family:t.name,variations:t.variations};break;case"typekit":n={provider:i,id:t.css_name,name:t.name,variations:t.variations};break;case"webtype":case"typetoday":n={provider:i,name:t.name,variations:t.variations}}e[i]&&e[i].push(n)})),e},getCustomVariationNameByFVD:function(t,e){return(S.fontCustomVariationNames[t]||{})[e]},setShortList:function(t){S.fontsShortList=t||{},S.fontCustomVariationNames={},c.Z.each(S.fontsShortList,(function(t,e){c.Z.each(t,(function(t){if(t.custom_variation_names){var n;switch(e){case"google":n=t.family;break;case"typekit":case"webtype":case"typetoday":n=t.name}S.fontCustomVariationNames[n]=t.custom_variation_names}}))}))}};window.fontsShortListCallback=function(t){S.setShortList(t)};var x=S},931:function(t,e,n){"use strict";var i=n(313),r=n(341),o={getVideoAspectFromPoster:function(t,e){var n={abort:function(){d.onload=null,d.onerror=null}},r={aspect_poster:null,aspect_real:null};if(!t)return e(r),n;var o,a,s,c,l,u,d=new Image;return d.onload=function(){l=d.width,u=d.height,s=200,c=Math.floor(s*(u/l)),o=(0,i.Z)('<canvas id="qqq" width="200" height="'+c+'"></canvas>').css("visibility","hidden").appendTo("body"),(a=o[0].getContext("2d")).drawImage(d,0,0,s,c);var t,n,h=a.getImageData(0,0,s,c),f=0,p=0,g=0,m=0;for(n=0;n<=c/2;n++){if(w(n,"row").isContrast){(n<=1||w(n-1,"row").isBlack||w(n-2,"row").isBlack)&&(f=n);break}}for(n=c-1;n>c/2;n--){if(w(n,"row").isContrast){(n>=c-2||w(n+1,"row").isBlack||w(n+2,"row").isBlack)&&(p=c-1-n);break}}var y=Math.max(f,p),v=0;if(!y){for(t=0;t<=100;t++){if(w(t,"column").isContrast){(t<=1||w(t-1,"column").isBlack||w(t-2,"column").isBlack)&&(g=t);break}}for(t=199;t>100;t--){if(w(t,"column").isContrast){(t>=198||w(t+1,"column").isBlack||w(t+2,"column").isBlack)&&(m=199-t);break}}v=Math.max(m,g)}y>c/3&&(y=0),v>s/3&&(v=0);var b=l/u;function w(t,e){var n,i,r,o,a,l="row"==e?s:c,u=0,d=0;for(n=0;n<l;n++)i=("row"==e?t*s+n:n*s+t)<<2,u+=(r=h.data[i])+(o=h.data[i+1])+(a=h.data[i+2]),r<20&&o<20&&a<20&&d++;return{isBlack:(u/=3*l)<5&&l-d<3,isContrast:d<l/2}}y?b=s/(c-2*y):v&&(b=(s-2*v)/c),o.remove(),r.aspect_poster=l/u,r.aspect_real=b,e(r)},d.onerror=function(){e(r)},d.src="/api/proxy/?url="+encodeURIComponent(t),n},setVideoPosition:function(t){if(t.aspect_poster&&t.$media&&t.$media.length){var e=t.$container.css("width"),n=t.$container.css("height");if(/px/.test(e+n))e=parseInt(e),n=parseInt(n);else{if(!t.mag)return;var i=t.mag.getContainerSizeCached();e=i.width,n=i.height}var r,o,a=t.aspect_poster,s=t.aspect_real||a,c=t.controls_remove?5:0,l=e+2*c,u=n+2*c,d=l,h=u;if(a)l/u>s?o=(r=l)/s:r=(o=u)*s,a<s?h=(d=r)/a:d=(h=o)*a;if("vimeo"==t.provider.toLowerCase()&&t.controls_remove){var f=50-(h-u)/2,p=46-(d-l)/2;if(f>0||p>0){var g=(h+2*f)/h,m=(d+2*p)/d,y=Math.max(g,m);d*=y,h*=y}}if("youtube"==t.provider.toLowerCase()&&t.controls_remove){var v=103-(h-u)/2;v>0&&(d=(h+=2*v)*a)}var b=-c-(d-l)/2,w=-c-(h-u)/2;t.$media.css({left:b,top:w,width:d,height:h})}},getHighResVideoThumbnail:function(t){if(!t.provider||!t.thumbnail_url)return Promise.resolve(t.thumbnail_url||"");function e(t,e){return t.replace(/(\/)(\w*default)(\.\w+$)/i,"$1"+e+"$3")}function n(t,e){return t.replace(/(\/)(\w+_)(\d+x\d+|\d+)(\.\w+$)/i,"$1$2"+e+"$4")}var i,r=[];switch(t.provider.toLowerCase()){case"vimeo":r.push({url:n(t.thumbnail_url,"1280"),width:1280}),r.push({url:n(t.thumbnail_url,"640"),width:640});break;case"youtube":r.push({url:e(t.thumbnail_url,"maxresdefault"),width:1280}),r.push({url:e(t.thumbnail_url,"sddefault"),width:640})}return(i=r)&&i.length?new window.Promise((function(e){var n=0;!function e(r,o,a){(function(t,e){var n=new Image,i=new window.Promise((function(t){function i(){n.removeEventListener("load",r),n.removeEventListener("error",o)}function r(){t(e<=n.naturalWidth),i()}function o(){t(!1),i()}n.addEventListener("load",r),n.addEventListener("error",o)}));return n.src=t,i})(r,o).then((function(o){o?a(r):++n<i.length?e(i[n].url,i[n].width,a):a(t.thumbnail_url)}))}(i[n].url,i[n].width,e)})):Promise.resolve(t.thumbnail_url)},getEmbedData:function(t,e,n){return i.Z.ajax({type:"GET",url:"/api/proxy/",dataType:"json",data:{url:/oembed/i.test(t)?t:this.getEmbedUrl(t)},success:function(t){t.url=t.url&&r.default.toHttps(t.url),t.thumbnail_url=t.thumbnail_url&&r.default.toHttps(t.thumbnail_url),"function"==typeof e&&e(t)},error:function(t,e,i){"abort"!==e&&"function"==typeof n&&n(t,e,i)},global:!1})},getEmbedUrl:function(t){if(this.isVimeo(t))return"https://vimeo.com/api/oembed.json?url="+encodeURIComponent(t);var e=o.getYoutubeIdFromUrl(t);return e?"https://www.youtube.com/oembed?format=json&url="+encodeURIComponent("https://www.youtube.com/watch?v="+e):""},getYoutubeIdFromUrl:function(t){var e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);if(e&&11===e[2].length)return e[2];return(e=t.match(/.*(youtu.*\&v=)([^#\&\?]*).*/))&&11===e[2].length?e[2]:null},getVimeoIdFromUrl:function(t){var e=t.match(/(video\/)(\w+)(_\d+x\d+|_\d+)(\.\w+$)/i);return e&&e[2]?e[2]:null},getVideoProvider:function(t){return this.isVimeo(t)?"Vimeo":this.isYoutube(t)?"YouTube":""},isVimeo:function(t){return/vimeo\.com\/.+/.test(t)},isYoutube:function(t){return!!this.getYoutubeIdFromUrl(t)}};e.Z=o},1008:function(t,e){"use strict";function n(t){return new n.fn.init(t)}var i={},r={};Array.prototype.slice;function o(t,e,n){if(!n.contentWindow.postMessage)return!1;var i=JSON.stringify({method:t,value:e});n.contentWindow.postMessage(i,"*")}function a(t){var e,n;try{n=(e=JSON.parse(t.data)).event||e.method}catch(t){}if(!/^https?:\/\/player.vimeo.com/.test(t.origin))return!1;var o=e.value,a=e.data,s=""===s?null:e.player_id,c=function(t,e){return e?i[e]&&i[e][t]:i[t]}(n,s),l=[];return"ready"!==n||r[s]||(r[s]=!0),!!c&&(void 0!==o&&l.push(o),a&&l.push(a),s&&l.push(s),l.length>0?c.apply(null,l):c.call())}function s(t,e,n){n?(i[n]||(i[n]={}),i[n][t]=e):i[t]=e}function c(t){return!!(t&&t.constructor&&t.call&&t.apply)}n.fn=n.prototype={element:null,init:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.element=t,this.element?this:null},api:function(t,e){if(!this.element||!t)return!1;var n=this.element,i=""!==n.id?n.id:null,r=c(e)?null:e,a=c(e)?e:null;return a&&s(t,a,i),o(t,r,n),this},addEvent:function(t,e){if(!this.element)return!1;var n=this.element,i=""!==n.id?n.id:null;return s(t,e,i),"ready"!=t?o("addEventListener",t,n):"ready"==t&&r[i]&&e.call(null,i),this},removeEvent:function(t){if(!this.element)return!1;var e=this.element,n=function(t,e){if(e&&i[e]){if(!i[e][t])return!1;i[e][t]=null}else{if(!i[t])return!1;i[t]=null}return!0}(t,""!==e.id?e.id:null);"ready"!=t&&n&&o("removeEventListener",t,e)}},n.fn.init.prototype=n.fn,window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent("onmessage",a),e.Z=n},997:function(t,e,n){"use strict";n.d(e,{Z:function(){return S}});var i,r=n(313),o=n(337),a=n.n(o),s=n(322),c=n(350);var l,u,d,h,f,p=(l={},u="template-viewer-widget",d=(0,c.f)(i||(h=['\n\t<div class="rmwidget" data-id="<%-id%>"></div>\n'],f||(f=h.slice(0)),i=Object.freeze(Object.defineProperties(h,{raw:{value:Object.freeze(f)}})))),u in l?Object.defineProperty(l,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[u]=d,l),g=n(349),m=n(697),y=n(723),v=n(728),b=n(341),w=1,S=a().View.extend({template:p["template-viewer-widget"],initialize:function(t,e,n){return s.Z.bindAll(this),this.updateWidgetData(t,e,n),"default"!==e.getPageViewport()&&"bottom"!==this.sticked&&(this.sticked=void 0),this.destroyed=!1,this.$document=(0,r.Z)(document),this._id=this._id||w++,this},render:function(){return this.makeBox("some-widget-class"),this.rendered=!0,this.checkLink(),this},redraw:function(){return this.checkLink(),this},updatePage:function(t){var e=this.page;(!e||t&&e.num!==t.num)&&(this.page=t,this.redraw())},canRenderImmediately:function(){return Boolean(this.DO_NOT_WAIT_FOR_PRELOAD)},widgetIsLoaded:function(){this.loaded||this.destroyed||(this.loaded=!0,this.started&&this.start(),this.trigger("loaded"))},isValid:function(){return!0},hasFontsToLoad:function(){return!1},seamlessFontsShow:function(t,e){this._id;if(g.Z.isFastFontLoadCheckAvailable()&&!RM.screenshot&&!this.insideHotspot&&this.hasFontsToLoad()){e();this.makeSureFontsLoaded().then((function(e){window.requestAnimationFrame(t)})).catch((function(e){t()}))}},makeSureFontsLoaded:function(){var t=this.page.getFontsVariations([this],!0),e=[];return s.Z.each(t,(function(t){try{var n=g.Z.fastWaitForFontLoad(t.fontFamily,t.fontWeight,t.fontStyle);e.push(n)}catch(t){console.error("Font checking error",t)}})),window.Promise.all(e)},hasAnimation:function(){return Boolean(this.getAnimations().find((function(t){return!y.Z.isEmpty(t)})))},hasLoadAnimation:function(){return Boolean(this.getAnimations().find((function(t){return"load"===t.type})))},start:function(){return this.started=!0,this},stop:function(){return this.started=!1,this},hide:function(){return this.stop(),this.$el.hide(),this.wasHidden=!0,this.trigger("hidden"),this},show:function(){return this.$el.show(),this.start(),this.wasHidden=!1,this.trigger("shown"),this},destroy:function(){return this.stop(),this.destroyed=!0,this.trigger("destroyed"),delete this.animationObj,this.$el.off(),this.remove()},BringToTopZ:function(){if(this.animationObj){var t=this.animationObj.getAnimationContainer();this.animationObj.resetTimeout&&clearTimeout(this.animationObj.resetTimeout),this.animationObj.savedAnimationContainerZIndex||(this.animationObj.savedAnimationContainerZIndex=t.css("z-index")),t.css("z-index",99999+this.z)}this.$el.css("z-index",99999+this.z)},BackToNormalZ:function(){var t=function(){this.animationObj&&this.animationObj.savedAnimationContainerZIndex&&(this.animationObj.getAnimationContainer().css("z-index",this.animationObj.savedAnimationContainerZIndex||this.z),delete this.animationObj.savedAnimationContainerZIndex);delete this.animationObj.resetTimeout}.bind(this);this.animationObj&&this.animationObj.savedAnimationContainerZIndex&&(this.animationObj.resetTimeout&&clearTimeout(this.animationObj.resetTimeout),this.animationObj.resetTimeout=setTimeout(t,200)),this.$el.css("z-index",this.z)},makeBox:function(t){this.setElement(this.template({id:this._id}));var e=this.fixed_position?this.$fixedContainer:this.$pageContainer;this.animationObj&&(e=this.animationObj.getAnimationContainer()),this.$el.appendTo(e).addClass(t).toggleClass("full-width",!!this.is_full_width).toggleClass("full-height",!!this.is_full_height).toggleClass("inside-hotspot",!!this.insideHotspot),this.applyBoxStyle(),(this.is_full_width||this.is_full_height||this.fixed_position||this.sticked)&&this.listenTo(this.page,"resize",this.onPageResize),this.trigger("rendered")},onPageResize:function(){this.applyBoxStyle()},calcBoxStyle:function(t){t=t||{};var e,n={left:this.x,top:this.y,width:this.w,height:this.h,right:"",bottom:"","margin-left":"","margin-top":"","z-index":this.z||1},i=parseInt(this.full_width_margin,10)||0,o=parseInt(this.full_height_margin,10)||0,a=parseInt(this.sticked_margin,10)||0,c=this.ignoreScale?1:this.page.scale,l=this.page.mag.getContainerSizeCached().width,u=l-(0,r.Z)(window).width(),d=this.fixed_position;if(this.angle&&(n.width=Math.round(this.w),n.height=Math.round(this.h),this.angle%90==0&&n.width%2!=n.height%2&&(n.width+=1)),this.is_full_height&&(n.top=-this.page.contentPosition.top+o,d?(n.top=o/c,n.height=(0,r.Z)(window).height()/c-2*o,["nw","w","sw"].indexOf(d)>-1&&(d="nw"),["n","c","s"].indexOf(d)>-1&&(d="n"),["ne","e","se"].indexOf(d)>-1&&(d="ne")):n.height=this.page.pageHeight/c-2*o),this.is_full_width){var h=this.page.mag.getViewportWidth(this.page.pageViewport);if(n.left=-this.page.contentPosition.left+i,n.width=this.page.mag.getContainerSizeCached().width/c-2*i,e=-((n.width-this.page.$content[0].clientWidth)/2).toFixed(3),m.Z.isOn(this.page.pageViewport,h,this.mag.viewOpts)&&this.page.mag.getContainerSizeCached().width>this.mag.viewOpts.scalewidth&&(Modernizr.msie11?(e=-(l-this.page.$content[0].clientWidth)/2-u/2,n.left=e/c):Modernizr.firefox?(n.width=n.width+1,n.left=e-1):n.left=e),d){if(n.left=i,"horizontal"==this.page.viewerType){var f=this.page.$scrollWrapper,p=f.width()-f[0].clientWidth;n.width-=p/c}["nw","n","ne"].indexOf(d)>-1&&(d="nw"),["w","c","e"].indexOf(d)>-1&&(d="w"),["sw","s","se"].indexOf(d)>-1&&(d="sw")}}if(this.sticked){p=0;"horizontal"==this.page.viewerType&&(p=this.page.$scrollWrapper.width()-this.page.$scrollWrapper[0].clientWidth),"left"==this.sticked&&(n.left=-this.page.contentPosition.left/c+a),"right"==this.sticked&&(n.left=this.page.mag.getContainerSizeCached().width/c-a-this.w-this.page.contentPosition.left/c-p/c),"top"==this.sticked&&(n.top=-this.page.contentPosition.top/c+a),"bottom"==this.sticked&&(n.top=this.$pageContainer.height()-a-this.h+this.page.contentPosition.top/c)}if(t.calcBBox){d&&(n.left*=c,n.top*=c,n.width*=c,n.height*=c),n.sinAngle=Math.sin(-(this.angle||0)*Math.PI/180),n.cosAngle=Math.cos(-(this.angle||0)*Math.PI/180);var g=v.Z.calcBoundingBox(n,d);return n.width=g.bb_width,n.height=g.bb_height,n.left=g.bb_left,n.top=g.bb_top,d&&s.Z.extend(n,b.default.getFixedPositionCSS(d,n,1)),{dimensions:n}}if(d){var y=this.page.mag.getViewportWidth(this.page.pageViewport);s.Z.extend(n,b.default.getFixedPositionCSS(d,n,m.Z.normalize(c,"transform",this.page.pageViewport,y,this.mag.viewOpts))),m.Z.isOn(this.page.pageViewport,y,this.mag.viewOpts)&&m.Z.isCSSZoom()&&(n.zoom=c)}var w={rotate:this.angle?this.angle+"deg":"",scaleX:this.flip_h?-1:1,scaleY:this.flip_v?-1:1};if(d){var S=this.page.mag.getViewportWidth(this.page.pageViewport),x=m.Z.normalize(c,"transform",this.page.pageViewport,S,this.mag.viewOpts);w.scaleX*=x,w.scaleY*=x}return Math.abs(w.scaleX-1)<1e-6&&(w.scaleX=""),Math.abs(w.scaleY-1)<1e-6&&(w.scaleY=""),{dimensions:n,transform:w}},applyBoxStyle:function(){var t=this.calcBoxStyle();this.animationObj&&(t=this.animationObj.modifyWidgetPosition(t)),this.$el.css(t.dimensions);var e=s.Z.map(t.transform,(function(t,e){return t?e+"("+t+")":""})).join(" ");b.default.applyTransform(this.$el,r.Z.trim(e))},calcDistsToPageVisibleBounds:function(){var t,e=this.page.mag.getContainerSizeCached(),n=m.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.viewOpts)&&m.Z.isCSSZoom()?m.Z.getBox(this.$el[0],this.page.scale):this.$el[0].getBoundingClientRect(),i=this.page.mag.isPreview?this.page.mag.$mag_container[0].getBoundingClientRect():{top:0,left:0},r=(n.top+n.height/2-i.top)/this.page.scale,o=(e.height-(n.top+n.height/2-i.top))/this.page.scale,a=(n.left+n.width/2-i.left)/this.page.scale,s=(e.width-(n.left+n.width/2-i.left))/this.page.scale;if(this.fixed_position){var c=this.page.$el[0].getBoundingClientRect(),l=(n.top+n.height/2-c.top)/this.page.scale,u=(c.height-(n.top+n.height/2-c.top))/this.page.scale;t={left:Math.max(0,a),right:Math.max(0,s),top:Math.max(0,Math.min(r,l)),bottom:Math.max(0,Math.min(o,u))}}else{var d=this.page.contentPosition.left/this.page.scale,h=this.page.contentPosition.top/this.page.scale,f=this.x+this.w/2,p=this.y+this.h/2;l=p+h,u=this.page.contentHeight-p+h;t={left:Math.max(0,f+d),right:Math.max(0,this.page.pageWidth-f+d),top:Math.max(0,Math.min(r,l)),bottom:Math.max(0,Math.min(o,u))}}return t},checkLink:function(){var t={};if(this.clickLink){this.clickLink=this.page.mag.matchSameDomainLink(this.clickLink);var e=/^(.*):\/\/[^\s$.?#].[^\s]*$/i.test(this.clickLink)||/^mailto\:/i.test(this.clickLink)||/^tel\:/i.test(this.clickLink),n=/^__rm_goback$/i.test(this.clickLink),i=this.mailchimpMatcher.test(this.clickLink),o=this.anchorRegexp.test(this.clickLink),a=this.shareRegexp.test(this.clickLink),c=this.clickLink,l=this.clickTarget||"_blank",u=e?"external-link":n?"goback-link":"maglink";if(i&&(u="mailchimp-link"),o&&(u="anchor-link"),a&&(u="share-link"),!e){var d=c;/^back\sto\stop$/i.test(c)&&(d=this.page._id);var h=this.page.mag.getPageNum(d);c=h&&this.page.mag.getPageUri?"/"+this.page.mag.getPageUri(d):"javascript:void(0)";h?l="":c="",d==this.page._id&&(u+=" back-to-top",this.is_global&&(u+=" current"))}if(n&&(c="javascript:void(0)"),i){c="javascript:void(0)";var f=this.clickLink.match(this.mailchimpMatcher)[1];t["data-mailchimp"]=f}if(o){c="javascript:void(0)",t["data-anchor-link-pos"]=this.anchor_link_pos;var p=s.Z.findWhere(this.mag.pages,{_id:this.clickPage})||this.page;t["data-page-uri"]=p.uri||p.num}if(a){c="javascript:void(0)";var g=this.clickLink.match(this.shareRegexp);t["data-share-provider"]=g[1],t["data-share-type"]=g[2]}if(0!=c.indexOf("mailto")&&0!=c.indexOf("tel")&&"maglink"!=u||(l=""),c){s.Z.extend(t,{class:u,href:c,target:l});var m=this.$el.parent("a");m.length?m.attr(t):(m=(0,r.Z)("<a>").attr(t),this.$el.wrap(m)),!e&&RM.screenshot&&(m=this.$el.parent("a")).removeAttr("href")}}},updateWidgetData:function(t,e,n){s.Z.extend(this,t,t.params),this.page=e,this.mag=this.page.mag,this.$pageContainer=n||this.page.$content,this.x=this.x||0,this.y=this.y||0},getAnimations:function(){return y.Z.normalizeAnimations(this.animation)},getAnimationTriggers:function(t){var e=this.getAnimations().find((function(e){return e.UUID===t}));return y.Z.normalizeAnimationTriggers(e&&e.trigger)},isGlobal:function(){return!!this.is_global},isAbove:function(){return!!this.is_above}})},1004:function(t,e,n){"use strict";n.r(e);var i=n(313),r=n(322),o=n(931),a=n(997),s=n(1005),c=n(1006),l=n(922),u=n(1007),d=a.Z.extend({render:function(){return this.rendered=!0,this.page.on("resize",this.onResize,this),this.template=s.Z["template-viewer-widget-background"],this.setElement(this.template({data:this})),this.$el.prependTo(this.page.$fixedBgContainer),this.$picture=this.$(".picture-background"),this.$video=this.$(".video-background"),this.$videoContainer=this.$(".video-container"),this.$slideshow=this.$(".slideshow-container"),this.$slideshowPreload=this.$(".slideshow-preload"),this.picture&&"picture"===this.selectedType?this.renderPicture():r.Z.isEmpty(this.video)||"video"!==this.selectedType?this.slideshow&&"slideshow"===this.selectedType?this.renderSlideshow():this.widgetIsLoaded():this.renderVideo(),this},start:function(){return this.started=!0,"video"===this.selectedType&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&(this.videoWidget.start(),this.onResize()),"slideshow"!==this.selectedType||RM.screenshot||!this.rendered||this.destroyed||!this.slideshowWidget||this.slideshowWidget.isAnimationRunning||this.slideshowWidget.startAnimationLoop(),this},stop:function(){return this.started=!1,"video"===this.selectedType&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&this.videoWidget.stop(),"slideshow"===this.selectedType&&!RM.screenshot&&this.rendered&&!this.destroyed&&this.slideshowWidget&&this.slideshowWidget.isAnimationRunning&&this.slideshowWidget.stopAnimationLoop(),this},destroy:function(){return this.page.off("resize",this.onResize,this),"video"===this.selectedType&&(this.videoWidget&&this.videoWidget.destroy(),this.videoWidget=null),"slideshow"===this.selectedType&&(this.slideshowWidget&&this.slideshowWidget.destroy(),this.slideshowWidget=null),a.Z.prototype.destroy.apply(this,arguments)},hasVideoBG:function(){return!(RM.screenshot||"video"!==this.selectedType||!this.video||!this.video.url)},onResize:function(){!this.destroyed&&this.$videoContainer&&this.video&&o.Z.setVideoPosition({mag:this.page.mag,$container:this.$videoContainer,$media:this.$videoContainer.children(),provider:this.video.provider_name,aspect_poster:this.video.aspect_poster||this.videoWidget&&this.videoWidget.aspect_poster,aspect_real:this.video.aspect_real,controls_remove:!0})},renderPicture:function(){if(this.picture){var t=l.Z.useLambdaUrl(this.picture)||l.Z.useLambdaUrlOldProjects(this.picture,"background")?l.Z.getLambdaUrl(this.picture):this.picture.finalUrl||this.picture.effectUrl||this.picture.unscaledOptimizedUrl||this.picture.url;(0,i.Z)("<img/>").on("load",r.Z.bind((function(){this.$picture.css({"background-image":"url("+t+")"}),RM.screenshot?setTimeout(this.widgetIsLoaded,200):this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded).attr("src",t)}else this.widgetIsLoaded()},renderSlideshow:function(){this.slideshowWidget=new c.Z({data:this.slideshow,container:this.$slideshow,preloadContainer:this.$slideshowPreload,name:this.page.cid}),RM.screenshot?(this.slideshowWidget.render(),this.slideshowWidget.on("loaded",function(){this.widgetIsLoaded()}.bind(this))):(this.slideshowWidget.render(!this.page.isCurrent()),this.widgetIsLoaded())},renderVideo:function(){this.video.id=this.id,this.video.mute=this.mute,this.video.loop=this.loop,this.video.controls=!1,this.videoWidget=new u.default(this.video,this.page,this.$videoContainer),this.videoWidget.on("loaded",r.Z.bind((function(){this.widgetIsLoaded(),this.onResize()}),this)),this.videoWidget.on("playStarted",r.Z.bind((function(){this.trigger("videoBGStarted")}),this)),this.videoWidget.render()}});e.default=d},1009:function(t,e,n){"use strict";n.r(e);var i=n(313),r=n(997),o=n(1010),a=n(324);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=r.Z.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,antialiasRotation:!0,mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){var t;return this.preloadIconImage({default:!0}),this.makeBox("widget-button"),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.seamlessFontsShow(function(){this.$el.removeClass("fonts-pending")}.bind(this),function(){this.$el.addClass("fonts-pending")}.bind(this)),t={model:this,$container:this.$el,environment:"viewer",mag:this.page&&this.page.mag,block:null},this.buttonWidget=new o.Z(t),this.preloadIconImage({hover:!0}),this.$el.on(a.Z.isDesktop?"mouseenter":"touchstart",this.onButtonHover),this.$el.on(a.Z.isDesktop?"mouseleave":"touchend",this.onButtonHoverOut),this.$el.on("click",this.onButtonClick),this.checkLink(),RM.screenshot?(this.waitForIconImageLoad(),this.waitForUsedFontsLoad()):this.widgetIsLoaded(),this},renderButtonText:function(t){this.buttonWidget.renderButtonText(t)},renderButtonTextWithSizes:function(t,e){this.buttonWidget.renderButtonTextWithSizes(t,c(c({},this),e))},hasFontsToLoad:function(){return"text"===this.tp||"text_and_icon"===this.tp},onButtonHover:function(){this.$(".common-button").addClass("hovered")},onButtonHoverOut:function(){this.$(".common-button").removeClass("hovered")},onButtonClick:function(t){if(2!==t.which&&!t.metaKey&&!t.ctrlKey){var e=this.$el.closest("a"),n=i.Z.trim(e.attr("href")).match(/\/start-with-template\/(\d+)$/i),r=n&&n[1];r&&RM.viewerRouter&&RM.viewerRouter.createMagFromTemplate&&(t.preventDefault(),RM.viewerRouter.createMagFromTemplate("template-link",r));var o=this.text?this.text:"icon"===this.tp?"icon":"empty";RM.analytics&&RM.analytics.sendEvent("Button Click",o)}},preloadIconImage:function(t){t=t||{};var e=this.tp;if("icon"===e||"text_and_icon"===e){if(t.default)(new Image).src=Modernizr.retina&&this.icon_raster2xUrl||this.icon_rasterUrl;if(t.hover)(new Image).src=Modernizr.retina&&this["hover-icon_raster2xUrl"]||this["hover-icon_rasterUrl"]}},_widgetIsLoaded:function(){this.loaded||this.destroyed||(RM.screenshot?this.iconImageLoaded&&this.fontLoaded&&this.widgetIsLoaded():this.widgetIsLoaded())},waitForIconImageLoad:function(){this.iconImageLoaded=!1,"icon"!==this.tp&&"text_and_icon"!==this.tp||!this.icon_rasterUrl?this.onIconImageLoaded():(0,i.Z)("<img>").on("load",this.onIconImageLoaded).on("error",this.onIconImageLoaded).attr("src",Modernizr.retina?this.icon_raster2xUrl||this.icon_rasterUrl||"":this.icon_rasterUrl||"")},onIconImageLoaded:function(){this.iconImageLoaded=!0,this._widgetIsLoaded()},waitForUsedFontsLoad:function(){this.fontLoaded=!1,this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.onFontLoaded):this.onFontLoaded()},onFontLoaded:function(){this.fontLoaded=!0,this._widgetIsLoaded()},destroy:function(){return this.buttonWidget&&this.buttonWidget.destroy(),this.buttonWidget=null,this.$el.off(a.Z.isDesktop?"mouseenter":"touchstart",this.onButtonHover),this.$el.off(a.Z.isDesktop?"mouseleave":"touchend",this.onButtonHoverOut),this.$el.off("click",this.onButtonClick),r.Z.prototype.destroy.apply(this,arguments)}});e.default=u},1017:function(t,e,n){"use strict";n.r(e);var i=n(313),r=n(322),o=n(997),a=n(341),s=n(308),c=n(697),l=n(945),u=n(922),d=n(723);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=o.Z.extend({antialiasRotation:!0,mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){this.makeBox("widget-picture"),this.canShowPreview()&&this.initPreview(),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.$lqipImg=null,this.useLqip=this.mag&&this.mag.opts&&this.mag.opts.lqip&&(u.Z.useLambdaUrl(this.picture)||u.Z.useLambdaUrlOldProjects(this.picture));var t=this.getPictureUrl();if(/\.gif/.test(t)&&(this.isGIF=!0),this.$el.html(""),this.isVector(t)&&!s.ZP.IS_FILE_PROTOCOL)this.loadVector(t);else{var e=!!(this.border_size>0||this.border_radius>0||this.border_radius_max||this.border_radius_independent&&(this.border_radius_tl>0||this.border_radius_tr>0||this.border_radius_bl>0||this.border_radius_br>0)||this.is_full_width||this.is_full_height),n=void 0===this.opacity?1:this.opacity;if(this.insideHotspot&&this.isGIF){var o=this.scale;(0,i.Z)("<div/>").appendTo(this.$el).css({position:"absolute","background-image":"url("+t+")","background-position":"50% 50%",width:Math.max(Math.round(this.originalW*o),this.w),height:Math.max(Math.round(this.originalH*o),this.h),top:-Math.round(this.cropY*o),left:-Math.round(this.cropX*o)}).attr("url",t)}else e&&(0,i.Z)("<div/>").appendTo(this.$el).addClass("bgpic").css({"background-image":this.useLqip?"":"url(".concat(t,")"),"background-position":(this.fhpos?this.fhpos:50)+"% "+(this.fwpos?this.fwpos:50)+"%","box-shadow":this.border_size>0?"inset 0 0 0 "+this.border_size+"px #"+(this.border_color||"000000"):"none","border-radius":this.getBorderRadius(),opacity:this.useLqip?0:n}).attr("url",this.useLqip?"":t);if(u.Z.useLambdaUrl(this.picture)||u.Z.useLambdaUrlOldProjects(this.picture)){var a=u.Z.getSrcset(this.picture,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.getPictureOptions()));(0,i.Z)("<img/>").attr("srcset",a).attr("alt",this.getAltText()).attr("src",t).addClass("viewable").toggleClass("saveable",!!(e||this.insideHotspot&&this.isGIF)).css("opacity",0).load(r.Z.bind((function(){var e=this.$el.find(".viewable"),i=e&&e.get(0)&&e.get(0).currentSrc||t,o=this.$el.find(".bgpic");o&&o.css({opacity:n,"background-image":"url(".concat(i,")")}).attr("url",i),e&&e.css("opacity",n),this.$lqipImg&&this.$lqipImg.css("opacity",0),r.Z.delay(r.Z.bind((function(){this.$el.css({overflow:"","border-radius":""}),this.$lqipImg&&this.$lqipImg.remove(),this.$lqipImg=null,this.widgetIsLoaded()}),this),200)}),this)).on("error",r.Z.bind((function(){this.$lqipImg&&this.$lqipImg.remove(),this.$lqipImg=null,this.widgetIsLoaded()}),this)).appendTo(this.$el),this.useLqip&&(this.$el.css("overflow","hidden"),(this.border_radius||this.border_radius_max||this.border_radius_independent)&&this.$el.css("border-radius",this.getBorderRadius()),this.$lqipImg=(0,i.Z)("<div/>").addClass("lqip").css({"background-image":"url(".concat(u.Z.getLqipUrl(this.picture,{cropX:this.cropX,cropY:this.cropY,cropW:this.cropW,cropH:this.cropH,originalW:this.originalW,originalH:this.originalH}),")"),"background-position":"50% 50%",opacity:n}).appendTo(this.$el))}else(0,i.Z)("<img/>").appendTo(this.$el).toggleClass("saveable",!!(e||this.insideHotspot&&this.isGIF)).css("opacity",void 0===this.opacity?1:this.opacity).addClass("viewable").load(r.Z.bind((function(){this.$el.find("img").attr("url",t),this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded).attr("srcset",this.getSrcset()).attr("alt",this.getAltText()).attr("src",t)}return this.checkLink(),this},getBorderRadius:function(){return this.border_radius_independent?"".concat(this.border_radius_tl||0,"px ").concat(this.border_radius_tr||0,"px ").concat(this.border_radius_bl||0,"px ").concat(this.border_radius_br||0,"px"):"".concat(this.border_radius_max?"9999":this.border_radius||0,"px")},canShowPreview:function(){var t=Boolean(this.getAnimations().find((function(t){return"click"===t.type&&t.steps&&t.steps.length}))),e=!!this.clickLink;return this.preview_enabled&&!t&&!e},isValid:function(){return Boolean(this.picture&&(this.picture.type||this.picture.unscaledUrl||this.picture.finalUrl||this.picture.editedVectorUrl||this.picture.url))},isVector:function(t,e){var n=t||this.picture&&this.picture.url;return"svg"===(e||this.picture&&this.picture.type)||n&&0===r.Z.last(n.split(".")).indexOf("svg")},start:function(){return this.started=!0,Modernizr.safari&&this.isGIF&&this.$el.flashClass("fix-safari-gif",100),this},getPictureOptions:function(){var t=this.getAnimations().reduce((function(t,e){return Math.max(t,d.Z.maxScaleAnimation(e))}),0);return{width:this.w,height:this.h,cropX:this.cropX,cropY:this.cropY,cropW:this.cropW,cropH:this.cropH,originalW:this.originalW,originalH:this.originalH,scale:c.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.opts)?this.page.scale:1,animationScale:t&&t/100,isStretched:this.is_full_width||this.is_full_height}},getPictureUrl:function(){return this.picture?u.Z.useLambdaUrl(this.picture)||u.Z.useLambdaUrlOldProjects(this.picture)?u.Z.getLambdaUrl(this.picture,this.getPictureOptions()):this.picture.finalUrl&&0===r.Z.last(this.picture.finalUrl.split(".")).indexOf("svg")?this.picture.finalUrl:(t=c.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.opts)?this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.final2xUrl||this.picture.finalUrl:Modernizr.retina&&(window.devicePixelRatio>=3&&(this.picture.final3xUrl||this.picture.unscaledOptimizedUrl)||this.picture.final2xUrl||this.picture.unscaledOptimizedUrl)||this.picture.finalUrl,(this.is_full_width||this.is_full_height)&&(t=this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.final2xUrl||this.picture.finalUrl),t||this.picture.effectUrl||this.picture.editedVectorUrl||this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.url):"";var t},getAltText:function(){return this.picture&&this.alt?r.Z.escape(this.alt):void 0},getSrcset:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.picture)return[];if(!this.originalW)return[];if(this.isGIF)return[];if(c.Z.isOn(this.page.pageViewport,this.mag.getViewportWidth(this.page.pageViewport),this.mag.viewOpts))return[];if(this.getAnimations().length)return[];if(RM.screenshot)return[];if(this.picture.finalUrl&&0===r.Z.last(this.picture.finalUrl.split(".")).indexOf("svg"))return[];var e=Math.floor(this.w),n=[{url:this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl,size:this.originalW},{url:this.picture.final2xUrl&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl),size:3*e},{url:this.picture.final2xUrl,size:2*e},{url:this.picture.finalUrl,size:e}];if(n=n.filter(function(t){return!!t.url&&this.originalW>=t.size}.bind(this)).map((function(t){return"".concat(t.url," ").concat(t.size,"w")})),!t)return n;var i=["".concat(this.picture.finalUrl||this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl," 1x")];return this.picture.final2xUrl&&i.push("".concat(this.picture.final2xUrl," 2x")),this.picture.final2xUrl&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl)&&i.push("".concat(this.picture.final2xUrl&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl)," 3x")),i.concat(n)},loadVector:function(t){this.$el.addClass("svg"),this.svgAjax=i.Z.get(t+"?c",r.Z.bind((function(e){var n=(0,i.Z)(a.default.cleanupSVG((0,i.Z)(e).find("svg").get(0).cloneNode(!0)));n.get(0).removeAttribute("width"),n.get(0).removeAttribute("height"),this.$svg=n;var o=n.get(0).cloneNode(!0);this.$svg.find("title").remove();var s=new Image;(0,i.Z)(s).on("load error",r.Z.bind((function(){(0,i.Z)(s).appendTo(window.document.body).css({width:"100%",height:"100%"});var t=(0,i.Z)(o);t.get(0).setAttribute("viewBox","0 0 "+(0,i.Z)(s).width()+" "+(0,i.Z)(s).height()),t.appendTo(window.document.body);var e=t.get(0).getBBox();this.$svg.get(0).setAttribute("viewBox",e.x+" "+e.y+" "+e.width+" "+e.height),this.$svg.get(0).setAttribute("preserveAspectRatio","xMidYMid meet"),(0,i.Z)(s).remove(),t.remove();var n=(0,i.Z)('<div class="svg-scale-wrapper"></div>');this.$svg.appendTo(n),n.appendTo(this.$el),this.widgetIsLoaded()}),this)),s.src=t}),this)).fail(this.widgetIsLoaded)},initPreview:function(){this.preview=new l.Z({$container:(0,i.Z)("body"),$el:this.$el,picture:this.picture,overlayColor:this.preview_overlay_color,originalW:this.originalW,width:this.w,viewportWidth:this.mag.getViewportWidth(this.page.pageViewport),viewport:this.page.pageViewport,viewerOptions:this.mag.viewOpts}),this.$el.addClass("preview-enabled"),this.$el.on("click",function(){this.preview.render(),this.preview.bindClick()}.bind(this))}});e.default=p},1029:function(t,e,n){"use strict";n.r(e);var i=n(313),r=n(322),o=n(997),a=n(1021),s=n(697),c=n(341),l=n(324),u=o.Z.extend(a.Z.prototype).extend({mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){if(this.makeBox("widget-shape"),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.requiresImageLoad()){if(!this.rasterUrl&&!this.b64url)return this.widgetIsLoaded(),this;this.$el.addClass("icon"),this.antialiasRotation=!0;var t=(0,i.Z)("<img>");t.on("load",r.Z.bind((function(){this.$el.html(t),this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded),t.attr("src",Modernizr.retina||s.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.opts)?this.raster3xUrl||this.raster2xUrl||this.rasterUrl||this.b64url||"":this.rasterUrl||this.b64url||"")}else this.redrawSVG(),this.widgetIsLoaded();return this.checkLink(),this},start:function(){Modernizr.firefox&&!this.requiresImageLoad()&&this.borders>0&&this.redrawSVG()},redrawSVG:function(){var t=this,e={id:t._id,get:function(e){return t[e]}};if("rectangle"!==this.tp||1!==this.opacity||this.radius_rect_independent||l.Z.isDesktop&&0!==this.borders){var n=this.generateShapeSVG("viewer-"+c.default.generateUUID(),e,this.$el.width(),this.$el.height());this.$el.html(n)}else{var i=c.default.hex2rgb(this.bg_color),r=c.default.hex2rgb(this.color);i&&i.push(this.bg_opacity),this.$el.css({"background-color":i?"rgba("+i.join(",")+")":"transparent","border-color":r?"rgb("+r.join(",")+")":"transparent","border-radius":this.radius||0,"border-style":"solid","border-width":this.borders,"box-sizing":"border-box"}),this.$el.addClass("div-instead-of-svg")}},requiresImageLoad:function(){return"icon"===this.tp},canRenderImmediately:function(){return!this.requiresImageLoad()},onPageResize:function(t){o.Z.prototype.onPageResize.apply(this,arguments),this.requiresImageLoad()||this.redrawSVG()}});e.default=u},1023:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return b}});var i,r=n(313),o=n(322),a=n(997),s=n(308),c=n(342),l=n(967),u=n(350);var d,h,f,p,g,m=(d={},h="template-viewer-widget-text",f=(0,u.f)(i||(p=["\n\t<%var cc = column_count == 1 ? 'auto' : column_count;%>\n\t<div style=\" -webkit-nbsp-mode:normal; -webkit-line-break:after-white-space; white-space:<%=isNotChrome ? 'normal' : 'pre-wrap'%>; column-count:<%=cc%>;-webkit-column-count:<%=cc%> !important;-moz-column-count:<%=cc%>;column-gap:<%=column_gap%>px;-webkit-column-gap:<%=column_gap%>px !important;-moz-column-gap:<%=column_gap%>px;background:<%-bg%>\"><%=text%></div>\n"],g||(g=p.slice(0)),i=Object.freeze(Object.defineProperties(p,{raw:{value:Object.freeze(g)}})))),h in d?Object.defineProperty(d,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[h]=f,d),y=n(324),v=n(697),b=a.Z.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,antialiasRotation:!0,mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){this.makeBox("text"),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.bg_color=null==this.bg_color?"ffffff":this.bg_color,this.bg_opacity=null==this.bg_opacity?0:this.bg_opacity,this.column_count=null==this.column_count?1:this.column_count,this.column_gap=null==this.column_gap?16:this.column_gap;var t=[parseInt(this.bg_color.substring(0,2),16),parseInt(this.bg_color.substring(2,4),16),parseInt(this.bg_color.substring(4,6),16)];this.bg_opacity>.99?this.bg="rgb("+t[0]+","+t[1]+","+t[2]+")":this.bg="rgba("+t[0]+","+t[1]+","+t[2]+", "+this.bg_opacity+")",this.text=this.switchTextToViewport(this.text,this.insideHotspot?"default":this.page.pageViewport);var e=this.mag.model.attributes&&this.mag.model.attributes.edit_params&&this.mag.model.attributes.edit_params.paragraph_styles||[],i=r.Z.parseHTML(this.text);i=i.map((function(t){var n=(0,r.Z)(t),i=n.attr("class");if(i){var o=e.find((function(t){return t._name.toLowerCase()===i.toLowerCase()}));if(o&&o.tag&&"p"!==o.tag&&s.ZP.AVAILABLE_TEXT_TAGS.includes(o.tag))return(0,r.Z)("<"+o.tag+' class="'+i+'" style="'+(n.attr("style")||"")+'" />').append(n.contents())[0].outerHTML}return t.outerHTML})).filter((function(t){return t})),this.text=i.join(""),this.isNotChrome=!(Modernizr.webkit&&!Modernizr.safari&&!Modernizr.safari5)&&this.text.includes("justify");var a=m["template-viewer-widget-text"],l=(0,r.Z)(a(this));this.seamlessFontsShow(function(){this.$el.removeClass("fonts-pending")}.bind(this),function(){this.$el.addClass("fonts-pending")}.bind(this)),v.Z.isOn(this.mag.getViewportWidth(this.page.pageViewport))&&v.Z.isCSSZoom()&&this.transformInsteadOfZoom(l),this.$el.append(l),this.$content=l,this.$el.on(y.Z.isDesktop?"mouseenter":"touchstart","a",this.onLinkMouseEnter),this.$el.on(y.Z.isDesktop?"mouseleave":"touchend","a",this.onLinkMouseLeave),this.$el.on("click","a",this.onLinkClick),l.addClass("v"+(this.version||1));var u=this;return this.$el.find("a").each((function(){var t=(0,r.Z)(this),e=t.attr("data-pid"),n=t.attr("href"),i=decodeURIComponent(n),a=/^back\sto\stop$/i,s=e,l=!1;(a.test(n)||a.test(i))&&(s=u.page._id);var d=n&&u.page.mag.matchSameDomainLink(n);if((d==t.attr("href")||s)&&(d=void 0),s=s||d){var h=u.page.mag.getPageNum(s),f=h&&u.page.mag.getPageUri?"/".concat(u.page.mag.getPageUri(s)):"javascript:void(0)";if(h){t.addClass("maglink").attr("target","");var p=document.querySelector("base");if(RM.common.isDownloadedSource&&p){var g=p.getAttribute("href");"/"!==g&&t.attr("href","".concat(g).concat(f.substring(1))).data("link",f)}else t.attr("href",f)}else t.removeAttr("href");s==u.page._id&&(t.addClass("back-to-top"),e&&(u.is_global||u.hasGlobalParent)&&t.addClass("current"))}else if(/^__rm_goback$/i.test(t.attr("href")))t.attr("href","javascript:void(0)").addClass("goback-link");else if(u.mailchimpMatcher.test(t.attr("href"))){var m=t.attr("href").match(u.mailchimpMatcher)[1];t.attr("href","javascript:void(0)").attr("data-mailchimp",m).addClass("mailchimp-link"),c.Z.initMailchimpAPI()}else if(u.shareRegexp.test(t.attr("href"))){var y=t.attr("href").match(u.shareRegexp);t.attr("href","javascript:void(0)").attr("data-share-provider",y[1]).attr("data-share-type",y[2]).addClass("share-link")}else if(u.anchorRegexp.test(t.attr("href"))){t.attr("href","javascript:void(0)").addClass("anchor-link");var v=t.attr("data-page-uri"),b=o.Z.findWhere(u.mag.pages,{_id:v})||u.page;t.attr("data-page-uri",b.uri||b.num)}else l=!0,t.addClass("external-link");!t.attr("href")||0!=t.attr("href").indexOf("mailto")&&0!=t.attr("href").indexOf("tel")||t.attr("target",""),!l&&RM.screenshot&&t.removeAttr("href")})),RM.screenshot&&!this.insideHotspot?this.waitForUsedFontsLoad():this.widgetIsLoaded(),this.$el.find("span.soundcite").each((function(t,e){RM.screenshot||n.e(49).then(n.bind(n,1112)).then((function(t){t.default.createPlayer(e)}))})),v.Z.isDesktopDefault(this.mag.viewport)&&v.Z.isScaleLayout(this.mag.viewOpts)&&v.Z.isCSSZoom()&&this.listenTo(this.page,"resize",this.onScaleChange),this},onScaleChange:function(){this.transformInsteadOfZoom(this.$content)},transformInsteadOfZoom:function(t){var e=this.page.scale;v.Z.isOnForRatio(this.page.pageViewport,e,this.mag.opts)&&v.Z.isCSSZoom()&&t.css({zoom:1/e,transform:"scale(".concat(e,")"),width:"".concat(1/e*100,"%"),height:"".concat(1/e*100,"%"),"transform-origin":"left top"})},isValid:function(){var t=(0,r.Z)("<div>").html(this.text).text();return""!=r.Z.trim(t)},hasFontsToLoad:function(){return!0},start:function(){return this.started=!0,Modernizr.chrome&&this.$el.addClass("force-repaint-content"),this},stop:function(){return this.started=!1,this.$el.removeClass("force-repaint-content"),RM.screenshot||this.destroyed||!this.rendered||this.$el&&this.$el.find("span.soundcite").each((function(t,e){n.e(49).then(n.bind(n,1112)).then((function(t){t.default.pausePlayer(e)}))})),this},destroy:function(){return this.$el&&this.$el.find("span.soundcite").each((function(t,e){n.e(49).then(n.bind(n,1112)).then((function(t){t.default.destroyPlayer(e)}))})),a.Z.prototype.destroy.apply(this,arguments)},waitForUsedFontsLoad:function(){this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.widgetIsLoaded):this.widgetIsLoaded()},checkLink:function(){if(this.is_global||this.hasGlobalParent){var t=this.$el.find("a[data-pid]");t.removeClass("current back-to-top"),this.page&&t.filter('[data-pid="'+this.page._id+'"]').addClass("current back-to-top").removeClass("hovered")}a.Z.prototype.checkLink.apply(this,arguments)},onLinkMouseEnter:function(t){var e=(0,r.Z)(t.currentTarget).attr("data-uuid");this.$el.find("a[data-uuid='"+e+"']").addClass("hovered")},onLinkMouseLeave:function(t){var e=(0,r.Z)(t.currentTarget).attr("data-uuid");this.$el.find("a[data-uuid='"+e+"']").removeClass("hovered")},onLinkClick:function(t){if(2!=t.which&&!t.metaKey&&!t.ctrlKey){var e=(0,r.Z)(t.currentTarget),n=r.Z.trim(e.attr("href")).match(/\/start\-with\-template\/(\d+)$/i),i=n&&n[1];i&&RM.viewerRouter&&RM.viewerRouter.createMagFromTemplate&&(t.preventDefault(),RM.viewerRouter.createMagFromTemplate("template-link",i))}}}).extend(l.Z.prototype)},1007:function(t,e,n){"use strict";n.r(e);var i=n(313),r=n(322),o=n(1008),a=n(997),s=n(931),c=n(341),l=n(324),u=n(922),d=n(723),h=n(697),f=n(348),p=function(t,e){this.playerIsReady=!1,this.queue=[],function(t,e){var n=r.Z.bind(t,e);if(window.youTubeApiIsReady)return n();window.ytQueue.push({cb:n,context:e})}((function(){this.yt=new window.YT.Player(t.id,{events:{onReady:r.Z.bind((function(){this.destroyed||(this.playerIsReady=!0,r.Z.each(this.queue,(function(t){r.Z.isFunction(t.cb)&&t.cb()})))}),this)}})}),this),this.start_time=e&&e.start_time};p.prototype={addToQueue:function(t,e){var n=r.Z.bind(t,e);if(this.playerIsReady)return n();this.queue.push({cb:n,context:e})},on:function(t,e,n){var i=r.Z.bind(e,n||window),o={finish:0,play:1,pause:2};"ready"!==t?this.addToQueue((function(){this.yt.addEventListener("onStateChange",(function(e){o[t]===Number(e.data)&&i()}))}),this):this.addToQueue(i,this)},mute:function(){this.addToQueue((function(){this.yt.mute()}),this)},unMute:function(){this.addToQueue((function(){this.yt.unMute()}),this)},pause:function(){this.addToQueue((function(){this.yt&&this.yt.pauseVideo&&this.yt.pauseVideo()}),this)},play:function(){this.addToQueue((function(){this.yt.playVideo()}),this)},rewind:function(t){this.addToQueue((function(){this.yt.seekTo(t||0)}),this)},loop:function(){this.rewind(this.start_time||.01)},getDuration:function(){return this.duration||(this.duration=this.yt.getDuration()),this.duration},getCurrentTime:function(){return this.yt.getCurrentTime&&this.yt.getCurrentTime()||0},checkLoop:function(){if(this.getDuration()-this.yt.getCurrentTime()<.5)return this.loop(),!0},destroy:function(){window.ytQueue=r.Z.reject(window.ytQueue,(function(t){return t.context===this})),delete this.yt,delete this.queue,this.destroyed=!0}};var g=function(t,e){r.Z.bindAll(this),this.id=t.id,this.start_time=e&&e.start_time};g.prototype={on:function(t,e){(0,o.Z)(this.id).addEvent(t,e)},mute:function(){(0,o.Z)(this.id).api("setVolume",0)},unMute:function(){return!1},pause:function(){(0,o.Z)(this.id).api("pause")},play:function(){(0,o.Z)(this.id).api("play")},rewind:function(t){(0,o.Z)(this.id).api("seekTo",t||0)},loop:function(){this.start_time&&this.rewind(this.start_time)},getCurrentTime:function(t){(0,o.Z)(this.id).api("getCurrentTime",t)},setColor:function(t){(0,o.Z)(this.id).api("setColor",t)},destroy:function(){var t=(0,o.Z)(this.id);t&&(t.removeEvent("ready"),t.removeEvent("play"),t.removeEvent("finish"),t.removeEvent("pause"))}};var m={Vimeo:r.Z.template('<iframe src="https://player.vimeo.com/video/<%=video_id%>?wmode=opaque&api=1&loop=<%=(loop)?1:0%>&muted=<%=(mute)?1:0%>&player_id=video_<%=id%><%=(!real)?"_c":""%>&title=<%=info?1:0%>&byline=<%=info?1:0%>&portrait=<%=info?1:0%>&color=<%=color%>" id="video_<%=id%><%=(!real)?"_c":""%>" width="<%=w%>" height="<%=h%>" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen; encrypted-media"></iframe>'),YouTube:r.Z.template('<iframe <% if (real) {%>id="yt_<%=video_id%>"<%}%> src="https://www.youtube.com/embed/<%=video_id%>?&wmode=opaque&enablejsapi=1&playlist=&autohide=1&loop=<%=(loop)?1:0%>&showinfo=<%=info?1:0%>&theme=<%=theme%>&controls=<%=controls? 1: 0%><%=html5 ? "&html5=1" : ""%>&rel=0&vq=hd1080&playsinline=<%=(autoplay)?1:0%>" width="<%=w%>" height="<%=h%>" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen; encrypted-media"></iframe>')},y=a.Z.extend({RESTART_TIMEOUT:5e3,isPlaying:!1,initialize:function(t,e,n){return a.Z.prototype.initialize.apply(this,arguments),this.$container=n,delete this.real,this},render:function(){return this.$container?this.setElement(this.$container):this.makeBox("video"),this.rendered=!0,this.setPosterInsteadOfVideo(),this},isValid:function(){return this.video_id&&this.provider_name},_needAutoStart:function(){return this.autoplay&&!c.default.PageVisibilityManager.isPageHidden()},start:function(){return this.started=!0,this.onPlayFired=!1,RM.screenshot||!this.rendered||this.destroyed||(this.playerInitialized||(this.$el.append(this.getEmbed()),this.$iframe=this.$el.find("iframe"),this.$iframe.attr("id","video_"+this.id),this.player=this.createPlayer(this.provider_name,this.$iframe,{start_time:this.start_time,autoplay:this._needAutoStart()}),this.player&&this.player.on("ready",this.onPlayerReady),this.playerInitialized=!0),this.player&&this._needAutoStart()&&this.player.play()),this},stop:function(){return this.started=!1,clearInterval(this.loopInterval),!RM.screenshot&&!this.destroyed&&this.player&&this.rendered&&("youtube"===this.provider_name.toLowerCase()?(this._needAutoStart()&&this.player.pause(),!this._needAutoStart()&&this.onPlayFired&&this.player.pause()):this.player.pause()),this},destroy:function(){return clearInterval(this.loopInterval),this.player&&this.player.destroy(),this.player=null,a.Z.prototype.destroy.apply(this,arguments)},setPosterInsteadOfVideo:function(){if(this.custom_thumbnail||this.thumbnail_url){var t=this.getCustomThumbnail(this);this.custom_thumbnail&&t.url?this.setCustomPosterInsteadOfVideo():this.setEmbeddedPosterInsteadOfVideo()}else this.widgetIsLoaded()},setEmbeddedPosterInsteadOfVideo:function(){this.$poster&&this.$poster.remove(),this.$poster&&this.$poster.off(),this.$poster=(0,i.Z)("<img/>").addClass("poster").css("opacity",0).appendTo(this.$el),this.$poster.on("load",r.Z.bind((function(){this.$poster.css({width:"",height:""}).css("opacity",1);var t=this.$poster[0].width,e=this.$poster[0].height;this.aspect_poster||(this.aspect_poster=t/e),s.Z.setVideoPosition({mag:this.page.mag,$container:this.$el,$media:this.$poster,provider:this.provider_name,aspect_poster:this.aspect_poster,aspect_real:this.aspect_real,controls_remove:!!this.$container}),setTimeout(this.widgetIsLoaded,100)}),this)).on("error",r.Z.bind((function(){this.oldUrl=this.thumbnail_url,this.thumbnail_url=this.thumbnail_url.replace("https://","http://"),this.oldUrl!==this.thumbnail_url?this.setEmbeddedPosterInsteadOfVideo():this.widgetIsLoaded()}),this)).attr("src",this.thumbnail_url)},setCustomPosterInsteadOfVideo:function(){this.$poster&&this.$poster.remove(),this.$poster&&this.$poster.off(),this.$poster=this.getCustomVideoPoster(this),this.$poster.css({visibility:"hidden",cursor:"pointer"}),this.$poster.on("click",r.Z.bind((function(){this.onPosterClicked()}),this)),this.$poster.appendTo(this.$el),setTimeout(this.widgetIsLoaded,100)},getCustomVideoPoster:function(t){var e=(0,f.findImagePath)("./common/video-player/play.svg"),n=(0,i.Z)("<div/>").addClass("poster poster-custom"),r=this.getCustomThumbnail(t),o=r.unscaledOptimizedUrl||r.url;if(u.Z.useLambdaUrl(r)||u.Z.useLambdaUrlOldProjects(r,"video")){var a={width:t.w};r.originalW&&(a.originalW=r.originalW),r.originalH&&(a.originalH=r.originalH);var s=d.Z.normalizeAnimations(t.animation).reduce((function(t,e){return Math.max(t,d.Z.maxScaleAnimation(e))}),0);a.animationScale=s&&s/100,this.page?a.scale=h.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.opts)?this.page.scale:1:a.scale=RM.constructorRouter.zoom.getZoom(),o=u.Z.getLambdaUrl(r,a)}n.css({width:t.w,height:t.h}),this.mag&&this.mag.opts&&this.mag.opts.lqip&&(this.$lqipImg=(0,i.Z)("<div/>").addClass("lqip").css({"background-image":"url(".concat(u.Z.getLqipUrl(r),")"),width:this.w,height:this.h}).appendTo(this.$el));var c=new Image;return c.onload=function(){var t=this;this.$poster&&this.$poster.css({"background-image":"url(".concat(e,"), url(").concat(o,")"),visibility:""}),this.$iframe&&this.$iframe.addClass("fade-out"),this.$lqipImg&&this.$lqipImg.css("opacity",0),setTimeout((function(){t.$lqipImg&&t.$lqipImg.remove()}),200)}.bind(this),c.src=o,n},getCustomThumbnail:function(t){var e=t.custom_thumbnail_url||"";return t.picture||{url:e,type:r.Z.last(e.split("."))}},onPosterClicked:function(){this.player.play(),r.Z.delay(r.Z.bind((function(){this.$poster&&(this.$poster.off(),this.$poster.remove())}),this),200)},createPlayer:function(t,e,n){return"vimeo"===t.toLowerCase()?new g(e[0],n):"youtube"===t.toLowerCase()?new p(e[0],n):null},getEmbed:function(t){if(t=t||this,r.Z.defaults(t,{real:!0,w:640,h:320,theme:"dark",color:"3ab9ff",info:!1,controls:!0,id:r.Z.uniqueId("video_"),origin:encodeURIComponent(window.location.protocol+"//"+window.location.hostname)}),Modernizr.safari&&(t.html5=!0),!t.video_id)return null;var e=m[t.provider_name](t),n=this.getCustomThumbnail(t);if(!t.real&&t.custom_thumbnail&&n.url){var o=(0,i.Z)(e).css("visibility","hidden");return this.getCustomVideoPoster(t).add(o)}return m[t.provider_name](t)},onPlayerReady:function(){if(!this.destroyed&&this.player){if(this.$container&&(this.mute=!0),this.mute?this.player.mute():this.player.unMute(),!this.$container){var t=this.getCustomThumbnail(this);this.custom_thumbnail&&t.url||(this.$iframe&&this.$iframe.addClass("fade-out"),r.Z.delay(r.Z.bind((function(){this.$poster&&this.$poster.css("opacity",0)}),this),125),r.Z.delay(r.Z.bind((function(){this.$poster&&(this.$poster.off(),this.$poster.remove())}),this),250))}this.player.on("pause",this.onPause),this.player.on("play",this.onPlay),this.player.on("finish",this.onFinish),this.start_time&&(this.player.rewind(this.start_time),this.player.pause()),l.Z.isDesktop&&"vimeo"===this.provider_name.toLowerCase()&&this.player.on("playProgress",this.onProgress),this.started&&this._needAutoStart()&&this.player.play(),this.player.setColor&&this.player.setColor(this.color)}},onPlay:function(){this.isPlaying=!0,!this.$container&&RM.analytics&&RM.analytics.sendEvent("Video Play",this.title+" / "+this.url),this.$iframe&&!this.$iframe.hasClass("fade-out")&&(this.$iframe.addClass("fade-out"),this.trigger("playStarted")),clearInterval(this.loopInterval),this.loop&&this.player.checkLoop&&(this.loopInterval=setInterval(r.Z.bind((function(){this.player.checkLoop()&&(clearInterval(this.loopInterval),Modernizr.safari&&r.Z.delay(function(){this.onPlay()}.bind(this),200))}),this),100)),this.onPlayFired=!0},onPause:function(){if(this.isPlaying=!1,"Vimeo"===this.provider_name)this.player.getCurrentTime(r.Z.bind((function(t){t=Math.round(t),!this.$container&&RM.analytics&&RM.analytics.sendEvent("Video Pause",this.title+" / "+this.url+" / "+t+" sec.",t)}),this));else if("YouTube"===this.provider_name){var t=Math.round(this.player.getCurrentTime());!this.$container&&RM.analytics&&RM.analytics.sendEvent("Video Pause",this.title+" / "+this.url+" / "+t+" sec.",t)}},onFinish:function(){this.isPlaying=!1},onProgress:function(t){this.onPlayFired||this.onPlay(),1===t.percent&&this.loop&&this.player.loop&&this.player.loop(),0===parseFloat(t.seconds)?this.restartTimeout||(this.restartTimeout=setTimeout(r.Z.bind((function(){clearInterval(this.loopInterval),this.playerInitialized=!1,this.player&&this.player.destroy(),this.player=null,this.$iframe&&this.$iframe.remove(),!this.destroyed&&this.started&&this.start(),delete this.restartTimeout}),this),this.RESTART_TIMEOUT)):(clearTimeout(this.restartTimeout),delete this.restartTimeout)},updateVideoFrameSize:function(t,e){this.$iframe&&this.$iframe.attr("width",t).attr("height",e),this.$poster&&this.$poster.css({width:t,height:e})}});e.default=y},371:function(){}}]);