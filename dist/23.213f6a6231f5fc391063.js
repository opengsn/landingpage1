/*! For license information please see 23.213f6a6231f5fc391063.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"+/Sl":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(t,e){return new Intl.NumberFormat(window.navigator.language||"en-US",{style:"currency",currency:e}).format(t)}},"0NDv":function(t,e,i){"use strict";function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}var s=function(){var t,e=(t=regeneratorRuntime.mark((function t(e,i){var n,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,r({headers:{"Content-Type":"application/json"}},i));case 2:if(a=t.sent,!(null===(n=a.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"))){t.next=9;break}return t.next=6,a.json();case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,a.text();case 11:t.t0=t.sent;case 12:if(o=t.t0,!a.ok){t.next=17;break}return t.abrupt("return",o);case 17:throw{message:o&&"string"!=typeof o?o.message:o,statusCode:a.status};case 18:case"end":return t.stop()}}),t)})),function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function s(t){o(a,n,r,s,c,"next",t)}function c(t){o(a,n,r,s,c,"throw",t)}s(void 0)}))});return function(t,i){return e.apply(this,arguments)}}();e.a={get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.keys(e).map((function(t){var i=e[t];return Array.isArray(i)?i.map((function(e){return"".concat(encodeURIComponent("".concat(t,"[]")),"=").concat(encodeURIComponent(e))})).join("&"):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(i))})).join("&");return s("".concat(t).concat(n?"?".concat(n):""),i)},post:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(t,r({method:"POST",body:JSON.stringify(e)},i))},patch:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(t,r({method:"PATCH",body:JSON.stringify(e)},i))},put:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(t,r({method:"PUT",body:JSON.stringify(e)},i))},delete:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(t,r({method:"DELETE",body:e?JSON.stringify(e):void 0},i))}}},"0zSa":function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),a=i.n(r),o=i("rFsW"),s=i("X7yJ"),c=a.a.View.extend({pictures:[],domPictures:[],preloadPictures:[],currentSlide:null,nextSlide:null,selectedSlide:null,defaultDelay:4,defaultCrossfade:.5,isAnimationRunning:!1,cursor:0,rendered:!1,lastSlideshowAnimationStart:null,initialize:function(t){this.initSlideshowData(t.data),this.$container=t.container,this.$preloadContainer=t.preloadContainer},initSlideshowData:function(t){this.pictures=t&&t.pictures?o.a.sortBy(t.pictures,"num"):[],this.delay=t&&"number"==typeof t.delay?t.delay:this.defaultDelay,this.crossfade=t&&"number"==typeof t.crossfade?t.crossfade:this.defaultCrossfade,this.name=t&&t.name?t.name:"slideshow"+(new Date).getTime(),this.domPictures=[],this.preloadPictures=[],this.currentSlide=null,this.nextSlide=null,this.selectedSlide=null,this.isAnimationRunning=!1,this.cursor=0},render:function(t){RM.screenshot?this.pictures.length?this.addPicture(this.pictures[0]):this.trigger("loaded"):this.loadPictures(),this.isAnimationRunning||t||this.startAnimationLoop(),this.rendered=!0},rerender:function(t){this.stopAnimationLoop(),this.initSlideshowData(t),this.removePictures(),this.render(!0)},runAnimation:function(){this.isAnimationRunning||(this.rendered?this.startAnimationLoop():this.render())},setDelay:function(t){t<this.crossfade?console.error("delay mast be longer than crossfade"):this.delay=t},setCrossfade:function(t){t>this.delay?console.error("delay mast be longer than crossfade"):(this.crossfade=t,this.updateCrossfade())},updateCrossfade:function(){this.domPictures.forEach(function(t){t.css({"transition-duration":this.crossfade+"s"})}.bind(this))},updatePicture:function(t){var e=o.a.findIndex(this.pictures,(function(e){return e.uuid===t.uuid}));this.pictures[e]=t,this.domPictures[e].css({"background-image":'url("'.concat(this.getPoorUrl(t),'")')}),s.a.useLqipUrl(t)&&this.domPictures[e].addClass("lqip"),this.loadFullSizePicture(t)},updatePicturePosition:function(t){this.destroy(),this.initSlideshowData({pictures:t,delay:this.delay,crossfade:this.crossfade}),this.render()},addPicture:function(t){var e=this.domPictures.length===this.cursor+1,i=0===this.domPictures.length?2:e?1:0,r=0===this.domPictures.length||e?"block":"none";this.pictures.push(t),this.domPictures.push(Object(n.a)("<div>").addClass("slideshow-image fade-in".concat(s.a.useLqipUrl(t)?" lqip":"")).css({"z-index":i,display:r,"background-image":'url("'.concat(this.getPoorUrl(t),'")'),"transition-property":"opacity","transition-duration":this.crossfade+"s","transition-timing-function":"linear"}).appendTo(this.$container)),this.loadFullSizePicture(t)},selectSlide:function(t){if(t){var e=this.pictures.findIndex((function(e){return e.uuid===t}));if(-1!==e){if(this.currentSlide&&this.selectedSlide!==this.domPictures[e]&&(this.isAnimationRunning&&this.stopAnimationLoop(),this.currentSlide!==this.domPictures[e])){var i=this.cursor;this.nextSlide&&this.nextSlide.css({"z-index":0,display:"none"}),this.domPictures[e].css({"z-index":1,display:"block"}),this.currentSlide=this.domPictures[e],this.cursor=e,this.selectedSlide=this.domPictures[e],this.domPictures.length>1?this.domPictures[e+1]?this.nextSlide=this.domPictures[e+1]:this.nextSlide=this.domPictures[0]:this.nextSlide=null,this.domPictures[i].css({"transition-duration":"0.3s"}),this.domPictures[i].removeClass("fade-in").addClass("fade-out"),setTimeout(function(){this.domPictures[i].css({"z-index":0,"transition-duration":"0s",display:"none"}).removeClass("fade-out").addClass("fade-in").css({"transition-duration":this.crossfade+"s"}),this.currentSlide.css({"z-index":2}),this.nextSlide&&this.nextSlide.css({"z-index":1,display:"block"})}.bind(this),310)}}else console.warn("Did't find slide for uuid:",t)}},removePictures:function(){this.domPictures=[],this.preloadPictures=[],this.$container.empty(),this.$preloadContainer.empty()},removePicture:function(t){if(t){var e=this.pictures.findIndex((function(e){return e.uuid===t}));if(this.domPictures[e]===this.currentSlide&&1!==this.domPictures.length&&this.selectedSlide!==this.domPictures[e]){var i=1e3*this.crossfade+1e3*this.delay+50;i=this.lastSlideshowAnimationStart?Math.abs(i-((new Date).getTime()-this.lastSlideshowAnimationStart.getTime())):i,setTimeout(function(){this.cursor&&(this.cursor-=1);var e=this.pictures.findIndex((function(e){return e.uuid===t}));this.domPictures[e].remove(),this.domPictures.splice(e,1),this.pictures.splice(e,1)}.bind(this),i)}else{if(this.domPictures[e]===this.nextSlide&&1!==this.domPictures.length&&(this.domPictures[e+1]?(this.domPictures[e+1].css({"z-index":1,display:"block"}),this.nextSlide=this.domPictures[e+1]):(this.domPictures[0].css({"z-index":1,display:"block"}),this.nextSlide=this.domPictures[0])),this.selectedSlide===this.domPictures[e]&&this.nextSlide){var n=this.domPictures.findIndex(function(t){return t===this.nextSlide}.bind(this));this.currentSlide=this.domPictures[n],this.cursor=n,this.selectedSlide=null,this.currentSlide.css({"z-index":2}),this.domPictures.length>2?this.domPictures[this.cursor+1]?this.nextSlide=this.domPictures[this.cursor+1]:this.nextSlide=this.domPictures[0]:this.nextSlide=null,this.nextSlide&&this.nextSlide.css({"z-index":1,display:"block"}),setTimeout(function(){this.startAnimationLoop()}.bind(this),0)}this.domPictures[e].remove(),this.domPictures.splice(e,1),this.pictures.splice(e,1)}}},getThumbnailUrl:function(t){return t?s.a.useLambdaUrl(t)?s.a.getThumbnailUrl(t):t.thumbUrl:""},getPictureUrl:function(t){return s.a.useLambdaUrl(t)||s.a.useLambdaUrlOldProjects(t,"background")?s.a.getLambdaUrl(t):t.url},getPoorUrl:function(t){return s.a.useLqipUrl(t)?s.a.getLqipUrl(t):t.poorUrl},loadPictures:function(){this.pictures.forEach(function(t,e){this.domPictures[e]=Object(n.a)("<div>").addClass("slideshow-image fade-in".concat(s.a.useLqipUrl(t)?" lqip":"")).css({"z-index":0===e?2:1===e?1:0,display:0===e||1===e?"block":"none","background-image":'url("'.concat(this.getPoorUrl(t),'")'),"transition-property":"opacity","transition-duration":this.crossfade+"s","transition-timing-function":"linear"}).appendTo(this.$container)}.bind(this)),this.loadFullSizePictures()},loadFullSizePictures:function(){function t(t,e,i){this.domPictures[e].css({"background-image":'url("'.concat(t,'")')}),this.domPictures[e].removeClass("lqip"),this.preloadPictures[e].remove(),0===e&&this.trigger("loaded")}function e(t,e){this.domPictures[t].removeClass("lqip"),0===t&&this.trigger("loaded"),RM.screenshot||this.preloadPictures[t].remove()}this.preloadPictures=[],this.pictures.forEach(function(i,r){var a=this.getPictureUrl(i);this.preloadPictures[r]=Object(n.a)("<img>").addClass("preload-slideshow-image").appendTo(this.$preloadContainer).attr("src",a).on("load",t.bind(this,a,r)).on("error",e.bind(this,r))}.bind(this))},loadFullSizePicture:function(t){var e=Object(n.a)("<img>").addClass("preload-slideshow-image").appendTo(this.$preloadContainer).attr("src",this.getPictureUrl(t)).on("load",function(i){var n=o.a.findIndex(this.pictures,(function(e){return t.uuid===e.uuid}));this.domPictures[n].css({"background-image":'url("'.concat(this.getPictureUrl(t),'")')}),this.domPictures[n].removeClass("lqip"),e.remove(),this.trigger("loaded")}.bind(this)).on("error",function(i){var n=o.a.findIndex(this.pictures,(function(e){return t.uuid===e.uuid}));this.domPictures[n].removeClass("lqip"),e.remove(),this.trigger("loaded"),RM.screenshot||e.remove()}.bind(this))},initCursor:function(){this.cursor=0,this.currentSlide=this.domPictures[this.cursor],this.domPictures[this.cursor+1]&&(this.nextSlide=this.domPictures[this.cursor+1])},startAnimationLoop:function(){this.isAnimationRunning=!0,this.selectedSlide=null,this.currentSlide||this.initCursor(),this.slideshowLouncher=setTimeout(function t(){this.fadeAnimation(),this.slideshowLouncher=setTimeout(t.bind(this),1e3*this.delay)}.bind(this),1e3*this.delay)},fadeAnimation:function(){var t;this.lastSlideshowAnimationStart=new Date,this.domPictures.length<2||(this.currentSlide&&this.nextSlide||this.initCursor(),this.cursor+1<this.domPictures.length?(this.currentSlide.removeClass("fade-in").addClass("fade-out"),t=this.cursor,setTimeout(function(){this.domPictures[t]&&this.domPictures[t].css({"z-index":0,"transition-duration":"0s",display:"none"}).removeClass("fade-out").addClass("fade-in").css({"transition-duration":this.crossfade+"s"}),this.domPictures[t+1].css({"z-index":2}),this.domPictures[t+2]?this.domPictures[t+2].css({"z-index":1,display:"block"}):this.domPictures[0].css({"z-index":1,display:"block"})}.bind(this),1e3*this.crossfade),this.cursor+=1,this.currentSlide=this.domPictures[this.cursor],this.domPictures[this.cursor+1]?this.nextSlide=this.domPictures[this.cursor+1]:this.nextSlide=this.domPictures[0]):(this.currentSlide.removeClass("fade-in").addClass("fade-out"),t=this.cursor,setTimeout(function(){this.domPictures[t]&&this.domPictures[t].css({"z-index":0,"transition-duration":"0s",display:"none"}).removeClass("fade-out").addClass("fade-in").css({"transition-duration":this.crossfade+"s"}),this.domPictures[0].css({"z-index":2}),this.domPictures[1].css({"z-index":1,display:"block"})}.bind(this),1e3*this.crossfade),this.cursor=0,this.currentSlide=this.domPictures[this.cursor],this.nextSlide=this.domPictures[this.cursor+1]))},stopAnimationLoop:function(t){this.isAnimationRunning=!1,clearTimeout(this.slideshowLouncher),t&&"function"==typeof t&&t()},destroy:function(){this.rendered=!1,this.stopAnimationLoop(this.removePictures.bind(this))}});e.a=c},1:function(t,e){},"11zj":function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("rFsW"),a=i("PhV8"),o=i("ROz4"),s=i("WoDZ"),c=i("OTSC"),l=i("QNiq"),u=i("X7yJ"),d=i("roQd"),h=i("pFlR"),p=i("Vxjr"),f=function(t,e){this.playerIsReady=!1,this.queue=[],function(t,e){var i=r.a.bind(t,e);if(window.youTubeApiIsReady)return i();window.ytQueue.push({cb:i,context:e})}((function(){this.yt=new window.YT.Player(t.id,{events:{onReady:r.a.bind((function(){this.destroyed||(this.playerIsReady=!0,r.a.each(this.queue,(function(t){r.a.isFunction(t.cb)&&t.cb()})))}),this)}})}),this),this.start_time=e&&e.start_time};f.prototype={addToQueue:function(t,e){var i=r.a.bind(t,e);if(this.playerIsReady)return i();this.queue.push({cb:i,context:e})},on:function(t,e,i){var n=r.a.bind(e,i||window),a={finish:0,play:1,pause:2};"ready"!==t?this.addToQueue((function(){this.yt.addEventListener("onStateChange",(function(e){a[t]===Number(e.data)&&n()}))}),this):this.addToQueue(n,this)},mute:function(){this.addToQueue((function(){this.yt.mute()}),this)},unMute:function(){this.addToQueue((function(){this.yt.unMute()}),this)},pause:function(){this.addToQueue((function(){this.yt&&this.yt.pauseVideo&&this.yt.pauseVideo()}),this)},play:function(){this.addToQueue((function(){this.yt.playVideo()}),this)},rewind:function(t){this.addToQueue((function(){this.yt.seekTo(t||0)}),this)},loop:function(){this.rewind(this.start_time||.01)},getDuration:function(){return this.duration||(this.duration=this.yt.getDuration()),this.duration},getCurrentTime:function(){return this.yt.getCurrentTime&&this.yt.getCurrentTime()||0},checkLoop:function(){if(this.getDuration()-this.yt.getCurrentTime()<.5)return this.loop(),!0},destroy:function(){window.ytQueue=r.a.reject(window.ytQueue,(function(t){return t.context===this})),delete this.yt,delete this.queue,this.destroyed=!0}};var g=function(t,e){r.a.bindAll(this),this.id=t.id,this.start_time=e&&e.start_time};g.prototype={on:function(t,e){Object(a.a)(this.id).addEvent(t,e)},mute:function(){Object(a.a)(this.id).api("setVolume",0)},unMute:function(){return!1},pause:function(){Object(a.a)(this.id).api("pause")},play:function(){Object(a.a)(this.id).api("play")},rewind:function(t){Object(a.a)(this.id).api("seekTo",t||0)},loop:function(){this.start_time&&this.rewind(this.start_time)},getCurrentTime:function(t){Object(a.a)(this.id).api("getCurrentTime",t)},setColor:function(t){Object(a.a)(this.id).api("setColor",t)},destroy:function(){var t=Object(a.a)(this.id);t&&(t.removeEvent("ready"),t.removeEvent("play"),t.removeEvent("finish"),t.removeEvent("pause"))}};var m={Vimeo:r.a.template('<iframe src="https://player.vimeo.com/video/<%=video_id%>?wmode=opaque&api=1&loop=<%=(loop)?1:0%>&muted=<%=(mute)?1:0%>&player_id=video_<%=id%><%=(!real)?"_c":""%>&title=<%=info?1:0%>&byline=<%=info?1:0%>&portrait=<%=info?1:0%>&color=<%=color%>" id="video_<%=id%><%=(!real)?"_c":""%>" width="<%=w%>" height="<%=h%>" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen; encrypted-media"></iframe>'),YouTube:r.a.template('<iframe <% if (real) {%>id="yt_<%=video_id%>"<%}%> src="https://www.youtube.com/embed/<%=video_id%>?&wmode=opaque&enablejsapi=1&playlist=&autohide=1&loop=<%=(loop)?1:0%>&showinfo=<%=info?1:0%>&theme=<%=theme%>&controls=<%=controls? 1: 0%><%=html5 ? "&html5=1" : ""%>&rel=0&vq=hd1080&playsinline=<%=(autoplay)?1:0%>" width="<%=w%>" height="<%=h%>" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen; encrypted-media"></iframe>')},v=o.a.extend({RESTART_TIMEOUT:5e3,isPlaying:!1,initialize:function(t,e,i){return o.a.prototype.initialize.apply(this,arguments),this.$container=i,delete this.real,this},render:function(){return this.$container?this.setElement(this.$container):this.makeBox("video"),this.rendered=!0,this.setPosterInsteadOfVideo(),this},isValid:function(){return this.video_id&&this.provider_name},_needAutoStart:function(){return this.autoplay&&!c.default.PageVisibilityManager.isPageHidden()},start:function(){return this.started=!0,this.onPlayFired=!1,RM.screenshot||!this.rendered||this.destroyed||(this.playerInitialized||(this.$el.append(this.getEmbed()),this.$iframe=this.$el.find("iframe"),this.$iframe.attr("id","video_"+this.id),this.player=this.createPlayer(this.provider_name,this.$iframe,{start_time:this.start_time,autoplay:this._needAutoStart()}),this.player&&this.player.on("ready",this.onPlayerReady),this.playerInitialized=!0),this.player&&this._needAutoStart()&&this.player.play()),this},stop:function(){return this.started=!1,clearInterval(this.loopInterval),!RM.screenshot&&!this.destroyed&&this.player&&this.rendered&&("youtube"===this.provider_name.toLowerCase()?(this._needAutoStart()&&this.player.pause(),!this._needAutoStart()&&this.onPlayFired&&this.player.pause()):this.player.pause()),this},destroy:function(){return clearInterval(this.loopInterval),this.player&&this.player.destroy(),this.player=null,o.a.prototype.destroy.apply(this,arguments)},setPosterInsteadOfVideo:function(){if(this.custom_thumbnail||this.thumbnail_url){var t=this.getCustomThumbnail(this);this.custom_thumbnail&&t.url?this.setCustomPosterInsteadOfVideo():this.setEmbeddedPosterInsteadOfVideo()}else this.widgetIsLoaded()},setEmbeddedPosterInsteadOfVideo:function(){this.$poster&&this.$poster.remove(),this.$poster&&this.$poster.off(),this.$poster=Object(n.a)("<img/>").addClass("poster").css("opacity",0).appendTo(this.$el),this.$poster.on("load",r.a.bind((function(){this.$poster.css({width:"",height:""}).css("opacity",1);var t=this.$poster[0].width,e=this.$poster[0].height;this.aspect_poster||(this.aspect_poster=t/e),s.a.setVideoPosition({mag:this.page.mag,$container:this.$el,$media:this.$poster,provider:this.provider_name,aspect_poster:this.aspect_poster,aspect_real:this.aspect_real,controls_remove:!!this.$container}),setTimeout(this.widgetIsLoaded,100)}),this)).on("error",r.a.bind((function(){this.oldUrl=this.thumbnail_url,this.thumbnail_url=this.thumbnail_url.replace("https://","http://"),this.oldUrl!==this.thumbnail_url?this.setEmbeddedPosterInsteadOfVideo():this.widgetIsLoaded()}),this)).attr("src",this.thumbnail_url)},setCustomPosterInsteadOfVideo:function(){this.$poster&&this.$poster.remove(),this.$poster&&this.$poster.off(),this.$poster=this.getCustomVideoPoster(this),this.$poster.css({visibility:"hidden",cursor:"pointer"}),this.$poster.on("click",r.a.bind((function(){this.onPosterClicked()}),this)),this.$poster.appendTo(this.$el),setTimeout(this.widgetIsLoaded,100)},getCustomVideoPoster:function(t){var e=Object(p.findImagePath)("./common/video-player/play.svg"),i=Object(n.a)("<div/>").addClass("poster poster-custom"),r=this.getCustomThumbnail(t),a=r.unscaledOptimizedUrl||r.url;if(u.a.useLambdaUrl(r)||u.a.useLambdaUrlOldProjects(r,"video")){var o={width:t.w};r.originalW&&(o.originalW=r.originalW),r.originalH&&(o.originalH=r.originalH);var s=d.a.normalizeAnimations(t.animation).reduce((function(t,e){return Math.max(t,d.a.maxScaleAnimation(e))}),0);o.animationScale=s&&s/100,this.page?o.scale=h.a.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.opts)?this.page.scale:1:o.scale=RM.constructorRouter.zoom.getZoom(),a=u.a.getLambdaUrl(r,o)}i.css({width:t.w,height:t.h}),this.mag&&this.mag.opts&&this.mag.opts.lqip&&(this.$lqipImg=Object(n.a)("<div/>").addClass("lqip").css({"background-image":"url(".concat(u.a.getLqipUrl(r),")"),width:this.w,height:this.h}).appendTo(this.$el));var c=new Image;return c.onload=function(){var t=this;this.$poster&&this.$poster.css({"background-image":"url(".concat(e,"), url(").concat(a,")"),visibility:""}),this.$iframe&&this.$iframe.addClass("fade-out"),this.$lqipImg&&this.$lqipImg.css("opacity",0),setTimeout((function(){t.$lqipImg&&t.$lqipImg.remove()}),200)}.bind(this),c.src=a,i},getCustomThumbnail:function(t){var e=t.custom_thumbnail_url||"";return t.picture||{url:e,type:r.a.last(e.split("."))}},onPosterClicked:function(){this.player.play(),r.a.delay(r.a.bind((function(){this.$poster&&(this.$poster.off(),this.$poster.remove())}),this),200)},createPlayer:function(t,e,i){return"vimeo"===t.toLowerCase()?new g(e[0],i):"youtube"===t.toLowerCase()?new f(e[0],i):null},getEmbed:function(t){if(t=t||this,r.a.defaults(t,{real:!0,w:640,h:320,theme:"dark",color:"3ab9ff",info:!1,controls:!0,id:r.a.uniqueId("video_"),origin:encodeURIComponent(window.location.protocol+"//"+window.location.hostname)}),Modernizr.safari&&(t.html5=!0),!t.video_id)return null;var e=m[t.provider_name](t),i=this.getCustomThumbnail(t);if(!t.real&&t.custom_thumbnail&&i.url){var a=Object(n.a)(e).css("visibility","hidden");return this.getCustomVideoPoster(t).add(a)}return m[t.provider_name](t)},onPlayerReady:function(){if(!this.destroyed&&this.player){if(this.$container&&(this.mute=!0),this.mute?this.player.mute():this.player.unMute(),!this.$container){var t=this.getCustomThumbnail(this);this.custom_thumbnail&&t.url||(this.$iframe&&this.$iframe.addClass("fade-out"),r.a.delay(r.a.bind((function(){this.$poster&&this.$poster.css("opacity",0)}),this),125),r.a.delay(r.a.bind((function(){this.$poster&&(this.$poster.off(),this.$poster.remove())}),this),250))}this.player.on("pause",this.onPause),this.player.on("play",this.onPlay),this.player.on("finish",this.onFinish),this.start_time&&(this.player.rewind(this.start_time),this.player.pause()),l.a.isDesktop&&"vimeo"===this.provider_name.toLowerCase()&&this.player.on("playProgress",this.onProgress),this.started&&this._needAutoStart()&&this.player.play(),this.player.setColor&&this.player.setColor(this.color)}},onPlay:function(){this.isPlaying=!0,!this.$container&&RM.analytics&&RM.analytics.sendEvent("Video Play",this.title+" / "+this.url),this.$iframe&&!this.$iframe.hasClass("fade-out")&&(this.$iframe.addClass("fade-out"),this.trigger("playStarted")),clearInterval(this.loopInterval),this.loop&&this.player.checkLoop&&(this.loopInterval=setInterval(r.a.bind((function(){this.player.checkLoop()&&(clearInterval(this.loopInterval),Modernizr.safari&&r.a.delay(function(){this.onPlay()}.bind(this),200))}),this),100)),this.onPlayFired=!0},onPause:function(){if(this.isPlaying=!1,"Vimeo"===this.provider_name)this.player.getCurrentTime(r.a.bind((function(t){t=Math.round(t),!this.$container&&RM.analytics&&RM.analytics.sendEvent("Video Pause",this.title+" / "+this.url+" / "+t+" sec.",t)}),this));else if("YouTube"===this.provider_name){var t=Math.round(this.player.getCurrentTime());!this.$container&&RM.analytics&&RM.analytics.sendEvent("Video Pause",this.title+" / "+this.url+" / "+t+" sec.",t)}},onFinish:function(){this.isPlaying=!1},onProgress:function(t){this.onPlayFired||this.onPlay(),1===t.percent&&this.loop&&this.player.loop&&this.player.loop(),0===parseFloat(t.seconds)?this.restartTimeout||(this.restartTimeout=setTimeout(r.a.bind((function(){clearInterval(this.loopInterval),this.playerInitialized=!1,this.player&&this.player.destroy(),this.player=null,this.$iframe&&this.$iframe.remove(),!this.destroyed&&this.started&&this.start(),delete this.restartTimeout}),this),this.RESTART_TIMEOUT)):(clearTimeout(this.restartTimeout),delete this.restartTimeout)},updateVideoFrameSize:function(t,e){this.$iframe&&this.$iframe.attr("width",t).attr("height",e),this.$poster&&this.$poster.css({width:t,height:e})}});e.default=v},"38JW":function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),a=i.n(r),o=i("rFsW"),s=i("AIVH");function c(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\t<div class="page hidden">\n\t\t<div class="page-fixed-bg-container polyfill-sticky"></div>\n\t\t<div class="fixed-position-container-top polyfill-sticky"></div>\n\t\t<div class="fixed-position-container polyfill-sticky"></div>\n\t\t<div class="content-scroll-wrapper <%=isStickyVerticalViewer ? \'\' : \'has-vertical-scroll\'%>">\n\t\t\t<div class="content-bounds">\n\t\t\t\t<div class="page-content-container" tabindex="-1"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n']);return c=function(){return t},t}var l,u,d,h=(l={},u="template-viewer-page",d=Object(s.a)(c()),u in l?Object.defineProperty(l,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[u]=d,l),p=i("mkpD"),f=i("OTSC"),g=i("X7yJ"),m=i("pFlR"),v=i("roQd"),b=i("HwMs"),y=i("DqjY"),w=i("WoDZ"),S=i("v92f"),O=i("rVpV"),k=i("G3+Z"),P=i("hoWO"),x=i("QNiq");function C(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function j(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function _(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?j(Object(i),!0).forEach((function(e){T(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function T(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var I=_(_({},h),p.a),M=a.a.View.extend({template:I["template-viewer-page"],initialize:function(t){return o.a.bindAll(this),this.mag=t.mag,this.router=t.router,this.$container=t.$container,this.viewerType=t.viewerType,this.totalPages=t.totalPages,this.isStickyVerticalViewer=t.isStickyVerticalViewer,this.widgetsData=t.pageData.wids,o.a.defaults(t.pageData,{title:"",width:this.mag.getViewportWidth(t.mag.viewport),height:this.mag.getViewportSetting("min_height")}),o.a.extend(this,o.a.omit(t.pageData,["wids","widgets"])),this.contentPosition={left:0,top:0},this},render:function(){return this.setElement(this.template({isStickyVerticalViewer:this.isStickyVerticalViewer})),this.$el.appendTo(this.$container),RM.screenshot||Modernizr.csspositionsticky||Object(n.a)(".polyfill-sticky").Stickyfill(),this.zIndex=this.totalPages-this.num+2,"vertical"==this.viewerType&&this.$el.css("z-index",this.zIndex),this.$content=this.$(".page-content-container"),this.$scrollWrapper=this.$(".content-scroll-wrapper"),this.$scrollWrapper.one("scroll",this.fixSafariScroll),this.$fixedBgContainer=this.$(".page-fixed-bg-container"),this.$fixedPositionContainer=this.$(".fixed-position-container"),this.$fixedPositionContainerTop=this.$(".fixed-position-container-top"),this.$contentBounds=this.$(".content-bounds"),this.pageViewport=this.getPageViewport(),"horizontal"==this.viewerType&&this.$scrollWrapper.bind("scroll",this.onScroll),this.createLQBackground(),RM.screenshot==this._id&&(this.$el.css({overflow:"hidden",height:Math.max(this.height,672),width:this.mag.getViewportWidth(S.b.Default),position:"relative"}),"true"===f.default.queryUrlGetParam("pdf")&&(this.$fixedPositionContainer.css({height:"100%"}),this.$fixedPositionContainerTop.css({height:"100%"})),this.onResize(),this.on("pageLoaded",(function(){this.mag.router.sendReadyEvent({page:this})}),this)),this},show:function(){return this.shown||(this.$el.removeClass("hidden"),this.shown=!0,"horizontal"==this.viewerType&&this.onResize(),this.widgets&&this.lastViewportUsedForWidgetsCreation==this.pageViewport||this.createWidgetsForCurrentViewport()),this},start:function(t){if(!this.started||t&&t.forceStart)return this.started=!0,this.trigger("started"),t=t||{},o.a.each(this.widgets,(function(e){(!t||!t.widgetTypes||o.a.indexOf(t.widgetTypes,e.type)>=0)&&e.start()})),this.focusPage(),this.$scrollWrapper.addClass("accelerated-scroll"),this.animations&&this.animations.start(),this.mag.aboveGlobalAnimations&&this.mag.aboveGlobalAnimations.start(),this},stop:function(t){if(this.started)return t=t||{},this.started=!1,this.trigger("stopped"),this.$scrollWrapper.removeClass("accelerated-scroll"),o.a.each(this.widgets,(function(e){(!t||!t.widgetTypes||o.a.indexOf(t.widgetTypes,e.type)>=0)&&e.stop()})),this.animations&&this.animations.stop(),this.mag.aboveGlobalAnimations&&this.mag.aboveGlobalAnimations.stop(),this},getUrl:function(){return window.location.protocol+"//"+window.location.hostname+"/p"+this.num_id+"/"},setPosition:function(t,e){this.lastPosition==t&&this.lastNeighbour==e||(this.$el.removeClass("center-page prev-page next-page neighbour").addClass(t+"-page "+(e?"neighbour":"")),this.lastPosition=t,this.lastNeighbour=e)},getScroll:function(){return this.visibleWidgetsCoords.scrollTop},scrollOnVerticalMode:function(t){this.hasScrollOnVerticalMode=!0;var e,i,n=this.pageHeight-this.pageBgHeight;t<0?(e=-t,i=0):n>=t?(e=0,i=-t):(e=n-t,i=-n),this.visibleWidgetsCoords=this.visibleWidgetsCoords||{},this.visibleWidgetsCoords.scrollTop=-i,this.animations&&this.animations.onScroll({forceApply:!this.isStickyVerticalViewer}),this.trigger("page scroll",this.getScroll()),this.isStickyVerticalViewer||(this.$el.css("top",0),f.default.applyTransform(this.$el,e?"translateY("+e+"px) translateZ(0)":""),this.hasFixedWidgets?this.$contentBounds.css("top",i):f.default.applyTransform(this.$contentBounds,i?"translateY("+i+"px)":""))},resetScrollOnVerticalMode:function(t){this.hasScrollOnVerticalMode&&(this.hasScrollOnVerticalMode=!1,this.visibleWidgetsCoords=this.visibleWidgetsCoords||{},this.visibleWidgetsCoords.scrollTop=0,this.animations&&this.animations.onScroll({forceApply:!this.isStickyVerticalViewer}),this.isStickyVerticalViewer||(this.$el.css("top",""),f.default.applyTransform(this.$el,""),this.hasFixedWidgets?this.$contentBounds.css("top",0):f.default.applyTransform(this.$contentBounds,"")))},hide:function(){return this.shown&&(this.$el.addClass("hidden"),this.shown=!1),this},destroyAllWidgets:function(t){this.loaded=!1,this.videoBGStarted=!1,o.a.each(this.widgets,function(e,i){var n=this.widgetsData.some((function(t){var i=v.a.normalizeAnimations(t.animation),n=t._id===e._id&&Boolean(i.find((function(t){return!v.a.isEmpty(t)}))),r=t._id===e._id&&(t.viewport_default&&t.viewport_default.hidden||t.viewport_tablet_portrait&&t.viewport_tablet_portrait.hidden||t.viewport_phone_portrait&&t.viewport_phone_portrait.hidden||t.hidden);return n||r}));t&&t.includes(e.type)&&!n||(e.destroy(),e.off(),delete this.widgets[i])}.bind(this)),this.animations&&this.animations.destroy(),delete this.animations,clearTimeout(this.fireReadyTimeout)},destroy:function(){return this.retargetScroll&&this.retargetScroll.restore&&this.retargetScroll.restore(),this.resetWaitForAnimationEnd(),this.destroyLQBackground({animate:!1}),this.destroyAllWidgets(),this.remove()},onFormFocus:function(t){!Modernizr.safari&&x.a.isDesktop||(t=o.a.isUndefined(t)?this.$scrollWrapper&&this.$scrollWrapper.scrollTop():t,this.$fixedBgContainer.css({top:t}))},onFormBlur:function(){!Modernizr.safari&&x.a.isDesktop||this.$fixedBgContainer.css({top:0})},onScrollWithFormInFocus:function(t){!Modernizr.safari&&x.a.isDesktop||(t=o.a.isUndefined(t)?this.$scrollWrapper&&this.$scrollWrapper.scrollTop():t,this.$fixedBgContainer.css({top:t}))},isSwipeInProgress:function(){return this.$el.hasClass("swiping")},getPageZIndex:function(){return this.zIndex||1},getImmediatePack:function(){return o.a.filter(this.widgets,(function(t){return t.canRenderImmediately()&&!t.rendered}))},getWidgetsPacks:function(){if(!this.widgets)return[];var t,e,i,n=this.visibleWidgetsCoords,r=(n.top+(n.scrollTop||0))/n.scale,a=(n.bottom+(n.scrollTop||0))/n.scale-r,o=[],s=[];if(!this.BGWidget||this.BGWidget.rendered||this.BGWidget.loaded||s.push(this.BGWidget),this.fixedWidgets&&this.fixedWidgets.length)for(t=0;t<this.fixedWidgets.length;t++)(i=this.fixedWidgets[t]).rendered||i.loaded||i.canRenderImmediately()||s.push(i);var c,l,u=[],d=99999,h=-99999,p=!1;for(t=0;t<this.widgets.length;t++)(e=this.widgets[t]).rendered||e.loaded||"background"==e.type||e.fixed_position||(c=(l=M.getScreenIndex(e,r,a,!0)).index,d=Math.min(l.start,d),h=Math.max(l.end,h),e.screenIndex=c,c!==1/0&&(u[c]=u[c]||[],u[c].push(e)),p=!0);if(p){for(u[0]&&o.push(u[0]),u[1]&&o.push(u[1]),u[-1]&&o.push(u[-1]),t=2;t<=h;t++)u[t]&&o.push(u[t]);for(t=-2;t>=d;t--)u[t]&&o.push(u[t])}return s.length&&(o.length?o[0]=s.concat(o[0]):o=[s]),o},loadWidgetsPack:function(t,e){var i,n=0,r=0,a=0;for(i=0;i<t.length;i++){var o=t[i];o.rendered||o.loaded||o.destroyed||(o.canRenderImmediately()||(n++,o.on("loaded destroyed",s,o)),a++,o.render())}function s(){r++,n==r&&e()}a||e(),n==r&&e()},loadForScreenshotMode:function(){o.a.each(this.widgets,function(){var t,e=(t=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.render();case 2:t.sent.start();case 4:case"end":return t.stop()}}),t)})),function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){C(a,n,r,o,s,"next",t)}function s(t){C(a,n,r,o,s,"throw",t)}o(void 0)}))});return function(t){return e.apply(this,arguments)}}())},createWidgetsForCurrentViewport:function(){this.destroyAllWidgets(["video"]),this.BGWidget=null,this.fixedWidgets=[];var t=this.pageViewport,e=[],i=[],n=99999,r=this,a=this;o.a.each(this.widgetsData,function(e){var r=a.getWidgetViewportData(e,t),o=!this.mag.isPreview&&v.a.hasExpired(r);!P.Widgets[r.type]||r.hidden||o||(!r.fixed_position&&r.z&&"background"!=r.type&&(n=Math.min(n,r.z)),i.push(r))}.bind(this)),99999==n&&(n=0),o.a.each(i,function(i){var o=m.a.isOn(t,this.mag.getViewportWidth(t),this.mag.viewOpts)&&m.a.isCSSTransform();i.fixed_position&&(i.z<n||x.a.isDesktop&&!this.mag.isStickyVerticalViewer&&!o)?i.$fixedContainer=a.$fixedPositionContainer:i.$fixedContainer=a.$fixedPositionContainerTop;var s=null;this.widgets&&this.widgets.length&&(s=this.widgets.find((function(t){return!!t&&t._id===i._id})));var c=s||new P.Widgets[i.type](i,r);"video"===c.type&&(c.updateWidgetData(i,r),c.applyBoxStyle(),c.updateVideoFrameSize(i.w,i.h)),"background"==c.type&&(a.BGWidget=c,a.hasVideoBG=c.hasVideoBG()),c.isValid()&&(c.fixed_position&&a.fixedWidgets.push(c),e.push(c))}.bind(this)),this.animations=new b.a({page:this,widgets:e}),this.widgets=o.a.sortBy(e,"y"),this.signalOnLoading(),this._onFontsLoad=[],this._widgetsWithFontsToLoad=[],this._fontLoaderCalled=0,this._widgetsWithFontsCount=o.a.reduce(this.widgets,(function(t,e){return t+(e.hasFontsToLoad()?1:0)}),0),this._widgetsWithLoadAnimation=o.a.reduce(this.widgets,(function(t,e){return t+(e.hasLoadAnimation()?1:0)}),0),this.hasFixedWidgets=!!this.fixedWidgets.length;var s=m.a.isOn(t,this.mag.getViewportWidth(t),this.mag.viewOpts)&&m.a.isCSSTransform();this.$el.removeClass("page-with-fixeds-desktop page-with-fixeds-sticky-or-mobile").toggleClass("page-with-fixeds-desktop",this.hasFixedWidgets&&x.a.isDesktop).toggleClass("page-with-fixeds-sticky-or-mobile",!(!this.hasFixedWidgets||!this.isStickyVerticalViewer&&x.a.isDesktop&&!s)),this.hasFixedWidgets&&!this.retargetScroll&&"horizontal"==this.viewerType&&x.a.isDesktop&&(this.retargetScroll=k.a&&Object(k.a)(this.$fixedPositionContainerTop.get(0),this.$scrollWrapper.get(0)),k.a&&Object(k.a)(this.$fixedPositionContainer.get(0),this.$scrollWrapper.get(0))),this.lastViewportUsedForWidgetsCreation=t},getWidgetViewportData:function(t,e){var i=o.a.clone(t),n={},r=["text_w","text_h","em_w","anchor_link_pos","font-size","font-style","font-weight","font-family","color","color-opacity","letter-spacing","hover-color","hover-color-opacity","current-font-size","current-font-style","current-font-weight","current-font-family","current-color","current-color-opacity","current-letter-spacing","background-color","background-color-opacity","hover-background-color","hover-background-color-opacity","current-background-color","current-background-color-opacity","border-radius","border-width","border-color","border-color-opacity","hover-border-width","hover-border-color","hover-border-color-opacity","current-border-radius","current-border-width","current-border-color","current-border-color-opacity"];return"default"!=e&&t["viewport_"+e]&&(o.a.each(S.c.viewport_fields[t.type]||S.c.viewport_fields_common,(function(i){if(("shape"!=t.type||"borders"!=i&&"weight"!=i&&"bg_color"!=i)&&!("background"==t.type&&"picture"==i||"text"===t.type&&3===t.version&&"blocks"===i)){if(n[i]=void 0,O.a.isGlobalKey(i)){var a=O.a.getGlobalPrefixedKey(i);n[a]=void 0}n[i]="button"===t.type&&!o.a.has(t["viewport_"+e],i)&&r.includes(i)?t[i]:void 0}})),o.a.extend(i,n,o.a.omit(t["viewport_"+e],["_id","modelType"]))),t.is_global&&O.a.fillUniqueValues(i,this._id,{}),i},getWidgetById:function(t){return o.a.findWhere(this.widgets,{_id:t})},getWidgetDataById:function(t){return o.a.findWhere(this.widgetsData,{_id:t})},signalOnLoading:function(){var t=this.widgets.length,e=this,i={};function n(){t--,clearTimeout(i[this._id]),"background"==this.type&&e.destroyLQBackground({animate:!0}),this.hasLoadAnimation()&&(e._widgetsWithLoadAnimation--,e._widgetsWithLoadAnimation||(e.loadAnimationsReady=!0,e.trigger("loadAnimationsReady"))),t||(e.fireReadyTimeout=setTimeout(r,200)),e.trigger("loaded"+this._id)}function r(){e.loaded=!0,e.trigger("pageLoaded")}o.a.each(this.widgets,(function(t){RM.screenshot&&(i[t._id]=setTimeout((function(){t.widgetIsLoaded()}),2e4)),t.on("loaded",n,t)}),this),this.BGWidget&&this.hasVideoBG&&this.BGWidget.on("videoBGStarted",(function(){e.videoBGStarted=!0,o.a.delay((function(){e.trigger("videoBGStarted")}),1300)}),this.BGWidget),0==t&&(this.fireReadyTimeout=setTimeout(r,200))},getFontsVariations:function(t,e){var i=y.a.getUsedFontsFromWidgetsModels({includeCustom:!0,customList:o.a.filter(this.mag.edit_params.fonts,{provider:"custom"}),models:t,excludeUnusedDefault:e,activeViewports:[this.getPageViewport()]}),n=[];return o.a.each(i,(function(t){for(var e=0;e<t.used_variations.length;e++)n.push({fontFamily:t.css_name,fontWeight:100*(t.used_variations[e].substr(1,1)-0),fontStyle:"n"==t.used_variations[e].substr(0,1)?"normal":"italic"})})),n},addFontsToLoad:function(t,e){if(this._widgetsWithFontsToLoad.push(t),this._onFontsLoad.push(e),this._fontLoaderCalled++,this._fontLoaderCalled==this._widgetsWithFontsCount){var i=this.getFontsVariations(this._widgetsWithFontsToLoad);if(o.a.isEmpty(i))return void this.onAllFontsLoad();this._fontsToLoadLeft=i.length,o.a.each(i,o.a.bind((function(t){y.a.exactWaitForFontLoad(t.fontFamily,t.fontWeight,t.fontStyle,this.onOneFontLoad)}),this))}},onOneFontLoad:function(t,e,i,n){this._fontsToLoadLeft--,0==this._fontsToLoadLeft&&o.a.delay(this.onAllFontsLoad,500)},onAllFontsLoad:function(){o.a.each(this._onFontsLoad,(function(t){t&&t()}))},updateViewport:function(){var t=this.getPageViewport();t!=this.pageViewport&&(this.pageViewport=t,this.createLQBackground(),this.shown&&(this.loadAnimationsReady=!1,this.createWidgetsForCurrentViewport(),this.started&&(this.started=!1,this.start())))},waitForAnimationEnd:function(t){this.resetWaitHook=f.default.waitForTransitionEnd(this.$el,this.mag.getPageTransitionTime()+1e3,"transform",t)},resetWaitForAnimationEnd:function(){this.resetWaitHook&&this.resetWaitHook()},backToTop:function(){this.scrollTo(0)},scrollTo:function(t){this.$scrollWrapper.finish(),this.$scrollWrapper&&this.$scrollWrapper.animate({scrollTop:t},500)},focusPage:function(){x.a.isDesktop&&"vertical"!=this.viewerType&&0==this.$el[0].getBoundingClientRect().left&&(this.$content.focus(),this.mag.$el.scrollTop(0))},markAsLast:function(){this.lastPage=!0,this.$el.addClass("last")},isLastPage:function(){return!!this.lastPage},isBottomArrowVisible:function(){return!this.wasScrolled&&this.scrollable},scrollPageALittle:function(){this.$scrollWrapper.animate({scrollTop:Object(n.a)(window).height()/2},500)},getPageViewport:function(){var t=this.mag.viewport,e=this;if("default"==t||RM.screenshot)return"default";if(this["viewport_"+t]&&this["viewport_"+t].enabled)return t;var i=o.a.findWhere(S.c.viewports,{name:t}).width,n=o.a.reduce(S.c.viewports,(function(t,n,r){return("default"==n.name||e["viewport_"+n.name]&&e["viewport_"+n.name].enabled)&&Math.abs(n.width-i)<=Math.abs(S.c.viewports[t].width-i)?r:t}),0);return S.c.viewports[n].name},onResize:function(t){if(t=t||{},this.shown||"horizontal"!=this.viewerType){var e=this.mag.getContainerSizeCached(),i=this.mag.getViewportWidth(this.pageViewport),n=S.c.dictionary[this.pageViewport].width,r=this.mag.getScale(this.pageViewport),a=this["viewport_"+this.pageViewport]&&this["viewport_"+this.pageViewport].height||this.height,o={width:n,height:a,scaledWidth:Math.round(i*r),scaledHeight:Math.round(a*r),scale:r},s=RM.screenshot&&"true"===f.default.queryUrlGetParam("pdf"),c=Math.min(o.scaledWidth,e.width),l=o.scaledHeight,u=s?0:Math.max(((RM.screenshot?672:e.height)-l)/2,0),d=Math.max(((RM.screenshot?1024:e.width)-c)/2,0)+(i-n)/2,h={width:o.width,height:o.height,top:u/(m.a.isCSSZoom()&&m.a.isDesktopDefault(this.pageViewport)?m.a.downscaleEnabled?r:Math.max(r,1):1),left:d};if((r>=1||m.a.downscaleEnabled)&&m.a.isOn(this.pageViewport,i,this.mag.opts)&&m.a.isCSSZoom()&&(h.zoom=r,h.left=e.width>this.mag.opts.scalewidth?(e.width/r-n)/2:(i-n)/2),this.$content.removeAttr("style"),this.$content.css(h),this.contentPosition={left:d,top:u},1===m.a.normalize(r,"transform",this.pageViewport,i,this.mag.viewOpts)?f.default.applyTransform(this.$content,""):(f.default.applyTransform(this.$content,"scale("+o.scale+")"),m.a.isDesktopDefault(this.pageViewport)?this.$content.css({left:Math.max((e.width-c)/2,0)+(i-n)/2*o.scale}):this.$content.css({left:(i-n)/2*o.scale})),this.contentHeight=a,this.pageHeight=Math.max(e.height,Math.round(a*r)),this.pageBgHeight=e.height,this.pageWidth=i,"vertical"==this.viewerType&&this.isStickyVerticalViewer&&this.$el.css({height:this.pageHeight,top:t.absolutePosition}),this.scale=r,this.$contentBounds.css({width:e.width,height:this.pageHeight}),null!=this.prevScale&&this.prevScale!=this.scale){if(this.animations){var p,g=null===(p=this.animations.animations)||void 0===p?void 0:p.filter((function(t){return M.findPlayingVideo(t.widgets)}));this.animations.updateTimelines(g.map((function(t){return t.animation.UUID})))}m.a.isOnForRatio(this.pageViewport,this.scale,this.mag.opts)&&this.animations&&(this.animations.resetStarted(),this.animations.start.__debounced())}return this.animations&&this.animations.onResize(),this.trigger("resize",{containerSize:e,contentPosition:this.contentPosition}),this.scrollable=Math.round(a*r)-this.mag.SCROLLABLE_TRESHOLD>e.height,this.mag.recalcBottomArrowState(this),this.visibleWidgetsCoords=this.visibleWidgetsCoords||{},this.visibleWidgetsCoords.top=-u,this.visibleWidgetsCoords.bottom=-u+e.height,this.visibleWidgetsCoords.scale=r,this.resizeLQBackground(),this.prevScale=this.scale,this.pageHeight}},onScroll:function(){this.wasScrolled=!0,this.mag.recalcBottomArrowState(this),this.visibleWidgetsCoords=this.visibleWidgetsCoords||{},this.visibleWidgetsCoords.scrollTop=this.$scrollWrapper.scrollTop(),this.mag.onCurrentPageScroll(this,this.visibleWidgetsCoords.scrollTop),this.animations&&this.animations.onScroll(),this.trigger("page scroll",this.visibleWidgetsCoords.scrollTop)},isCurrent:function(){return this.num===this.mag.currentPage.num},createLQBackground:function(){if(!RM.screenshot){var t=this.getWidgetViewportData(o.a.findWhere(this.widgetsData,{type:"background"}),this.pageViewport);if(this.LQBG){if("picture"===t.selectedType&&"picture"===this.LQBG.selectedType&&t.picture&&this.LQBG.picture&&t.picture.poorUrl===this.LQBG.picture.poorUrl||"video"===t.selectedType&&"video"===this.LQBG.selectedType&&t.video&&this.LQBG.video&&t.video.thumbnail_url===this.LQBG.video.thumbnail_url)return void this.resizeLQBackground();this.destroyLQBackground({animate:!1})}if(this.$fixedBgContainer.css("background-color","#"+t.color),t.picture&&"picture"===t.selectedType&&(t.picture.poorUrl||g.a.useLambdaUrl(t.picture))||t.video&&"video"===t.selectedType&&t.video.thumbnail_url){this.LQBG=o.a.extend({},t);var e=I["template-viewer-widget-background"];if(this.LQBG.$el=Object(n.a)(e({data:t})),this.LQBG.$el.addClass("low-quality").appendTo(this.$fixedBgContainer),"picture"===this.LQBG.selectedType){var i=this.LQBG.picture.poorUrl;g.a.useLqipUrl(t.picture)&&(i=g.a.getLqipUrl(this.LQBG.picture),this.LQBG.$el.addClass("lqip").appendTo(this.$fixedBgContainer)),Object(n.a)("<img/>").on("load",o.a.bind((function(){this.LQBG&&this.LQBG.$el.find(".picture-background").css({"background-image":"url(".concat(i,")")})}),this)).attr("src",i)}if("video"===this.LQBG.selectedType){var r=this.LQBG.video.thumbnail_url.replace("http://","https://"),a=Object(n.a)("<img/>").addClass("poster").css("opacity",0).appendTo(this.LQBG.$el.find(".video-background .video-container"));a.on("load",o.a.bind((function(){a.css({width:"",height:""}).css("opacity",1);var t=a[0].width,e=a[0].height;this.LQBG&&!this.LQBG.video.aspect_poster&&(this.LQBG.video.aspect_poster=t/e),this.resizeLQBackground()}),this)).attr("src",r)}}}},resizeLQBackground:function(){!RM.screenshot&&this.LQBG&&"video"===this.LQBG.selectedType&&w.a.setVideoPosition({mag:this.mag,$container:this.LQBG.$el.find(".video-background .video-container"),$media:this.LQBG.$el.find(".video-background .video-container .poster"),provider:this.LQBG.video.provider_name,aspect_poster:this.LQBG.video.aspect_poster,aspect_real:this.LQBG.video.aspect_real,controls_remove:!0})},destroyLQBackground:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!RM.screenshot&&this.LQBG){t.animate=t.animate&&"picture"===this.LQBG.selectedType&&this.started;var e=this.LQBG.$el;this.LQBG=null,t.animate?(e.css("opacity",0),setTimeout((function(){e.remove()}),400)):e.remove()}},fixSafariScroll:function(t){Modernizr.safari&&x.a.isDesktop&&(0!==this.$scrollWrapper.scrollTop()&&this.$scrollWrapper.scrollTop(0))}},{getScreenIndex:function(t,e,i,n){var r,a=Math.floor((t.y-e)/i),o=Math.ceil((t.y+t.h-e)/i)-1;return n&&t.canRenderImmediately()?r=1/0:t.hasLoadAnimation()||a<=0&&o>=0?r=0:a>0?r=a:o<0&&(r=o),{start:a,end:o!==1/0?o:0,index:r}},findPlayingVideo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.find((function(t){return"video"===t.type&&t.isPlaying}))}});e.a=M},"38uW":function(t,e,i){"use strict";i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return u})),i.d(e,"d",(function(){return d})),i.d(e,"b",(function(){return h}));var n=i("fueH"),r=i("w5C2"),a=i("a68n"),o=i("Jzj8");function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l="lineHeight",u=function(t){var e=t.editorState,i=t.block,r=n.a.getBlockData({editorState:e,block:i,key:l});return"number"==typeof r?r:void 0},d=function(t){var e=t.block,i=t.editorState,r=t.lineHeight;return n.a.setBlockData({editorState:i,block:e,key:l,value:r})},h=function(t){var e=t.editorState,i=t.method,n=u({editorState:e}),c="number"==typeof n&&n,l=Object(a.b)({editorState:e}),h=Object(o.d)()||{project:[],global:[]},p=[].concat(s(h.project),s(h.global)).find((function(t){return t.name===l})),f=!!l&&Object(a.c)(null==p?void 0:p.cssProperties.lineHeight);if(8!==n&&8!==f){var g=c||f||r.b.lineHeight;return"increase"===i?d({editorState:e,lineHeight:g+1}):"decrease"===i?d({editorState:e,lineHeight:Math.max(8,g-1)}):void 0}}},"3ES5":function(t,e,i){"use strict";var n=i("vOnD"),r=i("q1tI"),a=i.n(r),o=i("5BzK"),s=i("w5C2"),c=i("8Tds"),l=i("za5s"),u=i("ICos"),d=i("pFlR"),h=i("v92f"),p=Object(n.default)(o.Flex).withConfig({displayName:"TextBase___StyledFlex"})(["--editor-border-color:",";direction:",";overflow:",";"," & > div{","}.public-DraftEditor-content{white-space:normal !important;overflow-wrap:break-word;}.text-viewer{overflow-wrap:break-word;white-space:normal;}"," & div[data-contents='true'],.text-viewer{font-feature-settings:'liga' 0,'rlig' 0,'dlig' 0,'hlig' 0,'smcp' 0;font-family:",";font-weight:",";font-style:",";font-size:","px;line-height:","px;-webkit-nbsp-mode:normal;-webkit-line-break:after-white-space;white-space:pre-wrap;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;}"],(function(t){return t._css}),(function(t){return t._css2}),(function(t){return t._css3}),(function(t){return t._css4}),(function(t){return t._css5}),(function(t){return t._css6}),(function(t){return t._css7}),(function(t){return t._css8}),(function(t){return t._css9}),(function(t){return t._css10}),(function(t){return t._css11})),f=function(t,e){var i=t.textDirection,n=t.autosize,r=t.columns,o=t.verticalAlign,f=t.bgColor,g=t.shouldShowSelectionBorder,m=t.scale,v=t.viewport,b=t.viewerOptions,y=t.children,w=t.useBaseline,S=f?Object(u.f)(f):void 0,O=S?"rgba(".concat(S.r,", ").concat(S.g,", ").concat(S.b,", ").concat(S.a,")"):void 0;return a.a.createElement(p,{ref:e,height:!n||r&&r.count>1?"100%":"auto",flexDirection:"column",justifyContent:o&&o!==c.d.top?"flex-end":"flex-start",bg:O,_css:g?Object(l.themeGet)("colors.blue"):"transparent",_css2:i,_css3:r&&r.count>1||!n?"hidden":"visible",_css4:m&&d.a.isOnForRatio(v||h.b.Default,m,b||{})&&d.a.isCSSZoom()?"\n              width: ".concat("".concat(1/m*100,"%"),";\n              height: ","".concat(1/m*100,"%"),";\n              zoom: ",1/m,";\n              transform: ","scale(".concat(m,")"),";\n              transform-origin: left top;\n            "):"",_css5:r&&r.count>1&&"\n            min-height: 100%;\n            column-fill: auto;\n            column-count: ".concat(r.count,";\n            column-gap: ").concat(r.gap,"px;\n          "),_css6:w?"":"\n          .text-viewer span,\n          .text-viewer a,\n          & div[data-contents='true'] span,\n          & div[data-contents='true'] a {\n            line-height: inherit;\n            vertical-align: top;\n          }\n        ",_css7:s.b.fontFamily,_css8:s.b.fontWeight,_css9:s.b.fontStyle,_css10:s.b.fontSize,_css11:s.b.lineHeight},y)};e.a=a.a.forwardRef(f)},"3KdP":function(t,e,i){"use strict";var n;i.d(e,"a",(function(){return n})),function(t){t.UpgradeAccountToUse="upgradeAccountToUse",t.EcommHasInvalidAddToCartWidget="ecommHasInvalidAddToCartWidget",t.WorkspaceAnimationTriggerRemoved="workspaceAnimationTriggerRemoved",t.WorkspaceAnimationTriggerUnlinked="workspaceAnimationTriggerUnlinked",t.BottomBlocksToMove="bottomBlocksToMove",t.EduTipUseViewportsIcon="eduTipUseViewportsIcon",t.EduTipOnDeleteMobileWidget="eduTipOnDeleteMobileWidget",t.EduTipUseBundleDragTriangle="eduTipUseBundleDragTriangle",t.EduTipUseShortcutToChangeSizes="eduTipUseShortcutToChangeSizes",t.EduTipUseShortcutToMoveText="eduTipUseShortcutToMoveText",t.EduTipUseShortcutToCopyAnimation="eduTipUseShortcutToCopyAnimation",t.EduTipUseShortcutToEnableGuides="eduTipUseShortcutToEnableGuides",t.EduTipUseShortcutToEnableSizes="eduTipUseShortcutToEnableSizes",t.EduTipUseFix="eduTipUseFix",t.EduTipUseAbovePages="eduTipUseAbovePages",t.EduTipUseStylesForText="eduTipUseStylesForText",t.EduTipUseShortcutForGroup="eduTipUseShortcutForGroup",t.EduTipSetNamesForWidgets="eduTipSetNamesForWidgets",t.EduTipUseResrtorePanel="eduTipUseResrtorePanel",t.TextWidgetPasteWithoutFormatting="textWidgetPasteWithoutFormatting"}(n||(n={}))},"5ta/":function(t,e,i){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=i("xG9w"),r=void 0!==e(t)&&t.exports;function a(t,e){var i=t.split(".");return i.length>1?(i[i.length-2]+="_"+e,i.join(".")):t+"_"+e}var o="Built with Readymag—a tool to design anything on the web.";function s(t,e){return t?e&&-1===t.indexOf("://")?e+t:t:""}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r?e.host:window.location.protocol+"//"+window.location.host,n=t&&t.screenshot;return n?s(a(n,1024),i):""}function l(t){var e=t.prefix+t.val+t.suffix;if(t.minLength=t.minLength||1,e.length>116){var i=Math.max(t.val.length-(e.length-116+1),t.minLength);e=t.prefix+t.val.substring(0,i)+"…"+t.suffix}return e}function u(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.isEmpty(e)||!n.isObject(e))return{};var r=e.emptyTitle?"":e.title,a=t?t.seo&&t.seo.title?t.seo.title:t.title?t.title:"":"",s="",u=e.description||(i.customDomain?"":o),d="";i.customDomain?s=i.forProject?r||"Project":(r?r+" — ":"")+(a||"Page "+t.num):(i.forProject||(s=(a?"‘"+a+"’":"Page "+t.num)+" from "),s+=(r?"‘"+r+"’":"Project")+" by "+e.user.name,i.forProject&&e.description&&(s+=" | Readymag")),d=i.forProject?c(n.findWhere(e.pages,{num:1}),i):c(t,i);var h="";return i.customDomain?i.forProject?h=r?l({prefix:"",val:r,suffix:""}):"Project":r||a?!r&&a?h=l({prefix:"",val:a,suffix:""}):r&&!a?h=l({prefix:"",val:r,suffix:" — Page "+t.num}):r&&a&&(h=l({prefix:"",val:r,suffix:" — "+a,minLength:20})).length>116&&(h=a).length>116&&(h=l({prefix:"",val:a,suffix:""})):h="Page "+t.num:i.forProject?h=r?l({prefix:"‘",val:r,suffix:"’ by "+e.user.name}):"Project by "+e.user.name:r||a?!r&&a?h=l({prefix:"‘",val:a,suffix:"’ from Project by "+e.user.name}):r&&!a?h=l({prefix:"Page "+t.num+" from ‘",val:r,suffix:"’ by "+e.user.name}):r&&a&&(h=l({prefix:"‘"+a+"’ from ‘",val:r,suffix:"’ by "+e.user.name,minLength:20})).length>116&&(h="‘"+a+"’ by "+e.user.name).length>116&&(h=l({prefix:"‘",val:a,suffix:"’ by "+e.user.name})):h="Page "+t.num+" from Project by "+e.user.name,{image:d,title:s||"",description:u||"",tweet:h}}function d(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.isEmpty(e)||!n.isObject(e))return{};var r=u(t,e,i),a=e.master_share_pid&&n.find(e.pages,(function(t){return t._id.toString()===e.master_share_pid.toString()})),o=i.forProject?n.findWhere(e.pages,{num:1}):t,s=a||o,l=s.custom_shares;return n.isEmpty(l)||(r.title=l.title||"",r.description=l.description||"",r.tweet=l.tweet||"",l.image?r.image=l.image:s.screenshot?r.image=c(s,i):r.image=""),r}function h(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.isEmpty(e)||!n.isObject(e))return{};var r=e.emptyTitle?"":e.title,a="",s="";return i.customDomain?t&&t.num>1?a=(r?r+" — ":"")+(t.title||"Page "+t.num):(a=r||"Project",s=e.description||""):(t&&t.num>1?a=(t.title?"‘"+t.title+"’":"Page "+t.num)+" from ":s=e.description||o,a=r||"Project"),{title:a||"",description:s||"",keywords:""}}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:626,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:436;window.open(t,"sharer","width="+e+",height="+i+",toolbar=0,status=0")}t.exports={SUPPORT_MAIL:"support@readymag.com",addFilenameComponent:a,defaultDescription:o,maxTweetLen:116,addOrigin:s,removeFilenameComponent:function(t){var e=t.split(".");if(e.length>1){var i=e[e.length-2].split("_");if(i.length>1&&!isNaN(Number(i[i.length-1]))){i.pop();var n=i.join("_");return e[e.length-2]=n,e.join(".")}}return t},getPageScreenshot:c,getDefaultShare:u,getDefaultSEO:h,getFinalShare:d,getFinalSEO:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.isEmpty(e)||!n.isObject(e))return{};var r=h(t,e,i);return r.title=t.seo&&t.seo.title||r.title,r.description=t.seo&&t.seo.description||r.description,r.keywords=t.seo&&t.seo.keywords||r.keywords,r},share:function(t){var e,i=d(t.page,t.mag,{forProject:t.forProject,customDomain:t.customDomain}),n=t.mag.emptyTitle?"":t.mag.title;if(/^https?:\/\//i.test(t.host)||(t.host="http://"+t.host),t.exportBasePath&&(t.host+=t.exportBasePath),/\/$/i.test(t.host)||(t.host+="/"),e=t.forProject?"".concat(t.host).concat(t.customDomain&&!t.customDomainProfile?"":"".concat(t.mag.num_id,"/")):t.exportBasePath?"".concat(t.host).concat(t.page.uri||t.page.num,"/"):"".concat(t.host,"p").concat(t.page.num_id,"/"),t.publishedVersion){var r;if("facebook"===t.tp&&p("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e)),"twitter"===t.tp)r=n?l({prefix:"I’ve just published a project ‘",val:n,suffix:"’"}):"I’ve just published a Project",p("https://twitter.com/share?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(r));if("email"===t.tp){var a=encodeURIComponent((t.mag.is_private?"private ":"")+(n?"project ‘"+n+"’":"Project")),o="Check out my "+a,s="Hey, check out my new "+a+": "+e+(t.mag.is_private?encodeURIComponent("\n")+"Password: "+t.mag.pass:"");window.location.href="mailto:?subject="+o+"&body="+s}}else{if("facebook"===t.tp&&p("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e)),"twitter"===t.tp&&p("https://twitter.com/share?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(i.tweet)),"gplus"===t.tp&&p("https://plus.google.com/share?url="+encodeURIComponent(e)),"pinterest"===t.tp&&p("http://pinterest.com/pin/create/button/?url="+encodeURIComponent(e)+"&media="+encodeURIComponent(i.image)+"&description="+encodeURIComponent(i.title)),"linkedin"===t.tp&&p("http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(e)+"&title="+encodeURIComponent(i.title)+(i.description?"&summary="+encodeURIComponent(i.description):""),552,460),"email"===t.tp){var c="Check out "+encodeURIComponent(i.title),u=c+encodeURIComponent("\n\n")+e+(t.mag.is_private?encodeURIComponent("\n")+"Password: "+t.mag.pass:"");window.location.href="mailto:?subject="+c+"&body="+u}if("report"===t.tp){var h="Report "+encodeURIComponent(e),f=encodeURIComponent("Please tell us why are you reporting this: ");window.location.href="mailto:support@readymag.com?subject="+h+"&body="+f}}if("report"!==t.tp){var g=t.source+" / "+t.tp+" ("+(t.forProject?"project":"page")+") / "+i.title+" ("+e+")";t.analytics&&t.analytics.sendEvent("Share",g)}}}}).call(this,i("YuTi")(t))},"8AXF":function(t,e,i){"use strict";i.r(e),i.d(e,"BackboneContext",(function(){return f})),i.d(e,"BackboneContextProvider",(function(){return g})),i.d(e,"BackboneCollectionContextProvider",(function(){return m})),i.d(e,"CreateContextProvider",(function(){return v})),i.d(e,"renderReact",(function(){return b}));var n=i("PMIj"),r=i.n(n),a=i("q1tI"),o=i.n(a),s=i("i8i4"),c=i.n(s);function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var f=o.a.createContext({}),g=function(t){var e=t.domElement,i=t.model,n=t.children,r=t.context,s={modelSet:function(t,e){return i.set(t,e)},modelUnset:function(t,e){return i.unset(t,e)},modelSave:function(t,e){return i.save(t,e)},destroy:function(){e&&(c.a.unmountComponentAtNode(e),e&&e.parentNode&&e.parentNode.removeChild(e))}},l=h(Object(a.useState)({model:i.attributes}),2),d=l[0],p=l[1],f=function(t){p(u(u({},d),{},{model:t.attributes}))};return Object(a.useEffect)((function(){return i.on("change",f),function(){i.off("change",f)}}),[i]),o.a.createElement(r.Provider,{value:u(u({},d),s)},n)},m=function(t){var e=t.domElement,i=t.collection,n=t.children,r=t.context,s={elementSet:function(t,e,n){var r=i.get(t);if(!r)throw new Error("Element not found");return r.set(e,n)},elementUnset:function(t,e,n){var r=i.get(t);if(!r)throw new Error("Element not found");return r.unset(e,n)},elementSave:function(t,e,n){var r=i.get(t);if(!r)throw new Error("Element not found");return r.save(e,n)},destroy:function(){e&&(c.a.unmountComponentAtNode(e),e&&e.parentNode&&e.parentNode.removeChild(e))}},l=h(Object(a.useState)({collection:i.map((function(t){return t.attributes}))}),2),d=l[0],p=l[1],f=function(t){var e=t.get("_id");p((function(i){var n=i.collection.findIndex((function(t){return t._id===e}));if(-1===n)return{collection:i.collection};var r=i.collection.splice(0);return r[n]=t.attributes,{collection:r}}))},g=function(t){p((function(e){var i=e.collection.splice(0);return i.push(t.attributes),{collection:i}}))},m=function(t){var e=t.get("_id");p((function(t){var i=t.collection.findIndex((function(t){return t._id===e}));if(-1===i)return{collection:t.collection};var n=t.collection.splice(0);return n.splice(i,1),{collection:n}}))};return Object(a.useEffect)((function(){return i.on("change",f),i.on("add",g),i.on("remove",m),function(){i.off("change",f),i.off("add",g),i.on("off",m)}}),[i]),o.a.createElement(r.Provider,{value:u(u({},d),s)},n)},v=function(t){var e=t.model,i=t.collection,n=t.domElement,r=t.context,a=t.children;return e?o.a.createElement(g,{model:e,domElement:n,context:r},a):i?o.a.createElement(m,{collection:i,domElement:n,context:r},a):o.a.createElement(o.a.Fragment,null,a)},b=function(t){var e=t.component,i=t.domElement,n=t.model;n?c.a.render(o.a.createElement(r.a,null,o.a.createElement(v,{model:n,domElement:i,context:f},o.a.createElement(e,null))),i):c.a.render(o.a.createElement(e,null),i)}},"8RDp":function(t,e,i){"use strict";i.d(e,"b",(function(){return u}));var n=i("q1tI"),r=i.n(n),a=i("ICos"),o=i("8Tds");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u=function(t){var e=t||{},i=e.type,n=void 0===i?o.a.None:i,r=e.color,s=void 0===r?"00000064":r,l=e.size,u=void 0===l?1:l,d=e.padding,h=void 0===d?0:d,p=Object(a.f)(s),f=p.r,g=p.g,m=p.b,v=p.a,b="rgba(".concat(f,", ").concat(g,", ").concat(m,", ").concat(v,")"),y=u+h,w=y>0?"0 100%":"0 ".concat(100+y,"%"),S={textDecoration:"none",paddingBottom:Math.max(0,y)};switch(n){case o.a.Solid:return c(c({},S),{},{background:"linear-gradient(to right, ".concat(b," 0%, ").concat(b," 100%) ").concat(w,"/1px ").concat(u,"px ").concat("repeat-x")});case o.a.Dotted:return c(c({},S),{},{background:"linear-gradient(to right, ".concat(b," 0%, ").concat(b," 50%, transparent 50%, transparent 100%) ").concat(w,"/").concat(2*u,"px ").concat(u,"px ").concat("repeat-x")});case o.a.Dashed:return c(c({},S),{},{background:"linear-gradient(to right, ".concat(b," 0%, ").concat(b," 66.6666%, transparent 66.6666%, transparent 100%) ").concat(w,"/").concat(3*u,"px ").concat(u,"px ").concat("repeat-x")});default:return c(c({},S),{},{background:"none"})}};e.a=function(t){if(!t)return r.a.createElement("div",{style:{width:"100%"}});var e=Object(n.useMemo)((function(){return u(t)}),[t.type,t.size,t.color,t.padding]);return(r.a.createElement("div",{style:c(c({},e),{},{width:"100%"})}))}},"8Tds":function(t,e,i){"use strict";var n,r,a,o;i.d(e,"d",(function(){return n})),i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o})),function(t){t.top="top",t.bottom="bottom"}(n||(n={})),function(t){t.LTR="LTR",t.RTL="RTL"}(r||(r={})),function(t){t.global="global",t.project="project"}(a||(a={})),function(t){t.None="None",t.Solid="Solid",t.Dotted="Dotted",t.Dashed="Dashed"}(o||(o={}))},"9GTV":function(t,e,i){!function(t,e){var n={update_playing_element:function(t,e,i){var n="rgba("+i.r+", "+i.g+", "+i.b+", "+.2*i.a+")",r="rgba("+i.r+", "+i.g+", "+i.b+", "+.1*i.a+")";t.style.cssText+="background: -webkit-linear-gradient(left, "+n+e+"%, "+r+(e+.1)+"%);background: linear-gradient(to right, "+n+e+"%, "+r+(e+.1)+"%);"}};for(var r in t.SOUNDCITE_CONFIG)n[r]=t.SOUNDCITE_CONFIG[r];var a=t.soundcite={};/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?a.mobile=!0:a.mobile=!1;var o,s,c=e.head||e.getElementsByTagName("head").item(0)||e.documentElement.childNodes[0],l=[],u="none",d="none",h=[],p=[];function f(t){var i={r:0,g:0,b:0,a:1};if(e.defaultView&&e.defaultView.getComputedStyle){var n=e.defaultView.getComputedStyle(t,null);if(n){var r=n.getPropertyValue("color").toLowerCase(),a=r.match(/\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*/)||r.match(/\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d+|\d*\.\d+)\s*\)\s*/);a?i={r:a[1]-0,g:a[2]-0,b:a[3]-0,a:void 0!==a[4]?a[4]-0:1}:(r=r.replace("#",""),i={r:parseInt(r.substring(0,2),16),g:parseInt(r.substring(2,4),16),b:parseInt(r.substring(4,6),16),a:1})}}return i}var g=function(t,e){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}};function m(i,n){var r,a=t.SC;if(u="loading",!a||!a.Dialog||function(t,e){for(var i=t.split("."),n=e.split("."),r=0;r<Math.min(i.length,n.length);r++){var a=parseInt(i[r])-parseInt(n[r]);if(a)return a}return i.length-n.length}(i,a._version)>0||n(a,u="loaded")){var o=e.createElement("script");o.type="text/javascript",o.src="//connect.soundcloud.com/sdk-2.0.0.js",o.onload=o.onreadystatechange=function(){"loading"!=u||(r=this.readyState)&&"loaded"!=r&&"complete"!=r||(n(t.SC,u="loaded"),c.removeChild(o))},c.appendChild(o)}}function v(t,e){for(var i=t.className,n=0,r=e.match(/\S+/g);n<r.length;n++)i=i.replace(new RegExp("(?:^|\\s)"+r[n]+"(?!\\S)"),"");t.className=i}function b(t,e){for(var i=t.className,n=0,r=e.match(/\S+/g);n<r.length;n++)i.match(new RegExp("(?:^|\\s)"+r[n]+"(?!\\S)"))||(i+=" "+r[n]);t.className=i}function y(t){this.el=t,this.start=t.hasAttribute("data-start")?t.getAttribute("data-start"):0,this.end=t.hasAttribute("data-end")?t.getAttribute("data-end"):null,this.plays=t.hasAttribute("data-plays")?parseInt(t.getAttribute("data-plays")):1,this.plays_left=this.plays,this.playing=!1,this.sound=null,this.click_handler_binded=g(this.click_handler,this),l.push(this)}function w(t){y.apply(this,Array.prototype.slice.call(arguments)),this.id=t.getAttribute("data-id"),"initialized"!==u&&(o.initialize({client_id:"5ba7fd66044a60db41a97cb9d924996a"}),u="initialized"),o.stream(this.id,g((function(t){this.destroyed?t._player.kill&&t._player.kill():(this.sound=t,this.sound._player.on("positionChange",g((function(t){this.track_progress(),this.playing&&(t<this.start&&this.sound.seek(this.start),t>=this.end&&(this.plays?(this.plays_left--,this.plays_left>0?this.play():this.stop()):this.play(),this.track_progress()),this.prevPos=t)}),this)),null===this.end&&(this.end=this.sound.getDuration()),this.sound_loaded())}),this))}function S(t){y.apply(this,Array.prototype.slice.call(arguments)),this.id="soundcite-audio-"+this.generateUUID(),this.url=t.getAttribute("data-url"),this.start=Math.floor(this.start/1e3),null!==this.end&&(this.end=Math.floor(this.end/1e3)),"initialized"!=d&&(a.audio_container=e.createElement("div"),b(a.audio_container,"soundcite-audio"),e.getElementsByTagName("body")[0].appendChild(a.audio_container),d="initialized"),this.audio=e.createElement("audio"),this.audio.id=this.id,this.audio.setAttribute("src",this.url),this.audio.setAttribute("preload","none"),a.mobile=!0,a.audio_container.appendChild(this.audio),this.sound=s("#"+this.id,{frameAnimation:!0}),this.sound.on("loadeddata",g((function(){null===this.end&&(this.end=this.sound.duration()),a.mobile||this.sound_loaded()}),this)),(a.mobile||this.sound.readyState()>1)&&this.sound_loaded()}y.prototype.generateUUID=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)}))},y.prototype.sound_loaded=function(){this.el.addEventListener("click",this.click_handler_binded),v(this.el,"soundcite-initializing"),this.el.style.display="none",this.el.offsetHeight,this.el.style.display="",b(this.el,"soundcite-loaded soundcite-play")},y.prototype.pause=function(){v(this.el,"soundcite-pause"),b(this.el,"soundcite-play"),this.playing=!1,this.pause_sound()},y.prototype.stop=function(){v(this.el,"soundcite-pause"),b(this.el,"soundcite-play"),this.playing=!1,this.plays_left=this.plays,this.stop_sound()},y.prototype.track_progress=function(){var t=this.end-this.start,e=100*(this.sound_position()-this.start)/t;this.color||(this.color=f(this.el)),n.update_playing_element(this.el,e,this.color)},y.prototype.click_handler=function(t){t.preventDefault(),function(t){for(var e=0;e<l.length;e++)l[e].playing&&(t&&t.el===l[e].el||l[e].pause())}(this),this.playing?this.pause():this.play()},y.prototype.destroy=function(t){this.destroyed=!0,this.playing&&this.pause(),this.el&&v(this.el,"soundcite-loaded soundcite-initializing soundcite-loading soundcite-play soundcite-pause"),this.el&&this.el.removeEventListener("click",this.click_handler_binded)},w.prototype=Object.create(y.prototype),w.prototype.sound_position=function(){return this.sound.getCurrentPosition()},w.prototype.pause_sound=function(){this.sound.pause()},w.prototype.stop_sound=function(){this.sound.stop()},w.prototype.play=function(){var t=this.sound_position();(t<this.start||t>=this.end)&&this.sound.seek(this.start),v(this.el,"soundcite-play"),b(this.el,"soundcite-pause"),this.sound.play(),this.playing=!0,this.prevPos=-1},w.prototype.destroy=function(){this.sound&&this.sound._player.kill&&this.sound._player.kill(),y.prototype.destroy.apply(this,arguments)},S.prototype=Object.create(y.prototype),S.prototype.sound_position=function(){return this.sound.currentTime()},S.prototype.pause_sound=function(){this.sound.pause(),this.sound.off("timeupdate")},S.prototype.stop_sound=function(){this.sound.off("timeupdate"),this.sound.pause()},S.prototype._play_sound=function(){v(this.el,"soundcite-loading soundcite-play"),b(this.el,"soundcite-pause"),this.sound.play(),this.playing=!0,this.sound.on("timeupdate",g((function(){this.track_progress(),this.playing&&this.sound.currentTime()>=this.end&&(this.plays?(this.plays_left--,this.plays_left>0?this.play_sound():this.stop()):this.play_sound(),this.track_progress())}),this))},S.prototype.play_sound=function(){var t=this.sound.currentTime();t<this.start||t>=this.end?(this.sound.on("seeked",g((function(){this.sound.off("seeked"),this._play_sound()}),this)),this.sound.currentTime(this.start)):this._play_sound()},S.prototype.play=function(){/soundcite\-loading/.test(this.el.className)||(a.mobile?(v(this.el,"soundcite-play"),b(this.el,"soundcite-loading"),this.startedLoading?this.play_sound():(this.sound.on("canplaythrough",g((function(){this.play_sound()}),this)),e.getElementById(this.id).load()),this.startedLoading=!0):this.play_sound())},S.prototype.destroy=function(){this.sound&&s.destroy(this.sound),this.audio&&a.audio_container.removeChild(this.audio),y.prototype.destroy.apply(this,arguments)},a.createPlayer=function(e){b(e,"soundcite-initializing"),b(e,"soundcite-force-bg-color"),n.update_playing_element(e,0,f(e)),e.getAttribute("data-url")&&("none"==d?(p.push(e),i.e(34).then(i.bind(null,"+qCX")).then((function(e){(0,e.default)(t,t.document),s=t.Popcorn;for(var i=0;i<p.length;i++)new S(p[i])}))):"loading"==d?p.push(e):new S(e)),e.getAttribute("data-id")&&("none"==u?(h.push(e),m("2.0.0",(function(t){o=t;for(var e=0;e<h.length;e++)new w(h[e])}))):"loading"==u?h.push(e):new w(e))},a.destroyPlayer=function(t){for(var e=l.length-1;e>=0;e--)l[e].el==t&&(l[e].destroy(),l.splice(e,1));for(e=p.length-1;e>=0;e--)p[e]==t&&p.splice(e,1);for(e=h.length-1;e>=0;e--)h[e]==t&&h.splice(e,1)},a.pausePlayer=function(t){for(var e=0;e<l.length;e++)t==l[e].el&&l[e].playing&&l[e].pause()},a.setElementsColor=function(t){n.update_playing_element(t,0,f(t))}}(window,document)},A9VP:function(t,e,i){"use strict";var n,r,a=i("fueH"),o=i("ICos");function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}!function(t){t.LetterSpacing="LETTER_SPACING",t.Color="COLOR",t.FontFeature="FONT_FEATURE",t.Stroke="STROKE",t.FontSize="FONT_SIZE",t.FontFamily="FONT_FAMILY",t.FontWeight="FONT_WEIGHT",t.FontStyle="FONT_STYLE",t.FontVariable="FONT_VARIABLE",t.IsLinkedFontSize="IS_LINKED_FONT_SIZE",t.IsLinkedLetterSpacing="IS_LINKED_LETTER_SPACING",t.Decoration="DECORATION",t.Transform="TRANSFORM",t.Features="FEATURES",t.FontKerning="FONT_KERNING"}(r||(r={}));var u=(s(n={},r.LetterSpacing,{name:"letterSpacing",value:function(t){return"".concat(t,"px")}}),s(n,r.FontFamily,{name:"fontFamily",value:function(t){return t}}),s(n,r.FontStyle,{name:"fontStyle",value:function(t){return t}}),s(n,r.FontWeight,{name:"fontWeight",value:function(t){return t}}),s(n,r.FontSize,{name:"fontSize",value:function(t){return"".concat(t,"px")}}),s(n,r.Color,{name:"color",value:function(t){var e=Object(o.f)(t),i=e.r,n=e.g,r=e.b,a=e.a;return"rgba(".concat(i,", ").concat(n,", ").concat(r,", ").concat(a,")")}}),s(n,r.FontFeature,{name:"fontFeatureSettings",value:function(t){return t.split(a.a.INLINE_STYLE_DELIMITER).filter((function(t){return t})).map((function(t){return'"'.concat(t,'"')})).join(", ")}}),s(n,r.FontVariable,{name:"fontVariationSettings",value:function(t){return t.split(a.a.INLINE_STYLE_DELIMITER).filter((function(t){return t})).map((function(t){var e=c(t.split("|"),2),i=e[0],n=e[1];return"'".concat(i,"' ").concat(n)})).join(", ")}}),s(n,r.Stroke,{styleFn:function(t){var e=c(t.split(a.a.INLINE_STYLE_DELIMITER),2),i=e[0],n=e[1],r=Object(o.f)(n),s=r.r,l=r.g,u=r.b,d=r.a,h="rgba(".concat(s,", ").concat(l,", ").concat(u,", ").concat(d,")"),p="".concat(i,"px ").concat(h);return{WebkitTextStroke:p,textStroke:p}}}),s(n,r.Decoration,{name:"textDecoration",value:function(t){return t}}),s(n,r.Transform,{name:"textTransform",value:function(t){return t}}),s(n,r.Features,{styleFn:function(t){switch(t){case"superscript":return{verticalAlign:"baseline",position:"relative",top:"-0.4em",fontSize:"smaller"};case"subscript":return{verticalAlign:"baseline",position:"relative",top:"0.4em",fontSize:"smaller"};default:return{}}}}),s(n,r.FontKerning,{styleFn:function(t){return"none"===t?{}:{fontKerning:"auto",WebkitFontKerning:"auto"}}}),n);function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"b",(function(){return f})),i.d(e,"a",(function(){return r}));var f=function(t){return Object.keys(u).reduce((function(e,i){var n=t.filter((function(t){return!!t&&t.startsWith(i)})).first();if(n){var r=n.replace("".concat(i).concat(a.a.INLINE_STYLE_DELIMITER),""),o=u[i];if(o.styleFn)return h(h({},e),o.styleFn(r));if(o.name&&o.value)return h(h({},e),{},p({},o.name,o.value(r)))}return e}),{})}},AIVH:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("xG9w"),r=function(t){return n.default.template(t.raw.join(""))}},D12m:function(t,e,i){"use strict";var n=i("xi34"),r=i("rFsW"),a=function(){};a.prototype={text_viewport_attributes:["style","class","data-size-leading-linked","data-size-leading-ratio","data-anchor-link-pos"],switchTextToViewport:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if("default"===e)return t;var i=Object(n.a)("<div>").html(t),a=this.text_viewport_attributes,o=this;i.find("*").each((function(){var t=Object(n.a)(this);r.a.each(a,(function(i){var n=o.getViewportAttributeName(i,e),r=o.getViewportAttributeName(i,"default"),a=t.attr(n),s=t.attr(i);t.removeAttr(r),s&&t.attr(r,s),a&&("empty"===a?t.removeAttr(i):t.attr(i,a))}))}));var s=i.html();return i.empty().remove(),s},getViewportAttributeName:function(t,e){var i=t+"-"+e;return/^data/.test(i)||(i="data-"+i),i}},e.a=a},Dkmh:function(t,e,i){"use strict";var n=i("v83y"),r=i("fueH"),a=i("vvfI"),o=i("38uW"),s=i("A9VP"),c=i("OTSC"),l=i("Jzj8"),u=i("a68n");function d(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var p,f=function(t){var e=t.editorState,i=t.method,n=r.a.getCurrentInlineStyles(e,s.a.LetterSpacing),a=n&&n.length?parseFloat(n[0]):0,o=Object(u.b)({editorState:e}),h=Object(l.d)()||{project:[],global:[]},p=[].concat(d(h.project),d(h.global)).find((function(t){return t.name===o})),f=!!o&&Object(u.c)(null==p?void 0:p.cssProperties.letterSpacing,!0),g=a||f||0,m="decrease"===i?-1:1;return r.a.applyInlineStyle({key:s.a.LetterSpacing,value:c.default.decimals(g+.2*m,2),editorState:e})},g=i("w5C2"),m=function(t){var e=t.editorState,i=t.method,n=r.a.getCurrentInlineStyles(e,s.a.FontSize),a=n&&n.length?parseInt(n[0]):g.b.fontSize,o="decrease"===i?-1:1;return r.a.applyInlineStyle({key:s.a.FontSize,value:a+o,editorState:e})},v=i("IrH7"),b=i("KiUg");i.d(e,"b",(function(){return y})),i.d(e,"c",(function(){return w})),i.d(e,"a",(function(){return S})),function(t){t.InsertNbsp="InsertNbsp",t.InsertThinsp="InsertThinsp",t.InsertEnsp="InsertEnsp",t.IncreaseIndent="IncreaseIndent",t.DecreaseIndent="DecreaseIndent",t.DecreaseLineHeight="DecreaseLineHeight",t.IncreaseLineHeight="IncreaseLineHeight",t.DecreaseLetterSpacing="DecreaseLetterSpacing",t.IncreaseLetterSpacing="IncreaseLetterSpacing",t.ToggleTypographyPanel="ToggleTypographyPanel",t.ToggleLinkPanel="ToggleLinkPanel",t.IncreaseFontSize="IncreaseFontSize",t.DecreaseFontSize="DecreaseFontSize",t.AlignLeft="AlignLeft",t.AlignRight="AlignRight",t.AlignCenter="AlignCenter",t.SelectParagraph="SelectParagraph",t.ToggleBold="ToggleBold",t.ToggleUnderline="ToggleUnderline",t.ToggleItalic="ToggleItalic"}(p||(p={}));var y=function(t){var e=t.event,i=t.keyCode,r=t.ctrlOrCmd,a=void 0!==r&&r,o=t.shift,s=void 0!==o&&o,c=t.alt,l=void 0!==c&&c,u=n.KeyBindingUtil.usesMacOSHeuristics();return i===e.keyCode&&s===e.shiftKey&&l===e.altKey&&(u?a===e.metaKey:a===e.ctrlKey)},w=function(t){return y({event:t,keyCode:32,alt:!0})||y({event:t,keyCode:32,alt:!0,ctrlOrCmd:!0})?p.InsertNbsp:y({event:t,keyCode:32,alt:!0,ctrlOrCmd:!0,shift:!0})?p.InsertThinsp:y({event:t,keyCode:32,alt:!0,shift:!0})?p.InsertEnsp:y({event:t,keyCode:9})?p.IncreaseIndent:y({event:t,keyCode:9,shift:!0})?p.DecreaseIndent:y({event:t,keyCode:38,alt:!0})?p.DecreaseLineHeight:y({event:t,keyCode:40,alt:!0})?p.IncreaseLineHeight:y({event:t,keyCode:37,alt:!0})?p.DecreaseLetterSpacing:y({event:t,keyCode:39,alt:!0})?p.IncreaseLetterSpacing:y({event:t,keyCode:84,alt:!0,ctrlOrCmd:!0})?p.ToggleTypographyPanel:y({event:t,keyCode:75,ctrlOrCmd:!0})?p.ToggleLinkPanel:y({event:t,keyCode:190,ctrlOrCmd:!0,shift:!0})?p.IncreaseFontSize:y({event:t,keyCode:188,ctrlOrCmd:!0,shift:!0})?p.DecreaseFontSize:y({event:t,keyCode:76,ctrlOrCmd:!0,shift:!0})?p.AlignLeft:y({event:t,keyCode:82,ctrlOrCmd:!0,shift:!0})?p.AlignRight:y({event:t,keyCode:67,ctrlOrCmd:!0,shift:!0})?p.AlignCenter:y({event:t,keyCode:65,ctrlOrCmd:!0,shift:!0})?p.SelectParagraph:y({event:t,keyCode:66,ctrlOrCmd:!0})?p.ToggleBold:y({event:t,keyCode:73,ctrlOrCmd:!0})?p.ToggleItalic:y({event:t,keyCode:85,ctrlOrCmd:!0})?p.ToggleUnderline:Object(n.getDefaultKeyBinding)(t)},S=function(t){var e=t.action,i=t.editorState,n=t.workspace;if(e===p.InsertNbsp)return{status:"handled",editorState:r.a.insertText({editorState:i,text:b.b})};if(e===p.InsertEnsp)return{status:"handled",editorState:r.a.insertText({editorState:i,text:String.fromCharCode(8194)})};if(e===p.InsertThinsp)return{status:"handled",editorState:r.a.insertText({editorState:i,text:String.fromCharCode(8201)})};if(e===p.IncreaseIndent){var c=Object(a.b)({editorState:i,method:"increase"});if(c)return{status:"handled",editorState:c}}if("backspace"===e||e===p.DecreaseIndent){var l=Object(a.b)({editorState:i,method:"decrease"});if(l)return{status:"handled",editorState:l}}if(e===p.DecreaseLineHeight){var u=Object(o.b)({editorState:i,method:"decrease"});if(u)return{status:"handled",editorState:u}}if(e===p.IncreaseLineHeight){var d=Object(o.b)({editorState:i,method:"increase"});if(d)return{status:"handled",editorState:d}}if(e===p.IncreaseLetterSpacing)if(i.getSelection().isCollapsed()){var h=r.a.getWordCaretSelection(i,"next");if(h)return{status:"handled",editorState:h}}else{var y=f({editorState:i,method:"increase"});if(y)return{status:"handled",editorState:y}}if(e===p.DecreaseLetterSpacing)if(i.getSelection().isCollapsed()){var w=r.a.getWordCaretSelection(i,"prev");if(w)return{status:"handled",editorState:w}}else{var S=f({editorState:i,method:"decrease"});if(S)return{status:"handled",editorState:S}}if(e===p.ToggleTypographyPanel){var O=n.controls.findControl("text_typography_new");if(O)return O.onClick.apply(O),{status:"handled",editorState:i}}if(e===p.ToggleLinkPanel){var k=n.controls.findControl("text_link_new");if(k)return k.onClick.apply(k),{status:"handled",editorState:i}}if(e===p.IncreaseFontSize)return{status:"handled",editorState:m({editorState:i,method:"increase"})};if(e===p.DecreaseFontSize)return{status:"handled",editorState:m({editorState:i,method:"decrease"})};if(e===p.AlignLeft||e===p.AlignRight||e===p.AlignCenter){var P=e===p.AlignLeft?v.a.AlignLeft:e===p.AlignRight?v.a.AlignRight:v.a.AlignCenter;return{status:"handled",editorState:Object(v.e)({editorState:i,align:P})}}if(e===p.SelectParagraph)return{status:"handled",editorState:r.a.selectCurrentBlock(i)};if(e===p.ToggleBold){var x=r.a.getCurrentInlineStyles(i,s.a.FontWeight);return{status:"handled",editorState:r.a.applyInlineStyle({editorState:i,key:s.a.FontWeight,value:x&&"700"===x[0]?g.b.fontWeight:"700"})}}if(e===p.ToggleItalic){var C=r.a.getCurrentInlineStyles(i,s.a.FontStyle);return{status:"handled",editorState:r.a.applyInlineStyle({editorState:i,key:s.a.FontStyle,value:C&&"italic"===C[0]?g.b.fontStyle:"italic"})}}if(e===p.ToggleUnderline){var j=r.a.getCurrentInlineStyles(i,s.a.Decoration);return{status:"handled",editorState:r.a.applyInlineStyle({editorState:i,key:s.a.Decoration,value:j&&"underline"===j[0]?"none":"underline"})}}}},DqjY:function(t,e,i){"use strict";var n,r=i("xi34"),a=i("rFsW"),o=i("f3SV"),s=i("OTSC"),c=i("v92f"),l=i("AIVH");function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d(){var t=f(['\n<style id="export-pdf-typekit-substitution">\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Nitti Light Italic/15aba0ec-4ceb-49e2-985c-a95134a60aed-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Nitti Light Italic/15aba0ec-4ceb-49e2-985c-a95134a60aed-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 300;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Nitti Light/6fd7c5e9-3131-4cb6-a99e-da74343b1253-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Nitti Light/6fd7c5e9-3131-4cb6-a99e-da74343b1253-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 300;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Nitti Medium/9054f262-2d2d-480f-9360-4560f110243b-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Nitti Medium/9054f262-2d2d-480f-9360-4560f110243b-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 500;\n}\n</style>\n']);return d=function(){return t},t}function h(){var t=f(['\n<style id="export-pdf-typekit-substitution">\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Black/4ec59c91-f66b-4751-8456-e114e9e14673-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Black/4ec59c91-f66b-4751-8456-e114e9e14673-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 900;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Bold Italic/6f283590-c3c2-416a-95c2-ca67d04aa929-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Bold Italic/6f283590-c3c2-416a-95c2-ca67d04aa929-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Bold/6f633c58-c751-4d08-9cea-2b27f74f37de-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Bold/6f633c58-c751-4d08-9cea-2b27f74f37de-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Italic/e3bc0ad4-bdaa-4467-82a0-d90f697b7266-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Italic/e3bc0ad4-bdaa-4467-82a0-d90f697b7266-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 400;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro SemiBold Italic/0e025df5-ba54-4bbb-84b4-c5b337a5b55b-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro SemiBold Italic/0e025df5-ba54-4bbb-84b4-c5b337a5b55b-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 600;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro SemiBold/60fe12ce-0223-4a9a-8e5c-b3e7bd381bc4-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro SemiBold/60fe12ce-0223-4a9a-8e5c-b3e7bd381bc4-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 600;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro/b97bef32-c0cb-4ad3-b724-1204d229731c-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro/b97bef32-c0cb-4ad3-b724-1204d229731c-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 400;\n}\n</style>\n']);return h=function(){return t},t}function p(){var t=f(['\n<style id="export-pdf-typekit-substitution">\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic Bold Italic/c6f4e54e-1d69-4559-b813-e2fc4ff29160-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic Bold Italic/c6f4e54e-1d69-4559-b813-e2fc4ff29160-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic Bold/9aab62b7-bc6f-405a-ad75-227bcf89d9dc-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic Bold/9aab62b7-bc6f-405a-ad75-227bcf89d9dc-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic Italic/6327ba72-bfd5-4038-9658-e3a4a95a5c98-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic Italic/6327ba72-bfd5-4038-9658-e3a4a95a5c98-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 400;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic/915b0ec4-cd16-40de-883e-1d77c3d07840-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic/915b0ec4-cd16-40de-883e-1d77c3d07840-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 400;\n}\n</style>\n']);return p=function(){return t},t}function f(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var g=(u(n={},"template-export-pdf-typekit-substitution-news-gothic",Object(l.a)(p())),u(n,"template-export-pdf-typekit-substitution-georgia-pro",Object(l.a)(h())),u(n,"template-export-pdf-typekit-substitution-nitti",Object(l.a)(d())),n),m=i("I0kf"),v=i("fueH"),b={STYLE_PREFIXES:{paragraph:{viewer:[".used-fonts-test p",".rmwidget.text div p"],editor:["p"],constructor:[".used-fonts-test p",".block.block-text .text-preview p",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h1":{viewer:[".used-fonts-test h1",".rmwidget.text div h1"],editor:["h1"],constructor:[".used-fonts-test h1",".block.block-text .text-preview h1",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h2":{viewer:[".used-fonts-test h2",".rmwidget.text div h2"],editor:["h2"],constructor:[".used-fonts-test h2",".block.block-text .text-preview h2",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h3":{viewer:[".used-fonts-test h3",".rmwidget.text div h3"],editor:["h3"],constructor:[".used-fonts-test h3",".block.block-text .text-preview h3",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h4":{viewer:[".used-fonts-test h4",".rmwidget.text div h4"],editor:["h4"],constructor:[".used-fonts-test h4",".block.block-text .text-preview h4",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},link:{viewer:[".rmwidget.text div a"],editor:["a"],constructor:[".block.block-text .text-preview a",".controls .control.text_link .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .link-style .style-caption"]}},fontsShortList:{},generateStylesStr:function(t){var e,i,n,r="",a=t.style,o=t.indentation?"\t":"",c=";"+(t.lineBreaks?"\n":""),l=t.attrPrefix||"";return"paragraph"==t.tp&&(r+=o+"font-family: "+u("font-family")+c,r+=o+"font-style: "+u("font-style")+c,r+=o+"font-weight: "+u("font-weight")+c,r+=o+"font-size: "+d(u("font-size"))+c,r+=o+"letter-spacing: "+d(u("letter-spacing"))+c,r+=o+"line-height: "+d(u("line-height"))+c,r+=o+"text-align: "+u("text-align")+c,r+=o+"text-decoration: "+u("text-decoration")+c,r+=o+"text-transform: "+u("text-transform")+c,r+=o+"color: "+s.default.getRGBA(u("color"),u("opacity")/100)+c,r+=o+"padding-top: "+d(u("padding-top"))+c,r+=o+"padding-right: "+d(u("padding-right"))+c,r+=o+"padding-bottom: "+d(u("padding-bottom"))+c,r+=o+"padding-left: "+d(u("padding-left"))+c),"link"==t.tp&&(r+=o+"text-decoration: none"+c,r+=o+"color: "+s.default.getRGBA(u("color"),u("opacity")/100)+c,"none"!=u("u-style")?(e=s.default.getRGBA(u("u-color"),u("u-opacity")/100),i=parseInt(u("u-size"),10),n=parseInt(u("u-offset"),10)+i,r+=o+"padding-bottom: "+d(Math.max(n,0))+c,"solid"==u("u-style")&&(r+=o+"background: linear-gradient(to right, "+e+" 0%, "+e+" 100%)"+c,r+=o+"background-size: 1px "+d(i)+c),"dotted"==u("u-style")&&(r+=o+"background: linear-gradient(to right, "+e+" 0%, "+e+" 50%, transparent 50%,transparent 100%)"+c,r+=o+"background-size: "+d(2*i)+" "+d(i)+c),"dashed"==u("u-style")&&(r+=o+"background: linear-gradient(to right, "+e+" 0%, "+e+" 66.6666%, transparent 66.6666%,transparent 100%)"+c,r+=o+"background-size: "+d(3*i)+" "+d(i)+c),r+=n<0?o+"background-position: 0 "+(100+n)+"%"+c:o+"background-position: 0 100%"+c,r+=o+"background-repeat: repeat-x"+c):r+=o+"background: none"+c),r;function u(t){var e=a[l+t];return"inherit"==e&&l&&(e=a[t]),e}function d(t){return t+(/px/i.test(t)?"":"px")}},generateCSS:function(t,e,i,n,s){if(n){var c=this.STYLE_PREFIXES[t][e],l=(s=s||{},this),u="";a.a.each(n,(function(i){if("paragraph"==t&&(i.tag&&"p"!==i.tag&&o.c.AVAILABLE_TEXT_TAGS.includes(i.tag)&&(c=[].concat(l.STYLE_PREFIXES["header-"+i.tag][e],l.STYLE_PREFIXES[t][e]).filter((function(t,e,i){return i.indexOf(t)===e}))),u+=a.a.map(c,(function(t){return t+"."+i._name})).join(",\n")+" {\n",u+=l.generateStylesStr({tp:t,style:i,indentation:!0,lineBreaks:!0}),u+="}\n\n"),"link"==t){if(s.forcePseudoState&&s.forcePseudoClass==i._name)u+=a.a.map(c,(function(t){return t+"."+i._name})).join(",\n")+" {\n",u+=l.generateStylesStr({tp:t,style:i,attrPrefix:s.forcePseudoState+"-",indentation:!0,lineBreaks:!0}),u+="}\n\n";else u+=a.a.map(c,(function(t){return t+"."+i._name})).join(",\n")+" {\n",u+=l.generateStylesStr({tp:t,style:i,indentation:!0,lineBreaks:!0}),u+="}\n\n",a.a.find(a.a.keys(i),(function(t){return/^current/.test(t)}))&&(u+=a.a.map(c,(function(t){return t+".current."+i._name})).join(",\n")+" {\n",u+=l.generateStylesStr({tp:t,style:i,attrPrefix:"current-",indentation:!0,lineBreaks:!0}),u+="}\n\n"),u+=a.a.map(c,(function(t){return t+".hovered."+i._name})).join(",\n")+" {\n",u+=l.generateStylesStr({tp:t,style:i,attrPrefix:"hover-",indentation:!0,lineBreaks:!0}),u+="}\n\n";u+=a.a.map(c,(function(t){return t+"."+i._name+" *"})).join(",\n")+" {\n",u+="\tcolor: inherit !important;\n",u+="\ttext-decoration: none !important;\n",u+="}\n\n"}})),i=i||document;var d="text_styles_"+t+"_"+e;Object(r.a)("#"+d,i).remove();var h=i.createElement("style");h.type="text/css",h.id=d,h.className="text_styles",h.appendChild(i.createTextNode(u)),i.getElementsByTagName("head")[0].appendChild(h)}},appendFontsCssToDocument:function(t,e){window.TypekitPreview&&window.TypekitPreview.setup&&window.TypekitPreview.setup({auth_id:o.c.TYPEKIT_ID,auth_token:o.c.TYPEKIT_TOKEN,default_subset:"all"});var i,n=Object(r.a)("link.fonts, style.fonts"),c=[],l=[],u={};n.each((function(){var t=Object(r.a)(this),e=t.attr("data-provider"),i=t.attr("data-fonts-and-variations").split("||");a.a.each(i,(function(t){c.push(e+"|"+t)}))})),a.a.each(t.fonts,(function(t){a.a.each(t.used_variations||t.variations,(function(e){l.push(t.provider+"|"+t.css_name+"|"+e)}))})),i=a.a.difference(l,c);var d={};a.a.each(i,(function(t){var e=t.split("|"),i=e[0],n=e[1],r=e[2],a=i+"|"+n;d[a]=d[a]||[],d[a].push(r)}));var h=[];a.a.each(d,(function(t,e){var i=e.split("|"),n=i[0],r=i[1],a=t;h.push({provider:n,css_name:r,variations:a})})),a.a.each(h,(function(e){var i,n=e.provider,o=e.css_name+"|"+e.variations.join("||"+e.css_name+"|");if(u[n]||(u[n]=[]),"google"==n){var s=r.a.map(e.variations,(function(t){return 100*(t.substr(1,1)-0)+("n"==t.substr(0,1)?"":"italic")}));i={fontAndVariations:o,data:e.css_name.split(" ").join("+")+":"+s.join(",")}}if("webtype"==n&&(i={fontAndVariations:o,data:e.css_name+":"+e.variations.join(",")}),"typetoday"==n&&(i={fontAndVariations:o,data:e.css_name+":"+e.variations.join(",")}),"custom"==n){var c=a.a.findWhere(t.fonts,{provider:"custom",css_name:e.css_name});c&&c.css_url&&(i={fontAndVariations:o,data:{css_name:e.css_name,css_url:c.css_url,signed_css_url:c.signed_css_url}})}"typekit"==n&&(i={fontAndVariations:o,data:{id:e.css_name,variations:e.variations}}),i&&u[n].push(i)}));var p=RM.screenshot&&"true"==s.default.queryUrlGetParam("pdf");p&&this.loadTypekitSubstitutionFonts(u.typekit);var f=a.a.has(u,"custom");function g(t){var e=Object(r.a)("<link>").attr("type","text/css").attr("rel","stylesheet").attr("href",t);Object(r.a)("head").append(e)}a.a.each(u,(function(i,n){var c,l,u,d,h,f,m="custom"==n?1:"google"==n?22:i.length,v=Math.ceil(i.length/m),b=0,y=function(){if(l=c*m,u=Math.min((c+1)*m,i.length),d=i.slice(l,u),h=a.a.pluck(d,"data"),f=a.a.pluck(d,"fontAndVariations"),Object(r.a)("link, style").addClass("existing"),"google"==n&&(S=(o.c.IS_FILE_PROTOCOL?"http://":"//")+"fonts.googleapis.com/css?family=",w=h.join("%7C"),"&subset=latin,vietnamese,khmer,cyrillic-ext,greek-ext,greek,devanagari,latin-ext,cyrillic",g(S+w+"&subset=latin,vietnamese,khmer,cyrillic-ext,greek-ext,greek,devanagari,latin-ext,cyrillic")),"typekit"==n){if("edit"==t.version&&!p)try{window.TypekitPreview&&window.TypekitPreview.load(h)}catch(t){}"published"==t.version&&t.typekit_url&&("undefined"!=typeof Typekit&&(Typekit=void 0),Object(r.a)("style.typekit-kit").remove(),r.a.getScript(t.typekit_url,(function(t,e,i){try{Typekit.load({active:function(){var t=Object(r.a)("style").filter((function(t,e){return/typekit/i.test(e.innerHTML)}));t.addClass("typekit-kit"),y(t)}})}catch(t){}})))}var v;function y(t){t.addClass("fonts").attr("data-id",s.default.generateUUID()).attr("data-provider",n).attr("data-fonts-and-variations",f.join("||"))}"webtype"==n&&(S=RM.common.isDownloadedSource?o.c.readymag_host:"",Object(r.a)('link.fonts[data-provider="webtype"]').length||(O=window.ServerData&&window.ServerData.fonts&&window.ServerData.fonts.webtype,g(S+O))),"typetoday"!=n||p||(S=RM.common.isDownloadedSource?o.c.readymag_host:"",Object(r.a)('link.fonts[data-provider="typetoday"]').length||(O=window.ServerData&&window.ServerData.fonts&&window.ServerData.fonts.typetoday,g(S+O))),"custom"==n&&(k=h[0].signed_css_url||h[0].css_url,/^\/api\/fonts\//i.test(k)?(v=Object(r.a)("<style>").attr("type","text/css"),Object(r.a)("head").append(v),r.a.get(k,(function(t){v.text(t),++b>=i.length&&a.a.isFunction(e)&&e()}))):g(k)),y(Object(r.a)("link:not(.existing), style:not(.existing)")),Object(r.a)("link, style").removeClass("existing")};for(c=0;c<v;c++){var w,S,O,k;y()}})),!f&&a.a.isFunction(e)&&e()},loadTypekitSubstitutionFonts:function(t){t&&t.length&&a.a.each(t,(function(t){var e,i=t.data.id,n=(t.data.variations,(e=(e=(e=a.a.findWhere(b.fontsShortList.typekit,{id:i}))&&e.browse_info)&&e.classification)&&e.length&&e[0]||"sans-serif"),o={"sans-serif":"news-gothic",decorative:"news-gothic",handmade:"news-gothic",blackletter:"news-gothic",script:"news-gothic","slab-serif":"news-gothic",serif:"georgia-pro",monospaced:"nitti"},s=(0,g["template-export-pdf-typekit-substitution-"+(o[n]||o["sans-serif"])])({id:i});Object(r.a)("head").append(s)}))},appendFontsCssToIFrame:function(t){var e=Object(r.a)("link.fonts, style.fonts"),i=Object(r.a)("link.fonts, style.fonts",t),n={},a=Object(r.a)("head",t);i.each((function(){n[Object(r.a)(this).attr("data-id")]=!0})),e.each((function(){var t=Object(r.a)(this),e=this.href;if(!n[t.attr("data-id")]){var i=t.clone();e&&Modernizr.safari&&i.attr("href",e+"&edit_mode=true"),i.appendTo(a)}}))},isFastFontLoadCheckAvailable:function(){return Boolean(document.fonts&&window.Promise)},fastWaitForFontLoad:function(t,e,i){var n;if(document.fonts){var r=i+" "+e+" 12px "+t,a=Object(m.a)("viewer.simpleFontLoadCheck")?document.fonts.load(r):document.fonts.load(r).then(function(){return document.fonts.check(r)?r:this.fontLoadedTimeoutCheck(r)}.bind(this)),o=new window.Promise((function(t,e){setTimeout(e.bind(null,r),3500)}));n=window.Promise.race([a,o])}else n=window.Promise.reject();return n},exactWaitForFontLoad:function(t,e,i,n){var a=i+" "+e+" 12px "+t+", Arial",o=i+" "+e+" 12px Arial",s=Object(r.a)('<canvas width="20" height="20"></canvas>'),c=s[0],l=c.getContext("2d"),u="",d="",h=+new Date;s.appendTo("body").css({position:"absolute",left:0,top:"-999px"}),function r(){var p=+new Date-h>1e4,f=function(){var t=a;l.clearRect(0,0,20,20),u||(u=c.toDataURL("image/png"),t=o);l.font=t,l.fillStyle="000",l.fillText("a1-&q",0,20);var e=c.toDataURL("image/png");d||(d=e);return e!=u&&e!=d}();if(f||p)return l=void 0,s.remove(),void n(f,t,e,i);setTimeout(r,100)}()},fontLoadedTimeoutCheck:function(t){var e=Date.now();return new window.Promise((function(i,n){!function i(n,r){var a=Date.now()-e;document.fonts.check(t)?n(t):a<3500?setTimeout(i.bind(null,n,r),100):r(t)}(i,n)}))},getHotspotTextModels:function(t){var e=[];return t.widgets_collection&&t.widgets_collection.length&&(e=t.widgets_collection.filter((function(e){return"text"==e.get("type")&&t.get("wids").indexOf(e.get("_id"))>-1}))),t._nestedWidgetsJSON&&t._nestedWidgetsJSON.length?e=a.a.filter(t._nestedWidgetsJSON,(function(t){return"text"==t.type})):t.wids&&t.wids.length&&(e=a.a.filter(t.wids,(function(t){return"text"==t.type}))),e},getUsedFontsFromWidgetsModels:function(t){var e={},i={},n={},r={},s={},l={},u=t.models;function d(t,e){return"function"==typeof t.get?t.get(e):t[e]}for(var h=0;h<u.length;h++){var p=u[h];if("slideshow"==d(p,"type")&&d(p,"text_style")){var f=d(p,"text_style");f["font-family"]&&f["font-weight"]&&f["font-style"]&&(i[f["font-family"]+"|"+f["font-style"]+"|"+f["font-weight"]]=1)}if("button"==d(p,"type")){d(p,"font-family")&&d(p,"font-weight")&&d(p,"font-style")&&(n[d(p,"font-family")+"|"+d(p,"font-style")+"|"+d(p,"font-weight")]=1);for(var g=0;g<c.c.viewports.length;g++){var m=p["viewport_"+c.c.viewports[g].name];m&&(n[m["font-family"]+"|"+m["font-style"]+"|"+m["font-weight"]]=1)}}if(d(p,"type")===o.c.ecommerceCartBlockName&&d(p,"font-family")&&d(p,"font-weight")&&d(p,"font-style")&&(s[d(p,"font-family")+"|"+d(p,"font-style")+"|"+d(p,"font-weight")]=1),d(p,"type")===o.c.addToCartBlockName&&(d(p,"font-family")&&d(p,"font-weight")&&d(p,"font-style")&&(l[d(p,"font-family")+"|"+d(p,"font-style")+"|"+d(p,"font-weight")]=1),d(p,"attrs-font-family")&&d(p,"attrs-font-weight")&&d(p,"attrs-font-style")&&(l[d(p,"attrs-font-family")+"|"+d(p,"attrs-font-style")+"|"+d(p,"attrs-font-weight")]=1)),"form"==d(p,"type")){var y=d(p,"style-"+d(p,"style")+"-fields"),w=a.a.clone(d(p,"style-"+d(p,"style")+"-button-default"));a.a.isEmpty(w)||(w["font-family"]="inherit"==w["font-family"]?y["font-family"]:w["font-family"],w["font-style"]="inherit"==w["font-style"]?y["font-style"]:w["font-style"],w["font-weight"]="inherit"==w["font-weight"]?y["font-weight"]:w["font-weight"]),r[y["font-family"]+"|"+y["font-style"]+"|"+y["font-weight"]]=1,w&&(r[w["font-family"]+"|"+w["font-style"]+"|"+w["font-weight"]]=1);for(var S=0;S<c.c.viewports.length;S++){var O=p["viewport_"+c.c.viewports[S].name];O&&(y=O["style-"+O.style+"-fields"],w=a.a.clone(O["style-"+O.style+"-button-default"]),a.a.isEmpty(w)||(w["font-family"]="inherit"==w["font-family"]?y["font-family"]:w["font-family"],w["font-style"]="inherit"==w["font-style"]?y["font-style"]:w["font-style"],w["font-weight"]="inherit"==w["font-weight"]?y["font-weight"]:w["font-weight"]),y&&(r[y["font-family"]+"|"+y["font-style"]+"|"+y["font-weight"]]=1),w&&(r[w["font-family"]+"|"+w["font-style"]+"|"+w["font-weight"]]=1))}}"text"===d(p,"type")&&3===d(p,"version")&&a.a.extend(e,v.a.getTextWidgetFontsList(p,t.activeViewports)),"text"===d(p,"type")&&d(p,"text")&&3!==d(p,"version")&&a.a.extend(e,this.scanTextForFontsAndVariationsRaw(d(p,"text"),d(p,"version"),t.excludeUnusedDefault,t.activeViewports)),"hotspot"==d(p,"type")&&a.a.each(this.getHotspotTextModels(p),a.a.bind((function(i){var n=d(i,"text");n&&a.a.extend(e,this.scanTextForFontsAndVariationsRaw(n,d(i,"version"),t.excludeUnusedDefault))}),this))}var k=a.a.extend({},e,i,n,r,s,l),P={},x={bold:700,normal:400};a.a.each(k,(function(t,e){var i=e.split("|"),n=i[0],r=i[1].toLowerCase(),a=i[2].toLowerCase(),o=a in x?x[a]:a;P[n]=P[n]||[],P[n].push("variable"===o?"v":("italic"===r?"i":"n")+Math.floor(o/100))}));var C,j=[],_=this;return a.a.each(P,(function(e,i){(C=a.a.findWhere(b.fontsShortList.webtype,{name:i}))?j.push({provider:"webtype",css_name:C.name,name:C.name,variations:C.variations,used_variations:_.calcBrowserUsedVariation(e,C.variations)}):(C=a.a.findWhere(b.fontsShortList.typetoday,{name:i}))?j.push({provider:"typetoday",css_name:C.name,name:C.name,variations:C.variations,used_variations:_.calcBrowserUsedVariation(e,C.variations)}):(C=a.a.findWhere(b.fontsShortList.google,{family:i}))?j.push({provider:"google",css_name:C.family,name:C.family,variations:C.variations,used_variations:_.calcBrowserUsedVariation(e,C.variations)}):(C=a.a.findWhere(b.fontsShortList.typekit,{id:i}))?j.push({provider:"typekit",css_name:C.id,name:C.name,variations:C.variations,used_variations:_.calcBrowserUsedVariation(e,C.variations)}):t.includeCustom&&(C=a.a.findWhere(t.customList,{css_name:i}))&&j.push({provider:"custom",css_name:C.css_name,css_url:C.css_url,name:C.name,variations:C.variations,used_variations:_.calcBrowserUsedVariation(e,C.variations)})})),j.filter((function(t){return t.used_variations&&t.used_variations.length>0}))},getUsedParagraphStylesFromWidgetsModels:function(t){var e,i,n="";for(e=0;e<t.length;e++)"text"==c(i=t[e],"type")&&c(i,"text")&&(n+=c(i,"text")),"hotspot"==c(i,"type")&&a.a.each(this.getHotspotTextModels(i),a.a.bind((function(t){n+=c(t,"text")||""}),this));var r=[],o=RM.constructorRouter.workspace.mag.edit_params.get("paragraph_styles");if(n)for(e=0;e<o.length;e++){var s=o[e];n.indexOf(s._name)>=0&&r.push(s)}function c(t,e){return"function"==typeof t.get?t.get(e):t[e]}return r},getUsedLinkStylesFromWidgetsModels:function(t){var e,i,n="";for(e=0;e<t.length;e++)"text"==c(i=t[e],"type")&&c(i,"text")&&(n+=c(i,"text")),"hotspot"==c(i,"type")&&a.a.each(this.getHotspotTextModels(i),a.a.bind((function(t){n+=c(t,"text")||""}),this));var r=[],o=RM.constructorRouter.workspace.mag.edit_params.get("link_styles");if(n)for(e=0;e<o.length;e++){var s=o[e];n.indexOf(s._name)>=0&&r.push(s)}function c(t,e){return"function"==typeof t.get?t.get(e):t[e]}return r},sortFontsByProvider:function(t){var e=[],i=[],n={};return a.a.each(t,(function(t){"typekit"===t.provider&&e.push({id:t.css_name,variations:t.used_variations}),"custom"===t.provider&&i.push(t.css_name);var r="used_"+t.provider+"_fonts";n[r]=n[r]||[],"custom"===t.provider?n[r].push(t.css_name):n[r].push({id:t.css_name,variations:t.used_variations})})),{typekit:e,custom:i,dictionary:n}},scanTextForFontsAndVariationsRaw:function(t,e,i,n){var o,s,l,u,d,h,p,f,g,m,v={},b={},y=[],w=document.defaultView.getComputedStyle;for(o=0;o<c.c.viewports.length;o++)if(t.split("-"+c.c.viewports[o].name).length>1){if(n&&-1===n.indexOf(c.c.viewports[o].name))continue;y.push(c.c.viewports[o].name)}(l=Object(r.a)(".used-fonts-test")).length||(l=Object(r.a)("<div>").addClass("used-fonts-test").css({position:"absolute",display:"none !important",left:-9999,width:999}).appendTo("body")),l.removeClass("v1 v2").addClass("v"+(e||1)),(s=l[0]).innerHTML=t,h=(d=s.querySelectorAll("span,p,a")).length;var S,O=(u=w(s,null)).fontFamily+"|"+u.fontStyle+"|"+u.fontWeight;v[O]=1;for(var k=!1,P=function(t){return-1!==a.a.findIndex(t.childNodes,(function(t){return t.nodeType===Node.TEXT_NODE&&t.textContent.replace(/\r?\n/g,"").length}))},x=a.a.filter(d,P),C=0;C<x.length;C++)S=(u=w(x[C],null)).fontFamily+"|"+u.fontStyle+"|"+u.fontWeight,k=k||S===O,v[u.fontFamily+"|"+u.fontStyle+"|"+u.fontWeight]=1;var j=P(s);for(o=0;o<y.length;o++)if("default"!=(g=y[o])){for(C=0;C<h;C++)(p=(m=d[C]).getAttribute("data-style-"+g))&&("empty"==p?m.removeAttribute("style"):m.setAttribute("style",p)),(f=m.getAttribute("data-class-"+g))&&("empty"==f?m.removeAttribute("class"):m.setAttribute("class",f)),P(m)&&(S=(u=w(m,null)).fontFamily+"|"+u.fontStyle+"|"+u.fontWeight,k=k||S===O,v[S]=1);o<y.length-1&&(s.innerHTML=t,h=(d=s.querySelectorAll("span,p,a")).length)}return!i||k||j||delete v[O],a.a.each(v,(function(t,e){var i=e.split("|"),n=i[0],r=i[1].toLowerCase(),a=i[2].toLowerCase();n=(n=n.split(",")[0]).replace(/'|"/g,""),a=(a=(a=a.replace(/normal/g,"400")).replace(/regular/g,"400")).replace(/bold/g,"700"),b[n+"|"+r+"|"+a]=1})),b},calcBrowserUsedVariation:function(t,e){for(var i={},n=0;n<t.length;n++){for(var r,o,s,c=t[n],l=c.substr(1,1),u=c.substr(0,1),d=99999,h="",p=0;p<e.length;p++)r=e[p].substr(1,1)-0,o=e[p].substr(0,1),l<4&&(s=10*Math.abs(r-l)+(o==u?0:1e3)+(r<=l?0:100)),l>5&&(s=10*Math.abs(r-l)+(o==u?0:1e3)+(r>=l?0:100)),4==l&&(s=5==r?0+(o==u?0:1e3)+0:10*Math.abs(r-l)+(o==u?0:1e3)+(r<=l?0:100)),5==l&&(s=10*Math.abs(r-l)+(o==u?0:1e3)+(r<=l?0:100)),l==r&&u==o&&(s=0),s<d&&(d=s,h=e[p]);i[h]=1}return a.a.keys(i).filter((function(t){return!!t}))},getVeryShortList:function(t){var e={google:[],typekit:[],webtype:[],typetoday:[]};return a.a.each(t,(function(t){var i,n=t.provider;switch(n){case"google":i={provider:n,family:t.name,variations:t.variations};break;case"typekit":i={provider:n,id:t.css_name,name:t.name,variations:t.variations};break;case"webtype":case"typetoday":i={provider:n,name:t.name,variations:t.variations}}e[n]&&e[n].push(i)})),e},getCustomVariationNameByFVD:function(t,e){return(b.fontCustomVariationNames[t]||{})[e]},setShortList:function(t){b.fontsShortList=t||{},b.fontCustomVariationNames={},a.a.each(b.fontsShortList,(function(t,e){a.a.each(t,(function(t){if(t.custom_variation_names){var i;switch(e){case"google":i=t.family;break;case"typekit":case"webtype":case"typetoday":i=t.name}b.fontCustomVariationNames[i]=t.custom_variation_names}}))}))}};window.fontsShortListCallback=function(t){b.setShortList(t)};e.a=b},DwEc:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return o}));var n=i("q1tI"),r=i.n(n),a=r.a.createContext({}),o=r.a.createContext({})},F0AZ:function(t,e,i){"use strict";var n=i("rFsW"),r=i("xi34"),a=i("3ED2"),o=i.n(a),s=i("ufqH"),c=i("Xjjk"),l=i.n(c),u=i("jfjY"),d=i("YryV"),h=i("OTSC"),p=i("Fi5S"),f=i("f3SV"),g=i("+/Sl"),m=[{value:"AF",caption:"Afghanistan"},{value:"AX",caption:"Aland Islands"},{value:"AL",caption:"Albania"},{value:"DZ",caption:"Algeria"},{value:"AS",caption:"American Samoa"},{value:"AD",caption:"Andorra"},{value:"AO",caption:"Angola"},{value:"AI",caption:"Anguilla"},{value:"AQ",caption:"Antarctica"},{value:"AG",caption:"Antigua and Barbuda"},{value:"AR",caption:"Argentina"},{value:"AM",caption:"Armenia"},{value:"AW",caption:"Aruba"},{value:"AU",caption:"Australia"},{value:"AT",caption:"Austria"},{value:"AZ",caption:"Azerbaijan"},{value:"BS",caption:"Bahamas"},{value:"BH",caption:"Bahrain"},{value:"BD",caption:"Bangladesh"},{value:"BB",caption:"Barbados"},{value:"BY",caption:"Belarus"},{value:"BE",caption:"Belgium"},{value:"BZ",caption:"Belize"},{value:"BJ",caption:"Benin"},{value:"BM",caption:"Bermuda"},{value:"BT",caption:"Bhutan"},{value:"BO",caption:"Bolivia, Plurinational State of"},{value:"BQ",caption:"Bonaire, Sint Eustatius and Saba"},{value:"BA",caption:"Bosnia and Herzegovina"},{value:"BW",caption:"Botswana"},{value:"BV",caption:"Bouvet Island"},{value:"BR",caption:"Brazil"},{value:"IO",caption:"British Indian Ocean Territory"},{value:"BN",caption:"Brunei Darussalam"},{value:"BG",caption:"Bulgaria"},{value:"BF",caption:"Burkina Faso"},{value:"BI",caption:"Burundi"},{value:"KH",caption:"Cambodia"},{value:"CM",caption:"Cameroon"},{value:"CA",caption:"Canada"},{value:"CV",caption:"Cape Verde"},{value:"KY",caption:"Cayman Islands"},{value:"CF",caption:"Central African Republic"},{value:"TD",caption:"Chad"},{value:"CL",caption:"Chile"},{value:"CN",caption:"China"},{value:"CX",caption:"Christmas Island"},{value:"CC",caption:"Cocos (Keeling) Islands"},{value:"CO",caption:"Colombia"},{value:"KM",caption:"Comoros"},{value:"CG",caption:"Congo"},{value:"CD",caption:"Congo, the Democratic Republic of the"},{value:"CK",caption:"Cook Islands"},{value:"CR",caption:"Costa Rica"},{value:"CI",caption:"Côte d'Ivoire"},{value:"HR",caption:"Croatia"},{value:"CU",caption:"Cuba"},{value:"CW",caption:"Curaçao"},{value:"CY",caption:"Cyprus"},{value:"CZ",caption:"Czech Republic"},{value:"DK",caption:"Denmark"},{value:"DJ",caption:"Djibouti"},{value:"DM",caption:"Dominica"},{value:"DO",caption:"Dominican Republic"},{value:"EC",caption:"Ecuador"},{value:"EG",caption:"Egypt"},{value:"SV",caption:"El Salvador"},{value:"GQ",caption:"Equatorial Guinea"},{value:"ER",caption:"Eritrea"},{value:"EE",caption:"Estonia"},{value:"ET",caption:"Ethiopia"},{value:"FK",caption:"Falkland Islands (Malvinas)"},{value:"FO",caption:"Faroe Islands"},{value:"FJ",caption:"Fiji"},{value:"FI",caption:"Finland"},{value:"FR",caption:"France"},{value:"GF",caption:"French Guiana"},{value:"PF",caption:"French Polynesia"},{value:"TF",caption:"French Southern Territories"},{value:"GA",caption:"Gabon"},{value:"GM",caption:"Gambia"},{value:"GE",caption:"Georgia"},{value:"DE",caption:"Germany"},{value:"GH",caption:"Ghana"},{value:"GI",caption:"Gibraltar"},{value:"GR",caption:"Greece"},{value:"GL",caption:"Greenland"},{value:"GD",caption:"Grenada"},{value:"GP",caption:"Guadeloupe"},{value:"GU",caption:"Guam"},{value:"GT",caption:"Guatemala"},{value:"GG",caption:"Guernsey"},{value:"GN",caption:"Guinea"},{value:"GW",caption:"Guinea-Bissau"},{value:"GY",caption:"Guyana"},{value:"HT",caption:"Haiti"},{value:"HM",caption:"Heard Island and McDonald Islands"},{value:"VA",caption:"Holy See (Vatican City State)"},{value:"HN",caption:"Honduras"},{value:"HK",caption:"Hong Kong"},{value:"HU",caption:"Hungary"},{value:"IS",caption:"Iceland"},{value:"IN",caption:"India"},{value:"ID",caption:"Indonesia"},{value:"IR",caption:"Iran, Islamic Republic of"},{value:"IQ",caption:"Iraq"},{value:"IE",caption:"Ireland"},{value:"IM",caption:"Isle of Man"},{value:"IL",caption:"Israel"},{value:"IT",caption:"Italy"},{value:"JM",caption:"Jamaica"},{value:"JP",caption:"Japan"},{value:"JE",caption:"Jersey"},{value:"JO",caption:"Jordan"},{value:"KZ",caption:"Kazakhstan"},{value:"KE",caption:"Kenya"},{value:"KI",caption:"Kiribati"},{value:"KP",caption:"Korea, Democratic People's Republic of"},{value:"KR",caption:"Korea, Republic of"},{value:"KW",caption:"Kuwait"},{value:"KG",caption:"Kyrgyzstan"},{value:"LA",caption:"Lao People's Democratic Republic"},{value:"LV",caption:"Latvia"},{value:"LB",caption:"Lebanon"},{value:"LS",caption:"Lesotho"},{value:"LR",caption:"Liberia"},{value:"LY",caption:"Libya"},{value:"LI",caption:"Liechtenstein"},{value:"LT",caption:"Lithuania"},{value:"LU",caption:"Luxembourg"},{value:"MO",caption:"Macao"},{value:"MK",caption:"Macedonia, the Former Yugoslav Republic of"},{value:"MG",caption:"Madagascar"},{value:"MW",caption:"Malawi"},{value:"MY",caption:"Malaysia"},{value:"MV",caption:"Maldives"},{value:"ML",caption:"Mali"},{value:"MT",caption:"Malta"},{value:"MH",caption:"Marshall Islands"},{value:"MQ",caption:"Martinique"},{value:"MR",caption:"Mauritania"},{value:"MU",caption:"Mauritius"},{value:"YT",caption:"Mayotte"},{value:"MX",caption:"Mexico"},{value:"FM",caption:"Micronesia, Federated States of"},{value:"MD",caption:"Moldova, Republic of"},{value:"MC",caption:"Monaco"},{value:"MN",caption:"Mongolia"},{value:"ME",caption:"Montenegro"},{value:"MS",caption:"Montserrat"},{value:"MA",caption:"Morocco"},{value:"MZ",caption:"Mozambique"},{value:"MM",caption:"Myanmar"},{value:"NA",caption:"Namibia"},{value:"NR",caption:"Nauru"},{value:"NP",caption:"Nepal"},{value:"NL",caption:"Netherlands"},{value:"NC",caption:"New Caledonia"},{value:"NZ",caption:"New Zealand"},{value:"NI",caption:"Nicaragua"},{value:"NE",caption:"Niger"},{value:"NG",caption:"Nigeria"},{value:"NU",caption:"Niue"},{value:"NF",caption:"Norfolk Island"},{value:"MP",caption:"Northern Mariana Islands"},{value:"NO",caption:"Norway"},{value:"OM",caption:"Oman"},{value:"PK",caption:"Pakistan"},{value:"PW",caption:"Palau"},{value:"PS",caption:"Palestine, State of"},{value:"PA",caption:"Panama"},{value:"PG",caption:"Papua New Guinea"},{value:"PY",caption:"Paraguay"},{value:"PE",caption:"Peru"},{value:"PH",caption:"Philippines"},{value:"PN",caption:"Pitcairn"},{value:"PL",caption:"Poland"},{value:"PT",caption:"Portugal"},{value:"PR",caption:"Puerto Rico"},{value:"QA",caption:"Qatar"},{value:"RE",caption:"Réunion"},{value:"RO",caption:"Romania"},{value:"RU",caption:"Russian Federation"},{value:"RW",caption:"Rwanda"},{value:"BL",caption:"Saint Barthélemy"},{value:"SH",caption:"Saint Helena, Ascension and Tristan da Cunha"},{value:"KN",caption:"Saint Kitts and Nevis"},{value:"LC",caption:"Saint Lucia"},{value:"MF",caption:"Saint Martin (French part)"},{value:"PM",caption:"Saint Pierre and Miquelon"},{value:"VC",caption:"Saint Vincent and the Grenadines"},{value:"WS",caption:"Samoa"},{value:"SM",caption:"San Marino"},{value:"ST",caption:"Sao Tome and Principe"},{value:"SA",caption:"Saudi Arabia"},{value:"SN",caption:"Senegal"},{value:"RS",caption:"Serbia"},{value:"SC",caption:"Seychelles"},{value:"SL",caption:"Sierra Leone"},{value:"SG",caption:"Singapore"},{value:"SX",caption:"Sint Maarten (Dutch part)"},{value:"SK",caption:"Slovakia"},{value:"SI",caption:"Slovenia"},{value:"SB",caption:"Solomon Islands"},{value:"SO",caption:"Somalia"},{value:"ZA",caption:"South Africa"},{value:"GS",caption:"South Georgia and the South Sandwich Islands"},{value:"SS",caption:"South Sudan"},{value:"ES",caption:"Spain"},{value:"LK",caption:"Sri Lanka"},{value:"SD",caption:"Sudan"},{value:"SR",caption:"Suriname"},{value:"SJ",caption:"Svalbard and Jan Mayen"},{value:"SZ",caption:"Swaziland"},{value:"SE",caption:"Sweden"},{value:"CH",caption:"Switzerland"},{value:"SY",caption:"Syrian Arab Republic"},{value:"TW",caption:"Taiwan, Province of China"},{value:"TJ",caption:"Tajikistan"},{value:"TZ",caption:"Tanzania, United Republic of"},{value:"TH",caption:"Thailand"},{value:"TL",caption:"Timor-Leste"},{value:"TG",caption:"Togo"},{value:"TK",caption:"Tokelau"},{value:"TO",caption:"Tonga"},{value:"TT",caption:"Trinidad and Tobago"},{value:"TN",caption:"Tunisia"},{value:"TR",caption:"Turkey"},{value:"TM",caption:"Turkmenistan"},{value:"TC",caption:"Turks and Caicos Islands"},{value:"TV",caption:"Tuvalu"},{value:"UG",caption:"Uganda"},{value:"UA",caption:"Ukraine"},{value:"AE",caption:"United Arab Emirates"},{value:"GB",caption:"United Kingdom"},{value:"US",caption:"United States"},{value:"UM",caption:"United States Minor Outlying Islands"},{value:"UY",caption:"Uruguay"},{value:"UZ",caption:"Uzbekistan"},{value:"VU",caption:"Vanuatu"},{value:"VE",caption:"Venezuela, Bolivarian Republic of"},{value:"VN",caption:"Viet Nam"},{value:"VG",caption:"Virgin Islands, British"},{value:"VI",caption:"Virgin Islands, U.S."},{value:"WF",caption:"Wallis and Futuna"},{value:"EH",caption:"Western Sahara"},{value:"YE",caption:"Yemen"},{value:"ZM",caption:"Zambia"},{value:"ZW",caption:"Zimbabwe"}],v=i("phNm"),b=i("Vxjr");function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function S(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){w(a,n,r,o,s,"next",t)}function s(t){w(a,n,r,o,s,"throw",t)}o(void 0)}))}}function O(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?O(Object(i),!0).forEach((function(e){P(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var x,C,j,_,T,I,M,E,D,A,$,L,R,F=f.c.stripe_live?f.c.STRIPE_LIVE_PUBLIC_KEY:f.c.STRIPE_TEST_PUBLIC_KEY,B=Backbone.View.extend({template:d.a["template-viewer-cart-sidebar"],cardStyle:{base:{letterSpacing:"0.3px",color:"#0080FF",fontSize:"16px",fontFamily:"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Ubuntu, 'Fira Sans', Roboto, 'Avenir Next', 'Helvetica Neue', Helvetica, Arial, sans-serif","::placeholder":{color:"#CFD7DF"},fontSmoothing:"antialiased"},invalid:{color:"#e5424d",":focus":{color:"#303238"}}},getRenderStatus:function(){return this.rendered},initialize:function(t){return n.a.bindAll(this),this.mag=t,this.environment=this.mag.router.environment,this.rendered=!1,this.haveSkus=!1,this.havePrices=!1,this.checkoutCompete=!1,this.isHiddenSettings=!0,this.activeTab="tab-items",this.orderLoading=!1,this.paymentLoading=!1,this.hoveredItem=null,this.shippingForm={name:{value:null,error:null,validationRules:[{title:"required"}]},phone:{value:null,error:null,validationRules:[{title:"phoneNumber"}]},line1:{value:null,error:null,validationRules:[{title:"required"}]},line2:{value:null,error:null,validationRules:[]},city:{value:null,error:null,validationRules:[{title:"required"}]},state:{value:null,error:null,validationRules:[]},country:{value:"default",error:null,validationRules:[{title:"required",func:function(t,e){return"default"===e?"field is required":null}}]},postal_code:{value:null,error:null,validationRules:[]},email:{value:null,error:null,validationRules:[{title:"required"},{title:"email"}]},note:{value:null,error:null,validationRules:[]}},this.cardHolderNameValue=null,this.clearShippingFormField_debounced=n.a.debounce(this.clearShippingFormField,200),this.render(),this},render:function(){if(!RM.screenshot){var t=RM.viewerRouter?RM.viewerRouter.getUserPermissions():RM.constructorRouter.me.get("permissions");if(t&&t.can_use_e_commerce&&!this.mag.eCommerceManager.isConstructor()&&this.mag.eCommerceManager.haveEcommerceCartWidget&&this.mag.eCommerceManager.isMagConnectedTo("stripe")&&!this.rendered){this.rendered=!0,document.querySelectorAll("#cart-sidebar").length&&document.querySelectorAll("#cart-sidebar").forEach((function(t){return t.parentNode.removeChild(t)})),this.setElement(this.template({isMobile:Object(u.isMobile)(),isViewer:this.environment===f.c.environment.viewer,imgPublicPath:b.folderImagesPath})),this.$el.appendTo(Object(r.a)("body")),this.$toolbar=Object(r.a)(".toolbar.for-viewer"),this.$tabs=this.$el.find(".cart-sidebar-tabs"),this.$items=this.$el.find(".cart-items-list"),this.$closeButton=this.$el.find(".close-button"),this.$footer=this.$el.find(".sidebar-footer"),this.$navButtons=this.$el.find(".sidebar-btn"),this.$calcTextContainer=this.$el.find(".text-size-calc-container"),this.$itemsTab=this.$tabs.find(".tab-items"),this.$shippingTab=this.$tabs.find(".tab-inputs"),this.$orderTab=this.$tabs.find(".tab-order"),this.$paymentTab=this.$tabs.find(".tab-checkout"),this.$goToPayment=this.$orderTab.find(".cart-pay-btn"),this.$orderDetails=this.$orderTab.find(".order-details"),this.$orderItems=this.$orderTab.find(".order-items-list"),this.$orderError=this.$orderTab.find(".order-error"),this.$orderShippingAddress=this.$orderTab.find(".order-shipping-address"),this.$orderShippingMethod=this.$orderTab.find(".order-shipping-method"),this.$orderShippingEmail=this.$orderTab.find(".order-shipping-email"),this.$orderTax=this.$orderTab.find(".order-tax"),this.$orderTotalPrice=this.$orderTab.find(".order-total-price"),this.$paymentSuccess=this.$tabs.find("#payment-success-msg"),this.$paymentFailed=this.$tabs.find("#payment-failed-msg"),this.cartWidgetData=this.mag.eCommerceManager.getCartWidgetData(),this.environment===f.c.environment.preview&&(this.cartWidgetData&&this.cartWidgetData._id&&this.setupSettingsPanel(),window.RM.constructorRouter.on("previewClose",this.closeSideBar.bind(this)),this.bindTextInputsEvents());var e=this.$el.find(".svg");return o()(e),this.$el.find("[data-alt]:not(.rmalttext)").RMAltText(),this.generateSidebarCSS(this.cartWidgetData),this.renderSidebarTexts(),this.renderCartItems(),this.renderShippingForm(),this.initNavigation(),this.bindDomEvents(),p.a.on("ecommerce:cartsidebar:visibility:changed",this.toggleSidebar),this.mag.eCommerceManager.events.on("ecommerce:cartdata:changed",this.renderCartItems),this}}},bindDomEvents:function(){this.$closeButton.on("click",this.closeSideBar.bind(this)),this.$tabs.find(".cart-cancel-btn").on("click",this.cancelOrder.bind(this)),Object(r.a)(document).on("mouseover",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockHover),Object(r.a)(document).on("mouseleave",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockLeave),this.bindStaticTextFieldsHovers()},unbindDomEvents:function(){this.$closeButton.off("click",this.closeSideBar),this.$tabs.find(".cart-cancel-btn").off("click",this.cancelOrder),Object(r.a)(document).off("mouseover",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockHover),Object(r.a)(document).off("mouseleave",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockLeave)},bindStaticTextFieldsHovers:function(){this.environment===f.c.environment.preview&&(this.$itemsTab.find(".cart-title-input, .empty-cart-title-input").on("mouseover",(function(t){Object(r.a)(t.target).addClass("active")})),this.$itemsTab.find(".cart-title-input, .empty-cart-title-input").on("mouseleave",(function(t){Object(r.a)(t.target).is(":focus")||Object(r.a)(t.target).removeClass("active")})),this.$itemsTab.find(".сheck-out-btn").on("mouseover",(function(t){Object(r.a)(t.target).find(".cart-checkout-input").addClass("active")})),this.$itemsTab.find(".сheck-out-btn").on("mouseleave",(function(t){var e=Object(r.a)(t.target).find(".cart-checkout-input");e.is(":focus")||e.removeClass("active")})))},hideSidebar:function(){this.$el.removeClass("show"),Object(r.a)("body").removeClass("cart-sidebar-shown"),Object(r.a)("html").removeClass("cart-disable-scroll"),!this.isHiddenSettings&&this.settingsPanel&&(this.isHiddenSettings=!0,this.settingsPanel.isHidden=this.isHiddenSettings)},toggleSidebar:function(t){t?(this.hideSidebar(),this.checkoutCompete&&(this.mag.eCommerceManager.clearCart(),this.goToInitialTab(),this.hideSuccessPaymentMessage(),this.$paymentFailed.empty()),this.clearOrderError()):(this.$el.addClass("show"),Object(r.a)("body").addClass("cart-sidebar-shown"),Object(r.a)("html").addClass("cart-disable-scroll"))},closeSideBar:function(){this.mag.eCommerceManager.isCartSidebarHidden||this.mag.eCommerceManager.changeCartSidebarVisibility()},initNavigation:function(){this.$tabs.find("[data-tab^='tab-']").each(function(t,e){Object(r.a)(e).on("click",function(t){if(!t.isDefaultPrevented())if(this.haveSkus&&this.havePrices)window.alert("You can't buy all these products, try separately");else if(this.haveSkus||this.havePrices){if("tab-inputs"===e.dataset.tab&&(this.updateShippingForm(),RM.analytics&&RM.analytics.sendEvent("Checkout 1st step completed")),"tab-order"===e.dataset.tab){if(!this.validateShippingForm())return void this.renderShippingFormErrors();this.clearShippingFormErrors(),RM.analytics&&RM.analytics.sendEvent("Checkout 2nd step completed");var i,r,a=this.mag.eCommerceManager.getShippingForm();a&&(i=n.a.mapObject(a,(function(t){return{value:t.value}})),r=n.a.mapObject(this.shippingForm,(function(t){return{value:t.value}}))),(!a||a&&!n.a.isEqual(i,r))&&(this.mag.eCommerceManager.setShippingForm(this.shippingForm),this.havePrices&&(this.needForUpdateCustomer=!0)),this.haveSkus&&this.renderOrderTab(),this.havePrices&&this.renderOrderTabForPrices()}"tab-checkout"===e.dataset.tab&&(RM.analytics&&RM.analytics.sendEvent("Checkout 3rd step completed"),this.haveSkus&&this.renderCheckoutForm(),this.havePrices&&this.renderCheckoutFormPaymentIntent()),this.goToTabByClassname("."+e.dataset.tab)}}.bind(this))}.bind(this))},goToTabByClassname:function(t){this.$tabs.find(".cart-sidebar-tab").each((function(t,e){Object(r.a)(e).removeClass("active")})),this.$tabs.find(t).addClass("active"),this.activeTab=t.slice(1)},goToInitialTab:function(){this.goToTabByClassname(".tab-items")},generateSidebarCSS:function(t){var e="cart_sidebar_styles_".concat(t._id),i=h.default.getRGBA(t["bar-color"],t["bar-color-opacity"]/100),n=h.default.getRGBA(t["bar-background-color"],t["bar-background-color-opacity"]/100),a=h.default.getRGBA(t["bar-color"],.45*t["bar-color-opacity"]/100),o=this.getAdditionalColor(n);this.cardStyle=k(k({},this.cardStyle),{},{base:k(k({},this.cardStyle.base),{},{color:i,fontWeight:t["bar-font-weight"],"::placeholder":{color:a}}),invalid:k(k({},this.cardStyle.invalid),{},{color:a,fontWeight:t["bar-font-weight"],":focus":{color:i},"::placeholder":{color:a}})});var c="    .cart-sidebar {\n\n      color: ".concat(i,";\n      background-color: ").concat(n,";\n      box-shadow: ").concat(t["bar-shadow"]?"0 0 4px rgba(124, 124, 125, 0.5)":"none",";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar textarea {\n\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar input {\n\n      color: ").concat(i,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar input::placeholder {\n\n      color: ").concat(a,";\n    }\n\n    .cart-sidebar .cart-title-input.active {\n\n      border-color: ").concat(Object(s.transparentize)(.8,i),";\n    }\n\n    .cart-sidebar .empty-cart-title-input.active {\n\n      border-color: ").concat(Object(s.transparentize)(.8,i),";\n    }\n\n    .cart-sidebar .cart-price-input.active, .cart-sidebar .cart-quantity-input.active {\n\n      border-color: ").concat(Object(s.transparentize)(.2,a),";\n    }\n\n    .cart-sidebar .cart-checkout-input.active {\n\n      border-color: ").concat(Object(s.transparentize)(.8,i),";\n    }\n\n    .cart-sidebar .cart-price-input {\n\n      color: ").concat(a,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar .cart-quantity-input {\n\n      color: ").concat(a,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar button {\n\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar select {\n\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar .sidebar-btn {\n\n      color: ").concat(i,";\n      border-color: ").concat(a,";\n    }\n\n    .cart-sidebar .preloader svg path {\n\n      stroke: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-btn path {\n\n      fill: ").concat(i,";\n    }\n\n    .cart-sidebar .expand-arrow svg path {\n\n      fill: ").concat(i,";\n    }\n\n    .cart-sidebar .cart-cancel-btn {\n\n      color: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block.hover {\n\n      background-color: ").concat(o,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-attributes {\n\n      color: ").concat(a,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-price {\n\n      color: ").concat(a,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-items-quantity {\n\n      color: ").concat(a,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-remove-btn-icon path {\n\n      fill: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-decrease-btn-icon rect {\n\n      fill: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-increase-btn-icon path {\n\n      fill: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-body .order-details-form, .cart-sidebar .sidebar-body .order-details-form .form-input {\n\n      color: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-body .order-details-form .form-input::placeholder {\n\n      color: ").concat(a,";\n    }\n\n    .cart-sidebar .sidebar-body .order-details-form .rm-native-fake-select {\n\n      color: ").concat(a,";\n    }\n\n    .cart-sidebar .sidebar-body .order-details-form .rm-native-fake-select.selected {\n\n      color: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-body .order-details-form svg path {\n\n      fill: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-body .order-details-form .form-title {\n\n      color: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-body .form-error {\n\n      background-color: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-body .order-details-form .rm-native-select-popup {\n\n      background-color: ").concat(o,";\n    }\n\n    .cart-sidebar .tab-order .order-details .order-title-row {\n\n      color: ").concat(a,";\n    }\n\n    .cart-sidebar .tab-order .order-details .rm-native-fake-select {\n\n      color: ").concat(i,";\n    }\n\n    .cart-sidebar .tab-checkout .payment-input {\n\n      color: ").concat(i,";\n    }\n\n    .cart-sidebar .tab-checkout .payment-input::placeholder {\n\n      color: ").concat(a,";\n    }\n\n    .cart-sidebar .tab-checkout #payment-failed-msg .error-icon {\n\n      border-color: ").concat(a,";\n    }\n\n    .cart-sidebar .tab-checkout #payment-failed-msg .error-icon svg g {\n\n      fill: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-settings-container .settings-button path {\n\n      stroke: ").concat(i,";\n    }\n\n    .cart-sidebar .sidebar-settings-container .settings-button:hover path {\n\n      stroke: ").concat(a,";\n    }\n\n    .cart-sidebar.cart-is-mobile .sidebar-body .cart-item-block {\n\n      background-color: ").concat(o,";\n    }");Object(r.a)("#".concat(e)).remove();var l=document.createElement("style");l.type="text/css",l.id=e,l.className="cart-sidebar-styles",l.appendChild(document.createTextNode(c)),document.querySelector("head").appendChild(l)},getAdditionalColor:function(t){return Object(s.getLuminance)(t)<.05&&Object(s.getContrast)("#fff",t)-Object(s.getContrast)("#000",t)>=8?Object(s.lighten)(.1,t):Object(s.darken)(.1,t)},renderCartItems:function(){var t=this.mag.eCommerceManager.getCartData();if(t&&t.skus){var e=Object.keys(t.skus),i=Object.keys(t.prices);this.$items.empty(),this.haveSkus=!!e.length,this.havePrices=!!i.length,this.haveSkus||this.havePrices?(this.$itemsTab.find(".сheck-out-btn").css("display","block"),this.$itemsTab.find(".empty-cart").css("display","none")):(this.$itemsTab.find(".сheck-out-btn").css("display","none"),this.$itemsTab.find(".empty-cart").css("display","flex")),this.renderPricesCartItems(i),this.renderSkusCartItems(e);var n=this.$items.find(".svg");o()(n),this.renderSidebarTexts(),this.unbindTextInputsEvents(!0),this.bindTextInputsEvents(!0)}},renderCartItem:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"price",n=this.hoveredItem===t.id,a=Object(r.a)("<div/>",{class:"cart-item-block".concat(n?" hover":"")});a.data("".concat(i,"-id"),t.id);var o=t.image||t.productObject.images&&t.productObject.images.length;if(o){var s=t.image?t.image:t.productObject.images?t.productObject.images[0]:"";e=Object(r.a)("<div/>",{class:"cart-item-image",css:{"background-position":"center center","background-size":"cover","background-repeat":"no-repeat","background-image":"url(".concat(s,")")}}),a.append(e)}var c=Object(r.a)("<div/>",{class:e?"cart-item-title":"cart-item-title without-image"}).text(t.productObject.name),l=t.cart_count,u=(("price"===i?t.unit_amount:t.price)/100).toFixed(2),d=Object(g.a)(u,t.currency),p=Object(g.a)((u*l).toFixed(2),t.currency),f=Object(r.a)("<div/>",{class:"cart-item-price"}),m=Object(r.a)("<input/>",{type:"text",class:"cart-text-input cart-price-input",name:"price",placeholder:"Price",maxlength:"32",translate:"no",autocomplete:"no",autocorrect:"no",spellcheck:"false"});m.get(0).dataset.dynamicWidth=!0;var v,y=Object(r.a)("<span/>").html(l>1?": ".concat(d," × ").concat(l," = ").concat(p):": ".concat(d));if(f.append(m).append(y),"sku"===i){v=Object(r.a)("<div/>",{class:"cart-item-attributes"});var w=t.attributes;for(var S in w){var O=Object(r.a)("<div/>",{class:"cart-item-attribute"}).html("".concat(h.default.capitalize(S),": ").concat(w[S]));v.append(O)}}var k=Object(r.a)("<div/>",{class:"cart-items-quantity"}),P=Object(r.a)("<input/>",{type:"text",class:"cart-text-input cart-quantity-input",name:"quantity",placeholder:"Quantity",maxlength:"32",translate:"no",autocomplete:"no",autocorrect:"no",spellcheck:"false"});P.get(0).dataset.dynamicWidth=!0;var x=Object(r.a)("<span/>").html(": ".concat(l));k.append(P).append(x);var C=Object(r.a)("<div/>",{class:"cart-item-remove-btn",title:"remove"}).attr("data-".concat(i,"-id"),t.id),j=Object(r.a)("<img/>",{class:"svg cart-item-remove-btn-icon",src:Object(b.findImagePath)("./viewer/cart-sidebar/cart-item-delete.svg")});C.append(j),C.on("click",this.onRemoveItem);var _=Object(r.a)("<div/>",{class:"cart-item-edit-group"}),T=Object(r.a)("<div/>",{class:"cart-item-increase-btn"}).attr("data-".concat(i,"-id"),t.id),I=Object(r.a)("<img/>",{class:"svg cart-item-increase-btn-icon",src:Object(b.findImagePath)("./viewer/cart-sidebar/cart-item-increase.svg")});if(T.append(I),_.append(T),("price"===i||this.mag.eCommerceManager.checkItemQuantity(t.id))&&(T.addClass("active"),T.on("click",this.onIncreaseItem)),l>1){var M=Object(r.a)("<div/>",{class:"cart-item-decrease-btn decrease-btn-".concat(t.id)}).attr("data-".concat(i,"-id"),t.id),E=Object(r.a)("<img/>",{class:"svg cart-item-decrease-btn-icon",src:Object(b.findImagePath)("./viewer/cart-sidebar/cart-item-decrease.svg")});M.append(E),_.append(M),M.on("click",this.onDecreaseItem)}else{var D=this.$items.find("decrease-btn-".concat(t.id));D.off("click",this.onDecreaseItem),D.remove()}"price"===i?a.append(c).append(f).append(k).append(C).append(_):a.append(c).append(v).append(f).append(k).append(C).append(_),this.$items.append(a)},renderPricesCartItems:function(t){var e=this,i=this.mag.eCommerceManager.getCartData();t.forEach((function(t){var n=i.prices[t];n.active&&e.renderCartItem(n)}))},renderSkusCartItems:function(t){var e=this,i=this.mag.eCommerceManager.getCartData();t.forEach((function(t){var n=i.skus[t];n.active&&e.renderCartItem(n,"sku")}))},onRemoveItem:function(t){t.currentTarget.dataset.priceId?this.mag.eCommerceManager.removeFromCart(t.currentTarget.dataset.priceId):t.currentTarget.dataset.skuId&&this.mag.eCommerceManager.removeSkuFromCart(t.currentTarget.dataset.skuId)},onIncreaseItem:function(t){t.currentTarget.dataset.priceId?this.mag.eCommerceManager.increaseCartItem(t.currentTarget.dataset.priceId):t.currentTarget.dataset.skuId&&this.mag.eCommerceManager.increaseSkuCartItem(t.currentTarget.dataset.skuId)},onDecreaseItem:function(t){t.currentTarget.dataset.priceId?this.mag.eCommerceManager.decreaseCartItem(t.currentTarget.dataset.priceId):t.currentTarget.dataset.skuId&&this.mag.eCommerceManager.decreaseSkuCartItem(t.currentTarget.dataset.skuId)},getTextFieldModelKey:function(t){return"bar-".concat(t)},getSidebarTextValue:function(t){var e=this.getTextFieldModelKey(t);return this.cartWidgetData&&this.cartWidgetData[e]?l()(this.cartWidgetData[e]):f.c.defaultSidebarTexts[t]?f.c.defaultSidebarTexts[t]:null},calcTextFieldSize:function(t){if(!t)return null;var e=getComputedStyle(t);this.$calcTextContainer.css({"font-family":e.fontFamily,"font-size":e.fontSize,"font-style":e.fontStyle,"font-weight":e.fontWeight,"letter-spacing":e.letterSpacing}),this.$calcTextContainer.text(t.value);var i=this.$calcTextContainer.width();return Math.ceil(i)},renderSidebarTexts:function(){var t=this;this.$itemsTab.find(".cart-text-input").each((function(e,i){var n=i.getAttribute("name"),r=t.getSidebarTextValue(n);if(r&&(i.value=r,i.dataset.dynamicWidth)){var a=t.calcTextFieldSize(i);a&&(i.style.width="".concat(a,"px"))}}))},bindTextInputsEvents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$itemsTab.find(".cart-text-input"+(e?'[data-dynamic-width="true"]':"")).each((function(e,i){Object(r.a)(i).on("click",t.onTextFieldClick),Object(r.a)(i).on("input",t.onTextFieldChange),Object(r.a)(i).on("focus",t.onTextFieldFocus),Object(r.a)(i).on("blur",t.onTextFieldBlur)})),e&&this.environment===f.c.environment.preview&&(this.$itemsTab.find(".cart-item-block").on("mouseover",this.onDynamicMouseOver),this.$itemsTab.find(".cart-item-block").on("mouseleave",this.onDynamicMouseLeave))},unbindTextInputsEvents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$itemsTab.find(".cart-text-input"+(e?'[data-dynamic-width="true"]':"")).each((function(e,i){Object(r.a)(i).off("click",t.onTextFieldClick),Object(r.a)(i).off("input",t.onTextFieldChange),Object(r.a)(i).off("focus",t.onTextFieldFocus),Object(r.a)(i).off("blur",t.onTextFieldBlur)})),e&&this.environment===f.c.environment.preview&&(this.$itemsTab.find(".cart-item-block").off("mouseover",this.onDynamicMouseOver),this.$itemsTab.find(".cart-item-block").off("mouseleave",this.onDynamicMouseLeave))},onDynamicMouseOver:function(t){Object(r.a)(t.target).find(".cart-price-input, .cart-quantity-input").addClass("active")},onDynamicMouseLeave:function(t){Object(r.a)(t.target).find(".cart-price-input, .cart-quantity-input").each((function(){Object(r.a)(this).is(":focus")||Object(r.a)(this).removeClass("active")}))},onTextFieldClick:function(t){t.preventDefault()},onTextFieldChange:function(t){if(t.target.dataset.dynamicWidth){var e=this.calcTextFieldSize(t.target);e&&(t.target.style.width="".concat(e,"px"))}},onTextFieldFocus:function(t){this.environment===f.c.environment.preview&&Object(r.a)(t.target).addClass("active")},onTextFieldBlur:function(t){var e=this;this.environment===f.c.environment.preview&&Object(r.a)(t.target).removeClass("active");var i=t.target.getAttribute("name"),n=this.getSidebarTextValue(i);if(n)if(t.target.value){if(this.cartWidgetModel){var a=P({},this.getTextFieldModelKey(i),t.target.value);this.updateCartWidgetData(a),this.cartWidgetModel.save(a,{toHistory:!1,skipHistory:!0,patch:!0}).then((function(){t.target.dataset.dynamicWidth&&e.renderSidebarTexts()}))}}else t.target.value=n},renderShippingForm:(R=S(regeneratorRuntime.mark((function t(){var e,a,o,s,c,l,u,d,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=n.a.clone(m)).unshift({value:"default",caption:"Country"}),a=this.mag.eCommerceManager.getCartData(),(o=a.shippingForm)&&"object"===y(o)&&(this.shippingForm=o),t.next=7,i.e(9).then(i.bind(null,"h9wM"));case 7:return s=t.sent,c=s.default,t.next=11,Promise.resolve().then(i.bind(null,"Kw5r"));case 11:l=t.sent,u=l.default,d=u.extend(c),this.countrySelect=new d({el:this.$tabs.find(".countries-select").get(0),propsData:{options:function(){return e},value:this.shippingForm.country.value,isDesktop:!1,callback:this.onCountryChange}}),this.mag.eCommerceManager.hasShippableProducts()?this.$shippingTab.find(".shipping-form").removeClass("hidden"):this.$shippingTab.find(".shipping-form").addClass("hidden"),this.$tabs.find(".order-details-form .form-input").each((function(t,e){var i=e.getAttribute("name");h.shippingForm[i]&&(e.value=h.shippingForm[i].value),Object(r.a)(e).on("input",h.onShippingFormChange)}));case 17:case"end":return t.stop()}}),t,this)}))),function(){return R.apply(this,arguments)}),updateShippingForm:function(){var t=this.mag.eCommerceManager.getShippingForm();t&&"object"===y(t)&&(this.shippingForm=t),this.mag.eCommerceManager.hasShippableProducts()?this.$shippingTab.find(".shipping-form").removeClass("hidden"):this.$shippingTab.find(".shipping-form").addClass("hidden")},onCountryChange:function(t){this.shippingForm.country.value=t,this.countrySelect.value=t,this.clearShippingFormField_debounced("country")},onShippingFormChange:function(t){var e=t.target.getAttribute("name");void 0!==this.shippingForm[e]&&"object"===y(this.shippingForm[e])&&(this.shippingForm[e].value=t.target.value,this.clearShippingFormField_debounced(e))},renderShippingFormErrors:function(){var t=this;Object.keys(this.shippingForm).forEach((function(e){t.shippingForm[e].error&&t.$shippingTab.find(".form-error.".concat(e,"-error")).removeClass("hidden")}))},clearShippingFormErrors:function(){var t=this;Object.keys(this.shippingForm).forEach((function(e){t.$tabs.find(".form-error.".concat(e,"-error")).addClass("hidden")}))},clearShippingFormField:function(t){if(void 0!==this.shippingForm[t]&&this.shippingForm[t].error){var e=this.validateShippingFormField(t);e&&e.success&&(this.$tabs.find(".form-error.".concat(t,"-error")).addClass("hidden"),this.shippingForm[t].error=null)}},validateShippingFormField:function(t){var e=this,i=[];if(void 0!==this.shippingForm[t])return this.shippingForm[t].validationRules.length?(this.shippingForm[t].validationRules.forEach((function(n){if("function"==typeof n.func){var r=n.func(t,e.shippingForm[t].value);r&&i.push(r)}else{var a=e["".concat(n.title,"Validation")](t,e.shippingForm[t].value);a&&i.push(a)}})),i.length?{success:!1,error:!0,errorMessages:i}:{success:!0}):{success:!0}},requiredValidation:function(t,e){return e?null:"field is required"},emailValidation:function(t,e){return e?h.default.isValidEmail(e)?null:"it's not email":null},phoneNumberValidation:function(t,e){return e?h.default.isValidPhoneNumber(e)?null:"it's not  phone number":null},validateShippingForm:function(){var t=!1;if(this.mag.eCommerceManager.hasShippableProducts())for(var e in this.shippingForm){var i=this.validateShippingFormField(e);i&&(i.success?this.shippingForm[e].error=null:(this.shippingForm[e].error=i.errorMessages,t=!0))}else{var n=this.validateShippingFormField("email");n&&(n.success?this.shippingForm.email.error=null:(this.shippingForm.email.error=n.errorMessages,t=!0))}return!t},renderOrderTab:function(){var t=this;this.clearOrderError();var e=this.mag.eCommerceManager.getCartData(),i=e.order;if(i&&i.created<Math.floor(Date.parse(e.changed)/1e3))return this.showOrderLoader(),void this.mag.eCommerceManager.cancelOrder().then((function(e){e.data&&"canceled"===e.data.status&&(t.mag.eCommerceManager.deleteOrder(),t.createOrder())})).catch((function(e){t.hideOrderLoader(),t.renderOrderError(e&&e.message?e.message:""),t.mag.eCommerceManager.deleteOrder()}));i?this.renderOrderDetails():this.createOrder()},renderOrderTabForPrices:(L=S(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearOrderError(),this.showOrderLoader(),t.next=4,this.getCustomer();case 4:if(!(e=t.sent)){t.next=42;break}return t.next=8,this.getInvoiceItemsForCustomer(e.id);case 8:if(!t.sent){t.next=42;break}return t.next=12,this.getInvoiceForCustomer(e.id);case 12:if(!(i=t.sent)){t.next=42;break}if(!(i.created<Math.floor(Date.parse(this.mag.eCommerceManager.getCartData().changed)/1e3))){t.next=41;break}if(!this.needForUpdateCustomer){t.next=19;break}return t.next=18,this.updateOrCreateCustomer();case 18:this.needForUpdateCustomer=!1;case 19:return t.prev=19,t.next=22,this.cancelInvoice(i);case 22:t.next=29;break;case 24:return t.prev=24,t.t0=t.catch(19),this.renderOrderError("can't cancel old order"),this.hideOrderLoader(),t.abrupt("return");case 29:return t.prev=29,t.next=32,this.createInvoiceWithItems();case 32:(n=t.sent)&&this.renderInvoiceDetails(n),t.next=39;break;case 36:t.prev=36,t.t1=t.catch(29),this.renderOrderError("can't create order");case 39:t.next=42;break;case 41:this.renderInvoiceDetails(i);case 42:this.hideOrderLoader();case 43:case"end":return t.stop()}}),t,this,[[19,24],[29,36]])}))),function(){return L.apply(this,arguments)}),renderInvoiceDetails:($=S(regeneratorRuntime.mark((function t(e){var i,n,a,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$orderItems.empty(),this.$orderShippingAddress.empty(),this.$orderShippingMethod.empty(),this.$orderShippingEmail.empty(),this.$orderTax.empty(),this.$orderTotalPrice.empty(),e.lines.data.forEach((function(t){var e=Object(r.a)("<div/>",{class:"order-item"}).html(t.quantity+" × "+t.description),i=Object(r.a)("<div/>",{class:"order-item-price"}).text(Object(g.a)((t.amount/100).toFixed(2),t.currency));e.append(i),o.$orderItems.append(e)})),e.customer_shipping&&e.customer_shipping.address&&(i=function(t){return t?" ".concat(t):""},n=e.customer_shipping.address,a="".concat(n.line1).concat(i(n.line2)," ").concat(n.city,",").concat(i(n.state)).concat(i(n.postal_code)," ").concat(n.country),this.$orderShippingAddress.text(a),this.$tabs.find(".shipping-details").removeClass("hidden")),this.$orderShippingMethod.parent(".shipping-method.order-row").addClass("hidden"),this.$orderDetails.find(".order-id").text(String(e.id).slice(0,20)+"..."),this.$orderShippingEmail.text(e.customer_email),this.$orderDetails.find(".shipping-email").removeClass("hidden"),e.customer_phone?(this.$orderDetails.find(".order-shipping-phone").text(e.customer_phone),this.$orderDetails.find(".shipping-phone").removeClass("hidden")):this.$orderDetails.find(".shipping-phone").addClass("hidden"),e.tax?(this.$orderTax.parent(".shipping-tax-size.order-row").removeClass("hidden"),this.$orderTax.text(Object(g.a)((e.tax/100).toFixed(2),e.currency))):this.$orderTax.parent(".shipping-tax-size.order-row").addClass("hidden"),this.$orderTotalPrice.text(Object(g.a)((e.total/100).toFixed(2),e.currency)),this.$goToPayment.removeClass("hidden");case 16:case"end":return t.stop()}}),t,this)}))),function(t){return $.apply(this,arguments)}),getCustomer:(A=S(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.mag.eCommerceManager.getCartData()).customer){t.next=17;break}return t.prev=2,t.next=5,this.mag.eCommerceManager.createOrUpdateCustomer(this.mag.num_id,this.generateCustomerDataFromShippingForm(e.shippingForm));case 5:if(!(i=t.sent)||!i.data){t.next=9;break}return this.mag.eCommerceManager.setCustomer(i.data),t.abrupt("return",i.data);case 9:t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(2),console.error(t.t0),t.t0;case 15:t.next=18;break;case 17:return t.abrupt("return",e.customer);case 18:case"end":return t.stop()}}),t,this,[[2,11]])}))),function(){return A.apply(this,arguments)}),updateOrCreateCustomer:(D=S(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.mag.eCommerceManager.getCartData(),t.next=3,this.mag.eCommerceManager.createOrUpdateCustomer(this.mag.num_id,this.generateCustomerDataFromShippingForm(e.shippingForm));case 3:if(!(i=t.sent)||!i.data){t.next=7;break}return this.mag.eCommerceManager.setCustomer(i.data),t.abrupt("return",i.data);case 7:case"end":return t.stop()}}),t,this)}))),function(){return D.apply(this,arguments)}),generateCustomerDataFromShippingForm:function(t){var e={email:t.email.value,name:t.name.value,shipping:{address:{country:t.country.value,city:t.city.value,line1:t.line1.value},name:t.name.value}};return t.phone.value&&(e.phone=t.phone.value,e.shipping.phone=t.phone.value),t.line2.value&&(e.shipping.address.line2=t.line2.value),t.postal_code.value&&(e.shipping.address.postal_code=t.postal_code.value),t.state.value&&(e.shipping.address.state=t.state.value),e},getInvoiceItemsForCustomer:(E=S(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((i=this.mag.eCommerceManager.getCartData()).invoiceItems&&i.invoiceItems.length>0)){t.next=5;break}return t.abrupt("return",i.invoiceItems);case 5:return t.next=7,this.createInvoiceItemsForCustomer(e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return E.apply(this,arguments)}),createInvoiceItemsForCustomer:(M=S(regeneratorRuntime.mark((function t(e){var i,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.mag.eCommerceManager.getCartData(),n=Object.keys(i.prices).map((function(t){return{price:i.prices[t].id,quantity:i.prices[t].cart_count}})),t.prev=2,t.next=5,this.mag.eCommerceManager.createInvoiceItems(this.mag.num_id,e,n);case 5:if(!((r=t.sent)&&r.data&&r.data.length)){t.next=9;break}return this.mag.eCommerceManager.setInvoiceItems(r.data),t.abrupt("return",r.data);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.error(t.t0);case 14:case"end":return t.stop()}}),t,this,[[2,11]])}))),function(t){return M.apply(this,arguments)}),getInvoiceForCustomer:(I=S(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=this.mag.eCommerceManager.getCartData()).invoice||!i.invoice.id){t.next=15;break}return t.next=4,this.mag.eCommerceManager.getInvoice(this.mag.num_id,i.invoice.id);case 4:if(!(n=t.sent)||"draft"!==n.status&&"open"!==n.status){t.next=10;break}return this.mag.eCommerceManager.setInvoice(n),t.abrupt("return",n);case 10:return t.next=12,this.createInvoiceForCustomer(e);case 12:return t.abrupt("return",t.sent);case 13:t.next=18;break;case 15:return t.next=17,this.createInvoiceForCustomer(e);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return I.apply(this,arguments)}),createInvoiceForCustomer:(T=S(regeneratorRuntime.mark((function t(e){var i,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.mag.eCommerceManager.getCartData(),n={customer:e,collection_method:"charge_automatically",auto_advance:!1},i.shippingForm&&i.shippingForm.note.value&&(n.metadata={customer_note:i.shippingForm.note.value}),t.prev=3,t.next=6,this.mag.eCommerceManager.createInvoice(this.mag.num_id,n);case 6:if(!(r=t.sent)||!r.data){t.next=10;break}return this.mag.eCommerceManager.setInvoice(r.data),t.abrupt("return",r.data);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),t.t0&&t.t0.type===v.c.nothingToInvoice&&(this.mag.eCommerceManager.clearCart(),this.goToInitialTab());case 15:case"end":return t.stop()}}),t,this,[[3,12]])}))),function(t){return T.apply(this,arguments)}),createInvoiceWithItems:(_=S(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCustomer();case 2:return e=t.sent,t.next=5,this.createInvoiceItemsForCustomer(e.id);case 5:return t.next=7,this.createInvoiceForCustomer(e.id);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)}),cancelInvoice:(j=S(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("draft"!==e.status){t.next=5;break}return t.next=3,this.mag.eCommerceManager.deleteDraftInvoice(this.mag.num_id,e.id);case 3:t.next=8;break;case 5:if("open"!==e.status&&"uncollectible"!==e.status){t.next=8;break}return t.next=8,this.mag.eCommerceManager.voidDraftInvoice(this.mag.num_id,e.id);case 8:this.mag.eCommerceManager.unsetInvoiceItems(),this.mag.eCommerceManager.unsetInvoice();case 10:case"end":return t.stop()}}),t,this)}))),function(t){return j.apply(this,arguments)}),createOrder:function(){this.showOrderLoader(),this.mag.eCommerceManager.updateCartData().then(function(){var t=this,e=this.generateOrderRequestData();e&&e instanceof Error?this.renderOrderError(e.message):e&&e.currency&&r.a.ajax({type:"POST",url:"/api/projects/"+this.mag.num_id+"/ecommerce/stripe/orders/",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.hideOrderLoader(),e&&e.data&&(t.mag.eCommerceManager.setOrder(e.data),t.renderOrderDetails())},error:function(e){var i=JSON.parse(e.responseText);t.hideOrderLoader(),t.renderOrderError(i.message)}})}.bind(this)).catch(function(t){this.hideOrderLoader(),t&&t.message&&this.renderOrderError(t.message)}.bind(this))},showOrderLoader:function(){this.orderLoading||(this.orderLoading=!0,this.$goToPayment.hasClass("hidden")||this.$goToPayment.addClass("hidden"),this.$orderTab.find(".preloader").addClass("show"),this.$orderDetails.addClass("hidden"))},hideOrderLoader:function(){this.orderLoading&&(this.orderLoading=!1,this.$goToPayment.hasClass("hidden")&&this.$goToPayment.removeClass("hidden"),this.$orderTab.find(".preloader").removeClass("show"),this.$orderDetails.removeClass("hidden"))},renderOrderDetails:(C=S(regeneratorRuntime.mark((function t(){var e,n,a,o,s,c,l,u,d,h,p,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.mag.eCommerceManager.getOrder(),this.$orderItems.empty(),this.$orderShippingAddress.empty(),this.$orderShippingMethod.empty(),this.$orderShippingEmail.empty(),this.$orderTax.empty(),this.$orderTotalPrice.empty(),e.items.forEach(function(t){if("tax"===t.type)n=t;else if("shipping"===t.type)a=t;else{var e=Object(r.a)("<div/>",{class:"order-item"}).html(t.quantity+" × "+t.description),i=Object(r.a)("<div/>",{class:"order-item-price"}).text(Object(g.a)((t.amount/100).toFixed(2),t.currency));e.append(i),this.$orderItems.append(e)}}.bind(this)),e.shipping?(o=function(t){return t?" ".concat(t):""},s=e.shipping.address,c="".concat(s.line1).concat(o(s.line2)," ").concat(s.city,",").concat(o(s.state)).concat(o(s.postal_code)," ").concat(s.country),this.$orderShippingAddress.text(c),this.$tabs.find(".shipping-details").removeClass("hidden")):this.$tabs.find(".shipping-details").addClass("hidden"),!(e.shipping_methods.length>1)){t.next=23;break}return l=this.shippingMethodsOptions(e.shipping_methods),t.next=13,i.e(9).then(i.bind(null,"h9wM"));case 13:return u=t.sent,d=u.default,t.next=17,Promise.resolve().then(i.bind(null,"Kw5r"));case 17:h=t.sent,p=h.default,f=p.extend(d),this.shippingMethodSelect?(this.shippingMethodSelect.options=function(){return l},this.shippingMethodSelect.value=a.parent):this.shippingMethodSelect=new f({el:this.$orderShippingMethod.get(0),propsData:{options:function(){return l},value:a.parent,isDesktop:!1,callback:this.onShippingMethodChange}}),t.next=25;break;case 23:this.$orderShippingMethod.parent(".shipping-method.order-row").removeClass("hidden"),this.$orderShippingMethod.text(a.description+" "+Object(g.a)((a.amount/100).toFixed(2),a.currency));case 25:this.$orderDetails.find(".order-id").text(String(e.id).slice(0,20)+"..."),e.email?(this.$orderShippingEmail.text(e.email),this.$orderDetails.find(".shipping-email").removeClass("hidden")):this.$orderDetails.find(".shipping-email").addClass("hidden"),e.phone?(this.$orderDetails.find(".order-shipping-phone").text(e.phone),this.$orderDetails.find(".shipping-phone").removeClass("hidden")):this.$orderDetails.find(".shipping-phone").addClass("hidden"),n&&(this.$orderTax.parent(".shipping-tax-size.order-row").removeClass("hidden"),this.$orderTax.text(n.description+" "+Object(g.a)((n.amount/100).toFixed(2),n.currency))),this.$orderTotalPrice.text(Object(g.a)((e.amount/100).toFixed(2),e.currency)),this.$goToPayment.removeClass("hidden");case 31:case"end":return t.stop()}}),t,this)}))),function(){return C.apply(this,arguments)}),shippingMethodsOptions:function(t){return t.map((function(t){return{value:t.id,caption:t.description+" "+Object(g.a)((t.amount/100).toFixed(2),t.currency)}}))},onShippingMethodChange:function(t){var e=this;this.shippingMethodSelect.value=t,this.showOrderLoader(),this.mag.eCommerceManager.changeShippingMethod(t).then((function(t){e.hideOrderLoader(),t.data&&(e.mag.eCommerceManager.setOrder(t.data),e.renderOrderDetails())})).catch((function(){e.hideOrderLoader()}))},renderOrderError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$orderError.find(".order-error-message").text(t),this.$orderError.removeClass("hidden"),this.$orderDetails.addClass("hidden"),this.$goToPayment.addClass("hidden")},clearOrderError:function(){this.$orderError.addClass("hidden"),this.$orderDetails.removeClass("hidden"),this.$goToPayment.removeClass("hidden")},transformShippingFormToOrderRequest:function(){var t=this.checkShippableInCart(),e={currency:"usd",email:this.shippingForm.email.value,items:[]};return this.shippingForm.note.value&&(e.metadata={note:this.shippingForm.note.value}),t?(e.shipping={name:this.shippingForm.name.value,phone:this.shippingForm.phone.value,address:{line1:this.shippingForm.line1.value,line2:this.shippingForm.line2.value,city:this.shippingForm.city.value,state:this.shippingForm.state.value,country:this.shippingForm.country.value,postal_code:this.shippingForm.postal_code.value}},e):e},generateOrderRequestData:function(){var t=this.mag.eCommerceManager.getCartData();if(!t||!t.skus)return new Error("Empty cart");var e=[],i=this.transformShippingFormToOrderRequest();for(var n in t.skus)t.skus[n].active&&(i.items.push({type:t.skus[n].object,parent:n,currency:t.skus[n].currency,quantity:t.skus[n].cart_count}),-1===e.indexOf(t.skus[n].currency)&&e.push(t.skus[n].currency));return e.length>1?new Error("mixed currencies"):(i.currency=e.pop(),i)},cancelOrder:function(){var t=this;if(this.showPaymentLoader(),this.havePrices){var e=this.mag.eCommerceManager.getCartData();e.invoice&&this.cancelInvoice(e.invoice).then((function(){t.hidePaymentLoader(),t.goToTabByClassname(".tab-items")})).catch((function(){t.hidePaymentLoader()}))}else this.mag.eCommerceManager.cancelOrder().then((function(e){t.hidePaymentLoader(),e.data&&"canceled"===e.data.status&&(t.mag.eCommerceManager.deleteOrder(),t.goToTabByClassname(".tab-items"))})).catch((function(){t.hidePaymentLoader()}))},renderCheckoutFormPaymentIntent:(x=S(regeneratorRuntime.mark((function t(){var e,i,n,r,a,o,s,c,l=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.mag.eCommerceManager.getCustomer()){t.next=4;break}return this.$paymentFailed.text("Customer not found"),t.abrupt("return");case 4:return t.next=6,this.getInvoiceForCustomer(e.id);case 6:if(i=t.sent){t.next=10;break}return this.$paymentFailed.text("Invoice not found"),t.abrupt("return");case 10:if(n=this.mag.eCommerceManager.getCartData(),this.showPaymentLoader(),"draft"!==i.status){t.next=27;break}return t.next=15,this.mag.eCommerceManager.finalizeInvoice(this.mag.num_id,i.id);case 15:return r=t.sent,this.mag.eCommerceManager.setInvoice(r),t.next=19,this.mag.eCommerceManager.getPaymentIntent(this.mag.num_id,r.payment_intent);case 19:if((a=t.sent).receipt_email){t.next=23;break}return t.next=23,this.mag.eCommerceManager.updatePaymentIntent(this.mag.num_id,a.id,{receipt_email:n.shippingForm.email.value});case 23:this.clientSecret=a.client_secret,this.hidePaymentLoader(),t.next=36;break;case 27:if("open"!==i.status){t.next=36;break}return t.next=30,this.mag.eCommerceManager.getPaymentIntent(this.mag.num_id,i.payment_intent);case 30:if((o=t.sent).receipt_email){t.next=34;break}return t.next=34,this.mag.eCommerceManager.updatePaymentIntent(this.mag.num_id,o.id,{receipt_email:n.shippingForm.email.value});case 34:this.clientSecret=o.client_secret,this.hidePaymentLoader();case 36:s=this.mag.eCommerceManager.getStripeConnectedUserId(),this.stripe||(this.stripe=Stripe(F,{stripeAccount:s})),c=this.stripe.elements(),this.cardNumber||(this.cardNumber=c.create("cardNumber",{style:this.cardStyle,placeholder:"Card number"}),this.cardNumber.mount("#card-number-element"),this.cardNumber.addEventListener("change",(function(t){var e=l.$paymentTab.find(".card-number-error");t.error?e.removeClass("hidden"):e.addClass("hidden")})),this.cardNumber.addEventListener("ready",(function(t){l.renderCartHolderInput()}))),this.cardExpiry||(this.cardExpiry=c.create("cardExpiry",{style:this.cardStyle,placeholder:"M/Y"}),this.cardExpiry.mount("#card-expiry-element"),this.cardExpiry.addEventListener("change",(function(t){var e=l.$paymentTab.find(".card-expiry-error");t.error?e.removeClass("hidden"):e.addClass("hidden")}))),this.cardCvc||(this.cardCvc=c.create("cardCvc",{style:this.cardStyle,placeholder:"Security code"}),this.cardCvc.mount("#card-cvc-element"),this.cardCvc.addEventListener("change",(function(t){var e=l.$paymentTab.find(".card-cvc-error");t.error?e.removeClass("hidden"):e.addClass("hidden")}))),this.form||(this.form=document.getElementById("payment-form"),this.form.addEventListener("submit",this.onPaymentFormSubmit.bind(this)));case 43:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)}),renderCheckoutForm:function(){var t=this,e=this.mag.eCommerceManager.getStripeConnectedUserId();this.stripe||(this.stripe=Stripe(F,{stripeAccount:e}));var i=this.stripe.elements();this.cardNumber||(this.cardNumber=i.create("cardNumber",{style:this.cardStyle,placeholder:"Card number"}),this.cardNumber.mount("#card-number-element"),this.cardNumber.addEventListener("change",(function(e){var i=t.$paymentTab.find(".card-number-error");e.error?i.removeClass("hidden"):i.addClass("hidden")})),this.cardNumber.addEventListener("ready",(function(e){t.renderCartHolderInput()}))),this.cardExpiry||(this.cardExpiry=i.create("cardExpiry",{style:this.cardStyle,placeholder:"M/Y"}),this.cardExpiry.mount("#card-expiry-element"),this.cardExpiry.addEventListener("change",(function(e){var i=t.$paymentTab.find(".card-expiry-error");e.error?i.removeClass("hidden"):i.addClass("hidden")}))),this.cardCvc||(this.cardCvc=i.create("cardCvc",{style:this.cardStyle,placeholder:"Security code"}),this.cardCvc.mount("#card-cvc-element"),this.cardCvc.addEventListener("change",(function(e){var i=t.$paymentTab.find(".card-cvc-error");e.error?i.removeClass("hidden"):i.addClass("hidden")}))),this.form||(this.form=document.getElementById("payment-form"),this.form.addEventListener("submit",this.onPaymentFormSubmit.bind(this)))},renderCartHolderInput:function(){this.cardHolderName||(this.cardHolderName=this.$paymentTab.find(".card-name-input"),this.cardHolderName.removeClass("hidden"),this.cardHolderName.on("input",this.onCardHolderNameChange))},onCardHolderNameChange:function(t){this.cardHolderNameValue=t.target.value,this.cardHolderNameValue?this.$paymentTab.find(".card-name-error").hasClass("hidden")||this.$paymentTab.find(".card-name-error").addClass("hidden"):this.$paymentTab.find(".card-name-error").hasClass("hidden")&&this.$paymentTab.find(".card-name-error").removeClass("hidden")},onPaymentFormSubmit:function(t){t.preventDefault(),this.cardHolderNameValue?(this.$paymentTab.find(".card-name-error").addClass("hidden"),this.haveSkus?this.onSkuPaymentFormSubmit():this.havePrices&&this.onPricesPaymentFormSubmit()):this.$paymentTab.find(".card-name-error").removeClass("hidden")},onSkuPaymentFormSubmit:function(){var t=this;this.stripe.createToken(this.cardNumber,{name:this.cardHolderNameValue}).then((function(e){e.error||t.stripeTokenHandler(e.token)}))},onPricesPaymentFormSubmit:function(){var t=this;this.clientSecret?(this.hideErrorPaymentMessage(),this.showPaymentLoader(),this.stripe.confirmCardPayment(this.clientSecret,{payment_method:{card:this.cardNumber,billing_details:{name:this.cardHolderNameValue}}}).then((function(e){e.error?(t.hidePaymentLoader(),t.showErrorPaymentMessage("Payment Failed on confirmCardPayment"),t.checkoutCompete=!0):(t.hidePaymentLoader(),"succeeded"===e.paymentIntent.status&&(t.showSuccessPaymentMessage(),RM.analytics&&RM.analytics.sendEvent("Checkout success")),t.checkoutCompete=!0)}))):this.showErrorPaymentMessage("Not client secret")},stripeTokenHandler:function(t,e){var i=this.mag.eCommerceManager.getOrder();if(i){var n=i.email;n?(this.hideErrorPaymentMessage(),this.showPaymentLoader(),r.a.ajax({type:"POST",url:"/api/projects/"+this.mag.num_id+"/ecommerce/stripe/orders/"+i.id+"/pay/",data:JSON.stringify({stripe_token:t.id,email:n}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){this.hidePaymentLoader(),t&&t.data&&("paid"===t.data.status&&(RM.analytics&&RM.analytics.sendEvent("Checkout success"),this.showSuccessPaymentMessage(),"function"==typeof e&&e({status:"success"})),this.checkoutCompete=!0)}.bind(this),error:function(){this.hidePaymentLoader(),this.showErrorPaymentMessage("Payment Failed"),"function"==typeof e&&e({status:"fail"}),this.checkoutCompete=!0}.bind(this)})):this.showErrorPaymentMessage("Email is required")}else this.showErrorPaymentMessage("Order not found")},showPaymentLoader:function(){this.paymentLoading||(this.paymentLoading=!0,this.$paymentTab.find(".preloader").addClass("show"),this.$paymentTab.find(".cart-payment-btn").css("display","none"),this.$paymentTab.find(".cart-cancel-btn").css("display","none"))},hidePaymentLoader:function(){this.paymentLoading&&(this.paymentLoading=!1,this.$paymentTab.find(".preloader").removeClass("show"),this.$paymentTab.find(".cart-payment-btn").css("display","block"),this.$paymentTab.find(".cart-cancel-btn").css("display","block"))},showErrorPaymentMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$paymentFailed.find(".error-message").text(t),this.$paymentFailed.addClass("show")},hideErrorPaymentMessage:function(){this.$paymentFailed.find(".error-message").empty(),this.$paymentFailed.removeClass("show")},showSuccessPaymentMessage:function(){this.$paymentTab.find(".sidebar-header").css("display","none"),this.$paymentTab.find(".sidebar-body").css("display","none"),this.$paymentSuccess.addClass("show")},hideSuccessPaymentMessage:function(){this.$paymentTab.find(".sidebar-header").css("display","block"),this.$paymentTab.find(".sidebar-body").css("display","block"),this.$paymentSuccess.removeClass("show")},toogleSettings:function(){this.isHiddenSettings=!this.isHiddenSettings,this.settingsPanel&&(this.settingsPanel.isHidden=this.isHiddenSettings)},getSettingsData:function(){var t={};if(this.cartWidgetData){var e=n.a.clone(this.cartWidgetData);t={"bar-color":e["bar-color"],"bar-color-opacity":e["bar-color-opacity"],"bar-background-color":e["bar-background-color"],"bar-background-color-opacity":e["bar-background-color-opacity"],"bar-shadow":e["bar-shadow"],"bar-font-family":e["bar-font-family"],"bar-font-style":e["bar-font-style"],"bar-font-weight":e["bar-font-weight"],"bar-letter-spacing":e["bar-letter-spacing"]}}return{isHidden:this.isHiddenSettings,model:t,onOverlayClick:this.onSettingsOverlayClick.bind(this)}},setupSettingsPanel:function(){},onSettingsOverlayClick:function(){this.toogleSettings()},onModelChange:function(t){this.saveModelChanges_debounced(t)},saveModelChanges:function(t){var e=this;this.updateCartWidgetData(t),this.generateSidebarCSS(this.cartWidgetData),this.cartWidgetModel&&this.cartWidgetModel.save(t,{toHistory:!1,skipHistory:!0,patch:!0}).then((function(){e.renderSidebarTexts()}))},updateCartWidgetData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cartWidgetData=k(k({},this.cartWidgetData),t)},checkShippableInCart:function(){var t=this.mag.eCommerceManager.getCartData();for(var e in t.skus)if(t.skus[e].productObject.shippable)return!0;return!1},destroy:function(){var t=this;if(this.rendered)return this.checkoutCompete&&(this.mag.eCommerceManager.clearCart(),this.goToInitialTab(),this.hideSuccessPaymentMessage(),this.$paymentFailed.empty()),this.mag.eCommerceManager.events.off("ecommerce:cartsidebar:visibility:changed"),this.mag.eCommerceManager.events.off("ecommerce:cartdata:changed"),this.form&&this.form.removeEventListener("submit",this.onPaymentFormSubmit),this.cardHolderName&&this.cardHolderName.off("input",this.onCardHolderNameChange),this.$tabs.find("[data-tab^='tab-']").each((function(t,e){Object(r.a)(e).off("click")})),this.$items.find(".cart-item-remove-btn").each((function(t,e){Object(r.a)(e).off("click")})),this.$tabs.find(".order-details-form .form-input").each((function(e,i){Object(r.a)(i).off("input",t.onShippingFormChange)})),this.unbindDomEvents(),this.settingsPanel&&(this.settingsPanel.$off("change",this.onModelChange),this.settingsPanel.$destroy()),this.$settingButton&&this.$settingButton.off("click",this.toogleSettings),this.environment===f.c.environment.preview&&this.unbindTextInputsEvents(),this.remove()},cartItemBlockHover:function(t){var e=Object(r.a)(t.currentTarget);e&&e.length&&(e.addClass("hover").siblings().removeClass("hover"),this.hoveredItem=e.data("price-id")||e.data("sku-id"))},cartItemBlockLeave:function(t){var e=Object(r.a)(t.currentTarget);e&&e.length&&(e.removeClass("hover"),(e.data("price-id")||e.data("sku-id"))===this.hoveredItem&&(this.hoveredItem=null))}});e.a=B},FJrq:function(t,e,i){"use strict";i.r(e);var n=i("O5Jf"),r=i("SF2O");e.default=function(t,e,i){switch(t.version){case 3:return new n.default(t,e,i);default:return new r.default(t,e,i)}}},"G3+Z":function(t,e,i){"use strict";var n=["DOMMouseScroll","mousewheel"];e.a=function(t,e,i,r){t||(t=document),e||(e=window),"boolean"!=typeof i&&(i=!0);var a,o,s,c=function(t){!function(t,e,i,n){i&&(t.preventDefault?t.preventDefault():event.returnValue=!1);var r=t.detail||-t.wheelDelta/40;r*=19,"number"!=typeof n||isNaN(n)||(r*=n),e.scrollBy?e.scrollBy(0,r):e.scrollTop+=r}(t=t||window.event,e,i,r)};return(a=t.addEventListener)?(a.call(t,n[0],c,!1),a.call(t,n[1],c,!1)):(a=t.attachEvent)&&a.call(t,"on"+n[1],c),(o=t.removeEventListener)?s=function(){o.call(t,n[0],c,!1),o.call(t,n[1],c,!1)}:(o=t.detachEvent)&&(s=function(){o.call(t,"on"+n[1],c)}),{restore:s}}},HjzJ:function(t,e,i){"use strict";i.d(e,"h",(function(){return f})),i.d(e,"i",(function(){return g})),i.d(e,"a",(function(){return p})),i.d(e,"g",(function(){return m})),i.d(e,"f",(function(){return v})),i.d(e,"c",(function(){return b})),i.d(e,"b",(function(){return y})),i.d(e,"e",(function(){return w})),i.d(e,"d",(function(){return S})),i.d(e,"j",(function(){return k}));var n,r=i("q1tI"),a=i.n(r),o=i("sn3M"),s=i("fueH");function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function l(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var p,f="listStyle",g="ordered-key";!function(t){t.Unordered="unordered-list-item",t.Ordered="ordered-list-item"}(p||(p={}));var m=(h(n={},p.Unordered,{element:"li"}),h(n,p.Ordered,{element:"li"}),n),v=d(d({},Object(o.a)({className:p.Unordered,label:"Unordered list",styles:'\n      padding: 0;\n      margin: 0;\n      list-style-type: none;\n\n      div[data-offset-key]:before, & > li:before {\n        content: "• ";\n      }\n    '})),Object(o.a)({className:p.Ordered,label:"Ordered list",styles:"\n      padding: 0;\n      margin: 0;\n      list-style-type: none;\n\n      div[data-offset-key]:before, & > li:before {\n        counter-increment: ".concat(g,";\n        content: counter(").concat(g,')".";\n      }\n    ')})),b=function(t){var e=t.children,i=t.type,n=l(t,["children","type"]);return i===p.Ordered?a.a.createElement("ol",c({style:{counterReset:g}},n),e):a.a.createElement("ul",n,e)},y=function(t){var e=t.children,i=l(t,["children"]);return(a.a.createElement(b,i,a.a.createElement("li",null,e)))},w=function(t){return t===p.Ordered||t===p.Unordered},S=function(t){var e=t.editorState,i=t.block,n=s.a.getBlockData({editorState:e,block:i,key:f});return"string"==typeof n?n:""},O=function(t){var e=t.block,i=t.editorState,n=t.styleName;return s.a.setBlockData({editorState:i,block:e,key:f,value:n})},k=function(t){var e=t.style,i=t.currentStyle,n=t.editorState;return s.a.getSelectedBlocks(n).reduce((function(t,n){var r=t,a=r.getCurrentContent().getBlockForKey(n);return null===e?r=O({editorState:r,block:a,styleName:void 0}):e.name!==i&&(r=O({editorState:r,block:a,styleName:e.name})),r}),n)}},HwMs:function(t,e,i){"use strict";var n=i("q1z7"),r=i.n(n),a=i("rFsW"),o=i("OTSC"),s=i("roQd"),c=i("pFlR"),l=i("m41J"),u=i("QNiq");function d(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){f(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function g(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function v(t){var e;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}var b=r.a.View.extend({initialize:function(t){a.a.bindAll(this),a.a.extend(this,t);var e={};a.a.each(this.widgets,a.a.bind((function(t){if(t.hasAnimation()){var i=t.fixed_position||t.is_full_width||t.is_full_height||t.sticked?o.default.generateUUID():s.a.getUuidHash(t.getAnimations())||o.default.generateUUID();e[i]=e[i]||[],e[i].push(t)}}),this)),this.animations=[];var i=!u.a.isDesktop||!Modernizr.safari;a.a.each(e,function(t){this.addAnimation(t,{allowAccelerate:i})}.bind(this)),this.start.__debounced=a.a.debounce(this.start,300)},addAnimation:function(t,e){var i=this;e=e||{},t=a.a.isArray(t)?t:[t];var n=["nonMove","moveOnly"].concat(g(s.a.EVENT_TYPES)).reverse();g(t[0].getAnimations()).map((function(t){return s.a.isMoveOnly(t)?p(p({},t),{},{effects:"moveOnly"}):s.a.isNonMove(t)?p(p({},t),{},{effects:"nonMove"}):t})).sort((function(t,e){return n.indexOf(t.effects||t.type)-n.indexOf(e.effects||e.type)})).filter((function(t){return!s.a.isEmpty(t)})).map((function(n){var r=n.type;if(u.a.isDesktop||"hover"!==r||t[0].getAnimationTriggers(n.UUID).length){var a=t[0].animationObjects,o=Boolean(a&&a.length),s=new y[r]({page:i.page,widgets:t,rawAnimation:n,$container:o?a[a.length-1].$el:void 0,allowAccelerate:e.allowAccelerate,isNested:o,topmostAnimation:o?a[0]:void 0});i.animations.push(s)}}))},removeAnimation:function(t){this.animations=a.a.without(this.animations,t),t&&t.destroy()},start:function(){a.a.each(this.animations,(function(t){t.start()}))},stop:function(){a.a.each(this.animations,(function(t){t.stop()}))},resetStarted:function(){a.a.each(this.animations,(function(t){t.started=!1}))},onScroll:function(t){t=t||{},(this.page.mag.currentPage===this.page||t.forceApply)&&a.a.each(this.animations,(function(e){e.onScroll&&e.onScroll(t)}))},onResize:function(t){a.a.each(this.animations,(function(e){e.onResize(t)}))},updateTimelines:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a.a.each(this.animations,(function(e){t.includes(e.animation.UUID)||e.createAnimationTimeline()}))},hasScaleUp:function(){return Boolean(a.a.find(this.animations,(function(t){return s.a.isScaleUp(t.animation)})))},destroy:function(){a.a.each(this.animations,(function(t){t.destroy()})),delete this.animations}}),y={},w=r.a.View.extend({visibleHeightPortion:.2,className:"animation-container",scrolledToView:!1,useOnscrollBoundsFallback:!window.IntersectionObserver,initialize:function(t){a.a.bindAll(this),a.a.extend(this,t),a.a.each(this.widgets,a.a.bind((function(t){t.animationObj=this,t.animationObjects=[].concat(g(t.animationObjects||[]),[this])}),this)),this.isFixed=this.widgets[0].fixed_position,this.isFullwidth=this.widgets[0].is_full_width,this.isFullheight=this.widgets[0].is_full_height,this.isSticked=this.widgets[0].sticked,this.isAbove=this.widgets[0].is_above,this.playOnce=!this.page.mag.isPreview&&this.playOnce,this.$container=this.$container||(this.isFixed||this.isAbove?this.widgets[0].$fixedContainer:this.page.$content),this.$el.appendTo(this.$wrapper?this.$wrapper:this.$container),this.createAnimationTimeline(t),this.onResize({updateAll:!0})},createAnimationTimeline:function(t){t=t||{},this.timeline&&this.timeline.destroy(),this.animation=s.a.getNormalizedAnimation(this.rawAnimation,this.isFixed,this.isFullwidth,this.isFullheight,this.page.scale,this.page.pageViewport,this.page.mag.getViewportWidth(this.page.pageViewport),this.page.mag.viewOpts),this.timeline=s.a.createAnimationTimeline({el:this.$el,steps:this.animation.steps,type:this.animation.type,force3d:!1,animationTrigger:this.animation.trigger,selfTriggered:Boolean(a.a.intersection(s.a.normalizeAnimationTriggers(this.animation.trigger),this.widgets.map((function(t){return t._id}))).length),screenshotMode:!!RM.screenshot})},start:function(){this.timeline&&this.paused&&(this.paused=!1,this.timeline.resume())},stop:function(){this.timeline&&this.timeline.active&&(this.isAbove||(this.paused=!0,this.timeline.pause()))},getAnimationContainer:function(){return this.$el},modifyWidgetPosition:function(t){return this.isFixed?(t.dimensions.left="50%",t.dimensions.top="50%",t.dimensions.right="",t.dimensions.bottom="",t.dimensions["margin-left"]=-t.dimensions.width/2,t.dimensions["margin-top"]=-t.dimensions.height/2):(t.dimensions.left-=this.bbox_css.left+(this.isNested?this.topmostAnimation.bbox_css.left:0),t.dimensions.top-=this.bbox_css.top+(this.isNested?this.topmostAnimation.bbox_css.top:0)),t},onResize:function(t){if((t=t||{}).updateAll||this.isFixed&&this.prevPageScale!==this.page.scale||this.isFullwidth||this.isFullheight||this.isSticked){var e,i={t:Number.POSITIVE_INFINITY,l:Number.POSITIVE_INFINITY,b:Number.NEGATIVE_INFINITY,r:Number.NEGATIVE_INFINITY,z:0};this.isFixed||this.isFullwidth||this.isFullheight||this.isSticked?this.bbox_css=p(p({},this.widgets[0].calcBoxStyle({calcBBox:!0}).dimensions),this.isNested?{left:0,top:0,"margin-left":0,"margin-top":0}:{}):(a.a.each(this.widgets,(function(t){e=t.calcBoxStyle({calcBBox:!0}).dimensions,i.t=Math.min(i.t,e.top),i.l=Math.min(i.l,e.left),i.b=Math.max(i.b,e.top+e.height),i.r=Math.max(i.r,e.left+e.width),i.z=Math.max(i.z,e["z-index"])}),this),this.bbox_css={left:this.isNested?0:i.l,top:this.isNested?0:i.t,width:i.r-i.l,height:i.b-i.t,"z-index":i.z}),this.$el.css(this.bbox_css)}this.innerContentTop=this.page.contentPosition.top/this.page.scale,this.innerContainerHeight=this.page.mag.getContainerSizeCached().height/this.page.scale,this.prevPageScale=this.page.scale},withTriggerOrElement:function(t){var e,i=this;return(e=regeneratorRuntime.mark((function e(){var n,r,a,o,s,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=!0,a=!1,e.prev=3,s=v(i.animation.trigger.filter((function(t){return t})));case 5:return e.next=7,s.next();case 7:return c=e.sent,r=c.done,e.next=11,c.value;case 11:if(l=e.sent,r){e.next=27;break}return u=l,e.prev=14,e.t0=n,e.next=18,i.page.mag.getWidgetById(u,i.page);case 18:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=24;break;case 22:e.prev=22,e.t2=e.catch(14);case 24:r=!0,e.next=5;break;case 27:e.next=33;break;case 29:e.prev=29,e.t3=e.catch(3),a=!0,o=e.t3;case 33:if(e.prev=33,e.prev=34,r||null==s.return){e.next=38;break}return e.next=38,s.return();case 38:if(e.prev=38,!a){e.next=41;break}throw o;case 41:return e.finish(38);case 42:return e.finish(33);case 43:n.forEach((function(e){e.rendered?t(e.$el):i.listenToOnce(e,"rendered",(function(){return t(e.$el)}))})),n.length||t(i.$el);case 45:case"end":return e.stop()}}),e,null,[[3,29,33,43],[14,22],[34,,38,42]])})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(t){d(a,n,r,o,s,"next",t)}function s(t){d(a,n,r,o,s,"throw",t)}o(void 0)}))})()},getBBScaleFactor:function(){return c.a.isOnForRatio(this.page.pageViewport,this.page.scale,this.page.mag.viewOpts)&&c.a.isCSSZoom()?this.page.scale:1},isInView:function(){var t=l.a.getBoundingBoxOfElements(this.widgets.map((function(t){return t.$el[0]})),this.getBBScaleFactor()),e=this.visibleHeightPortion*t.height;return t.height&&t.bottom>=e&&t.bottom<=window.innerHeight||t.height&&t.top<=window.innerHeight-e&&t.top>0},notifyWhenInOrOutOfView:function(){var t=this;window.requestAnimationFrame((function(){t.isInView()?(t.scrolledToView=!0,t.scrolledOutOfView=!1,t.trigger("scrolledToView")):(t.scrolledToView=!1,t.scrolledOutOfView=!0,t.trigger("scrolledOutOfView"))}))},whenInView:function(){return this.whenInOrOutOfView(!1)},whenOutOfView:function(){return this.whenInOrOutOfView(!0)},whenInOrOutOfView:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=!e;if(this.useOnscrollBoundsFallback)return i&&this.isInView()||e&&!this.isInView()?window.Promise.resolve():new window.Promise((function(i){t.listenToOnce(t,e?"scrolledOutOfView":"scrolledToView",i)}));var n=this.widgets.map((function(t){return t.$el[0]})),r=l.a.getBoundingBoxOfElements(n,this.getBBScaleFactor());return new window.Promise((function(a){var o=new window.IntersectionObserver((function(t){return t.forEach((function(t){(i&&t.isIntersecting||e&&!t.isIntersecting)&&(n.forEach((function(t){return o.unobserve(t)})),a())}))}),i?{rootMargin:"-".concat(r.height*t.visibleHeightPortion,"px 0px")}:void 0);n.forEach((function(t){return o.observe(t)}))}))},destroy:function(){this.stop(),this.timeline&&this.timeline.destroy(),this.remove()}});y.scroll=w.extend({onScroll:function(t){if(t=t||{},this.timeline&&(this.page.mag.currentPage===this.page&&!this.isAbove||t.forceApply)){var e=this.isAbove?t.scroll:Math.max(0,this.page.visibleWidgetsCoords.scrollTop||0);if(this.isFixed)this.timeline.seek(e);else{var i=this.animation.steps[0].start_point||"bottom",n=this.bbox_css.top+(this.isNested?this.topmostAnimation.bbox_css.top:0)+this.innerContentTop,r=n-this.innerContainerHeight,a={top:1,center:.5,bottom:0}[i]*(n-r)+r+this.animation.steps[0].start_offset||0;a<=0?this.timeline.seek(e/this.page.scale):this.timeline.seek(Math.max(0,e-a*this.page.scale)/this.page.scale)}}},onResize:function(){w.prototype.onResize.apply(this,arguments),this.onScroll()}}),y.load=w.extend({initialize:function(){w.prototype.initialize.apply(this,arguments);var t=this.animation.steps;this.startWhenInView=t&&t.length&&t[0].startWhenInView,this.notifyWhenInOrOutOfView.__throttled=a.a.throttle(this.notifyWhenInOrOutOfView,100)},start:function(){w.prototype.start.apply(this,arguments),this.isReady().then(function(){this.timeline.play(),this.started=!0}.bind(this)).catch((function(t){t&&console.log(t&&t.stack)}))},onScroll:function(){this.useOnscrollBoundsFallback&&this.notifyWhenInOrOutOfView.__throttled()},isReady:function(){var t,e=this;if(RM.screenshot||this.started||o.default.PageVisibilityManager.isPageHidden())t=window.Promise.reject();else{var i=this.widgets[0],n=[],r=window.Promise.all(this.widgets.map((function(t){return t.loaded?window.Promise.resolve():new window.Promise((function(i){return e.listenToOnce(t,"loaded",i)}))})));if(this.isAbove){var a=this.page.mag.aboveAnimationsReady?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(this.page.mag,"aboveAnimationsReady",t)}.bind(this)),s=i.rendered?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(i,"rendered",t)}.bind(this)),c=i.wasHidden?new window.Promise(function(t){this.listenToOnce(i,"shown",t)}.bind(this)):window.Promise.resolve();n=this.startWhenInView?[s,c,r]:[a,s,c,r]}else{var l=this.page.started?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(this.page,"started",t)}.bind(this)),u=this.page.loadAnimationsReady?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(this.page,"loadAnimationsReady",t)}.bind(this)),d=this.page.isCurrent()?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(this.page,"changedTo",t)}.bind(this)),h=this.startWhenInView?r.then((function(){return e.whenInView()})):window.Promise.resolve();n=this.startWhenInView?[l,d,h]:[u,l]}t=window.Promise.all(n)}return t}}),y.click=w.extend({resetWhenOutOfView:!1,initialize:function(){w.prototype.initialize.apply(this,arguments);var t=function(t){t.on("click",this.onClick),t.css("cursor","pointer")}.bind(this);this.willStopOnEnd=!1,this.lastTimeClick=0,this.withTriggerOrElement(t),this.notifyWhenInOrOutOfView.__throttled=a.a.throttle(this.notifyWhenInOrOutOfView,100)},onClick:function(){var t=this,e=s.a.getPermanentAnimationId(this.widgets[0],this.animation.UUID),i=this.timeline&&!this.timeline.active&&this.timeline.reversed&&s.a.hasPlayed(e);this.timeline&&!i&&(+new Date-this.lastTimeClick<300||(this.lastTimeClick=+new Date,this.timeline.active?(this.willStopOnEnd?this.timeline.off("full-cycle-end",this.onCycleEnd):this.timeline.on("full-cycle-end",this.onCycleEnd),this.willStopOnEnd=!this.willStopOnEnd):(this.willStopOnEnd=!1,this.timeline.reversed?this.timeline.reverse():this.timeline.play(),this.animation.playOnce&&!s.a.hasPlayed(e)&&s.a.persistHasPlayed(e),this.animation.resetWhenOutOfView&&this.whenOutOfView().then((function(){t.timeline.applyStepState("initial"),t.timeline.reversed=!1})),a.a.each(this.widgets,(function(e){"video"===e.type&&e.player&&(t.timeline.reversed?e.player.pause():e.player.play())})))))},onScroll:function(){this.useOnscrollBoundsFallback&&this.notifyWhenInOrOutOfView.__throttled()},onCycleEnd:function(){this.willStopOnEnd=!1,this.timeline.off("full-cycle-end",this.onCycleEnd),this.timeline.loop?this.timeline.isFullLoop?this.timeline.stop():this.timeline.reverse():this.timeline.reversed?this.timeline.reverse():this.timeline.play()},destroy:function(){var t=function(t){t.css("cursor","")};this.withTriggerOrElement(t),w.prototype.destroy.apply(this,arguments)}}),y.hover=w.extend({initialize:function(){if(w.prototype.initialize.apply(this,arguments),u.a.isDesktop){var t=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave)}.bind(this);a.a.each(this.widgets,a.a.bind((function(t){-1!==["text","shape","picture","button"].indexOf(t.type)&&(t.hasHoverAnimation=!0)}),this)),this.withTriggerOrElement(t)}},onMouseEnter:function(){this.timeline&&(this.timeline.active?!this.timeline.loop&&this.timeline.reversed?this.timeline.on("full-cycle-end",this.onCycleEnd):this.timeline.off("full-cycle-end",this.onCycleEnd):!this.timeline.reversed&&this.timeline.play())},onMouseLeave:function(){this.timeline&&(this.timeline.active?!this.timeline.loop&&this.timeline.reversed?this.timeline.off("full-cycle-end",this.onCycleEnd):this.timeline.on("full-cycle-end",this.onCycleEnd):!this.timeline.loop&&this.timeline.reversed&&this.timeline.reverse())},onCycleEnd:function(){this.timeline.off("full-cycle-end",this.onCycleEnd),this.timeline.loop?this.timeline.isFullLoop?this.timeline.stop():this.timeline.reverse():this.timeline.reversed?this.timeline.reverse():this.timeline.play()}}),e.a=b},I0kf:function(t,e,i){"use strict";function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"a",(function(){return o}));var a=window.ServerData.featureFlags?function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},window.ServerData.featureFlags):{},o=function(t){return a[t]||!1}},ICos:function(t,e,i){"use strict";i.d(e,"a",(function(){return c})),i.d(e,"j",(function(){return l})),i.d(e,"f",(function(){return u})),i.d(e,"c",(function(){return d})),i.d(e,"h",(function(){return h})),i.d(e,"e",(function(){return p})),i.d(e,"g",(function(){return f})),i.d(e,"d",(function(){return g})),i.d(e,"b",(function(){return m})),i.d(e,"i",(function(){return v}));var n=i("aSns"),r=i.n(n),a=i("xeF9");function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var c=function(t){var e=Number(t).toString(16);return e.length<2?"0".concat(e):e},l=function(t){var e=c(t.r),i=c(t.g),n=c(t.b),r=c(parseInt((100*t.a).toFixed(0)));return"".concat(e).concat(i).concat(n).concat(r)},u=function(t){var e=t;if(!e)return{r:0,g:0,b:0,a:1};"#"===e[0]&&(e=e.slice(1));var i=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/100;return{r:i,g:n,b:r,a:void 0===a||a>1?1:a<0?0:a}},d=function(t){var e=t.replace("#",""),i=o(r()("#".concat(e)).rgb().array(),3);return{r:i[0],g:i[1],b:i[2]}},h=function(t){var e=c(parseInt((100*t.a).toFixed(0))),i=r()({h:t.h,s:t.s,v:t.v}).hex().replace("#","");return"".concat(i).concat(e)},p=function(t){if("string"!=typeof t)return t;var e=t.replace("#",""),i=parseInt(e.substring(6,8),16)/100,n=e.substring(0,6),a=o(r()("#".concat(n)).hsv().array(),3);return{h:a[0],s:a[1],v:a[2],a:void 0===i||i>1?1:i<0?0:i}},f=function(t){return r()({h:t.h,s:t.s,v:t.v}).hex().replace("#","")},g=function(t){if("string"!=typeof t)return t;var e=t;return"#"===e[0]&&(e=e.slice(1)),e.substring(0,6)},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=t.replace("#",""),n=r()("#".concat(i)).hsv().array(),a=o(n,3),s=a[0],c=a[1],l=a[2];return{h:s,s:c,v:l,a:e}},v=function(t){var e=Object(a.parseCSSColor)(t);if(e){var i=o(e,4);return{r:i[0],g:i[1],b:i[2],a:i[3]||1}}return{r:0,g:0,b:0,a:1}}},IrH7:function(t,e,i){"use strict";i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return u})),i.d(e,"d",(function(){return d})),i.d(e,"e",(function(){return h}));var n=i("sn3M"),r=i("fueH");function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c,l="align";!function(t){t.AlignLeft="align-left",t.AlignCenter="align-center",t.AlignRight="align-right",t.AlignJustify="align-justify"}(c||(c={}));var u=o(o(o(o({},Object(n.a)({className:c.AlignLeft,label:"Left",styles:"\n      text-align: left !important;\n    "})),Object(n.a)({className:c.AlignCenter,label:"Center",styles:"\n      text-align: center !important;\n    "})),Object(n.a)({className:c.AlignRight,label:"Right",styles:"\n      text-align: right !important;\n    "})),Object(n.a)({className:c.AlignJustify,label:"Justify",styles:"\n      text-align: justify !important;\n      white-space: normal; // для сафари\n    "})),d=function(t){var e=t.editorState,i=t.block,n=r.a.getBlockData({editorState:e,block:i,key:"align"});return"string"==typeof n?n:""},h=function(t){var e=t.block,i=t.editorState,n=t.align;return r.a.setBlockData({editorState:i,block:e,key:l,value:n})}},JTli:function(t,e,i){"use strict";var n=i("rFsW"),r=i("xi34"),a=i("3ED2"),o=i.n(a),s=i("ufqH"),c=i("wd/R"),l=i.n(c),u=i("Xjjk"),d=i.n(u),h=i("jfjY"),p=i("YryV"),f=i("OTSC"),g=i("Fi5S"),m=i("f3SV"),v=i("+/Sl"),b=i("Vxjr");function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){S(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var O=Backbone.View.extend({template:p.a["template-viewer-cart-sidebar"],initialize:function(t){return n.a.bindAll(this),this.mag=t,this.environment=this.mag.router.environment,this.rendered=!1,this.havePrices=!1,this.isHiddenSettings=!0,this.hoveredItem=null,this.render(),this},render:function(){if(!RM.screenshot){var t=RM.viewerRouter?RM.viewerRouter.getUserPermissions():RM.constructorRouter.me.get("permissions");if(t&&t.can_use_e_commerce&&!this.mag.eCommerceManager.isConstructor()&&this.mag.eCommerceManager.haveEcommerceCartWidget&&this.mag.eCommerceManager.getConnectedProvider()&&!this.rendered){this.rendered=!0,this.provider=this.mag.eCommerceManager.getConnectedProvider(),document.querySelectorAll("#cart-sidebar").length&&document.querySelectorAll("#cart-sidebar").forEach((function(t){return t.parentNode.removeChild(t)})),this.setElement(this.template({isMobile:Object(h.isMobile)(),isViewer:this.environment===m.c.environment.viewer,imgPublicPath:b.folderImagesPath})),this.$el.appendTo(Object(r.a)("body")),this.$toolbar=Object(r.a)(".toolbar.for-viewer"),this.$tabs=this.$el.find(".cart-sidebar-tabs"),this.$items=this.$el.find(".cart-items-list"),this.$closeButton=this.$el.find(".close-button"),this.$footer=this.$el.find(".sidebar-footer"),this.$calcTextContainer=this.$el.find(".text-size-calc-container"),this.$itemsTab=this.$tabs.find(".tab-items"),this.$checkOutButton=this.$itemsTab.find(".сheck-out-btn"),this.cartWidgetData=this.mag.eCommerceManager.getCartWidgetData(),this.environment===m.c.environment.preview&&(this.cartWidgetData&&this.cartWidgetData._id&&this.setupSettingsPanel(),window.RM.constructorRouter.on("previewClose",this.closeSideBar.bind(this)),this.bindTextInputsEvents());var e=this.$el.find(".svg");o()(e),this.$el.find("[data-alt]:not(.rmalttext)").RMAltText(),this.generateSidebarCSS(this.cartWidgetData);var i=this.mag.eCommerceManager.getEcommerceData();return Object(r.a)('<div class="ec-cart-widget"></div><div><script data-cfasync="false" type="text/javascript" src="https://app.ecwid.com/script.js?'.concat(i.ecwid.serviceData.storeId,"&data_platform=code&data_date=").concat(l()(this.mag.published?this.mag.published:this.mag.creation_date).format("YYYY-MM-DD"),'" charset="utf-8"><\/script></div>')).appendTo(this.$el),this.renderSidebarTexts(),this.renderCartItems(),this.bindDomEvents(),g.a.on("ecommerce:cartsidebar:visibility:changed",this.toggleSidebar),this.mag.eCommerceManager.events.on("ecommerce:cartdata:changed",this.renderCartItems),this}}},bindDomEvents:function(){this.$closeButton.on("click",this.closeSideBar.bind(this)),this.$checkOutButton.on("click",this.goToCheckout.bind(this)),Object(r.a)(document).on("mouseover",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockHover),Object(r.a)(document).on("mouseleave",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockLeave),this.bindStaticTextFieldsHovers()},unbindDomEvents:function(){this.$closeButton.off("click",this.closeSideBar),this.$checkOutButton.off("click",this.goToCheckout.bind(this)),Object(r.a)(document).off("mouseover",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockHover),Object(r.a)(document).off("mouseleave",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockLeave)},bindStaticTextFieldsHovers:function(){this.environment===m.c.environment.preview&&(this.$itemsTab.find(".cart-title-input, .empty-cart-title-input").on("mouseover",(function(t){Object(r.a)(t.target).addClass("active")})),this.$itemsTab.find(".cart-title-input, .empty-cart-title-input").on("mouseleave",(function(t){Object(r.a)(t.target).is(":focus")||Object(r.a)(t.target).removeClass("active")})),this.$itemsTab.find(".сheck-out-btn").on("mouseover",(function(t){Object(r.a)(t.target).find(".cart-checkout-input").addClass("active")})),this.$itemsTab.find(".сheck-out-btn").on("mouseleave",(function(t){var e=Object(r.a)(t.target).find(".cart-checkout-input");e.is(":focus")||e.removeClass("active")})))},hideSidebar:function(){this.$el.removeClass("show"),Object(r.a)("body").removeClass("cart-sidebar-shown"),Object(r.a)("html").removeClass("cart-disable-scroll"),!this.isHiddenSettings&&this.settingsPanel&&(this.isHiddenSettings=!0,this.settingsPanel.isHidden=this.isHiddenSettings)},toggleSidebar:function(t){t?this.hideSidebar():(this.$el.addClass("show"),Object(r.a)("body").addClass("cart-sidebar-shown"),Object(r.a)("html").addClass("cart-disable-scroll"))},closeSideBar:function(){this.mag.eCommerceManager.isCartSidebarHidden||this.mag.eCommerceManager.changeCartSidebarVisibility()},generateSidebarCSS:function(t){this.stylesElementId="cart_sidebar_styles_".concat(t._id);var e=f.default.getRGBA(t["bar-color"],t["bar-color-opacity"]/100),i=f.default.getRGBA(t["bar-background-color"],t["bar-background-color-opacity"]/100),n=f.default.getRGBA(t["bar-color"],.45*t["bar-color-opacity"]/100),a=this.getAdditionalColor(i),o="    .cart-sidebar {\n\n      color: ".concat(e,";\n      background-color: ").concat(i,";\n      box-shadow: ").concat(t["bar-shadow"]?"0 0 4px rgba(124, 124, 125, 0.5)":"none",";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar textarea {\n\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar input {\n\n      color: ").concat(e,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar input::placeholder {\n\n      color: ").concat(n,";\n    }\n\n    .cart-sidebar .cart-title-input.active {\n\n      border-color: ").concat(Object(s.transparentize)(.8,e),";\n    }\n\n    .cart-sidebar .empty-cart-title-input.active {\n\n      border-color: ").concat(Object(s.transparentize)(.8,e),";\n    }\n\n    .cart-sidebar .cart-price-input.active, .cart-sidebar .cart-quantity-input.active {\n\n      border-color: ").concat(Object(s.transparentize)(.2,n),";\n    }\n\n    .cart-sidebar .cart-checkout-input.active {\n\n      border-color: ").concat(Object(s.transparentize)(.8,e),";\n    }\n\n    .cart-sidebar .cart-price-input {\n\n      color: ").concat(n,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar .cart-quantity-input {\n\n      color: ").concat(n,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar button {\n\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar select {\n\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    .cart-sidebar .sidebar-btn {\n\n      color: ").concat(e,";\n      border-color: ").concat(n,";\n    }\n\n    .cart-sidebar .preloader svg path {\n\n      stroke: ").concat(e,";\n    }\n\n    .cart-sidebar .sidebar-btn path {\n\n      fill: ").concat(e,";\n    }\n\n    .cart-sidebar .expand-arrow svg path {\n\n      fill: ").concat(e,";\n    }\n\n    .cart-sidebar .cart-cancel-btn {\n\n      color: ").concat(e,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block.hover {\n\n      background-color: ").concat(a,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-attributes {\n\n      color: ").concat(n,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-price {\n\n      color: ").concat(n,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-items-quantity {\n\n      color: ").concat(n,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-remove-btn-icon path {\n\n      fill: ").concat(e,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-decrease-btn-icon rect {\n\n      fill: ").concat(e,";\n    }\n\n    .cart-sidebar .sidebar-body .cart-item-block .cart-item-increase-btn-icon path {\n\n      fill: ").concat(e,";\n    }\n\n    .cart-sidebar .sidebar-settings-container .settings-button path {\n\n      stroke: ").concat(e,";\n    }\n\n    .cart-sidebar .sidebar-settings-container .settings-button:hover path {\n\n      stroke: ").concat(n,";\n    }\n\n    .cart-sidebar.cart-is-mobile .sidebar-body .cart-item-block {\n\n      background-color: ").concat(a,";\n    }");Object(r.a)("#".concat(this.stylesElementId)).remove();var c=document.createElement("style");c.type="text/css",c.id=this.stylesElementId,c.className="cart-sidebar-styles",c.appendChild(document.createTextNode(o)),document.querySelector("head").appendChild(c)},getAdditionalColor:function(t){return Object(s.getLuminance)(t)<.05&&Object(s.getContrast)("#fff",t)-Object(s.getContrast)("#000",t)>=8?Object(s.lighten)(.1,t):Object(s.darken)(.1,t)},renderCartItems:function(){var t=this.mag.eCommerceManager.getCartData();if(t){var e=Object.keys(t.prices);this.$items.empty(),this.havePrices=Boolean(e.length),this.havePrices?(this.$itemsTab.find(".сheck-out-btn").css("display","block"),this.$itemsTab.find(".empty-cart").css("display","none")):(this.$itemsTab.find(".сheck-out-btn").css("display","none"),this.$itemsTab.find(".empty-cart").css("display","flex")),this.renderPricesCartItems(e);var i=this.$items.find(".svg");o()(i),this.renderSidebarTexts(),this.unbindTextInputsEvents(!0),this.bindTextInputsEvents(!0)}},renderPricesCartItems:function(t){var e=this,i=this.mag.eCommerceManager.getCartData();t.forEach((function(t){var n=i.prices[t];n.active&&e.renderCartItem(n)}))},renderCartItem:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"price",a=this.mag.eCommerceManager.getCartItenKey(t),o=this.hoveredItem===a,s=Object(r.a)("<div/>",{class:"cart-item-block".concat(o?" hover":"")});s.data("".concat(n,"-id"),a);var c=(null===(e=t.selectedCombination)||void 0===e?void 0:e.thumbnailUrl)||t.image||t.images&&t.images.length;if(c){var l=this.getProductImage(t);i=Object(r.a)("<div/>",{class:"cart-item-image",css:{"background-position":"center center","background-size":"cover","background-repeat":"no-repeat","background-image":"url(".concat(l,")")}}),s.append(i)}var u=Object(r.a)("<div/>",{class:i?"cart-item-title":"cart-item-title without-image"}).text(t.nameTranslated&&t.nameTranslated[this.mag.eCommerceManager.userLocale]?t.nameTranslated[this.mag.eCommerceManager.userLocale]:t.name),d=t.cart_count,h=this.getOneItemPrice(t),p=Object(v.a)(h,t.currency),f=Object(v.a)((h*d).toFixed(2),t.currency),g=Object(r.a)("<div/>",{class:"cart-item-price"}),m=Object(r.a)("<input/>",{type:"text",class:"cart-text-input cart-price-input",name:"price",placeholder:"Price",maxlength:"32",translate:"no",autocomplete:"no",autocorrect:"no",spellcheck:"false"});m.get(0).dataset.dynamicWidth=!0;var y=Object(r.a)("<span/>").html(d>1?": ".concat(p," × ").concat(d," = ").concat(f):": ".concat(p));g.append(m).append(y);var w=this.getTranslatedOptions(t),S=Object(r.a)("<div/>",{class:"cart-items-quantity"}),O=Object(r.a)("<input/>",{type:"text",class:"cart-text-input cart-quantity-input",name:"quantity",placeholder:"Quantity",maxlength:"32",translate:"no",autocomplete:"no",autocorrect:"no",spellcheck:"false"});O.get(0).dataset.dynamicWidth=!0;var k=Object(r.a)("<span/>").html(": ".concat(d));S.append(O).append(k);var P=Object(r.a)("<div/>",{class:"cart-item-remove-btn",title:"remove"}).attr("data-".concat(n,"-id"),a),x=Object(r.a)("<img/>",{class:"svg cart-item-remove-btn-icon",src:Object(b.findImagePath)("./viewer/cart-sidebar/cart-item-delete.svg")});P.append(x),P.on("click",this.onRemoveItem);var C=Object(r.a)("<div/>",{class:"cart-item-edit-group"}),j=Object(r.a)("<div/>",{class:"cart-item-increase-btn"}).attr("data-".concat(n,"-id"),a),_=Object(r.a)("<img/>",{class:"svg cart-item-increase-btn-icon",src:Object(b.findImagePath)("./viewer/cart-sidebar/cart-item-increase.svg")});if(j.append(_),C.append(j),this.mag.eCommerceManager.isOutOfStock(t)||(j.addClass("active"),j.on("click",this.onIncreaseItem)),d>1){var T=Object(r.a)("<div/>",{class:"cart-item-decrease-btn decrease-btn-".concat(a)}).attr("data-".concat(n,"-id"),a),I=Object(r.a)("<img/>",{class:"svg cart-item-decrease-btn-icon",src:Object(b.findImagePath)("./viewer/cart-sidebar/cart-item-decrease.svg")});T.append(I),C.append(T),T.on("click",this.onDecreaseItem)}else{var M=this.$items.find("decrease-btn-".concat(a));M.off("click",this.onDecreaseItem),M.remove()}s.append(u).append(w).append(g).append(S).append(P).append(C),this.$items.append(s)},getProductImage:function(t){var e;return(null===(e=t.selectedCombination)||void 0===e?void 0:e.thumbnailUrl)?t.selectedCombination.thumbnailUrl:t.image?t.image:t.images?t.images[0]:""},getTranslatedOptions:function(t){var e=this;if(t.selectedOptions){var i=Object(r.a)("<div/>",{class:"cart-item-attributes"});return Object.keys(t.selectedOptions).forEach((function(n){var a=f.default.capitalize(n),o=t.selectedOptions[n],s=e.mag.eCommerceManager.userLocale,c=t.options.find((function(t){return t.name===n}));if((null==c?void 0:c.nameTranslated)&&(null==c?void 0:c.nameTranslated[s])&&(a=f.default.capitalize(c.nameTranslated[s])),null==c?void 0:c.choices){var l=c.choices.find((function(e){return e.text===t.selectedOptions[n]}));(null==l?void 0:l.textTranslated)&&(null==l?void 0:l.textTranslated[s])&&(o=l.textTranslated[s])}var u=Object(r.a)("<div/>",{class:"cart-item-attribute"}).html("".concat(a,": ").concat(o));i.append(u)})),i}},getOneItemPrice:function(t){var e,i=t.price;return(null===(e=t.selectedCombination)||void 0===e?void 0:e.price)&&(i=t.selectedCombination.price),t.selectedOptions&&Object.keys(t.selectedOptions).forEach((function(e){var n=t.options.find((function(t){return t.name===e})),r=n?n.choices.find((function(i){return i.text===t.selectedOptions[e]})):null;r&&r.priceModifier&&("ABSOLUTE"===r.priceModifierType?i+=r.priceModifier:"PERCENT"===r.priceModifierType&&(i+=t.price*(r.priceModifier/100).toFixed(2)))})),i},onRemoveItem:function(t){t.currentTarget.dataset.priceId&&this.mag.eCommerceManager.removeFromCart(t.currentTarget.dataset.priceId)},onIncreaseItem:function(t){t.currentTarget.dataset.priceId&&this.mag.eCommerceManager.increaseCartItem(t.currentTarget.dataset.priceId)},onDecreaseItem:function(t){t.currentTarget.dataset.priceId&&this.mag.eCommerceManager.decreaseCartItem(t.currentTarget.dataset.priceId)},goToCheckout:function(t){var e=this;if(!t.isDefaultPrevented()){var i=this.mag.eCommerceManager.getCartData(),n=window.Ecwid;if(n){n.init();var a=Object.keys(i.prices),o=[];n.Cart.clear(),a.forEach((function(t){var s={id:Number(i.prices[t].id),quantity:i.prices[t].cart_count,callback:function(i,s,c){var l;i&&(l=t,o.push(l)),a.length===o.length&&(n.OnOrderPlaced.add((function(){e.mag.eCommerceManager.clearCart(),e.mag.eCommerceManager.getProducts(e.mag.eCommerceManager.connectedProvider)})),n.Cart.gotoCheckout(),e.closeSideBar(),e.mag.eCommerceManager.getProducts(e.mag.eCommerceManager.connectedProvider).then((function(){e.mag.eCommerceManager.updateCartProductItems()})),Object(r.a)("html, body").css({overflow:"auto"}),Object(r.a)(".ecwid-popup-closeButton, .ecwid-overlay").on("mousedown",(function(){Object(r.a)("html, body").css("overflow","")})),Object(r.a)(".ecwid-popup").on("mousedown",(function(t){t.currentTarget===t.target&&Object(r.a)("html, body").css("overflow","")})),n.OnOrderPlaced.add((function(t){setTimeout((function(){Object(r.a)(".ec-confirmation__continue > .form-control--done > button").on("mousedown",(function(){Object(r.a)("html, body").css("overflow","")}))}),300)})))}};i.prices[t].selectedOptions?s.options=w({},i.prices[t].selectedOptions):i.prices[t].options.length&&i.prices[t].options.forEach((function(t){t.required&&(s.options||(s.options={}),s.options[t.name]=t.choices[t.defaultChoice])})),n.Cart.addProduct(s)}))}else alert("No Ecwid")}},getTextFieldModelKey:function(t){return"bar-".concat(t)},getSidebarTextValue:function(t){var e=this.getTextFieldModelKey(t);return this.cartWidgetData&&this.cartWidgetData[e]?d()(this.cartWidgetData[e]):m.c.defaultSidebarTexts[t]?m.c.defaultSidebarTexts[t]:null},calcTextFieldSize:function(t){if(!t)return null;var e=getComputedStyle(t);this.$calcTextContainer.css({"font-family":e.fontFamily,"font-size":e.fontSize,"font-style":e.fontStyle,"font-weight":e.fontWeight,"letter-spacing":e.letterSpacing}),this.$calcTextContainer.text(t.value);var i=this.$calcTextContainer.width();return Math.ceil(i)},renderSidebarTexts:function(){var t=this;this.$itemsTab.find(".cart-text-input").each((function(e,i){var n=i.getAttribute("name"),r=t.getSidebarTextValue(n);if(r&&(i.value=r,i.dataset.dynamicWidth)){var a=t.calcTextFieldSize(i);a&&(i.style.width="".concat(a,"px"))}}))},bindTextInputsEvents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$itemsTab.find(".cart-text-input"+(e?'[data-dynamic-width="true"]':"")).each((function(e,i){Object(r.a)(i).on("click",t.onTextFieldClick),Object(r.a)(i).on("input",t.onTextFieldChange),Object(r.a)(i).on("blur",t.onTextFieldBlur)})),e&&this.environment===m.c.environment.preview&&(this.$itemsTab.find(".cart-item-block").on("mouseover",this.onDynamicMouseOver),this.$itemsTab.find(".cart-item-block").on("mouseleave",this.onDynamicMouseLeave))},unbindTextInputsEvents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$itemsTab.find(".cart-text-input"+(e?'[data-dynamic-width="true"]':"")).each((function(e,i){Object(r.a)(i).off("click",t.onTextFieldClick),Object(r.a)(i).off("input",t.onTextFieldChange),Object(r.a)(i).off("blur",t.onTextFieldBlur)})),e&&this.environment===m.c.environment.preview&&(this.$itemsTab.find(".cart-item-block").off("mouseover",this.onDynamicMouseOver),this.$itemsTab.find(".cart-item-block").off("mouseleave",this.onDynamicMouseLeave))},onDynamicMouseOver:function(t){Object(r.a)(t.target).find(".cart-price-input, .cart-quantity-input").addClass("active")},onDynamicMouseLeave:function(t){Object(r.a)(t.target).find(".cart-price-input, .cart-quantity-input").each((function(){Object(r.a)(this).is(":focus")||Object(r.a)(this).removeClass("active")}))},onTextFieldClick:function(t){t.preventDefault()},onTextFieldChange:function(t){if(t.target.dataset.dynamicWidth){var e=this.calcTextFieldSize(t.target);e&&(t.target.style.width="".concat(e,"px"))}},onTextFieldFocus:function(t){this.environment===m.c.environment.preview&&Object(r.a)(t.target).addClass("active")},onTextFieldBlur:function(t){var e=this;this.environment===m.c.environment.preview&&Object(r.a)(t.target).removeClass("active");var i=t.target.getAttribute("name"),n=this.getSidebarTextValue(i);if(n)if(t.target.value){if(this.cartWidgetModel){var a=S({},this.getTextFieldModelKey(i),t.target.value);this.updateCartWidgetData(a),this.cartWidgetModel.save(a,{toHistory:!1,skipHistory:!0,patch:!0}).then((function(){t.target.dataset.dynamicWidth&&e.renderSidebarTexts()}))}}else t.target.value=n},toogleSettings:function(){this.isHiddenSettings=!this.isHiddenSettings,this.settingsPanel&&(this.settingsPanel.isHidden=this.isHiddenSettings)},getSettingsData:function(){var t={};if(this.cartWidgetData){var e=n.a.clone(this.cartWidgetData);t={"bar-color":e["bar-color"],"bar-color-opacity":e["bar-color-opacity"],"bar-background-color":e["bar-background-color"],"bar-background-color-opacity":e["bar-background-color-opacity"],"bar-shadow":e["bar-shadow"],"bar-font-family":e["bar-font-family"],"bar-font-style":e["bar-font-style"],"bar-font-weight":e["bar-font-weight"],"bar-letter-spacing":e["bar-letter-spacing"]}}return{isHidden:this.isHiddenSettings,model:t,onOverlayClick:this.onSettingsOverlayClick.bind(this)}},setupSettingsPanel:function(){},onSettingsOverlayClick:function(){this.toogleSettings()},onModelChange:function(t){this.saveModelChanges_debounced(t)},saveModelChanges:function(t){var e=this;this.updateCartWidgetData(t),this.generateSidebarCSS(this.cartWidgetData),this.cartWidgetModel&&this.cartWidgetModel.save(t,{toHistory:!1,skipHistory:!0,patch:!0}).then((function(){e.renderSidebarTexts()}))},updateCartWidgetData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cartWidgetData=w(w({},this.cartWidgetData),t)},destroy:function(){if(this.rendered)return this.mag.eCommerceManager.events.off("ecommerce:cartsidebar:visibility:changed"),this.mag.eCommerceManager.events.off("ecommerce:cartdata:changed"),this.$items.find(".cart-item-remove-btn").each((function(t,e){Object(r.a)(e).off("click")})),this.unbindDomEvents(),this.settingsPanel&&(this.settingsPanel.$off("change",this.onModelChange),this.settingsPanel.$destroy()),this.$settingButton&&this.$settingButton.off("click",this.toogleSettings),this.environment===m.c.environment.preview&&this.unbindTextInputsEvents(),Object(r.a)("#".concat(this.stylesElementId)).remove(),this.remove()},cartItemBlockHover:function(t){var e=Object(r.a)(t.currentTarget);e&&e.length&&(e.addClass("hover").siblings().removeClass("hover"),this.hoveredItem=e.data("price-id")||e.data("sku-id"))},cartItemBlockLeave:function(t){var e=Object(r.a)(t.currentTarget);e&&e.length&&(e.removeClass("hover"),(e.data("price-id")||e.data("sku-id"))===this.hoveredItem&&(this.hoveredItem=null))}});e.a=O},JW7n:function(t,e,i){"use strict";var n=i("q1tI"),r=i.n(n),a=i("i8i4"),o=i.n(a),s=i("LDvm"),c=i("w5C2"),l=[{name:"style-h1",label:"H1",tag:"h1",cssProperties:{color:"22222264",fontFamily:"Roboto",fontStyle:"normal",textAlign:"left",fontSize:48,fontWeight:700,letterSpacing:0,lineHeight:60,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},{name:"style-h2",label:"H2",tag:"h2",cssProperties:{color:"22222264",fontFamily:"Georgia",fontStyle:"normal",textAlign:"left",fontSize:24,fontWeight:400,letterSpacing:0,lineHeight:30,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},{name:"style-text",label:"Text",tag:"p",cssProperties:{color:"22222264",fontFamily:"Georgia",fontStyle:"normal",textAlign:"left",fontSize:18,fontWeight:400,letterSpacing:0,lineHeight:23,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},{name:"style-caption",label:"Caption",tag:"p",cssProperties:{color:"22222232",fontFamily:"Georgia",fontStyle:"italic",textAlign:"left",fontSize:14,lineHeight:18,letterSpacing:0,fontWeight:400,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}}],u=[{name:"list-style",label:"List item",cssProperties:{color:"22222264",fontFamily:c.b.fontFamily,fontStyle:c.b.fontStyle,textAlign:"left",fontSize:c.b.fontSize,fontWeight:Number(c.b.fontWeight),letterSpacing:0,lineHeight:c.b.lineHeight,paddingRight:0,paddingLeft:0}}],d=i("Wwwp"),h=i("uU7u"),p=i("vOnD"),f=i("Jzj8"),g=i("L2iM"),m=i("a68n"),v=i("8RDp");function b(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||P(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){S(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function O(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  ","\n  ","\n  ","\n  ","\n"]);return O=function(){return t},t}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||P(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){if(t){if("string"==typeof t)return x(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function C(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function j(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){C(a,n,r,o,s,"next",t)}function s(t){C(a,n,r,o,s,"throw",t)}o(void 0)}))}}i.d(e,"b",(function(){return _})),i.d(e,"a",(function(){return I})),i.d(e,"d",(function(){return M})),i.d(e,"c",(function(){return E}));var _=function(){var t=j(regeneratorRuntime.mark((function t(){var e,i,n,r,a,o,c,d,p,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=window.RM.constructorRouter.mag.get("_id"),i=window.RM.constructorRouter.me&&window.RM.constructorRouter.me.get("_id"),e&&i){t.next=4;break}throw new Error("Cannot load text styles");case 4:return t.next=6,Promise.all([Object(s.n)({projectId:e}),Object(s.t)({userId:i}),Object(s.k)({projectId:e}),Object(s.p)({userId:i}),Object(s.l)({projectId:e}),Object(s.q)({userId:i})]);case 6:return n=t.sent,r=k(n,6),a=r[0].data,o=r[1].data,c=r[2].data,d=r[3].data,p=r[4].data,f=r[5].data,t.abrupt("return",{textStyles:{global:o&&o.length?o:[],project:a&&a.length?a:l},linkStyles:{global:d&&d.length?d:[],project:c&&c.length?c:[h.c]},listStyles:{global:f&&f.length?f:[],project:p&&p.length?p:u}});case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=Object(p.createGlobalStyle)(O(),(function(t){return t.blockStyles}),(function(t){return t.textStyleSheet}),(function(t){return t.linkStyleSheet}),(function(t){return t.listStyleSheet})),I=function(t){var e=t.mode,i=k(Object(f.k)(),2),a=i[0],o=i[1],c=k(Object(f.i)(),2),p=c[0],y=c[1],O=k(Object(f.j)(),2),P=O[0],x=O[1];Object(n.useEffect)((function(){if("constructor"===e){var t=[];if(!a.global.length&&!a.project.length){var i,n,r=window.ServerData.textStyles,c=l;if(!r||!r.project||!r.project.length){var f,g,m=null===(f=window.ServerData)||void 0===f||null===(g=f.editParams)||void 0===g?void 0:g.paragraph_styles;m&&(c=Object(d.b)(m),t.push(Object(s.Q)({styles:c,projectId:window.ServerData.projectId})))}o({global:(null==r||null===(i=r.global)||void 0===i?void 0:i.length)?r.global:[],project:(null==r||null===(n=r.project)||void 0===n?void 0:n.length)?r.project:c})}if(!p.global.length&&!p.project.length){var v,b,w=window.ServerData.linkStyles,S=[h.c];if(!w||!w.project||!w.project.length){var O=window.ServerData.editParams&&window.ServerData.editParams.link_styles;O&&(S=Object(d.a)(O),t.push(Object(s.N)({styles:S,projectId:window.ServerData.projectId})))}y({global:(null==w||null===(v=w.global)||void 0===v?void 0:v.length)?w.global:[],project:(null==w||null===(b=w.project)||void 0===b?void 0:b.length)?w.project:S})}if(!P.global.length&&!P.project.length){var k,C,j=window.ServerData.listStyles;x({global:(null==j||null===(k=j.global)||void 0===k?void 0:k.length)?j.global:[],project:(null==j||null===(C=j.project)||void 0===C?void 0:C.length)?j.project:u})}t.length&&Promise.all(t)}if("viewer"===e||"screenshoter"===e){var _,T,I,M,E,D,A,$,L,R,F,B,z,W,V,N,U,H,G,K,q,Y,J,Q,X,Z,tt="viewer"===e,et=tt?(null===(_=window.ServerData)||void 0===_||null===(T=_.mags)||void 0===T||null===(I=T.mag)||void 0===I?void 0:I.textStyles)||(null===(M=window.RM)||void 0===M||null===(E=M.viewerRouter)||void 0===E||null===(D=E.mag)||void 0===D?void 0:D.textStyles):null===(A=window.ServerData)||void 0===A||null===($=A.mag)||void 0===$?void 0:$.textStyles;if(et)o({global:(null==et||null===(X=et.global)||void 0===X?void 0:X.length)?et.global:[],project:(null==et||null===(Z=et.project)||void 0===Z?void 0:Z.length)?et.project:l});var it,nt,rt=tt?(null===(L=window.ServerData)||void 0===L||null===(R=L.mags)||void 0===R||null===(F=R.mag)||void 0===F?void 0:F.linkStyles)||(null===(B=window.RM)||void 0===B||null===(z=B.viewerRouter)||void 0===z||null===(W=z.mag)||void 0===W?void 0:W.linkStyles):null===(V=window.ServerData)||void 0===V||null===(N=V.mag)||void 0===N?void 0:N.linkStyles;if(rt)y({global:(null==rt||null===(it=rt.global)||void 0===it?void 0:it.length)?rt.global:[],project:(null==rt||null===(nt=rt.project)||void 0===nt?void 0:nt.length)?rt.project:[h.c]});var at,ot,st=tt?(null===(U=window.ServerData)||void 0===U||null===(H=U.mags)||void 0===H||null===(G=H.mag)||void 0===G?void 0:G.listStyles)||(null===(K=window.RM)||void 0===K||null===(q=K.viewerRouter)||void 0===q||null===(Y=q.mag)||void 0===Y?void 0:Y.listStyles):null===(J=window.ServerData)||void 0===J||null===(Q=J.mag)||void 0===Q?void 0:Q.listStyles;if(st)x({global:(null==st||null===(at=st.global)||void 0===at?void 0:at.length)?st.global:[],project:(null==st||null===(ot=st.project)||void 0===ot?void 0:ot.length)?st.project:u})}}),[]);var C=Object(n.useMemo)((function(){return Object.keys(g.a).map((function(t){return g.a[t].style})).join(" ")}),[g.a]),j=Object(n.useMemo)((function(){var t=function(t){var e,i=(e=t.cssProperties,Object.keys(e).reduce((function(t,i){var n=e[i];return"string"==typeof n&&n.includes("(")&&!n.includes(")")&&(n="".concat(n,")")),n&&"opacity"===i&&parseInt(String(n))>1&&(n=parseInt(String(n))/100),w(w({},t),{},S({},i,n))}),{}));return"justify"===(i.textAlign&&String(i.textAlign))&&(i.whiteSpace="normal")," .".concat(t.name," { ").concat(Object(m.a)(i)," } ")},e=a.global.map(t),i=a.project.map(t);return[].concat(b(e),b(i)).join(" ")}),[a]),_=Object(n.useMemo)((function(){var t=function(t){var e=w({},t.cssProperties);return e.display="inline-block"," .".concat(t.name," {\n        &-preview {\n          ").concat(Object(m.a)(t.cssProperties),"\n        }\n\n        div[data-offset-key]:before, & > li:before, &:before {\n          ").concat(Object(m.a)(e),"\n        }\n      } ")},e=P.global.map(t),i=P.project.map(t);return[].concat(b(e),b(i)).join(" ")}),[P]),I=Object(n.useMemo)((function(){var t=function(t){var e,i,n;return" .".concat(t.name," {\n      ").concat((null===(e=t.style)||void 0===e?void 0:e.link)?"\n          // Стиль подчеркивания\n          ".concat(Object(m.a)(Object(v.b)(t.style.link)),"\n          ").concat(Object(m.a)({color:t.style.link.textColor}),"\n          & * {\n            ").concat(Object(m.a)({color:t.style.link.textColor}),"\n          }"):"","\n\n      ").concat((null===(i=t.style)||void 0===i?void 0:i.hover)?"\n          // Стиль подчеркивания при наведении\n          &.hover, &:hover {\n            ".concat(Object(m.a)(Object(v.b)(t.style.hover)),"\n            ").concat(Object(m.a)({color:t.style.hover.textColor},!0),"\n            & * {\n              ").concat(Object(m.a)({color:t.style.hover.textColor},!0),"\n            }\n          }"):"","\n\n      ").concat((null===(n=t.style)||void 0===n?void 0:n.current)?"\n          // Стиль подчеркивания для Current ссылки\n          &.current {\n            ".concat(Object(m.a)(Object(v.b)(t.style.current)),"\n            ").concat(Object(m.a)({color:t.style.current.textColor}),"\n            & * {\n              ").concat(Object(m.a)({color:t.style.current.textColor}),"\n            }\n          }"):"","\n     } ")},e=p.global.map(t),i=p.project.map(t);return[].concat(b(e),b(i)).join(" ")}),[p]);return r.a.createElement(T,{blockStyles:C,textStyleSheet:j,linkStyleSheet:I,listStyleSheet:_})},M=function(t){var e="text-global-styles",i=document.querySelector("#".concat(e));i||((i=document.createElement("div")).id=e,document.body.appendChild(i)),o.a.render(r.a.createElement(I,{mode:t}),i)},E=function(){var t=j(regeneratorRuntime.mark((function t(e){var i,n,r,a,o,c,l,u,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.newTextStyles,n=e.newLinkStyles,r=e.newListStyles,t.next=3,_();case 3:a=t.sent,i&&i.length&&(o=i.filter((function(t){return!a.textStyles.project.some((function(e){return e.name===t.name}))}))).length&&(c=[].concat(b(a.textStyles.project),b(o)),Object(f.g)({global:a.textStyles.global,project:c}),Object(s.Q)({styles:c,projectId:window.ServerData.projectId})),r&&r.length&&(l=r.filter((function(t){return!a.listStyles.project.some((function(e){return e.name===t.name}))}))).length&&(u=[].concat(b(a.listStyles.project),b(l)),Object(f.f)({global:a.listStyles.global,project:u}),Object(s.O)({styles:u,projectId:window.ServerData.projectId})),n&&n.length&&(d=n.filter((function(t){return!a.linkStyles.project.some((function(e){return e.name===t.name}))}))).length&&(h=[].concat(b(a.linkStyles.project),b(d)),Object(f.e)({global:a.linkStyles.global,project:h}),Object(s.N)({styles:h,projectId:window.ServerData.projectId}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Jzj8:function(t,e,i){"use strict";i.d(e,"k",(function(){return s})),i.d(e,"g",(function(){return c})),i.d(e,"d",(function(){return l})),i.d(e,"i",(function(){return d})),i.d(e,"e",(function(){return h})),i.d(e,"b",(function(){return p})),i.d(e,"j",(function(){return g})),i.d(e,"f",(function(){return m})),i.d(e,"c",(function(){return v})),i.d(e,"h",(function(){return b})),i.d(e,"a",(function(){return y}));var n=i("jcqt");function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var o=r(Object(n.a)({global:[],project:[]}),3),s=o[0],c=o[1],l=o[2],u=r(Object(n.a)({global:[],project:[]}),3),d=u[0],h=u[1],p=u[2],f=r(Object(n.a)({global:[],project:[]}),3),g=f[0],m=f[1],v=f[2],b=r(Object(n.a)({}),1)[0],y=function(t){var e=t.fontFamily,i=t.fontWeight,n=t.fontStyle;return"".concat(e,"_").concat(i,"_").concat(n)}},KOTZ:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("ROz4"),a=i("lRGI"),o=i("QNiq");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u=r.a.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,antialiasRotation:!0,mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){var t;return this.preloadIconImage({default:!0}),this.makeBox("widget-button"),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.seamlessFontsShow(function(){this.$el.removeClass("fonts-pending")}.bind(this),function(){this.$el.addClass("fonts-pending")}.bind(this)),t={model:this,$container:this.$el,environment:"viewer",mag:this.page&&this.page.mag,block:null},this.buttonWidget=new a.a(t),this.preloadIconImage({hover:!0}),this.$el.on(o.a.isDesktop?"mouseenter":"touchstart",this.onButtonHover),this.$el.on(o.a.isDesktop?"mouseleave":"touchend",this.onButtonHoverOut),this.$el.on("click",this.onButtonClick),this.checkLink(),RM.screenshot?(this.waitForIconImageLoad(),this.waitForUsedFontsLoad()):this.widgetIsLoaded(),this},renderButtonText:function(t){this.buttonWidget.renderButtonText(t)},renderButtonTextWithSizes:function(t,e){this.buttonWidget.renderButtonTextWithSizes(t,c(c({},this),e))},hasFontsToLoad:function(){return"text"===this.tp||"text_and_icon"===this.tp},onButtonHover:function(){this.$(".common-button").addClass("hovered")},onButtonHoverOut:function(){this.$(".common-button").removeClass("hovered")},onButtonClick:function(t){if(2!==t.which&&!t.metaKey&&!t.ctrlKey){var e=this.$el.closest("a"),i=n.a.trim(e.attr("href")).match(/\/start-with-template\/(\d+)$/i),r=i&&i[1];r&&RM.viewerRouter&&RM.viewerRouter.createMagFromTemplate&&(t.preventDefault(),RM.viewerRouter.createMagFromTemplate("template-link",r));var a=this.text?this.text:"icon"===this.tp?"icon":"empty";RM.analytics&&RM.analytics.sendEvent("Button Click",a)}},preloadIconImage:function(t){t=t||{};var e=this.tp;if("icon"===e||"text_and_icon"===e){if(t.default)(new Image).src=Modernizr.retina&&this.icon_raster2xUrl||this.icon_rasterUrl;if(t.hover)(new Image).src=Modernizr.retina&&this["hover-icon_raster2xUrl"]||this["hover-icon_rasterUrl"]}},_widgetIsLoaded:function(){this.loaded||this.destroyed||(RM.screenshot?this.iconImageLoaded&&this.fontLoaded&&this.widgetIsLoaded():this.widgetIsLoaded())},waitForIconImageLoad:function(){this.iconImageLoaded=!1,"icon"!==this.tp&&"text_and_icon"!==this.tp||!this.icon_rasterUrl?this.onIconImageLoaded():Object(n.a)("<img>").on("load",this.onIconImageLoaded).on("error",this.onIconImageLoaded).attr("src",Modernizr.retina?this.icon_raster2xUrl||this.icon_rasterUrl||"":this.icon_rasterUrl||"")},onIconImageLoaded:function(){this.iconImageLoaded=!0,this._widgetIsLoaded()},waitForUsedFontsLoad:function(){this.fontLoaded=!1,this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.onFontLoaded):this.onFontLoaded()},onFontLoaded:function(){this.fontLoaded=!0,this._widgetIsLoaded()},destroy:function(){return this.buttonWidget&&this.buttonWidget.destroy(),this.buttonWidget=null,this.$el.off(o.a.isDesktop?"mouseenter":"touchstart",this.onButtonHover),this.$el.off(o.a.isDesktop?"mouseleave":"touchend",this.onButtonHoverOut),this.$el.off("click",this.onButtonClick),r.a.prototype.destroy.apply(this,arguments)}});e.default=u},KiUg:function(t,e,i){"use strict";i.d(e,"b",(function(){return h})),i.d(e,"d",(function(){return f})),i.d(e,"c",(function(){return b})),i.d(e,"a",(function(){return y}));var n=i("q1tI"),r=i.n(n),a=i("wOk9"),o=i("N9p6"),s=i("3u1N"),c=i("vOnD"),l=i("za5s"),u=i("fueH");function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}var h=String.fromCharCode(160),p=String.fromCharCode(8239),f=[{name:"No-break space",char:h},{name:"Narrow no-break space",char:p}],g=c.default.span.withConfig({displayName:"spaces__SpaceIcon"})(["&:before{content:'';height:",";padding-right:",";margin-right:-",";position:relative;left:-0.1em;background-repeat:no-repeat;"," "," ","}"],(function(t){return t.size}),(function(t){return t.size}),(function(t){return t.size}),l.backgroundImage,l.backgroundPosition,l.backgroundSize),m=o.a.replace(/currentColor/g,a.colors.blue),v=s.a.replace(/currentColor/g,a.colors.blue),b={strategy:function(t,e){u.a.findSubstringIndexes(t,h).forEach((function(t){e(t,t+1)}))},component:function(t){return r.a.createElement(g,d({size:"0.5em",backgroundSize:"0.4em",backgroundPosition:"bottom",backgroundImage:"url('data:image/svg+xml,".concat(encodeURIComponent(m),"')")},t))}},y={strategy:function(t,e){u.a.findSubstringIndexes(t,p).forEach((function(t){e(t,t+1)}))},component:function(t){return r.a.createElement(g,d({size:"0.4em",backgroundSize:"0.4em",backgroundPosition:"top",backgroundImage:"url('data:image/svg+xml,".concat(encodeURIComponent(v),"')")},t))}}},L2iM:function(t,e,i){"use strict";var n=i("q1tI"),r=i.n(n),a=i("JPcv"),o=i.n(a),s=i("IrH7"),c=i("HjzJ"),l=i("w5C2"),u=i("a68n"),d=i("vOnD"),h=i("Jzj8"),p=i("fueH"),f=i("5BzK"),g=i("ePHO"),m=i("DwEc"),v=i("w+s/"),b=i("38uW"),y=i("vvfI"),w=i("8AXF");function S(){return(S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function O(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?O(Object(i),!0).forEach((function(e){P(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function x(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||j(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||j(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){if(t){if("string"==typeof t)return _(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function T(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}var I=Object(d.default)(f.Box).withConfig({displayName:"TextConstructorWrapper___StyledBox"})(["padding:0 !important;&:after{content:'';pointer-events:none;box-shadow:1px 0 0 0 ",",0 1px 0 0 ",",1px 1px 0 0 ",",1px 0 0 0 "," inset,0 1px 0 0 "," inset;position:absolute;top:0;left:0;width:calc(100% - 1px);height:100%;}"],(function(t){return t._css}),(function(t){return t._css2}),(function(t){return t._css3}),(function(t){return t._css4}),(function(t){return t._css5})),M=function(t){var e,i=t.children,a=T(t,["children"]),o=Object(n.useContext)(m.a).model,s=o.isEditMode,c=o.useTextWidgetStore,l=Object(n.useContext)(w.BackboneContext).model,d=null===(e=l.flags)||void 0===e?void 0:e.calculatedLineHeight,f=C(c({partial:!1}),2),O=f[0],P=f[1],j=C(Object(h.k)(),1)[0],_=Object(n.useMemo)((function(){if(!a["data-offset-key"])return{};var t=a["data-offset-key"].split("-")[0];return{blockKey:t,block:O.getCurrentContent().getBlockForKey(t)}}),[a,O]),M=_.blockKey,E=_.block,D=Object(n.useMemo)((function(){return Object(u.b)({block:E})}),[E]),A=Object(n.useMemo)((function(){return Boolean(M&&p.a.isBlockSelected(O,M))}),[O,M]),$=A?"var(--editor-border-color)":"transparent",L=Object(n.useMemo)((function(){return[].concat(x(j.global),x(j.project)).find((function(t){return t.name===D}))}),[D,j,O]),R=Object(n.useMemo)((function(){var t=Object(v.a)({block:E}),e=L?Object(u.e)(L):{};return{paddings:k(k({left:0,right:0,top:0,bottom:0},e),t),changedPaddings:Object(v.b)({blockPaddings:t,stylePaddings:e})}}),[O,E,L,j]),F=R.paddings,B=R.changedPaddings,z=Object(n.useMemo)((function(){return Object(b.a)({block:E})}),[O,E,j]),W=Object(n.useMemo)((function(){return Object(y.a)({block:E})}),[O,E]),V=Object(n.useMemo)((function(){return d?p.a.getBaseLineHeightStyle({block:E,width:l.w}):{}}),[O,E]),N=s&&A;return r.a.createElement(I,S({},a,{position:"relative",style:k({lineHeight:"number"==typeof z?"".concat(z,"px"):void 0,textIndent:"number"==typeof W?"".concat(W,"px"):void 0},V),_css:$,_css2:$,_css3:$,_css4:$,_css5:$}),r.a.createElement(g.b,{key:M,isVisible:N,top:F.top,left:F.left,bottom:F.bottom,right:F.right,changedPaddings:B,onChange:function(t){var e=p.a.getSelectedBlocks(O),i=O.getCurrentContent(),n=e.reduce((function(e,n){var r=i.getBlockForKey(n);if(r){var a=Object(v.a)({block:r});return Object(v.d)({editorState:e,block:r,paddings:k(k({},a),t)})}return e}),O);P(n)}},i))};function E(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function D(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?E(Object(i),!0).forEach((function(e){A(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function A(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"a",(function(){return $})),i.d(e,"b",(function(){return L}));var $=D(D(D({},s.b),c.f),l.c),L=function(){var t=window.RM.constructorRouter&&!window.RM.constructorRouter.preview,e=D(D(D({},Object(u.d)()),l.d),c.g);return o.a.Map(Object.keys(e).reduce((function(i,n){var a=e[n].element,o=t?M:a,s=Object(c.e)(n)?r.a.createElement(c.c,{type:n}):void 0;return D(D({},i),{},A({},n,D(D({},e[n]),{},{element:o,wrapper:s})))}),{}))}},LDvm:function(t,e,i){"use strict";var n=i("0NDv");function r(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}var a=function(t){return n.a.get("/api/swatches/project/".concat(t))},o=function(t){var e=t.projectId,i=r(t,["projectId"]);return n.a.put("/api/swatches/project/".concat(e),i)},s=function(t){var e=t.projectId,i=r(t,["projectId"]);return n.a.put("/api/swatches/project/".concat(e,"/move"),i)},c=function(t){var e=t.projectId,i=t.colors;return n.a.put("/api/swatches/project/".concat(e,"/reset"),{colors:i})},l=function(t){return n.a.get("/api/swatches/global/".concat(t))},u=function(t){var e=t.userId,i=r(t,["userId"]);return n.a.put("/api/swatches/global/".concat(e),i)},d=function(t){var e=t.userId,i=r(t,["userId"]);return n.a.put("/api/swatches/global/".concat(e,"/move"),i)};function h(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}var p=function(t){return n.a.get("/api/mag/".concat(t,"/trash"))},f=function(t,e){return n.a.patch("/api/mag/".concat(t,"/pages/trash"),{pids:e})},g=function(t,e){return n.a.delete("/api/mag/".concat(t,"/pages/trash"),{pids:e})},m=function(){var t,e=(t=regeneratorRuntime.mark((function t(e,i){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.get("/api/screenshot/renew/".concat(e,"/").concat(i));case 2:return r=t.sent,a=r.screenshot,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){h(a,n,r,o,s,"next",t)}function s(t){h(a,n,r,o,s,"throw",t)}o(void 0)}))});return function(t,i){return e.apply(this,arguments)}}(),v=function(t){return n.a.post("/api/font-features",t)},b=function(t){var e=new FormData;return e.append("upload",t),fetch("/api/upload/font",{method:"post",body:e}).then((function(t){return t.json()}))},y=function(t){return n.a.post("/api/custom-font",t)},w=function(t){return n.a.get("/api/custom-font/".concat(t))},S=function(t,e){return n.a.put("/api/custom-font/".concat(t),e)};function O(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}var k=function(){var t,e=(t=regeneratorRuntime.mark((function t(e,i){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("name",e),n.append("upload",i),t.next=5,fetch("/api/upload",{headers:{"cache-control":"no-cache"},method:"post",body:n}).then((function(t){return t.json()}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){O(a,n,r,o,s,"next",t)}function s(t){O(a,n,r,o,s,"throw",t)}o(void 0)}))});return function(t,i){return e.apply(this,arguments)}}(),P=function(t){var e=t.userId;return n.a.get("/api/text-styles/global/".concat(e))},x=function(t){var e=t.projectId;return n.a.get("/api/text-styles/project/".concat(e))},C=function(t){var e=t.userId,i=t.styles;return n.a.put("/api/text-styles/global/".concat(e),{styles:i})},j=function(t){var e=t.projectId,i=t.styles;return n.a.put("/api/text-styles/project/".concat(e),{styles:i})},_=function(t){var e=t.userId;return n.a.get("/api/link-styles/global/".concat(e))},T=function(t){var e=t.projectId;return n.a.get("/api/link-styles/project/".concat(e))},I=function(t){var e=t.userId,i=t.styles;return n.a.put("/api/link-styles/global/".concat(e),{styles:i})},M=function(t){var e=t.projectId,i=t.styles;return n.a.put("/api/link-styles/project/".concat(e),{styles:i})},E=function(t){var e=t.userId;return n.a.get("/api/list-styles/global/".concat(e))},D=function(t){var e=t.projectId;return n.a.get("/api/list-styles/project/".concat(e))},A=function(t){var e=t.userId,i=t.styles;return n.a.put("/api/list-styles/global/".concat(e),{styles:i})},$=function(t){var e=t.projectId,i=t.styles;return n.a.put("/api/list-styles/project/".concat(e),{styles:i})},L=function(){return n.a.get("/api/user_templates/")},R=function(t){return n.a.delete("/api/template/",{id:t})},F=function(t,e){return n.a.put("/api/template/",{id:t,name:e})},B=function(t){return n.a.get("/api/projects/".concat(t))},z=function(t){return n.a.post("/api/publish/".concat(t))},W=function(t){return n.a.post("/api/mag/".concat(t,"/revert-version"))},V=function(t){return n.a.post("/api/unpublish/".concat(t))},N=function(t,e,i){return n.a.patch("/api/mag/".concat(t,"?skipChanged=").concat(i),e)},U=function(t,e,i){var r={is_private:e.toString()};return i&&(r.pass=i),n.a.post("/api/mag/privacy/".concat(t),r)},H=function(t){return n.a.get("/api/mag/fbcache/".concat(t))},G=function(t,e){return n.a.post("/api/mag/opts/".concat(t),e)},K=function(t,e){return n.a.post("/api/checkdomain",{num_id:t,domain:e})},q=function(t,e){return n.a.post("/api/mag/domain/".concat(t),{domain:e,status:"on"})},Y=function(t){return n.a.post("/api/mag/domain/".concat(t),{status:"off"})},J=function(t,e){return n.a.get("/api/makepdf/".concat(t),e?{pages:e}:void 0)},Q=function(t,e){return n.a.get("/api/mag/".concat(t,"/export"),{origin:e})},X=i("f3SV");function Z(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}var tt=function(){var t,e=(t=regeneratorRuntime.mark((function t(e,i){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("widgetId",i),n.append("upload",e.slice(0,Math.min(e.size,X.c.SHOTS_UPLOAD_SIZE_LIMT))),t.next=5,fetch("/api/shots/upload/video",{method:"post",body:n}).then((function(t){return t.json()}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){Z(a,n,r,o,s,"next",t)}function s(t){Z(a,n,r,o,s,"throw",t)}o(void 0)}))});return function(t,i){return e.apply(this,arguments)}}(),et=function(t,e){return n.a.post("/api/shots/convert/fromurl",{videoUrl:t,widgetId:e})},it=function(t){return n.a.get("/api/user/".concat(t,"/links"))},nt=function(t){return n.a.post("/api/featured/submit",{url:t})};function rt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function at(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(i),!0).forEach((function(e){ot(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):rt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ot(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t){return function(t){if(Array.isArray(t))return lt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return lt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return lt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ut=function(t,e){var i=at(at({},function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return Object.keys(e).forEach((function(r){var a=[].concat(ct(i),[r]).join("."),o=e[r];["string","number","boolean"].includes(st(o))?n[a]=e[r]:"object"===st(o)&&null!==o&&(n=at(at({},n),t(o,[].concat(ct(i),[r]))))})),n}(e)),{},{user_agent:window.navigator.userAgent,event_timing_ms:Date.now()-window.performance.timing.navigationStart,event_timestamp:Date.now()});n.a.post("/api/proxy/honeycomb",{event:i,dataset:t})};i.d(e,"m",(function(){return a})),i.d(e,"P",(function(){return o})),i.d(e,"x",(function(){return s})),i.d(e,"z",(function(){return c})),i.d(e,"h",(function(){return l})),i.d(e,"M",(function(){return u})),i.d(e,"w",(function(){return d})),i.d(e,"o",(function(){return p})),i.d(e,"F",(function(){return f})),i.d(e,"c",(function(){return g})),i.d(e,"i",(function(){return m})),i.d(e,"u",(function(){return v})),i.d(e,"V",(function(){return b})),i.d(e,"b",(function(){return y})),i.d(e,"g",(function(){return w})),i.d(e,"K",(function(){return S})),i.d(e,"U",(function(){return k})),i.d(e,"t",(function(){return P})),i.d(e,"n",(function(){return x})),i.d(e,"T",(function(){return C})),i.d(e,"Q",(function(){return j})),i.d(e,"p",(function(){return _})),i.d(e,"k",(function(){return T})),i.d(e,"R",(function(){return I})),i.d(e,"N",(function(){return M})),i.d(e,"q",(function(){return E})),i.d(e,"l",(function(){return D})),i.d(e,"S",(function(){return A})),i.d(e,"O",(function(){return $})),i.d(e,"s",(function(){return L})),i.d(e,"d",(function(){return R})),i.d(e,"D",(function(){return F})),i.d(e,"j",(function(){return B})),i.d(e,"y",(function(){return z})),i.d(e,"A",(function(){return W})),i.d(e,"J",(function(){return V})),i.d(e,"B",(function(){return N})),i.d(e,"H",(function(){return U})),i.d(e,"L",(function(){return H})),i.d(e,"C",(function(){return G})),i.d(e,"a",(function(){return K})),i.d(e,"v",(function(){return q})),i.d(e,"I",(function(){return Y})),i.d(e,"f",(function(){return J})),i.d(e,"e",(function(){return Q})),i.d(e,"W",(function(){return tt})),i.d(e,"X",(function(){return et})),i.d(e,"r",(function(){return it})),i.d(e,"G",(function(){return nt})),i.d(e,"E",(function(){return ut}))},M7m1:function(t,e,i){"use strict";i.d(e,"c",(function(){return v})),i.d(e,"b",(function(){return y})),i.d(e,"a",(function(){return k}));var n=i("/5Qy"),r=i("a68n"),a=i("IrH7"),o=i("w+s/"),s=i("38uW"),c=i("A9VP"),l=i("ICos"),u=i("uU7u"),d=i("vvfI"),h=i("fueH"),p=i("w5C2");function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var v=function(t){var e=window.RM.constructorRouter,i=e.mag,n=e.getCurrentPageNum,r=t.attributes,a=t.target,o=t.classList,s=t.dataset,c=r.getNamedItem("href"),l=c&&c.value?c.value.toLowerCase():"",d=s.anchorLinkPos?parseInt(s.anchorLinkPos):0,p=s.pid,f={id:h.a.generateRandomKey(),linkStyle:o[0],target:"_blank"===a?"_blank":"_self"};if(l.startsWith("mailto:"))f.url=l.replace("mailto:",""),f.type=u.b.Email;else if(l.startsWith("tel:"))f.url=l.replace("tel:",""),f.type=u.b.Phone;else if("__rm_anchor"===l)f.url="".concat(d,"px"),f.pageNum=n()||void 0,f.type=u.b.Anchor,f.anchorPosition=d;else if("back to top"===l)f.url="",f.type=u.b.ScrollToTop;else if("__rm_goback"===l)f.url="",f.type=u.b.GoBack;else if(p||i.getPageId(l)){var g=i.getPageId(l);f.url=""+(p&&i.getPageUri(p)||g||l);var m=p||g;f.pageNum=m&&i.getPageNum(m)||void 0,f.type=u.b.Page}else f.url=l,f.type=u.b.URL;return f},b=function(t){var e=t.computedStyles,i=t.originalStyles;if(!i||!e)return{};var r=e.getPropertyValue("letter-spacing");return!i.letterSpacing||"normal"===i.letterSpacing||r&&"normal"!==r||(r=i.letterSpacing),["fontSize","fontWeight","fontFamily","fontStyle","letterSpacing","textDecorationLine","textTransform","color","textAlign","paddingLeft","paddingTop","paddingRight","paddingBottom","lineHeight"].reduce((function(t,i){var a=Object(n.a)(String(i)),o=e.getPropertyValue(a);return o?g(g({},t),{},m({},i,"letterSpacing"===i?r:o)):t}),{})},y=function(t,e){var i,n={},c=(null==e?void 0:e.ignore)||{};if(!c.textStyles&&(null===(i=t.classList)||void 0===i?void 0:i.length)){var l=Array.from(t.classList).filter((function(t){return t.startsWith("paragraph")}));n[r.i]=l[0]}if(!c.textAlign&&t.style.textAlign){var u=t.style.textAlign;n[a.c]="right"===u?a.a.AlignRight:"center"===u?a.a.AlignCenter:"justify"===u?a.a.AlignJustify:a.a.AlignLeft}if(!c.paddings){var h={};t.style.paddingLeft&&(h.left=parseInt(t.style.paddingLeft)),t.style.paddingTop&&(h.top=parseInt(t.style.paddingTop)),t.style.paddingRight&&(h.right=parseInt(t.style.paddingRight)),t.style.paddingBottom&&(h.bottom=parseInt(t.style.paddingBottom)),n[o.c]=h}return!c.lineHeight&&t.style.lineHeight&&(n[s.c]=parseInt(t.style.lineHeight)),!c.textIndent&&t.style.textIndent&&(n[d.c]=parseInt(t.style.textIndent)),n},w=function(t){var e=[];return t.forEach((function(t,i){Object.keys(t.styles).forEach((function(n){var r,a,o=(r=n,a=t.styles[n],"fontSize"===r?h.a.getStyleValueString(c.a.FontSize,parseInt(a)):"fontStyle"===r?h.a.getStyleValueString(c.a.FontStyle,a):"fontWeight"===r?h.a.getStyleValueString(c.a.FontWeight,a):"fontFamily"===r?h.a.getStyleValueString(c.a.FontFamily,a.replace(/"/g,"")):"letterSpacing"===r&&"normal"!==a?h.a.getStyleValueString(c.a.LetterSpacing,parseFloat(a)):"color"===r?h.a.getStyleValueString(c.a.Color,Object(l.j)(Object(l.i)(a))):"textDecorationLine"===r?h.a.getStyleValueString(c.a.Decoration,a):"textTransform"===r?h.a.getStyleValueString(c.a.Transform,a):void 0);o&&e.push({offset:i,length:1,style:o})}))})),e},S=function(t,e){var i=e.textContent,n=null==i?void 0:i.length;e.textContent="".concat("<%TAG_POINTER%>").concat(i);var r=t.textContent,a=null==r?void 0:r.indexOf("<%TAG_POINTER%>");return e.textContent=i,{offset:a,length:n}},O=function(t){var e=t.charStyleList,i=t.blockKeys,n=t.entityKeys,r={blocks:[],blocksMeta:[],styles:[],entityMap:{}},a=0;return e.forEach((function(t,e){var n=t.paragraph,o=t.charStyle,s=i&&i.length?i[e]:h.a.generateRandomKey(),c=y(n),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e,n=[],r={};return Array.from(t.querySelectorAll("a")).forEach((function(e){if(e.textContent){var a=S(t,e),o=a.offset,s=a.length;"number"==typeof o&&"number"==typeof s&&(n.push({key:i,offset:o,length:s}),r[i]={mutability:"MUTABLE",type:u.f,data:v(e)},i++)}})),{entityRanges:n,entityMap:r,lastKey:i}}(n,a),d=l.entityMap,f=l.entityRanges,m=l.lastKey;a=m;var b={key:s,text:n.textContent||"",depth:0,entityRanges:f},O={key:s,type:p.a.Unstyled,inlineStyles:h.a.minifyStyles(w(o))},k={key:s,data:c};r.blocks.push(b),r.styles.push(O),r.blocksMeta.push(k),r.entityMap=g(g({},r.entityMap),d)})),(null==n?void 0:n.length)&&Object.keys(r.entityMap).forEach((function(t,e){r.entityMap[t].data=g(g({},r.entityMap[t].data),{},{id:n[e]})})),r},k=function(t){var e,i=t.str,n=t.blockKeys,r=t.entityKeys,a=function(t){var e=document.createElement("div");e.classList.add("block","block-text"),e.style.position="absolute",e.style.left="-9999px",e.style.opacity="0",e.style.visibility="hidden";var i=document.createElement("div");return i.classList.add("text-preview","v2"),i.innerHTML=t,e.append(i),document.body.appendChild(e),e}(i);!function(t){Array.from(t.querySelectorAll("br")).forEach((function(t){var e=document.createTextNode("\n");t.replaceWith(e)}))}(a);var o=function(t){var e=[];return Array.from(t.querySelectorAll("p")).forEach((function(t){for(var i=document.createNodeIterator(t,NodeFilter.SHOW_TEXT),n=[],r=null;r=i.nextNode();)for(var a,o=null===(a=r.parentElement)||void 0===a?void 0:a.style,s=r.parentElement?window.getComputedStyle(r.parentElement):void 0,c=b({computedStyles:s,originalStyles:o}),l=r.textContent||"",u=0;u<l.length;u++){var d=l[u];n.push({symbol:d,styles:c})}e.push({charStyle:n,paragraph:t})})),e}(a),s=O({charStyleList:o,blockKeys:n,entityKeys:r});return null===(e=a.parentNode)||void 0===e||e.removeChild(a),s}},O5Jf:function(t,e,i){"use strict";i.r(e);var n=i("q1tI"),r=i.n(n),a=i("q1z7"),o=i.n(a),s=i("ROz4"),c=i("8AXF"),l=i("DwEc"),u=i("pFlR"),d=i("fueH"),h=i("i0ke"),p=i("v83y"),f=i("sxjd"),g=s.a.extend({antialiasRotation:!0,initialize:function(t){this.model=new o.a.Model(t),s.a.prototype.initialize.apply(this,arguments)},render:function(){var t=this;this.makeBox("widget-text-v3"),this.propsModel=new o.a.Model({page:this.page,currentPage:this.mag.currentPage||this.page,scale:this.page.scale,viewport:this.page.pageViewport,viewerOptions:this.mag.opts});var e=p.EditorState.createWithContent(d.a.importTextContent(this.model),h.a);this.model["editorState"+this.page.pageViewport]=e;return Object(c.renderReact)({component:function(){return r.a.createElement(c.CreateContextProvider,{context:l.b,model:t.propsModel},r.a.createElement(f.a,{editorState:e}))},domElement:this.$el[0],model:this.model}),this.rendered=!0,window.RM.screenshot&&!this.insideHotspot?this.waitForUsedFontsLoad():this.widgetIsLoaded(),this.seamlessFontsShow((function(){t.$el.removeClass("fonts-pending")}),(function(){t.$el.addClass("fonts-pending")})),u.a.isDesktopDefault(this.mag.viewport)&&u.a.isScaleLayout(this.mag.viewOpts)&&u.a.isCSSZoom()&&this.page.on("resize",this.onScaleChange),this},hasFontsToLoad:function(){return!0},updatePage:function(t){var e=this.page;(!e||t&&e.num!==t.num)&&(this.page=t,this.propsModel.set({currentPage:t}))},onScaleChange:function(){this.propsModel.set({scale:this.page.scale})},waitForUsedFontsLoad:function(){this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.widgetIsLoaded):this.widgetIsLoaded()},destroy:function(){this.mag.off("pageChanged",this.onPageChanged),this.page.off("resize",this.onScaleChange);for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return s.a.prototype.destroy.apply(this,e)}});e.default=g},PhV8:function(t,e,i){"use strict";function n(t){return new n.fn.init(t)}var r={},a={};Array.prototype.slice;function o(t,e,i){if(!i.contentWindow.postMessage)return!1;var n=JSON.stringify({method:t,value:e});i.contentWindow.postMessage(n,"*")}function s(t){var e,i;try{i=(e=JSON.parse(t.data)).event||e.method}catch(t){}if(!/^https?:\/\/player.vimeo.com/.test(t.origin))return!1;var n=e.value,o=e.data,s=""===s?null:e.player_id,c=function(t,e){return e?r[e]&&r[e][t]:r[t]}(i,s),l=[];return"ready"!==i||a[s]||(a[s]=!0),!!c&&(void 0!==n&&l.push(n),o&&l.push(o),s&&l.push(s),l.length>0?c.apply(null,l):c.call())}function c(t,e,i){i?(r[i]||(r[i]={}),r[i][t]=e):r[t]=e}function l(t){return!!(t&&t.constructor&&t.call&&t.apply)}n.fn=n.prototype={element:null,init:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.element=t,this.element?this:null},api:function(t,e){if(!this.element||!t)return!1;var i=this.element,n=""!==i.id?i.id:null,r=l(e)?null:e,a=l(e)?e:null;return a&&c(t,a,n),o(t,r,i),this},addEvent:function(t,e){if(!this.element)return!1;var i=this.element,n=""!==i.id?i.id:null;return c(t,e,n),"ready"!=t?o("addEventListener",t,i):"ready"==t&&a[n]&&e.call(null,n),this},removeEvent:function(t){if(!this.element)return!1;var e=this.element,i=function(t,e){if(e&&r[e]){if(!r[e][t])return!1;r[e][t]=null}else{if(!r[t])return!1;r[t]=null}return!0}(t,""!==e.id?e.id:null);"ready"!=t&&i&&o("removeEventListener",t,e)}},n.fn.init.prototype=n.fn,window.addEventListener?window.addEventListener("message",s,!1):window.attachEvent("onmessage",s),e.a=n},ROz4:function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),a=i.n(r),o=i("rFsW"),s=i("AIVH");function c(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\t<div class="rmwidget" data-id="<%-id%>"></div>\n']);return c=function(){return t},t}var l,u,d,h=(l={},u="template-viewer-widget",d=Object(s.a)(c()),u in l?Object.defineProperty(l,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[u]=d,l),p=i("DqjY"),f=i("pFlR"),g=i("roQd"),m=i("m41J"),v=i("OTSC"),b=1,y=a.a.View.extend({template:h["template-viewer-widget"],initialize:function(t,e,i){return o.a.bindAll(this),this.updateWidgetData(t,e,i),this.destroyed=!1,this.$document=Object(n.a)(document),this._id=this._id||b++,this},render:function(){return this.makeBox("some-widget-class"),this.rendered=!0,this.checkLink(),this},redraw:function(){return this.checkLink(),this},updatePage:function(t){var e=this.page;(!e||t&&e.num!==t.num)&&(this.page=t,this.redraw())},canRenderImmediately:function(){return Boolean(this.DO_NOT_WAIT_FOR_PRELOAD)},widgetIsLoaded:function(){this.loaded||this.destroyed||(this.loaded=!0,this.started&&this.start(),this.trigger("loaded"))},isValid:function(){return!0},hasFontsToLoad:function(){return!1},seamlessFontsShow:function(t,e){this._id;if(p.a.isFastFontLoadCheckAvailable()&&!RM.screenshot&&!this.insideHotspot&&this.hasFontsToLoad()){e();this.makeSureFontsLoaded().then((function(e){window.requestAnimationFrame(t)})).catch((function(e){t()}))}},makeSureFontsLoaded:function(){var t=this.page.getFontsVariations([this],!0),e=[];return o.a.each(t,(function(t){var i=p.a.fastWaitForFontLoad(t.fontFamily,t.fontWeight,t.fontStyle);e.push(i)})),window.Promise.all(e)},hasAnimation:function(){return Boolean(this.getAnimations().find((function(t){return!g.a.isEmpty(t)})))},hasLoadAnimation:function(){return Boolean(this.getAnimations().find((function(t){return"load"===t.type})))},start:function(){return this.started=!0,this},stop:function(){return this.started=!1,this},hide:function(){return this.stop(),this.$el.hide(),this.wasHidden=!0,this.trigger("hidden"),this},show:function(){return this.$el.show(),this.start(),this.wasHidden=!1,this.trigger("shown"),this},destroy:function(){return this.stop(),this.destroyed=!0,this.trigger("destroyed"),delete this.animationObj,this.$el.off(),this.remove()},BringToTopZ:function(){if(this.animationObj){var t=this.animationObj.getAnimationContainer();this.animationObj.resetTimeout&&clearTimeout(this.animationObj.resetTimeout),this.animationObj.savedAnimationContainerZIndex||(this.animationObj.savedAnimationContainerZIndex=t.css("z-index")),t.css("z-index",99999+this.z)}this.$el.css("z-index",99999+this.z)},BackToNormalZ:function(){var t=function(){this.animationObj&&this.animationObj.savedAnimationContainerZIndex&&(this.animationObj.getAnimationContainer().css("z-index",this.animationObj.savedAnimationContainerZIndex||this.z),delete this.animationObj.savedAnimationContainerZIndex);delete this.animationObj.resetTimeout}.bind(this);this.animationObj&&this.animationObj.savedAnimationContainerZIndex&&(this.animationObj.resetTimeout&&clearTimeout(this.animationObj.resetTimeout),this.animationObj.resetTimeout=setTimeout(t,200)),this.$el.css("z-index",this.z)},makeBox:function(t){this.setElement(this.template({id:this._id}));var e=this.fixed_position?this.$fixedContainer:this.$pageContainer;this.animationObj&&(e=this.animationObj.getAnimationContainer()),this.$el.appendTo(e).addClass(t).toggleClass("full-width",!!this.is_full_width).toggleClass("full-height",!!this.is_full_height).toggleClass("inside-hotspot",!!this.insideHotspot),this.applyBoxStyle(),(this.is_full_width||this.is_full_height||this.fixed_position||this.sticked)&&this.listenTo(this.page,"resize",this.onPageResize),this.trigger("rendered")},onPageResize:function(){this.applyBoxStyle()},calcBoxStyle:function(t){t=t||{};var e,i={left:this.x,top:this.y,width:this.w,height:this.h,right:"",bottom:"","margin-left":"","margin-top":"","z-index":this.z||1},r=parseInt(this.full_width_margin,10)||0,a=parseInt(this.full_height_margin,10)||0,s=parseInt(this.sticked_margin,10)||0,c=this.ignoreScale?1:this.page.scale,l=this.page.mag.getContainerSizeCached().width,u=l-Object(n.a)(window).width(),d=this.fixed_position;if(this.angle&&(i.width=Math.round(this.w),i.height=Math.round(this.h),this.angle%90==0&&i.width%2!=i.height%2&&(i.width+=1)),this.is_full_height&&(i.top=-this.page.contentPosition.top+a,d?(i.top=a/c,i.height=Object(n.a)(window).height()/c-2*a,["nw","w","sw"].indexOf(d)>-1&&(d="nw"),["n","c","s"].indexOf(d)>-1&&(d="n"),["ne","e","se"].indexOf(d)>-1&&(d="ne")):i.height=this.page.pageHeight/c-2*a),this.is_full_width){var h=this.page.mag.getViewportWidth(this.page.pageViewport);if(i.left=-this.page.contentPosition.left+r,i.width=this.page.mag.getContainerSizeCached().width/c-2*r,e=-((i.width-this.page.$content[0].clientWidth)/2).toFixed(3),f.a.isOn(this.page.pageViewport,h,this.mag.viewOpts)&&this.page.mag.getContainerSizeCached().width>this.mag.viewOpts.scalewidth&&(Modernizr.msie11?(e=-(l-this.page.$content[0].clientWidth)/2-u/2,i.left=e/c):Modernizr.firefox?(i.width=i.width+1,i.left=e-1):i.left=e),d){if(i.left=r,"horizontal"==this.page.viewerType){var p=this.page.$scrollWrapper,g=p.width()-p[0].clientWidth;i.width-=g/c}["nw","n","ne"].indexOf(d)>-1&&(d="nw"),["w","c","e"].indexOf(d)>-1&&(d="w"),["sw","s","se"].indexOf(d)>-1&&(d="sw")}}if(this.sticked){g=0;"horizontal"==this.page.viewerType&&(g=this.page.$scrollWrapper.width()-this.page.$scrollWrapper[0].clientWidth),"left"==this.sticked&&(i.left=-this.page.contentPosition.left/c+s),"right"==this.sticked&&(i.left=this.page.mag.getContainerSizeCached().width/c-s-this.w-this.page.contentPosition.left/c-g/c),"top"==this.sticked&&(i.top=-this.page.contentPosition.top/c+s),"bottom"==this.sticked&&(i.top=this.$pageContainer.height()-s-this.h+this.page.contentPosition.top/c)}if(t.calcBBox){d&&(i.left*=c,i.top*=c,i.width*=c,i.height*=c),i.sinAngle=Math.sin(-(this.angle||0)*Math.PI/180),i.cosAngle=Math.cos(-(this.angle||0)*Math.PI/180);var b=m.a.calcBoundingBox(i,d);return i.width=b.bb_width,i.height=b.bb_height,i.left=b.bb_left,i.top=b.bb_top,d&&o.a.extend(i,v.default.getFixedPositionCSS(d,i,1)),{dimensions:i}}if(d){var y=this.page.mag.getViewportWidth(this.page.pageViewport);o.a.extend(i,v.default.getFixedPositionCSS(d,i,f.a.normalize(c,"transform",this.page.pageViewport,y,this.mag.viewOpts))),f.a.isOn(this.page.pageViewport,y,this.mag.viewOpts)&&f.a.isCSSZoom()&&(i.zoom=c)}var w={rotate:this.angle?this.angle+"deg":"",scaleX:this.flip_h?-1:1,scaleY:this.flip_v?-1:1};if(d){var S=this.page.mag.getViewportWidth(this.page.pageViewport),O=f.a.normalize(c,"transform",this.page.pageViewport,S,this.mag.viewOpts);w.scaleX*=O,w.scaleY*=O}return Math.abs(w.scaleX-1)<1e-6&&(w.scaleX=""),Math.abs(w.scaleY-1)<1e-6&&(w.scaleY=""),{dimensions:i,transform:w}},applyBoxStyle:function(){var t=this.calcBoxStyle();this.animationObj&&(t=this.animationObj.modifyWidgetPosition(t)),this.$el.css(t.dimensions);var e=o.a.map(t.transform,(function(t,e){return t?e+"("+t+")":""})).join(" ");v.default.applyTransform(this.$el,n.a.trim(e))},calcDistsToPageVisibleBounds:function(){var t,e=this.page.mag.getContainerSizeCached(),i=f.a.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.viewOpts)&&f.a.isCSSZoom()?f.a.getBox(this.$el[0],this.page.scale):this.$el[0].getBoundingClientRect(),n=this.page.mag.isPreview?this.page.mag.$mag_container[0].getBoundingClientRect():{top:0,left:0},r=(i.top+i.height/2-n.top)/this.page.scale,a=(e.height-(i.top+i.height/2-n.top))/this.page.scale,o=(i.left+i.width/2-n.left)/this.page.scale,s=(e.width-(i.left+i.width/2-n.left))/this.page.scale;if(this.fixed_position){var c=this.page.$el[0].getBoundingClientRect(),l=(i.top+i.height/2-c.top)/this.page.scale,u=(c.height-(i.top+i.height/2-c.top))/this.page.scale;t={left:Math.max(0,o),right:Math.max(0,s),top:Math.max(0,Math.min(r,l)),bottom:Math.max(0,Math.min(a,u))}}else{var d=this.page.contentPosition.left/this.page.scale,h=this.page.contentPosition.top/this.page.scale,p=this.x+this.w/2,g=this.y+this.h/2;l=g+h,u=this.page.contentHeight-g+h;t={left:Math.max(0,p+d),right:Math.max(0,this.page.pageWidth-p+d),top:Math.max(0,Math.min(r,l)),bottom:Math.max(0,Math.min(a,u))}}return t},checkLink:function(){var t={};if(this.clickLink){this.clickLink=this.page.mag.matchSameDomainLink(this.clickLink);var e=/^http(s?)\:\/\//i.test(this.clickLink)||/^mailto\:/i.test(this.clickLink)||/^tel\:/i.test(this.clickLink),i=/^__rm_goback$/i.test(this.clickLink),r=this.mailchimpMatcher.test(this.clickLink),a=this.anchorRegexp.test(this.clickLink),s=this.shareRegexp.test(this.clickLink),c=this.clickLink,l=this.clickTarget||"_blank",u=e?"external-link":i?"goback-link":"maglink";if(r&&(u="mailchimp-link"),a&&(u="anchor-link"),s&&(u="share-link"),!e){var d=c;/^back\sto\stop$/i.test(c)&&(d=this.page._id);var h=this.page.mag.getPageNum(d);c=h&&this.page.mag.getPageUri?"/"+this.page.mag.getPageUri(d):"javascript:void(0)";h?l="":c="",d==this.page._id&&(u+=" back-to-top",this.is_global&&(u+=" current"))}if(i&&(c="javascript:void(0)"),r){c="javascript:void(0)";var p=this.clickLink.match(this.mailchimpMatcher)[1];t["data-mailchimp"]=p}if(a){c="javascript:void(0)",t["data-anchor-link-pos"]=this.anchor_link_pos;var f=o.a.findWhere(this.mag.pages,{_id:this.clickPage})||this.page;t["data-page-uri"]=f.uri||f.num}if(s){c="javascript:void(0)";var g=this.clickLink.match(this.shareRegexp);t["data-share-provider"]=g[1],t["data-share-type"]=g[2]}if(0!=c.indexOf("mailto")&&0!=c.indexOf("tel")&&"maglink"!=u||(l=""),c){o.a.extend(t,{class:u,href:c,target:l});var m=this.$el.parent("a");m.length?m.attr(t):(m=Object(n.a)("<a>").attr(t),this.$el.wrap(m)),!e&&RM.screenshot&&(m=this.$el.parent("a")).removeAttr("href")}}},updateWidgetData:function(t,e,i){o.a.extend(this,t,t.params),this.page=e,this.mag=this.page.mag,this.$pageContainer=i||this.page.$content,this.x=this.x||0,this.y=this.y||0},getAnimations:function(){return g.a.normalizeAnimations(this.animation)},getAnimationTriggers:function(t){var e=this.getAnimations().find((function(e){return e.UUID===t}));return g.a.normalizeAnimationTriggers(e&&e.trigger)},isGlobal:function(){return!!this.is_global},isAbove:function(){return!!this.is_above}});e.a=y},RX7I:function(t,e,i){"use strict";i("9GTV");var n=window.soundcite;delete window.soundcite,e.a=n},SF2O:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("rFsW"),a=i("ROz4"),o=i("f3SV"),s=i("3eHG"),c=i("D12m"),l=i("AIVH");function u(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n\t<%var cc = column_count == 1 ? 'auto' : column_count;%>\n\t<div style=\" -webkit-nbsp-mode:normal; -webkit-line-break:after-white-space; white-space:<%=isNotChrome ? 'normal' : 'pre-wrap'%>; column-count:<%=cc%>;-webkit-column-count:<%=cc%> !important;-moz-column-count:<%=cc%>;column-gap:<%=column_gap%>px;-webkit-column-gap:<%=column_gap%>px !important;-moz-column-gap:<%=column_gap%>px;background:<%-bg%>\"><%=text%></div>\n"]);return u=function(){return t},t}var d,h,p,f=(d={},h="template-viewer-widget-text",p=Object(l.a)(u()),h in d?Object.defineProperty(d,h,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[h]=p,d),g=i("RX7I"),m=i("QNiq"),v=i("pFlR"),b=i("I0kf"),y=a.a.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,antialiasRotation:!0,mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){Object(b.a)("viewer.textOverflow")?this.makeBox("text text-overflow-disabled"):this.makeBox("text"),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.bg_color=null==this.bg_color?"ffffff":this.bg_color,this.bg_opacity=null==this.bg_opacity?0:this.bg_opacity,this.column_count=null==this.column_count?1:this.column_count,this.column_gap=null==this.column_gap?16:this.column_gap;var t=[parseInt(this.bg_color.substring(0,2),16),parseInt(this.bg_color.substring(2,4),16),parseInt(this.bg_color.substring(4,6),16)];this.bg_opacity>.99?this.bg="rgb("+t[0]+","+t[1]+","+t[2]+")":this.bg="rgba("+t[0]+","+t[1]+","+t[2]+", "+this.bg_opacity+")",this.text=this.switchTextToViewport(this.text,this.insideHotspot?"default":this.page.pageViewport);var e=this.mag.model.attributes&&this.mag.model.attributes.edit_params&&this.mag.model.attributes.edit_params.paragraph_styles||[],i=n.a.parseHTML(this.text);i=i.map((function(t){var i=Object(n.a)(t),r=i.attr("class");if(r){var a=e.find((function(t){return t._name.toLowerCase()===r.toLowerCase()}));if(a&&a.tag&&"p"!==a.tag&&o.c.AVAILABLE_TEXT_TAGS.includes(a.tag))return Object(n.a)("<"+a.tag+' class="'+r+'" style="'+(i.attr("style")||"")+'" />').append(i.contents())[0].outerHTML}return t.outerHTML})).filter((function(t){return t})),this.text=i.join(""),this.isNotChrome=!(Modernizr.webkit&&!Modernizr.safari&&!Modernizr.safari5)&&this.text.includes("justify");var a=f["template-viewer-widget-text"],c=Object(n.a)(a(this));this.seamlessFontsShow(function(){this.$el.removeClass("fonts-pending")}.bind(this),function(){this.$el.addClass("fonts-pending")}.bind(this)),v.a.isOn(this.mag.getViewportWidth(this.page.pageViewport))&&v.a.isCSSZoom()&&this.transformInsteadOfZoom(c),this.$el.append(c),this.$content=c,this.$el.on(m.a.isDesktop?"mouseenter":"touchstart","a",this.onLinkMouseEnter),this.$el.on(m.a.isDesktop?"mouseleave":"touchend","a",this.onLinkMouseLeave),this.$el.on("click","a",this.onLinkClick),c.addClass("v"+(this.version||1));var l=this;return this.$el.find("a").each((function(){var t=Object(n.a)(this),e=t.attr("data-pid"),i=t.attr("href"),a=decodeURIComponent(i),o=/^back\sto\stop$/i,c=e,u=!1;(o.test(i)||o.test(a))&&(c=l.page._id);var d=i&&l.page.mag.matchSameDomainLink(i);if((d==t.attr("href")||c)&&(d=void 0),c=c||d){var h=l.page.mag.getPageNum(c),p=h&&l.page.mag.getPageUri?"/".concat(l.page.mag.getPageUri(c)):"javascript:void(0)";if(h){t.addClass("maglink").attr("target","");var f=document.querySelector("base");if(RM.common.isDownloadedSource&&f){var g=f.getAttribute("href");"/"!==g&&t.attr("href","".concat(g).concat(p.substring(1))).data("link",p)}else t.attr("href",p)}else t.removeAttr("href");c==l.page._id&&(t.addClass("back-to-top"),e&&(l.is_global||l.hasGlobalParent)&&t.addClass("current"))}else if(/^__rm_goback$/i.test(t.attr("href")))t.attr("href","javascript:void(0)").addClass("goback-link");else if(l.mailchimpMatcher.test(t.attr("href"))){var m=t.attr("href").match(l.mailchimpMatcher)[1];t.attr("href","javascript:void(0)").attr("data-mailchimp",m).addClass("mailchimp-link"),s.a.initMailchimpAPI()}else if(l.shareRegexp.test(t.attr("href"))){var v=t.attr("href").match(l.shareRegexp);t.attr("href","javascript:void(0)").attr("data-share-provider",v[1]).attr("data-share-type",v[2]).addClass("share-link")}else if(l.anchorRegexp.test(t.attr("href"))){t.attr("href","javascript:void(0)").addClass("anchor-link");var b=t.attr("data-page-uri"),y=r.a.findWhere(l.mag.pages,{_id:b})||l.page;t.attr("data-page-uri",y.uri||y.num)}else u=!0,t.addClass("external-link");!t.attr("href")||0!=t.attr("href").indexOf("mailto")&&0!=t.attr("href").indexOf("tel")||t.attr("target",""),!u&&RM.screenshot&&t.removeAttr("href")})),RM.screenshot&&!this.insideHotspot?this.waitForUsedFontsLoad():this.widgetIsLoaded(),this.$el.find("span.soundcite").each((function(t,e){RM.screenshot||g.a.createPlayer(e)})),v.a.isDesktopDefault(this.mag.viewport)&&v.a.isScaleLayout(this.mag.viewOpts)&&v.a.isCSSZoom()&&this.listenTo(this.page,"resize",this.onScaleChange),this},onScaleChange:function(){this.transformInsteadOfZoom(this.$content)},transformInsteadOfZoom:function(t){var e=this.page.scale;v.a.isOnForRatio(this.page.pageViewport,e,this.mag.opts)&&v.a.isCSSZoom()&&t.css({zoom:1/e,transform:"scale(".concat(e,")"),width:"".concat(1/e*100,"%"),height:"".concat(1/e*100,"%"),"transform-origin":"left top"})},isValid:function(){var t=Object(n.a)("<div>").html(this.text).text();return""!=n.a.trim(t)},hasFontsToLoad:function(){return!0},start:function(){return this.started=!0,Modernizr.chrome&&this.$el.addClass("force-repaint-content"),this},stop:function(){return this.started=!1,this.$el.removeClass("force-repaint-content"),RM.screenshot||this.destroyed||!this.rendered||this.$el&&this.$el.find("span.soundcite").each((function(t,e){g.a.pausePlayer(e)})),this},destroy:function(){return this.$el&&this.$el.find("span.soundcite").each((function(t,e){g.a.destroyPlayer(e)})),a.a.prototype.destroy.apply(this,arguments)},waitForUsedFontsLoad:function(){this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.widgetIsLoaded):this.widgetIsLoaded()},checkLink:function(){if(this.is_global||this.hasGlobalParent){var t=this.$el.find("a[data-pid]");t.removeClass("current back-to-top"),this.page&&t.filter('[data-pid="'+this.page._id+'"]').addClass("current back-to-top").removeClass("hovered")}a.a.prototype.checkLink.apply(this,arguments)},onLinkMouseEnter:function(t){var e=Object(n.a)(t.currentTarget).attr("data-uuid");this.$el.find("a[data-uuid='"+e+"']").addClass("hovered")},onLinkMouseLeave:function(t){var e=Object(n.a)(t.currentTarget).attr("data-uuid");this.$el.find("a[data-uuid='"+e+"']").removeClass("hovered")},onLinkClick:function(t){if(2!=t.which&&!t.metaKey&&!t.ctrlKey){var e=Object(n.a)(t.currentTarget),i=n.a.trim(e.attr("href")).match(/\/start\-with\-template\/(\d+)$/i),r=i&&i[1];r&&RM.viewerRouter&&RM.viewerRouter.createMagFromTemplate&&(t.preventDefault(),RM.viewerRouter.createMagFromTemplate("template-link",r))}}}).extend(c.a.prototype);e.default=y},"U/dT":function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("rFsW"),a=i("WoDZ"),o=i("ROz4"),s=i("mkpD"),c=i("0zSa"),l=i("X7yJ"),u=i("11zj"),d=o.a.extend({render:function(){return this.rendered=!0,this.page.on("resize",this.onResize,this),this.template=s.a["template-viewer-widget-background"],this.setElement(this.template({data:this})),this.$el.prependTo(this.page.$fixedBgContainer),this.$picture=this.$(".picture-background"),this.$video=this.$(".video-background"),this.$videoContainer=this.$(".video-container"),this.$slideshow=this.$(".slideshow-container"),this.$slideshowPreload=this.$(".slideshow-preload"),this.picture&&"picture"===this.selectedType?this.renderPicture():r.a.isEmpty(this.video)||"video"!==this.selectedType?this.slideshow&&"slideshow"===this.selectedType?this.renderSlideshow():this.widgetIsLoaded():this.renderVideo(),this},start:function(){return this.started=!0,"video"===this.selectedType&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&(this.videoWidget.start(),this.onResize()),"slideshow"!==this.selectedType||RM.screenshot||!this.rendered||this.destroyed||!this.slideshowWidget||this.slideshowWidget.isAnimationRunning||this.slideshowWidget.startAnimationLoop(),this},stop:function(){return this.started=!1,"video"===this.selectedType&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&this.videoWidget.stop(),"slideshow"===this.selectedType&&!RM.screenshot&&this.rendered&&!this.destroyed&&this.slideshowWidget&&this.slideshowWidget.isAnimationRunning&&this.slideshowWidget.stopAnimationLoop(),this},destroy:function(){return this.page.off("resize",this.onResize,this),"video"===this.selectedType&&(this.videoWidget&&this.videoWidget.destroy(),this.videoWidget=null),"slideshow"===this.selectedType&&(this.slideshowWidget&&this.slideshowWidget.destroy(),this.slideshowWidget=null),o.a.prototype.destroy.apply(this,arguments)},hasVideoBG:function(){return!(RM.screenshot||"video"!==this.selectedType||!this.video||!this.video.url)},onResize:function(){!this.destroyed&&this.$videoContainer&&this.video&&a.a.setVideoPosition({mag:this.page.mag,$container:this.$videoContainer,$media:this.$videoContainer.children(),provider:this.video.provider_name,aspect_poster:this.video.aspect_poster||this.videoWidget&&this.videoWidget.aspect_poster,aspect_real:this.video.aspect_real,controls_remove:!0})},renderPicture:function(){if(this.picture){var t=l.a.useLambdaUrl(this.picture)||l.a.useLambdaUrlOldProjects(this.picture,"background")?l.a.getLambdaUrl(this.picture):this.picture.finalUrl||this.picture.effectUrl||this.picture.unscaledOptimizedUrl||this.picture.url;Object(n.a)("<img/>").on("load",r.a.bind((function(){this.$picture.css({"background-image":"url("+t+")"}),RM.screenshot?setTimeout(this.widgetIsLoaded,200):this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded).attr("src",t)}else this.widgetIsLoaded()},renderSlideshow:function(){this.slideshowWidget=new c.a({data:this.slideshow,container:this.$slideshow,preloadContainer:this.$slideshowPreload,name:this.page.cid}),RM.screenshot?(this.slideshowWidget.render(),this.slideshowWidget.on("loaded",function(){this.widgetIsLoaded()}.bind(this))):(this.slideshowWidget.render(!this.page.isCurrent()),this.widgetIsLoaded())},renderVideo:function(){this.video.id=this.id,this.video.mute=this.mute,this.video.loop=this.loop,this.video.controls=!1,this.videoWidget=new u.default(this.video,this.page,this.$videoContainer),this.videoWidget.on("loaded",r.a.bind((function(){this.widgetIsLoaded(),this.onResize()}),this)),this.videoWidget.on("playStarted",r.a.bind((function(){this.trigger("videoBGStarted")}),this)),this.videoWidget.render()}});e.default=d},WoDZ:function(t,e,i){"use strict";var n=i("xi34"),r=i("OTSC"),a={getVideoAspectFromPoster:function(t,e){var i={abort:function(){d.onload=null,d.onerror=null}},r={aspect_poster:null,aspect_real:null};if(!t)return e(r),i;var a,o,s,c,l,u,d=new Image;return d.onload=function(){l=d.width,u=d.height,s=200,c=Math.floor(s*(u/l)),a=Object(n.a)('<canvas id="qqq" width="200" height="'+c+'"></canvas>').css("visibility","hidden").appendTo("body"),(o=a[0].getContext("2d")).drawImage(d,0,0,s,c);var t,i,h=o.getImageData(0,0,s,c),p=0,f=0,g=0,m=0;for(i=0;i<=c/2;i++){if(w(i,"row").isContrast){(i<=1||w(i-1,"row").isBlack||w(i-2,"row").isBlack)&&(p=i);break}}for(i=c-1;i>c/2;i--){if(w(i,"row").isContrast){(i>=c-2||w(i+1,"row").isBlack||w(i+2,"row").isBlack)&&(f=c-1-i);break}}var v=Math.max(p,f),b=0;if(!v){for(t=0;t<=100;t++){if(w(t,"column").isContrast){(t<=1||w(t-1,"column").isBlack||w(t-2,"column").isBlack)&&(g=t);break}}for(t=199;t>100;t--){if(w(t,"column").isContrast){(t>=198||w(t+1,"column").isBlack||w(t+2,"column").isBlack)&&(m=199-t);break}}b=Math.max(m,g)}v>c/3&&(v=0),b>s/3&&(b=0);var y=l/u;function w(t,e){var i,n,r,a,o,l="row"==e?s:c,u=0,d=0;for(i=0;i<l;i++)n=("row"==e?t*s+i:i*s+t)<<2,u+=(r=h.data[n])+(a=h.data[n+1])+(o=h.data[n+2]),r<20&&a<20&&o<20&&d++;return{isBlack:(u/=3*l)<5&&l-d<3,isContrast:d<l/2}}v?y=s/(c-2*v):b&&(y=(s-2*b)/c),a.remove(),r.aspect_poster=l/u,r.aspect_real=y,e(r)},d.onerror=function(){e(r)},d.src="/api/proxy/?url="+encodeURIComponent(t),i},setVideoPosition:function(t){if(t.aspect_poster&&t.$media&&t.$media.length){var e=t.$container.css("width"),i=t.$container.css("height");if(/px/.test(e+i))e=parseInt(e),i=parseInt(i);else{if(!t.mag)return;var n=t.mag.getContainerSizeCached();e=n.width,i=n.height}var r,a,o=t.aspect_poster,s=t.aspect_real||o,c=t.controls_remove?5:0,l=e+2*c,u=i+2*c,d=l,h=u;if(o)l/u>s?a=(r=l)/s:r=(a=u)*s,o<s?h=(d=r)/o:d=(h=a)*o;if("vimeo"==t.provider.toLowerCase()&&t.controls_remove){var p=50-(h-u)/2,f=46-(d-l)/2;if(p>0||f>0){var g=(h+2*p)/h,m=(d+2*f)/d,v=Math.max(g,m);d*=v,h*=v}}if("youtube"==t.provider.toLowerCase()&&t.controls_remove){var b=103-(h-u)/2;b>0&&(d=(h+=2*b)*o)}var y=-c-(d-l)/2,w=-c-(h-u)/2;t.$media.css({left:y,top:w,width:d,height:h})}},getHighResVideoThumbnail:function(t){if(!t.provider||!t.thumbnail_url)return Promise.resolve(t.thumbnail_url||"");function e(t,e){return t.replace(/(\/)(\w*default)(\.\w+$)/i,"$1"+e+"$3")}function i(t,e){return t.replace(/(\/)(\w+_)(\d+x\d+|\d+)(\.\w+$)/i,"$1$2"+e+"$4")}var n,r=[];switch(t.provider.toLowerCase()){case"vimeo":r.push({url:i(t.thumbnail_url,"1280"),width:1280}),r.push({url:i(t.thumbnail_url,"640"),width:640});break;case"youtube":r.push({url:e(t.thumbnail_url,"maxresdefault"),width:1280}),r.push({url:e(t.thumbnail_url,"sddefault"),width:640})}return(n=r)&&n.length?new window.Promise((function(e){var i=0;!function e(r,a,o){(function(t,e){var i=new Image,n=new window.Promise((function(t){function n(){i.removeEventListener("load",r),i.removeEventListener("error",a)}function r(){t(e<=i.naturalWidth),n()}function a(){t(!1),n()}i.addEventListener("load",r),i.addEventListener("error",a)}));return i.src=t,n})(r,a).then((function(a){a?o(r):++i<n.length?e(n[i].url,n[i].width,o):o(t.thumbnail_url)}))}(n[i].url,n[i].width,e)})):Promise.resolve(t.thumbnail_url)},getEmbedData:function(t,e,i){return n.a.ajax({type:"GET",url:"/api/proxy/",dataType:"json",data:{url:/oembed/i.test(t)?t:this.getEmbedUrl(t)},success:function(t){t.url=t.url&&r.default.toHttps(t.url),t.thumbnail_url=t.thumbnail_url&&r.default.toHttps(t.thumbnail_url),"function"==typeof e&&e(t)},error:function(t,e,n){"abort"!==e&&"function"==typeof i&&i(t,e,n)},global:!1})},getEmbedUrl:function(t){if(this.isVimeo(t))return"https://vimeo.com/api/oembed.json?url="+encodeURIComponent(t);var e=a.getYoutubeIdFromUrl(t);return e?"https://www.youtube.com/oembed?format=json&url="+encodeURIComponent("https://www.youtube.com/watch?v="+e):""},getYoutubeIdFromUrl:function(t){var e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);if(e&&11===e[2].length)return e[2];return(e=t.match(/.*(youtu.*\&v=)([^#\&\?]*).*/))&&11===e[2].length?e[2]:null},getVimeoIdFromUrl:function(t){var e=t.match(/(video\/)(\w+)(_\d+x\d+|_\d+)(\.\w+$)/i);return e&&e[2]?e[2]:null},getVideoProvider:function(t){return this.isVimeo(t)?"Vimeo":this.isYoutube(t)?"YouTube":""},isVimeo:function(t){return/vimeo\.com\/.+/.test(t)},isYoutube:function(t){return!!this.getYoutubeIdFromUrl(t)}};e.a=a},Wwwp:function(t,e,i){"use strict";i.d(e,"c",(function(){return v})),i.d(e,"b",(function(){return b})),i.d(e,"a",(function(){return w}));var n=i("h6tn"),r=i("ICos"),a=i("v92f"),o=i("8Tds"),s=i("f3SV"),c=i("D12m"),l=i("M7m1"),u=i("w5C2");function d(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){f(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var g=function(t,e){if(!t)return"";var i="number"==typeof e?e:100;return"".concat(t).concat(Object(r.a)(i))},m=function(t,e){return c.a.prototype.switchTextToViewport(t,e)},v=function(t){var e=p({},t),i=e.text,n=Object(l.a)({str:i}),r=n.blocks,s=n.styles,c=n.entityMap,u=n.blocksMeta,d=r.map((function(t){return t.key})),h=Object.values(c).map((function(t){return t.data.id})),f={blocks:r,styles:s,entityMap:c,blocksMeta:u};if(e.viewport_phone_portrait){var v=m(i,a.b.PhonePortrait),b=Object(l.a)({str:v,blockKeys:d,entityKeys:h}),y=b.styles,w=b.blocksMeta,S=b.entityMap;f.viewport_phone_portrait={blocksMeta:w,entityMap:S,styles:y,bgColor:g(e.viewport_phone_portrait.bg_color,100*e.viewport_phone_portrait.bg_opacity),columns:{count:e.viewport_phone_portrait.column_count,gap:e.viewport_phone_portrait.column_gap}},e.viewport_phone_portrait=p(p({},e.viewport_phone_portrait),f.viewport_phone_portrait),e.viewport_phone_portrait.hasOwnProperty("hidden")||(e.viewport_phone_portrait.hidden=!1),delete e.viewport_phone_portrait.column_count,delete e.viewport_phone_portrait.column_gap,delete e.viewport_phone_portrait.bg_color,delete e.viewport_phone_portrait.bg_opacity}if(e.viewport_tablet_portrait){var O=m(i,a.b.TabletPortrait),k=Object(l.a)({str:O,blockKeys:d,entityKeys:h}),P=k.styles,x=k.blocksMeta,C=k.entityMap;f.viewport_tablet_portrait={blocksMeta:x,entityMap:C,styles:P,bgColor:g(e.viewport_tablet_portrait.bg_color,100*e.viewport_tablet_portrait.bg_opacity),columns:{count:e.viewport_tablet_portrait.column_count,gap:e.viewport_tablet_portrait.column_gap}},e.viewport_tablet_portrait=p(p({},e.viewport_tablet_portrait),f.viewport_tablet_portrait),e.viewport_tablet_portrait.hasOwnProperty("hidden")||(e.viewport_tablet_portrait.hidden=!1),delete e.viewport_tablet_portrait.column_count,delete e.viewport_tablet_portrait.column_gap,delete e.viewport_tablet_portrait.bg_color,delete e.viewport_tablet_portrait.bg_opacity}return e=p(p({},e),{},{autosize:e.autosize,verticalAlign:o.d.top,blocks:f.blocks,styles:f.styles,entityMap:f.entityMap,blocksMeta:f.blocksMeta,bgColor:g(e.bg_color,100*e.bg_opacity),columns:{count:e.column_count,gap:e.column_gap},version:3,column_count:void 0,column_gap:void 0,bg_color:void 0,bg_opacity:void 0,text:void 0})},b=function(t){var e=["none",0,"baseline"],i=["opacity"];return t.map((function(t){var a=t._name,o=t._caption,c=t.tag,l=(t._sort,d(t,["_name","_caption","tag","_sort"])),h=Object.keys(l).reduce((function(t,a){var o=Object(n.a)(a),s=l[a];if(i.includes(a)||e.includes(s))return p({},t);if("textAlign"===o&&"start"===s)s="left";else if("color"===o){var c=l.opacity>0?parseFloat((l.opacity/100).toFixed(2)):1,d=Object(r.b)(s,c);s=Object(r.h)(d)}else o.includes("padding")?s=parseInt(s):"fontWeight"===o&&"normal"===s&&(s=u.b.fontWeight);return p(p({},t),{},f({},o,s))}),{});return h.paddingLeft=h.paddingLeft||0,h.paddingRight=h.paddingRight||0,h.paddingTop=h.paddingTop||0,h.paddingBottom=h.paddingBottom||0,{name:a,label:o,tag:c||s.c.AVAILABLE_TEXT_TAGS[0],cssProperties:h}}))},y=function(t,e){var i=function(t){return e?"".concat(e,"-").concat(t):t},n=void 0!==t[i("color")]?t[i("color")]:t.color,r=void 0!==t[i("opacity")]?t[i("opacity")]:t.opacity,a=void 0!==t[i("u-color")]?t[i("u-color")]:t["u-color"],s=void 0!==t[i("u-opacity")]?t[i("u-opacity")]:t["u-opacity"],c=void 0!==t[i("u-size")]?t[i("u-size")]:t["u-size"],l=void 0!==t[i("u-offset")]?t[i("u-offset")]:t["u-offset"],u=void 0!==t[i("u-style")]?t[i("u-style")]:t["u-style"];return{textColor:g(String("inherit"===n?t.color:n),Number("inherit"===r?t.opacity:r)),color:g(String("inherit"===a?t["u-color"]:a),Number("inherit"===s?t["u-opacity"]:s)),size:Number("inherit"===c?t["u-size"]:c),padding:Number("inherit"===l?t["u-offset"]:l),type:function(t){switch(t){case"none":return o.a.None;case"dotted":return o.a.Dotted;case"dashed":return o.a.Dashed;case"solid":return o.a.Solid}}(u)}},w=function(t){return t.map((function(t){return{name:t._name,label:t._caption,style:{link:y(t),hover:y(t,"hover"),current:y(t,"current")}}}))}},X7yJ:function(t,e,i){"use strict";var n=i("f3SV"),r=i("mkcP");function a(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l=Boolean(window&&window.viewerConfig&&window.viewerConfig.homepageRewrite),u=Boolean(window&&window.viewerConfig&&window.viewerConfig.isDownloadedSource)&&!l,d=function(t){return n.c.allowedLambdaExt.includes(t)},h=function(t){return Boolean(!u&&t&&t.lambdaUrl&&d(t.type))},p=function(t,e){switch(e){case"video":case"slideshow":return Boolean(!u&&t&&t.url&&d(t.type));case"background":return Boolean(!u&&t&&(t.url||t.finalUrl)&&d(t.type));default:return Boolean(!u&&t&&(t.unscaledUrl||t.unscaledOptimizedUrl)&&d(t.type))}},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,i=t.height,r=t.cropX,a=t.cropY,o=t.cropW,s=t.cropH,c=t.originalW,l=void 0===c?9999:c,u=t.originalH,d=void 0===u?9999:u,h=t.quality,p=t.ext,f=t.scale,g=t.animationScale,m=t.isStretched,v=t.dpr,b=t.lossless,y=t.nearLossless,w=t.fit,S=void 0===w?"none":w,O=window.devicePixelRatio||n.c.minDpr,k=v||(O<n.c.minDpr?n.c.minDpr:O),P=[],x=Math.max(f||1,1),C=g||1;if(!m&&e){var j=Math.min(Math.round(e*k*x*C),l);j<l&&P.push("w=".concat(j))}if(!m&&!e&&i){var _=Math.min(Math.round(i*k*x*C),d);_<d&&P.push("h=".concat(_))}if(h&&P.push("q=".concat(h)),p&&P.push("e=".concat(p)),b&&P.push("ll=true"),y&&P.push("nll=true"),"auto"===S&&e&&i){var T=Math.min(Math.round(i*k*x*C),d);T<d&&P.push("h=".concat(T))}return void 0!==r&&void 0!==a&&o&&s&&(o!==l||s!==d)&&(P.push("cX=".concat(r)),P.push("cY=".concat(a)),P.push("cW=".concat(o)),P.push("cH=".concat(s))),P.length?"?".concat(P.join("&")):""},g=function(t){return t?"".concat(t.lambdaUrl||function(t){if(!t)return"";try{var e=new URL(t.unscaledUrl||t.url||t.unscaledOptimizedUrl||t.finalUrl);return"".concat(n.c.readymag_lambda_host).concat(e.pathname)}catch(t){return""}}(t)):""},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";var i=s({},e);return p(t)&&!h(t)&&(i.cropX=void 0,i.cropY=void 0,i.cropW=e.originalW,i.cropH=e.originalH),r.a.isSupported("webp")&&(i.ext="webp","png"===t.type&&(i.nearLossless=!0)),"".concat(g(t)).concat(f(i))};e.a={allowedLambdaExt:d,useLambdaUrl:h,useLambdaUrlOldProjects:p,useLqipUrl:function(t){return Boolean(t&&t.lqipUrl||h(t))},getLambdaUrl:m,getOriginalLambdaUrl:g,getLambdaParams:f,getSrcset:function(t,e){var i=e.dprSet,n=void 0===i?[2,3]:i,r=a(e,["dprSet"]),o=[];(n||[]).forEach((function(e){r.dpr=e;var i=m(t,r);i!==o[o.length-1]&&o.push({dpr:e,url:i})}));var s=o.map((function(t){return"".concat(t.url," ").concat(t.dpr,"x")}));return s.length>1?s.join(", "):void 0},getLqipUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";if(t.lqipUrl)return t.lqipUrl;var i=s({dpr:1,width:n.c.lqipWidth,quality:n.c.lqipQuality},e);return m(t,i)},getThumbnailUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";var i=s({width:n.c.THUMB_SIZE,height:n.c.THUMB_SIZE,quality:n.c.THUMB_QUALITY,fit:"auto"},e);return m(t,i)}}},Ylwp:function(t,e,i){var n={"./":["gdoY",0,3,2,1,4],"./add-to-cart":["bJpI",17],"./add-to-cart.js":["bJpI",17],"./audio":["lEnl",1],"./audio.js":["lEnl",1],"./background":["U/dT"],"./background.js":["U/dT"],"./button":["KOTZ"],"./button.js":["KOTZ"],"./e-commerce-cart":["yERL",20],"./e-commerce-cart.js":["yERL",20],"./facebook":["ARm2",15],"./facebook.js":["ARm2",15],"./form":["mrVI",19],"./form.js":["mrVI",19],"./gmaps":["RO0k",21],"./gmaps.js":["RO0k",21],"./hotspot":["uHXJ",12],"./hotspot.js":["uHXJ",12],"./iframe":["98k/",3,18],"./iframe.js":["98k/",3,18],"./index":["gdoY",0,3,2,1,4],"./index.js":["gdoY",0,3,2,1,4],"./loader":["hoWO"],"./loader.ts":["hoWO"],"./picture":["oBKw"],"./picture.js":["oBKw"],"./rm-footer":["rJ9t",0,14],"./rm-footer.js":["rJ9t",0,14],"./rm-header":["B/vB",0,8],"./rm-header.js":["B/vB",0,8],"./shape":["p094"],"./shape.js":["p094"],"./shots":["FKU0",11],"./shots.tsx":["FKU0",11],"./slideshow":["Cf19",2],"./slideshow.js":["Cf19",2],"./text":["FJrq"],"./text-v2":["SF2O"],"./text-v2.js":["SF2O"],"./text-v3":["O5Jf"],"./text-v3.tsx":["O5Jf"],"./text.ts":["FJrq"],"./twitter":["TLUl",16],"./twitter.js":["TLUl",16],"./video":["11zj"],"./video.js":["11zj"]};function r(t){if(!i.o(n,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],r=e[0];return Promise.all(e.slice(1).map(i.e)).then((function(){return i(r)}))}r.keys=function(){return Object.keys(n)},r.id="Ylwp",t.exports=r},YryV:function(t,e,i){"use strict";var n,r,a,o=i("AIVH");function s(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n  <div id="cart-sidebar" class="cart-sidebar<% if (isViewer) { %> cart-in-viewer<% } %><% if (isMobile) { %> cart-is-mobile<% } %>">\n    <div class="close-button" data-alt="Close cart" data-alt-pos="bottom" data-alt-offset="9">\n      <div class="line-1"></div>\n      <div class="line-3"></div>\n    </div>\n\n    <div class="text-size-calc-container"></div>\n\n    <div class="cart-sidebar-wrapper">\n      <div class="cart-sidebar-tabs">\n\n        <div class="cart-sidebar-tab tab-items active">\n          <div class="sidebar-header">\n            <div class="sidebar-title">\n              <input\n                  type="text"\n                  class="cart-text-input cart-title-input"\n                  name="title"\n                  placeholder="Cart"\n                  maxlength="32"\n                  translate="no"\n                  autocomplete="off"\n                  autocorrect="off"\n                  spellcheck="false"\n                  <% if (isViewer) { %>readonly<% } %>\n                />\n            </div>\n            <div class="sidebar-settings-container"></div>\n          </div>\n\n          <div class="sidebar-body">\n            <div class="cart-items-list"></div>\n            <div class="sidebar-btn сheck-out-btn" data-tab="tab-inputs" aria-labelledby="cart-sidebar-checkout-button">\n              <input\n                type="text"\n                class="cart-text-input cart-checkout-input"\n                name="checkout"\n                placeholder="Check out"\n                maxlength="32"\n                translate="no"\n                autoComplete="off"\n                autocorrect="off"\n                spellcheck="false"\n                <% if (isViewer) { %>readonly<% } %>\n              />\n              <img class="btn-icon-right svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-right-arrow.svg" />\n            </div>\n            <div class="empty-cart">\n              <div class="empty-cart-title">\n                <input\n                  type="text"\n                  class="cart-text-input empty-cart-title-input"\n                  name="emptyСartTitle"\n                  placeholder="Cart is empty"\n                  maxlength="32"\n                  translate="no"\n                  autoComplete="off"\n                  autocorrect="off"\n                  spellcheck="false"\n                  <% if (isViewer) { %>readonly<% } %>\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="cart-sidebar-tab tab-inputs">\n          <div class="sidebar-header">\n            <div class="sidebar-btn go-back" data-tab="tab-items">\n                <img class="btn-icon-center svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-left-arrow.svg" />\n            </div>\n            <div class="sidebar-btn go-forward" data-tab="tab-order">\n              Summary\n              <img class="btn-icon-right svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-right-arrow.svg" />\n            </div>\n          </div>\n          <div class="sidebar-body">\n            <div class="order-details-form shipping-form">\n              <div class="form-title">Shipping address</div>\n              <div class="form-row">\n                <div class="form-error country-error hidden"></div>\n                <div class="countries-select"></div>\n              </div>\n              <div class="form-row">\n                <div class="form-error name-error hidden"></div>\n                <input type="text" class="form-input name-input" name="name" placeholder="Customer name" />\n              </div>\n              <div class="form-row">\n                <div class="form-error line1-error hidden"></div>\n                <input type="text" class="form-input line1-input" name="line1" placeholder="Address" />\n              </div>\n              <div class="form-row">\n                <input type="text" class="form-input line2-input" name="line2" placeholder="Apt, unit, building, floor…" />\n              </div>\n              <div class="form-row">\n                <div class="form-error city-error hidden"></div>\n                <input type="text" class="form-input city-input" name="city" placeholder="City" />\n              </div>\n              <div class="form-row">\n                <input type="text" class="form-input state-input" name="state" placeholder="State/Region" />\n              </div>\n              <div class="form-row">\n                <input type="text" class="form-input postal_code-input" name="postal_code" placeholder="Zip/Postal code" />\n              </div>\n              <div class="form-row">\n                <div class="form-error phone-error hidden"></div>\n                <input type="text" class="form-input phone-input" name="phone" placeholder="Phone" />\n              </div>\n            </div>\n            <div class="order-details-form">\n              <div class="form-title">Email</div>\n              <div class="form-row">\n                <div class="form-error email-error hidden"></div>\n                <input type="text" class="form-input email-input" name="email" placeholder="address@sample.com" />\n              </div>\n            </div>\n            <div class="order-details-form">\n              <div class="form-title">Note</div>\n              <div class="form-row">\n                <textarea class="form-input note-input" rows="4" name="note" placeholder="Add shipping details"></textarea>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="cart-sidebar-tab tab-order">\n          <div class="sidebar-header">\n            <div class="sidebar-btn go-back" data-tab="tab-inputs">\n                <img class="btn-icon-center svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-left-arrow.svg" />\n            </div>\n            <div class="sidebar-btn go-forward cart-pay-btn hidden" data-tab="tab-checkout">\n              Pay\n              <img class="btn-icon-right svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-right-arrow.svg" />\n            </div>\n            <div class="preloader">\n              <div class="svg-wrap">\n              <svg width="14px" height="26px" viewBox="0 0 14 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n                      <g transform="translate(-1094.000000, -34.000000)" fill-rule="nonzero" stroke="#FFFFFF" stroke-width="2">\n                          <g transform="translate(1070.000000, 22.000000)">\n                              <path d="M25,37 C31.627417,37 37,31.627417 37,25 C37,18.372583 31.627417,13 25,13" id="Path"></path>\n                          </g>\n                      </g>\n                  </g>\n              </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class="sidebar-body">\n            <div class="order-details">\n              <div class="order-items-block order-row">\n                <div class="order-title-row summary-title">Order summary</div>\n                <div class="order-items-list order-info-block"></div>\n              </div>\n              <div class="order-id-container order-row">\n                  <div class="order-title-row">Order ID</div>\n                  <div class="order-id order-info-block"></div>\n              </div>\n              <div class="shipping-details">\n                <div class="shipping-address order-row">\n                  <div class="order-title-row">Shipping address</div>\n                  <div class="order-shipping-address order-info-block"></div>\n                </div>\n                <div class="shipping-method order-row">\n                    <div class="order-title-row">Shipping method</div>\n                    <div class="order-shipping-method order-info-block"></div>\n                </div>\n              </div>\n              <div class="shipping-tax-size order-row">\n                <div class="order-title-row">Order tax</div>\n                <div class="order-tax order-info-block"></div>\n              </div>\n              <div class="shipping-email order-row hidden">\n                    <div class="order-title-row">Email</div>\n                    <div class="order-shipping-email order-info-block"></div>\n              </div>\n              <div class="shipping-phone order-row hidden">\n                    <div class="order-title-row">Phone</div>\n                    <div class="order-shipping-phone order-info-block"></div>\n              </div>\n              <div class="shipping-total-price order-row">\n                <div class="order-title-row">Grand total</div>\n                <div class="order-total-price order-info-block"></div>\n              </div>\n            </div>\n          </div>\n          <div class="order-error hidden">\n            <div class="order-error-container">\n              <div class="order-error-title">\n                Error\n              </div>\n              <div class="order-error-message">\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="cart-sidebar-tab tab-checkout">\n          <div class="sidebar-header">\n            <div class="sidebar-btn go-back" data-tab="tab-order">\n                <img class="btn-icon-center svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-left-arrow.svg" />\n            </div>\n            <div class="preloader">\n              <div class="svg-wrap">\n              <svg width="14px" height="26px" viewBox="0 0 14 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n                      <g transform="translate(-1094.000000, -34.000000)" fill-rule="nonzero" stroke="#FFFFFF" stroke-width="2">\n                          <g transform="translate(1070.000000, 22.000000)">\n                              <path d="M25,37 C31.627417,37 37,31.627417 37,25 C37,18.372583 31.627417,13 25,13" id="Path"></path>\n                          </g>\n                      </g>\n                  </g>\n              </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class="sidebar-body">\n            <div class="payment-title">Pay with card</div>\n            <form action="/charge" method="post" id="payment-form">\n              <div class="form-row">\n                <div class="form-error card-number-error hidden"></div>\n                <div id="card-number-element" class="payment-input">\n                </div>\n              </div>\n              <div class="form-row">\n                <div class="form-error card-expiry-error hidden"></div>\n                <div id="card-expiry-element" class="payment-input">\n                </div>\n              </div>\n              <div class="form-row">\n                <div class="form-error card-name-error hidden"></div>\n                <input type="text" class="payment-input card-name-input hidden" name="name" placeholder="Name on card" />\n              </div>\n              <div class="form-row">\n                <div class="form-error card-cvc-error hidden"></div>\n                <div id="card-cvc-element" class="payment-input">\n                </div>\n              </div>\n\n              \x3c!-- Used to display Element errors. --\x3e\n              <div id="card-number-errors" role="alert"></div>\n              <div id="card-expiry-errors" role="alert"></div>\n              <div id="card-name-errors" role="alert"></div>\n              <div id="card-cvc-errors" role="alert"></div>\n\n              <div id="payment-failed-msg">\n                <div class="failed-msg-content">\n                  <div class="error-icon">\n                    <svg width="4px" height="27px" viewBox="0 0 4 27" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                          <g transform="translate(-1010.000000, -261.000000)" fill="#FFFFFF" fill-rule="nonzero">\n                              <g transform="translate(1010.000000, 261.000000)">\n                                  <g>\n                                      <path d="M2,0 C3.05322259,-1.93473851e-16 3.90702819,0.853805605 3.90702819,1.90702819 C3.90702819,1.93727706 3.90630849,1.96752165 3.9048697,1.99773628 L3.04535404,20.0475651 C3.01996411,20.5807536 2.58027854,21 2.0464859,21 L1.9535141,21 C1.41972146,21 0.980035886,20.5807536 0.954645959,20.0475651 L0.0951302988,1.99773628 C0.045033609,0.945705789 0.857261433,0.0522551831 1.90929192,0.00215849327 C1.93950655,0.000719701408 1.96975113,5.55662667e-18 2,0 Z"></path>\n                                      <circle cx="2" cy="25" r="2"></circle>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                    </svg>\n                  </div>\n                  <div class="error-message"></div>\n                </div>\n              </div>\n\n              <button class="sidebar-btn cart-payment-btn">Pay</button>\n            </form>\n            <div id="payment-request-button"></div>\n            <div class="cart-cancel-btn">Cancel order</div>\n          </div>\n          <div id="payment-success-msg">\n            <div class="success-msg-content">\n              <div class="title">Payment completed</div>\n              <div class="description">Check your email for details</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n']);return s=function(){return t},t}e.a=(n={},r="template-viewer-cart-sidebar",a=Object(o.a)(s()),r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n)},a68n:function(t,e,i){"use strict";i.d(e,"i",(function(){return h})),i.d(e,"f",(function(){return g})),i.d(e,"a",(function(){return m})),i.d(e,"d",(function(){return v})),i.d(e,"c",(function(){return b})),i.d(e,"b",(function(){return y})),i.d(e,"g",(function(){return w})),i.d(e,"e",(function(){return S})),i.d(e,"h",(function(){return O}));var n=i("/5Qy"),r=i("ICos"),a=i("fueH"),o=i("Jzj8");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function u(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h="textStyle",p=["fontSize","lineHeight","letterSpacing","textIndent","paddingLeft","paddingTop","paddingRight","paddingBottom","width"],f=function(t,e){if(e){if(p.includes(t))return"".concat(e,"px");if("color"===t){var i=Object(r.f)(String(e)),n=i.r,a=i.g,o=i.b,s=i.a;return"rgba(".concat(n,", ").concat(a,", ").concat(o,", ").concat(s,")")}return e}},g=function(t,e){if(e){if(p.includes(t))return parseInt(String(e));if("color"===t){var i=Object(r.i)(String(e)),n=i.r,a=i.g,o=i.b;return Object(r.j)({r:n,g:a,b:o,a:1})}return e}},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object.keys(t).reduce((function(i,r){return t[r]?"".concat(i).concat(Object(n.a)(r),": ").concat(f(r,t[r])).concat(e?" !important":"","; "):i}),"")},v=function(){var t=Object(o.d)()||window.ServerData&&window.ServerData.mags&&window.ServerData.mags.mag&&window.ServerData.mags.mag.textStyles;return t?[].concat(u(t.project||[]),u(t.global||[])).reduce((function(t,e){return c(c({},t),{},l({},e.name,{element:e.tag}))}),{}):{}},b=function(t,e){return t?e?parseFloat(String(t)):parseInt(String(t)):0},y=function(t){var e=t.editorState,i=t.block,n=a.a.getBlockData({editorState:e,block:i,key:h});return"string"==typeof n?n:""},w=function(t){var e=t.block,i=t.editorState,n=t.styleName;return a.a.setBlockData({editorState:i,block:e,key:h,value:n})},S=function(t){if(t&&t.cssProperties){var e=t.cssProperties,i=e.paddingTop,n=e.paddingLeft,r=e.paddingRight,a=e.paddingBottom,o={left:void 0!==n?b(n):0,top:void 0!==i?b(i):0,right:void 0!==r?b(r):0,bottom:void 0!==a?b(a):0};if(o.left||o.top||o.right||o.bottom)return o}},O=function(t){var e=t.style,i=t.currentStyle,n=t.editorState,r=a.a.getSelectedBlocks(n),o=n.getCurrentContent();return r.reduce((function(t,n){var r=o.getBlockForKey(n),s=a.a.clearStylesFromBlock({editorState:t,block:r});return null===e?(s=w({editorState:s,block:r,styleName:void 0}),s=a.a.setDefaultStyles(s)):e.name!==i&&(s=w({editorState:s,block:r,styleName:e.name})),s}),n)}},avvt:function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),a=i.n(r),o=i("rFsW"),s=i("AIVH");function c(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\n\t<div class="mag">\n\t\t<div class="mag-pages-container">\n\t\t\t<div class="container disable-transitions">\n\n\t\t\t\t<div class="blackout"></div>\n\t\t\t</div>\n\t\t\t<div class="above-pages-container"></div>\n\t\t</div>\n\n\t\t<% if (hasStandaloneBottomArrow) {%>\n\t\t\t<div class="navigation-arrow bottom offscreen"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div></div>\n\t\t<%}%>\n\n\n\t\t<% if (isPreview) {%>\n\t\t\t<div class="mag-pages-viewport-device"></div>\n\t\t<%}%>\n\t</div>\n\n']);return c=function(){return t},t}var l,u,d,h=(l={},u="template-viewer-mag",d=Object(s.a)(c()),u in l?Object.defineProperty(l,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[u]=d,l),p=i("0sUV"),f=i("OTSC"),g=i("f3SV"),m=i("DqjY"),v=i("3eHG"),b=i("5ta/"),y=i("rVpV"),w=i("roQd"),S=i("pFlR"),O=i("38JW"),k=i("v92f"),P=i("hoWO"),x=i("HwMs"),C=i("ubkq"),j=i.n(C),_=i("QNiq"),T=i("I0kf"),I=i("phNm"),M=i("F0AZ"),E=i("JTli");function D(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\n\t<div class="navigation">\n\t\t<div class="navigation-arrow left offscreen"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div></div>\n\t\t<div class="navigation-arrow right offscreen"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div></div>\n\t\t<div class="navigation-arrow bottom offscreen"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div></div>\n\t</div>\n\n']);return D=function(){return t},t}var A=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"template-viewer-navigation",Object(s.a)(D())),$=i("Vxjr"),L=a.a.View.extend({ARROWS_SHOW_DELAY:1e3,BOTTOM_SHOW_DELAY:1e3,BOTTOM_HIDE_DELAY:0,template:A["template-viewer-navigation"],events:{"click .navigation-arrow.left":"goPrevPage","click .navigation-arrow.right":"goNextPage","click .navigation-arrow.bottom":"scrollCurrentPage"},initialize:function(t){return o.a.bindAll(this),o.a.extend(this,t),this.updateScaleState.__debounced=o.a.debounce(this.updateScaleState,100),this},render:function(){return this.setElement(this.template({icons:{sprite:Object($.findImagePath)("./common/navigation/sprite".concat($.is2X?"@2x":"",".png"))}})),this.$el.appendTo(this.$container),this.$prev=this.$(".navigation-arrow.left"),this.$next=this.$(".navigation-arrow.right"),this.$bottom=this.$(".navigation-arrow.bottom"),o.a.delay(o.a.bind((function(){this.$prev.removeClass("offscreen"),this.$next.removeClass("offscreen")}),this),this.ARROWS_SHOW_DELAY),this.listenTo(this.mag,"pageChanged",this.onPageChange),this.listenTo(this.mag,"keypress-"+n.a.keycodes.left,this.goPrevPage),this.listenTo(this.mag,"keypress-"+n.a.keycodes.right,this.goNextPage),_.a.isDesktop&&Object(n.a)(window).bind("mousewheel",this.onMouseWheel),_.a.isDesktop||(Object(n.a)(window).bind("gesturechange",this.updateScaleState.__debounced),this.updateScaleState(),this.mag.getPagesCount()>1&&this.setSwipeAction()),this},destroy:function(){return _.a.isDesktop&&Object(n.a)(window).unbind("mousewheel",this.onMouseWheel),_.a.isDesktop||(Object(n.a)(window).unbind("gesturechange",this.updateScaleState.__debounced),this.pagesSwipe&&this.pagesSwipe.destroy()),this.remove()},onMouseWheel:function(t,e,i,n){this.preventTrackpadSwipeTill&&+new Date<this.preventTrackpadSwipeTill||Math.abs(i)>40&&Math.abs(i)>Math.abs(n)&&(i>0&&this.goPrevPage(),i<0&&this.goNextPage(),this.preventTrackpadSwipeTill=+new Date+1e3)},setSwipeAction:function(){this.pagesSwipe=this.mag.$mag_container.RMSwipe({$scrollElements:this.mag.$mag_container,getMaxTransitionSpeed:o.a.bind((function(){return this.mag.getPageTransitionTime()}),this),customMoveCheck:o.a.bind((function(t,e){return!(t.hasClass("prev-page")&&e<0)&&!(t.hasClass("next-page")&&e>0)}),this),beforeAutoAnimation:o.a.bind((function(t,e){return this.mag.showPageCounter(t),{autoAnimate:!0,immediateCallback:!1}}),this),onSwipeStart:o.a.bind((function(){this.mag.showPageCounter()}),this),getCurrentConstraints:o.a.bind((function(t){var e={},i=this.mag.$mag_container.width(),n=t.closest(".page, .final-page");return n.length||(n=this.mag.currentPage.$el),e.$moveItems=n.add(n.prev()).add(n.next()),e.$referenceItem=e.$moveItems.filter(":not(.center-page)").first(),this.mag.isLastPage()?e.left={max:0,noTrigger:!0}:e.left={max:i},this.mag.isFirstPage()?e.right={max:0,noTrigger:!0}:e.right={max:i},e}),this),callback:o.a.bind((function(t){"right"===t&&this.mag.goPrevPage({animation:!1,bySwipe:!0}),"left"===t&&this.mag.goNextPage({animation:!1,bySwipe:!0})}),this)}).data("swipe")},onPageChange:function(t,e){this.$next.toggleClass("hidden",!!this.mag.isLastPage()),this.recalcBottomArrowState(t),this.$prev.toggleClass("hidden",this.mag.isFirstPage()),this.mag.updateArrowsColor(t)},recalcBottomArrowState:function(t){clearTimeout(this.bottomArrowTimeout);var e=t.isBottomArrowVisible();"horizontal"===this.viewerType&&S.a.isScaleLayout(this.mag.viewOpts)&&(e=!1),this.isPreview&&"default"!==this.mag.viewport&&(e=!1),this.bottomArrowTimeout=setTimeout(o.a.bind((function(){this.$bottom.toggleClass("offscreen",!e)}),this),e?this.BOTTOM_SHOW_DELAY:this.BOTTOM_HIDE_DELAY)},goPrevPage:function(t){this.mag.goPrevPage({animation:!0})},goNextPage:function(t){this.mag.goNextPage({animation:!0})},scrollCurrentPage:function(t){this.mag.scrollCurrentPageALittle()},updateScaleState:function(){Modernizr.android||this.$prev.add(this.$next).add(this.$bottom).toggleClass("scaled-offscreen",f.default.isPageNativelyScaled())}});function R(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\n\t<div class="toolbar for-viewer">\n\n\t\t<%\tvar offscreenClass = (isPreview || common.embedMode) ? \'\' : \'offscreen-initially\'; %>\n\n\t\t<% if (hasPageCounter && !pageCounterInsideMenu) { %>\n\t\t\t<div class="page-counter-wrapper <%=offscreenClass%>">\n\t\t\t\t<div class="page-counter"><span class="cur"></span> of <span class="total"><%=totalPages%></span></div>\n\t\t\t</div>\n\t\t<% } %>\n\n\t\t<% if (brandingInToolbar) { %>\n\t\t\t<div class="toolbar-branding"></div>\n\t\t<% } %>\n\n\t\t<% if (hasShare) { %>\n\t\t\t<div class="share-button sprite <%=offscreenClass%>" data-alt="Share" data-alt-pos="<%= !controlsOnTop ? \'top\' : \'bottom\' %>" data-alt-offset="9"  data-alt-style="toolbar-share-tooltip" style="background-image: url(\'<%=icons.sprite%>\')"></div>\n\t\t<% } %>\n\n\t\t<% if (hasMenu) { %>\n\t\t\t<div class="menu-button <%=offscreenClass%>" data-alt="Menu (M)" data-alt-pos="<%= !controlsOnTop ? \'top\' : \'bottom\' %>" data-alt-offset="9" data-alt-style="toolbar-menu-tooltip">\n\t\t\t\t<% if (hasPageCounter && pageCounterInsideMenu) { %>\n\t\t\t\t\t<div class="page-counter"><span class="cur"></span> of <span class="total"><%=totalPages%></span></div>\n\t\t\t\t<% } %>\n\n\t\t\t\t<svg class="menu-icon" width="32" height="14" viewBox="0 0 32 14">\n\t\t\t\t\t<g fill="currentColor" fill-rule="evenodd"><path d="M1 0h30a1 1 0 010 2H1a1 1 0 110-2zM1 12h30a1 1 0 010 2H1a1 1 0 010-2z"/></g>\n\t\t\t\t</svg>\n\t\t\t\t<svg class="cross-icon" width="18" height="18" viewBox="0 0 18 18">\n\t\t\t\t\t<path d="M17.485.515a1 1 0 010 1.414L10.415 9l7.07 7.071a1 1 0 01-1.414 1.414L9 10.415l-7.071 7.07a1 1 0 01-1.414-1.414L7.585 9 .516 1.929A1 1 0 011.929.515L9 7.585l7.071-7.07a1 1 0 011.414 0z" fill="currentColor" fill-rule="evenodd"></path>\n\t\t\t\t</svg>\n\t\t\t\t<div class="page-preloader sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>\n\t\t\t</div>\n\t\t<% } %>\n\n\t\t<% if (common.embedMode) { %>\n\t\t\t<div class="embed-close-button <%=offscreenClass%>">Close</div>\n\t\t<% } %>\n\n\t</div>\n\n']);return R=function(){return t},t}var F=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"template-viewer-toolbar",Object(s.a)(R()));function B(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\t<% if (hasOverlay) {%>\n\t\t<div class="share-popup-overlay hidden" data-nosnippet></div>\n\t<%}%>\n\n\t<div class="share-popup hidden" data-nosnippet>\n\t\t<noindex>\n\t\t\t<div class="content-wrapper">\n\n\t\t\t\t<div class="share-wrapper">\n\t\t\t\t\t<div class="caption">Share</div>\n\n\t\t\t\t\t<div class="type-selector">\n\t\t\t\t\t\t\x3c!--__magterm--\x3e\n\t\t\t\t\t\t<div class="type-full">Project</div>\n\t\t\t\t\t\t<div class="type-page">Current Page</div>\n\t\t\t\t\t\t<div class="arrow sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="buttons-wrapper">\n\t\t\t\t\t\t<div class="share-facebook button" data-tp="facebook"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Share</div>\n\t\t\t\t\t\t<div class="share-twitter button" data-tp="twitter"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Tweet</div>\n\t\t\t\t\t\t<div class="share-pinterest button" data-tp="pinterest"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Pin</div>\n\t\t\t\t\t\t<div class="share-linkedin button" data-tp="linkedin"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Linkedin</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<% if (!common.isDownloadedSource) { %>\n\t\t\t\t\t\t<div class="open-embed"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Embed</div>\n\t\t\t\t\t\t<div class="close">Close</div>\n\t\t\t\t\t\t<div class="send-report" data-tp="report"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Report</div>\n\t\t\t\t\t<% } %>\n\t\t\t\t</div>\n\n\t\t\t\t<% if (!common.isDownloadedSource) { %>\n\t\t\t\t\t<div class="embed-wrapper">\n\t\t\t\t\t\t<div class="caption">Embed</div>\n\n\t\t\t\t\t\t<div class="size-selector" data-selected="responsive">\n\t\t\t\t\t\t\t<div class="size responsive" data-size="responsive">Responsive</div>\n\t\t\t\t\t\t\t<div class="size big" data-size="big">512×383</div>\n\t\t\t\t\t\t\t<div class="size small" data-size="small">288×236</div>\n\t\t\t\t\t\t\t<div class="arrow sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="code-block">\n\t\t\t\t\t\t\t<div class="thumb">\n\t\t\t\t\t\t\t\t<img class="thumb-pic" src="" alt=""/>\n\t\t\t\t\t\t\t\t<div class="thumb-toolbar">\n\t\t\t\t\t\t\t\t\t<div class="icon arrows" style="background-image: url(\'<%=icons.thumbArrows%>\')"></div>\n\t\t\t\t\t\t\t\t\t<div class="icon open" style="background-image: url(\'<%=icons.thumbOpen%>\')"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<textarea class="embed-code"></textarea>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="back">Back</div>\n\t\t\t\t\t</div>\n\t\t\t\t<% } %>\n\t\t\t</div>\n\n\t\t\t<div class="corner-wrapper">\n\t\t\t\t<div class="corner"></div>\n\t\t\t</div>\n\t\t</noindex>\n\t</div>\n']);return B=function(){return t},t}var z=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"template-viewer-share",Object(s.a)(B())),W=a.a.View.extend({template:z["template-viewer-share"],events:{"click .buttons-wrapper .button":"share","click .send-report":"share","click .open-embed":"openEmbed","click .close":"hide","click .embed-wrapper .back":"closeEmbed","click .embed-wrapper .embed-code":"selectEmbedCode","keyup .embed-wrapper .embed-code":"onKeyUp","click .type-selector":"onTypeSelectorClick","click .size-selector":"onSizeSelectorClick",click:"onClick"},initialize:function(t){return o.a.bindAll(this),o.a.extend(this,t),this},render:function(){return this.setElement(this.template({hasOverlay:_.a.isPhone,common:RM.common,icons:{sprite:Object($.findImagePath)("./viewer/share/sprite".concat($.is2X?"@2x":"",".png")),thumbArrows:Object($.findImagePath)("./viewer/share/thumb-arrows".concat($.is2X?"@2x":"",".png")),thumbOpen:Object($.findImagePath)("./viewer/share/thumb-open".concat($.is2X?"@2x":"",".png"))}})),this.$el.appendTo(this.$container),this.selectFullMode(),_.a.isPhone&&(this.shareSwipe=this.$el.RMSwipe({minTransitionSpeed:200,maxTransitionSpeed:400,rubberBand:!1,beforeAutoAnimation:o.a.bind((function(t,e){return{autoAnimate:!0,immediateCallback:!0}}),this),getCurrentConstraints:o.a.bind((function(t){var e={},i=this.$el.filter(".share-popup");return e.$referenceItem=i,e.$moveItems=i,e.up={max:0,noTrigger:!0},e.down={max:i.height()},e}),this),callback:o.a.bind((function(t){this.hide()}),this)}).data("swipe")),this.listenTo(this.mag,"pageChanged",this.onPageChange),this.listenTo(this.mag,"keypress-"+n.a.keycodes.esc,this.hide),Object(n.a)("body").on("click",this.hideOnBodyClick),this},show:function(){return this.shown||(clearTimeout(this.hideTimeout),this.$el.removeClass("hidden"),this.$el.height(),this.$el.addClass("show-popup"),this.$container.addClass("no-hover"),this.shown=!0,this.updateEmbed()),this},toggle:function(){return this.shown?this.hide():this.show()},hide:function(){return this.shown&&(this.$el.removeClass("show-popup"),this.$container.removeClass("no-hover"),this.hideTimeout=setTimeout(o.a.bind((function(){this.closeEmbed(),this.$el.addClass("hidden")}),this),400),this.shown=!1),this},destroy:function(){return clearTimeout(this.hideTimeout),Object(n.a)("body").off("click",this.hideOnBodyClick),this.shareSwipe&&this.shareSwipe.destroy(),this.remove()},hideOnBodyClick:function(t){_.a.isPhone||Object(n.a)(t.target).closest(this.$container).length||this.hide()},onPageChange:function(t,e){this.hide()},onClick:function(t){_.a.isPhone&&Object(n.a)(t.currentTarget).hasClass("share-popup-overlay")&&this.hide()},onKeyUp:function(t){t.stopPropagation()},openEmbed:function(t){this.router.analytics&&this.router.analytics.sendEvent("Embed","contents ("+this.shareMode+")"),this.selectEmbedCode(),this.$el.addClass("show-embed")},updateEmbed:function(){var t,e=this.mag.currentPage||this.mag.pages[0],i=this.$(".size-selector").attr("data-selected");this.$(".embed-wrapper .embed-code").val(W.getEmbedCode({shareMode:this.shareMode,cur_page_num_id:e.num_id,mag_num_id:this.mag.num_id,size:{responsive:"responsive",big:512,small:288}[i]})),t=this.mag.model.getPageScreenshot(256,{_id:"page"===this.shareMode?e._id:this.mag.coverPid}),this.currentEmbedSrc!==t&&(this.$(".thumb-pic").attr("src",t),this.currentEmbedSrc=t)},closeEmbed:function(){this.$el.removeClass("show-embed")},share:function(t){b.share({host:(RM.common.embedDomainName||window.location.protocol+"//"+window.location.hostname)+"/",tp:Object(n.a)(t.currentTarget).attr("data-tp"),source:"share panel",page:this.mag.currentPage||this.mag.pages[0],mag:o.a.extend(this.mag.model.toJSON(),{user:this.mag.user}),forProject:"full"===this.shareMode,customDomain:!(!RM.common.isDomainViewer&&!RM.common.embedDomainName),customDomainProfile:!(!RM.common.customDomainProfile&&"User"!==RM.common.embedDomainType),analytics:this.router.analytics,exportBasePath:window.RM.common.isDownloadedSource?window.RM.config&&window.RM.config.root:void 0})},onTypeSelectorClick:function(t){if(_.a.isPhone){var e=Object(n.a)(t.target);e.closest(".type-full").length&&this.selectFullMode(),e.closest(".type-page").length&&this.selectPageMode()}else{"page"===(this.$(".type-selector").attr("data-tp")||"page")?this.selectFullMode():this.selectPageMode()}},onSizeSelectorClick:function(t){var e,i,r=Object(n.a)(t.currentTarget),a=r.attr("data-selected");i=(i=(e=o.a.map(r.find(".size"),(function(t){return Object(n.a)(t).attr("data-size")}))).indexOf(a)+1)>=e.length?0:i,r.attr("data-selected",e[i]),this.updateEmbed()},selectPageMode:function(){this.$(".type-selector").attr("data-tp","page"),this.shareMode="page",this.updateEmbed()},selectFullMode:function(){this.$(".type-selector").attr("data-tp","full"),this.shareMode="full",this.updateEmbed()},selectEmbedCode:function(){_.a.isDesktop&&this.$(".embed-wrapper .embed-code").get(0).setSelectionRange(0,9999)}},{getEmbedCode:function(t){var e,i,n,r,a='<script async src="'+g.c.EMBED_SCRIPT_INIT+'" id="readymag-embed-init"><\/script>';return e=RM.common.embedDomainName||window.location.protocol+"//"+window.location.hostname,r=' data-uri="'+(i="full"===t.shareMode?t.mag_num_id:"p"+t.cur_page_num_id)+'" ',r+=' data-width="'+t.size+'" ',(RM.common.isDomainViewer||RM.common.embedDomainName)&&(r+=' data-domain="'+e+'" ',RM.common.customDomainProfile||"User"===RM.common.embedDomainType||(i="full"===t.shareMode?"":"p"+t.cur_page_num_id)),g.c.IS_LIVE||(r+=' data-origin="'+g.c.readymag_embed_host+'" '),'<a class="rm-mag-embed" href="'+(n=e+"/"+i)+'"'+r+' target="_blank">'+n+"</a>\n"+a}}),V=W;function N(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\t<noindex>\n\t\t<div class="mag-menu <%=(!hasProjectInfo ? \'no-project-info\' : \'\')%>" data-nosnippet>\n\t\t\t<div class="menu-wrapper">\n\n\t\t\t\t<% if (hasProjectInfo) { %>\n\t\t\t\t\t<div class="menu-info">\n\n\t\t\t\t\t\t<a class="link <%= !common.isDownloadedSource? \'\': \'inactive-link\'%>" href="<%-mag.model.user.getLink()%>">\n\t\t\t\t\t\t\t<div class="userpic" style="background-image:url(\'<%=mag.model.user.getUserpic(64)%>\')"></div>\n\t\t\t\t\t\t\t<div class="username"><%-mag.user.name%></div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="published-by" data_caption="published by" data_date="<%=publishDate%>"></div>\n\t\t\t\t\t\t<div class="mag-title"><%-mag.title%></div>\n\t\t\t\t\t</div>\n\t\t\t\t<% } %>\n\n\t\t\t\t<div class="scroll-wrapper">\n\n\t\t\t\t\t<div class="pages-wrapper has-<%=viewerType%>-scroll">\n\t\t\t\t\t\t<div class="pages">\n\n\t\t\t\t\t\t\t<%_.each(pages, function(page, ind) {\n\t\t\t\t\t\t\t\tvar attr = viewerType == \'horizontal\' ? \'left\' : \'top\',\n\t\t\t\t\t\t\t\t\tval = ind * (viewerType == \'horizontal\' ? width : height);\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t<div class="page" data-id="<%=page._id%>" data-num="<%=page.num%>" data-src="<%=mag.model.getPageScreenshot(width, {_id: page._id})%>" style="width:<%=width%>px;height:<%=height%>px;<%=attr%>:<%=val%>px">\n\t\t\t\t\t\t\t\t\t<img class="screenshot" src="<%=stub%>" />\n\t\t\t\t\t\t\t\t\t<div class="num <%=(page.pageNestedNum && page.pageNestedNum.length > 3 ? page.pageNestedNum.length > 4 ? \'nested-over-4\' : \'nested-over-3\' : page.num > 99 ? \'over99\' : \'\')%>"><%=page.pageNestedNum ? page.pageNestedNum : page.num%></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<%});%>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="scroll"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</noindex>\n']);return N=function(){return t},t}var U=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"template-viewer-mag-menu",Object(s.a)(N())),H=i("Fi5S"),G=a.a.View.extend({template:U["template-viewer-mag-menu"],events:{"click .page":"onPageClick"},initialize:function(t){return o.a.bindAll(this),o.a.extend(this,t),this.IMG_STUB=Object($.findImagePath)("./spacer.gif"),_.a.isPhone?"horizontal"===this.viewerType?(this.PAGE_WIDTH=140,this.PAGE_HEIGHT=92):(this.PAGE_WIDTH=240,this.PAGE_HEIGHT=158):(this.PAGE_WIDTH="vertical"===this.viewerType?240:280,this.PAGE_HEIGHT="vertical"===this.viewerType?158:184),this.loadVisibleScreenshots.__debounced=o.a.debounce(this.loadVisibleScreenshots,500),this.unloadInvisibleScreenshots.__debounced=o.a.debounce(this.unloadInvisibleScreenshots,3e3),this},render:function(){this.setElement(this.template({mag:this.mag,pages:this.pages,width:this.PAGE_WIDTH,height:this.PAGE_HEIGHT,stub:this.IMG_STUB,viewerType:this.viewerType,publishDate:this.publishDate,hasProjectInfo:this.hasProjectInfo,common:RM.common})),this.$el.appendTo(this.$container),this.$pagesWrapper=this.$(".pages-wrapper");var t=this.$(".page");if("horizontal"==this.viewerType?(this.$(".pages").css("width",t.length*this.PAGE_WIDTH),this.$pagesWrapper.scrollLeft(99999)):(this.$(".pages").css("height",t.length*this.PAGE_HEIGHT),this.$pagesWrapper.scrollTop(99999)),_.a.isDesktop&&(this.scroll=this.$(".scroll-wrapper").RMScroll({$container:this.$pagesWrapper,$content:this.$(".pages"),$handle:this.$(".scroll"),wheelScrollSpeed:1.3,gap_start:8,gap_end:8,maxHandleSize:136,dragScroll:!0,tp:this.viewerType}).data("scroll")),this.$pagesWrapper.bind("scroll",this.onScroll),this.cacheSize(),this.cacheScroll(),this.cachePagesPos(),this.loadedScreenshots={},this.showInitially&&(this.loadVisibleScreenshots(),this.show(!0)),"horizontal"==this.viewerType&&_.a.isPhone||Object(n.a)(".menu-info .mag-title").dotdotdot({height:_.a.isPhone?48:68,wrap:"letter",callback:o.a.bind((function(t,e){t&&this.$(".menu-info .mag-title").attr("title",this.mag.title)}),this)}),!_.a.isDesktop){var e="horizontal"==this.viewerType?this.$el.height():this.$el.width(),i=this.$el.add(this.$toolbar);"horizontal"==this.viewerType&&this.mag.navigation&&(i=i.add(this.mag.navigation.$bottom)),this.menuSwipe=i.RMSwipe({$scrollElements:this.$pagesWrapper,minTransitionSpeed:200,maxTransitionSpeed:400,rubberBand:!1,getCurrentConstraints:o.a.bind((function(){var t={};return t.$referenceItem=this.$el,t="horizontal"==this.viewerType?this.shown?{up:{max:0,noTrigger:!0},down:{max:e}}:{up:{max:e},down:{max:0,noTrigger:!0}}:this.shown?{left:{max:0,noTrigger:!0},right:{max:e}}:{left:{max:e},right:{max:0,noTrigger:!0}}}),this),callback:o.a.bind((function(t){this.shown?this.hide():this.show()}),this)}).data("swipe")}return this.isPreview&&this.listenTo(RM.constructorRouter,"renewScreenshot",this.renewScreenshot),this.listenTo(this.mag,"pageChanged",this.onPageChange),this.listenTo(this.mag,"keypress-"+n.a.keycodes.m,this.toggle),this.listenTo(this.mag,"keypress-"+n.a.keycodes.esc,this.hide),H.a.on("constructorSettings:open",this.show),H.a.on("constructorSettings:close",this.hide),Object(n.a)(window).on("resize",this.onResize),this.$el.bind("mousewheel",this.onMouseWheel),this},show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.shown||(this.shown=!0,e&&this.$el.css({transition:"none"}),this.mag.$el.addClass("viewer-mag-menu-shown"),Object(n.a)("html").addClass("mag-menu-shown"),this.mag.$el.toggleClass("viewer-mag-menu-no-project-info",!this.hasProjectInfo),this.loadOtherScreenshots(),this.mag.trigger("menuShown"),H.a.trigger("magMenu:open"),e&&setTimeout((function(){return t.$el.css({transition:""})}))),this},toggle:function(){return this.shown?this.hide():this.show()},hide:function(){return this.shown&&(this.mag.$el.removeClass("viewer-mag-menu-shown viewer-mag-menu-no-project-info"),Object(n.a)("html").removeClass("mag-menu-shown"),this.clearLoadOtherTimeout(),this.mag.focusCurrentPage(),this.shown=!1,this.mag.trigger("menuHidden"),H.a.trigger("magMenu:close")),this},destroy:function(){return Object(n.a)(window).off("resize",this.onResize),Object(n.a)("html").removeClass("mag-menu-shown"),H.a.trigger("magMenu:close"),this.$el.unbind("mousewheel",this.onMouseWheel),this.menuSwipe&&this.menuSwipe.destroy(),this.$pagesWrapper.unbind("scroll",this.onScroll),H.a.off("constructorSettings:open",this.show),H.a.off("constructorSettings:close",this.hide),this.remove()},onMouseWheel:function(t){t.preventDefault()},onResize:function(){this.cacheSize(),this.scroll&&this.scroll.recalc(),this.mag.currentPage&&this.shiftToPage(this.mag.currentPage.num,!1)},onScroll:function(){this.cacheScroll()},cacheSize:function(){this.cachedData=this.cachedData||{},this.cachedData.scrollSize="horizontal"==this.viewerType?this.$pagesWrapper.width():this.$pagesWrapper.height()},cacheScroll:function(){this.cachedData=this.cachedData||{},this.cachedData.scrollPos="horizontal"==this.viewerType?this.$pagesWrapper.scrollLeft():this.$pagesWrapper.scrollTop()},cachePagesPos:function(){this.cachedData=this.cachedData||{},this.cachedData.pagesPos={};var t=this.cachedData.pagesPos,e=this.viewerType,i=this.PAGE_WIDTH,n=this.PAGE_HEIGHT;o.a.each(this.pages,(function(r,a){t[r.num]=a*("horizontal"==e?i:n)}))},onPageChange:function(t,e){this.shown||(this.loadVisibleScreenshots.__debounced(),!_.a.isDesktop&&this.unloadInvisibleScreenshots.__debounced()),this.shiftToPage(t.num,this.shown),o.a.isEmpty(this.loadedScreenshots)&&this.loadVisibleScreenshots()},shiftToPage:function(t,e){var i,n=this.$('.page[data-num="'+t+'"]'),r=this.cachedData.scrollSize,a=this.cachedData.scrollPos,o="horizontal"==this.viewerType?this.PAGE_WIDTH:this.PAGE_HEIGHT,s=this.cachedData.pagesPos[t],c=a+o/2,l=a+r-o/2;if(this.$(".page.active").removeClass("active"),n.addClass("active"),s<c)i=s-c;else{if(!(s+o>l))return;i=s+o-l}var u={};u["horizontal"==this.viewerType?"scrollLeft":"scrollTop"]=a+i,this.$pagesWrapper.stop().animate(u,e?300:0)},onPageClick:function(t){if(!this.scroll||!this.scroll.wasContentDrag){var e=Object(n.a)(t.currentTarget).data("num");this.mag.currentPage&&e==this.mag.currentPage.num||this.mag.showPage(e,{animation:!1})}},renewScreenshot:function(t){var e=this.$(".page").filter((function(){return Object(n.a)(this).data("id")==t})),i=RM.constructorRouter.mag.pages.find((function(e){return e.id==t})),r=i&&i.getScreenshot(this.PAGE_WIDTH);e.attr("data-src")?e.attr("data-src",r):e.find(".screenshot").prop("src",r)},getVisibleScreenshotRange:function(){var t=this.cachedData.scrollSize,e=this.cachedData.scrollPos,i="horizontal"==this.viewerType?this.PAGE_WIDTH:this.PAGE_HEIGHT;return{min:Math.max(0,Math.floor(e/i)),max:Math.min(this.mag.getPagesCount()-1,Math.floor((e+t)/i))}},loadVisibleScreenshots:function(){if(this.mag.pages&&this.mag.pages.length){var t=this.getVisibleScreenshotRange(),e=this;this.$(".page").each((function(i){var r,a=(r=Object(n.a)(this)).attr("data-src");i>=t.min&&i<=t.max&&a&&!e.loadedScreenshots[i]&&((r=Object(n.a)(this)).find(".screenshot").prop("src",a),r.removeAttr("data-src"),e.loadedScreenshots[i]=!0)}))}},unloadInvisibleScreenshots:function(){if(!this.shown){var t=this.getVisibleScreenshotRange(),e=this;this.$(".page").each((function(i){var r,a=(r=Object(n.a)(this)).attr("data-src");(i<t.min||i>t.max)&&!a&&e.loadedScreenshots[i]&&((r=Object(n.a)(this)).attr("data-src",r.find(".screenshot").prop("src")),r.find(".screenshot").prop("src",e.IMG_STUB),delete e.loadedScreenshots[i])}))}},loadOtherScreenshots:function(){this.clearLoadOtherTimeout(),this.loadOtherSafeTimeout=500,this.loadNextScreenshot()},loadNextScreenshot:function(){var t,e,i,n=this.getVisibleScreenshotRange(),r=Math.floor((n.min+n.max)/2),a=this.loadedScreenshots,o=this.mag.getPagesCount()-1;for(t=r;t<=o&&a[t];t++);for(e=r;e>=0&&a[e];e--);if(!(e<0&&t>o)){a[i=t>o?e:e<0?t:t-r>r-e?e:t]=!0;var s=this.$(".page").eq(i),c=s.find(".screenshot"),l=this;c.one("load error",(function(t){clearTimeout(l.$curLoadingTimeout),l.loadNextScreenshot()})),this.$curLoadingTimeout=setTimeout((function(){c.off(),l.loadOtherSafeTimeout*=1.1,l.loadNextScreenshot()}),this.loadOtherSafeTimeout),c.prop("src",s.attr("data-src")),s.removeAttr("data-src"),this.$curLoadingScreenshot=c}},clearLoadOtherTimeout:function(){this.$curLoadingScreenshot&&this.$curLoadingScreenshot.off(),clearTimeout(this.$curLoadingTimeout)}}),K=a.a.View.extend({PAGE_COUNTER_TIMEOUT:2800,PAGE_COUNTER_TIMEOUT_INITIAL:4e3,brandingInToolbar:!1,template:F["template-viewer-toolbar"],events:{"click .menu-button":"toggleMenu","click .share-button":"toggleShare","click .embed-close-button":"onEmbedCloseClick"},initialize:function(t){return o.a.bindAll(this),o.a.extend(this,t),this},render:function(){if(this.setElement(this.template({mag:this.mag,isPreview:this.isPreview,hasMenu:this.hasMenu,hasShare:this.hasShare,hasPageCounter:this.hasPageCounter,pageCounterInsideMenu:this.hasMenu&&_.a.isPhone,totalPages:this.mag.getPagesCount(),common:RM.common,controlsOnTop:this.controlsOnTop,brandingInToolbar:this.brandingInToolbar,icons:{sprite:Object($.findImagePath)("./common/toolbar/sprite".concat($.is2X?"@2x":"",".png"))}})),this.$el.appendTo(this.$container),this.$menuButton=this.$el.find(".menu-button"),this.$shareButton=this.$el.find(".share-button"),this.$pageCounter=this.$el.find(".page-counter"),this.$pageCounterWrapper=this.$pageCounter.parent(),this.hasShare&&(this.share=new V({mag:this.mag,router:this.router,$container:_.a.isPhone?this.$container:this.$shareButton}).render(),this.hasMenu||this.$shareButton.addClass("without-menu-button")),this.hasMenu&&(this.magMenu=new G({mag:this.mag,pages:this.pages,router:this.router,isPreview:this.isPreview,hasProjectInfo:this.hasProjectInfo,publishDate:this.publishDate,$container:this.$container,$toolbar:this.$el,viewerType:this.viewerType,showInitially:this.isSettingsOpened}).render()),this.listenTo(this.mag,"pageChanged",this.onPageChange),this.listenTo(this.mag,"menuShown",this.onMenuShow),this.listenTo(this.mag,"menuHidden",this.onMenuHide),this.listenTo(this.mag,"presentationModeOn",this.onPresentationModeOn),this.listenTo(this.mag,"presentationModeOff",this.onPresentationModeOff),!this.isPreview){var t=this.$(".offscreen-initially:visible"),e=150*t.length+800;t.each((function(t,i){setTimeout((function(){Object(n.a)(i).removeClass("offscreen-initially")}),e),e-=150}))}return this.$("div[data-alt]:not(.rmalttext), a[data-alt]:not(.rmalttext)").RMAltText(),this},destroy:function(){return this.share&&this.share.destroy(),this.magMenu&&this.magMenu.destroy(),this.remove()},isMenuOpened:function(){return!!this.menuShown},closeMenu:function(){this.magMenu&&this.magMenu.hide()},onPageChange:function(t,e){this.showPageCounter(t,e),this.$menuButton.removeClass("waiting-video-bg-start preloading"),this.prevPage&&this.stopListening(this.prevPage),t&&(t.loaded||(this.$menuButton.addClass("preloading"),this.listenTo(t,"pageLoaded",this.onPageLoaded)),t.hasVideoBG&&!t.videoBGStarted&&(this.$menuButton.addClass("waiting-video-bg-start"),this.listenTo(t,"videoBGStarted",this.onVideoBGStarted)),this.prevPage=t)},onPageLoaded:function(){this.$menuButton.removeClass("preloading")},onVideoBGStarted:function(){this.$menuButton.removeClass("waiting-video-bg-start")},onPresentationModeOn:function(){this.isPresentationMode=!0,this.updateVisibilityState()},onPresentationModeOff:function(){this.isPresentationMode=!1,this.updateVisibilityState()},updateVisibilityState:function(){this.isPresentationMode?this.$el.stop().fadeOut(200):this.$el.stop().fadeIn(200)},onMenuShow:function(){this.menuShown=!0,this.hidePageCounter()},onMenuHide:function(){this.menuShown=!1},getPageCounterSize:function(t){if(!this.cachedPageCounterData){this.$pageCounter.find(".cur").text("0");var e=this.$pageCounter.outerWidth();this.$pageCounter.find(".cur").text("00");var i=this.$pageCounter.outerWidth()-e,n=e-i;this.cachedPageCounterData={baseSize:n,digitSize:i},this.$pageCounter.find(".cur").text(t)}var r=this.cachedPageCounterData;return r.baseSize+(t+"").length*r.digitSize},updatePageCounterSize:function(t){this.$pageCounter.length&&this.$pageCounterWrapper.length&&(!this.menuShown&&this.pageCounterShown?this.$pageCounterWrapper.css("width",this.getPageCounterSize(t)):this.$pageCounterWrapper.css("width",""))},showPageCounter:function(t,e){this.hasPageCounter&&(this.$pageCounter.find(".cur").text(t.num),e.showPageCounter&&(clearTimeout(this.pageCounterTimeout),this.$el.addClass("show-page-counter"),this.pageCounterShown=!0,Modernizr.android?setTimeout(o.a.bind((function(){this.updatePageCounterSize(t.num)}),this),17):this.updatePageCounterSize(t.num),this.pageCounterTimeout=setTimeout(this.hidePageCounter,e.initial?this.PAGE_COUNTER_TIMEOUT_INITIAL:this.PAGE_COUNTER_TIMEOUT)))},hidePageCounter:function(){this.hasPageCounter&&(clearTimeout(this.pageCounterTimeout),this.$el.removeClass("show-page-counter"),this.pageCounterShown=!1,this.updatePageCounterSize())},toggleMenu:function(t){this.magMenu&&this.magMenu.toggle()},toggleShare:function(t){Object(n.a)(t.target).is(this.$shareButton)&&this.share&&this.share.toggle()},postMessageToParent:function(t,e){var i={type:t,data:e},n=window.parent;n&&n.postMessage(JSON.stringify(i),"*")},onEmbedCloseClick:function(t){this.postMessageToParent("close-fullscreen")}});function q(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\t<div class="rm-branding offscreen-initially">\n\t<a class="rm-branding-button" href="<%="https://readymag.com" + \'?\' + utm_params%>" target="_blank"></a>\n\t</div>\n']);return q=function(){return t},t}var Y=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"template-viewer-branding",Object(s.a)(q())),J=a.a.View.extend({template:Y["template-viewer-branding"],initialize:function(t){return o.a.bindAll(this),o.a.extend(this,t),this},render:function(){var t=this.mag&&this.mag.num_id,e=t?"utm_source=made_with_readymag&utm_medium=referral&utm_campaign=".concat(t):"";return this.setElement(this.template({utm_params:e})),this.$el.appendTo(this.$container),this.listenTo(this.mag,"pageChanged",this.onPageChange),o.a.delay(function(){this.$el.removeClass("offscreen-initially")}.bind(this),800),this},onPageChange:function(t,e){},hide:function(){this.$el.stop().fadeOut(200)},show:function(){this.$el.stop().fadeIn(200)}}),Q=i("zWgA"),X=i.n(Q),Z=i("m41J");function tt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function et(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(i),!0).forEach((function(e){it(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function it(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var nt=a.a.View.extend({TYPEKIT_PREVIEW_API_LINK:"//use.typekit.net/previewkits/pk-v1.js",PRELOAD_COUNT_HORIZONTAL:{backward:1,forward:_.a.isDesktop?5:_.a.isPhone?3:2},PRELOAD_COUNT_VERTICAL:{backward:_.a.isDesktop?2e3:(_.a.isPhone,1e3),forward:_.a.isDesktop?3e3:(_.a.isPhone,2e3)},SCROLLABLE_TRESHOLD:100,SCROLL_SNAP:0,template:h["template-viewer-mag"],initialize:function(t,e){var i=this;o.a.bindAll(this),t||(t={}),o.a.defaults(t,{pages:[]}),this.hasWidgetsWithVerticalOnscrollAnimation=!1;var r=Object(o.a)(t.pages).chain().reduce((function(t,e){return t.concat(e.wids)}),[]).each((function(t){w.a.normalizeAnimations(t.animation).find((function(t){return"scroll"===t.type&&t.steps&&t.steps.find((function(t){return t.dy}))}))&&(i.hasWidgetsWithVerticalOnscrollAnimation=!0)})).filter({is_global:!0}).value();this.staticGlobalWidgetsData=Object(o.a)(r).filter((function(t){return!t.is_above})),this.aboveGlobalWidgetsData=Object(o.a)(r).filter((function(t){return t.is_above}));var a=o.a.pluck(this.aboveGlobalWidgetsData,"_id");return t.pages.forEach((function(t){t.pagePath=t.pagePath||t.uri||t.num.toString()})),t.pages.forEach((function(t){t.uri=t.pagePath})),Object(o.a)(t.pages).each(function(t){t.wids=t.wids.concat(o.a.reject(this.staticGlobalWidgetsData,(function(e){return e.pid===t._id}))),t.wids=o.a.unique(t.wids,(function(t){return t._id||Math.random()})),t.wids=Object(o.a)(t.wids).filter((function(t){return!o.a.contains(a,t._id)}))}.bind(this)),o.a.extend(this,t),this.model=new p.a(t,{parse:!0}),this.router=e,this.eCommerceManager=new I.b(this.router,this,this.router.environment),this.setupEcommerceSidebar(),this.isPreview=e.isPreview,this.$container=e.$mags_container,_.a.isDesktop&&Object(n.a)("<div>").bind("mousewheel",(function(){})),this.setViewerOptions(this.getMagViewport()),this.continueLoading.__debounced=o.a.debounce(this.continueLoading,200),this.loadPages.__debounced=o.a.debounce(this.loadPages,700),this.onResize.__debounced=o.a.debounce(this.onResize,300),this.redrawAboveGlobalWidgets.__debounced=o.a.debounce(this.redrawAboveGlobalWidgets,500,!0),this.widgetPackCount=0,this.getAboveGlobalBoxMemoized=o.a.memoize(this.getAboveGlobalBox,(function(t,e,i){return t+" "+(e&&e.num)+" "+(e&&e.pageViewport)+" "+(i&&i.width)+" "+(i&&i.height)})),this},setViewerOptions:function(t){var e={arrows:!0,menubutton:!0,projectinfo:!0,sharebutton:!0,pagecounter:!0,controlsontop:!1,viewertype:"vertical",slidein:!1,scalewidth:3600,lqip:!1};(e=o.a.extend(e,this.model.get("opts"))).viewertype=RM.screenshot?"horizontal":e.viewertype,(!_.a.isDesktop||this.isPreview&&"default"!==t)&&(e.slidein=!1),"vertical"===e.viewertype&&(_.a.isDesktop?this.isStickyVerticalViewer=!e.slidein&&!this.isPreview&&!this.hasWidgetsWithVerticalOnscrollAnimation:(this.isStickyVerticalViewer=Modernizr.csspositionsticky,this.isStickyVerticalViewer||(e.viewertype="horizontal",this.pages.length>1&&(e.arrows=!0)))),e.sharebutton=e.sharebutton&&!this.isPreview&&!!this.published&&!this.is_private,e.pagecounter=e.pagecounter&&!this.isPreview&&this.pages.length>1,e.branding=(o.a.isUndefined(e.branding)?e.endpage:e.branding)&&!this.isPreview,this.model.user&&this.model.user.get&&"540dc7a3a5c9259a383b910b"==this.model.user.get("_id")&&(e=o.a.extend(e,{arrows:!0,menubutton:this.isPreview,sharebutton:!1,pagecounter:!1,branding:!1})),this.viewOpts=e,this.PRELOAD_COUNT="horizontal"==this.viewOpts.viewertype?this.PRELOAD_COUNT_HORIZONTAL:this.PRELOAD_COUNT_VERTICAL},setViewerClasses:function(){this.$el.removeClass("viewer-type-horizontal viewer-type-vertical").addClass("viewer-type-"+this.viewOpts.viewertype).removeClass("pages-pos-normal pages-pos-overlap").addClass("pages-pos-"+(this.viewOpts.slidein?"overlap":"normal")),"vertical"==this.viewOpts.viewertype&&(Object(n.a)("html").addClass("overflow-on-vertical-view"),this.isStickyVerticalViewer&&(this.$el.addClass("viewer-type-vertical-sticky"),Object(n.a)("body").addClass("overflow-on-vertical-view"))),this.viewOpts.controlsontop&&Object(n.a)("html").addClass("controls-on-top"),Object(n.a)("html").addClass("new-settings")},unsetViewerClasses:function(){this.$el.removeClass("viewer-type-horizontal viewer-type-vertical").removeClass("pages-pos-normal pages-pos-overlap"),"vertical"==this.viewOpts.viewertype&&(Object(n.a)("html").removeClass("overflow-on-vertical-view"),this.$magScrollSizer.css("height",""),this.isStickyVerticalViewer&&(this.$el.removeClass("viewer-type-vertical-sticky"),Object(n.a)("body").removeClass("overflow-on-vertical-view"))),Object(n.a)("html").removeClass("controls-on-top")},render:function(){if(!this.active){this.title=this.title||"Project",this.magOpenTime=new Date,document.documentElement.style.setProperty("--min-desktop-width","".concat(k.c.dictionary[k.b.Default].min_scale_width,"px")),this.setElement(this.template({hasStandaloneBottomArrow:!this.isPreview&&"vertical"==this.viewOpts.viewertype&&this.viewOpts.arrows,isPreview:!!this.isPreview,icons:{sprite:Object($.findImagePath)("./common/navigation/sprite".concat($.is2X?"@2x":"",".png"))}})),this.$el.appendTo(this.$container),this.setViewerClasses(),Object(n.a)("body").on("click","a.external-link",this.toExternalLink).on("click",".maglink.back-to-top",this.backToTopCurrentPage).on("click",".maglink",this.maglink).on("click",".goback-link",this.onGobackLinkClick).on("click",".mailchimp-link",this.onMailchimpLinkClick).on("click",".anchor-link",this.onAnchorLinkClick).on("click",".share-link",this.onShareLinkClick),this.$mag_container=this.$(".mag-pages-container"),this.$mag_container.on("scroll",this.fixFocusScroll),this.$mag_viewport_device=this.$(".mag-pages-viewport-device"),this.$pages_container=this.$(".mag-pages-container .container"),this.$pages_blackout=this.$pages_container.find(".blackout"),this.$aboveWidgetsContainer=this.$(".above-pages-container"),"vertical"==this.viewOpts.viewertype&&(this.$magScrollContainer=Object(n.a)(window),this.$magScrollSizer=Object(n.a)("body"),this.isStickyVerticalViewer&&(this.$magScrollSizer=Object(n.a)("body").add(this.$el)),this.$magScrollHandler=Object(n.a)(window),this.$magScrollAnimate=Object(n.a)("body, html")),"vertical"==this.viewOpts.viewertype&&(this.$bottomArrow=this.$(".navigation-arrow.bottom"),this.$bottomArrow.one("click",this.scrollMagALittle)),this.active=!0;var t=this.pages;this.pages=null,this.viewport=null,this.switchToViewport(this.getMagViewport()),this.onResize(),_.a.isDesktop||setTimeout(this.onResize,1500),this.pages=Object(o.a)(t).chain().sortBy((function(t){return t.num})).map(o.a.bind((function(e){var i="";try{i=new O.a({mag:this,router:this.router,totalPages:t.length,pageData:e,viewerType:this.viewOpts.viewertype,isStickyVerticalViewer:this.isStickyVerticalViewer,$container:this.$pages_container}).render()}catch(t){console.log("Error page rendering.",t)}return i}),this)).filter((function(t){return!!t})).value();var e=this.getPage(this.getPagesCount());if(e&&e.markAsLast(),"horizontal"==this.viewOpts.viewertype&&this.setPagesTransitions(),!RM.screenshot){"horizontal"==this.viewOpts.viewertype&&this.viewOpts.arrows&&(this.navigation=new L({mag:this,router:this.router,$container:this.$el,isPreview:this.isPreview,viewerType:this.viewOpts.viewertype}).render());var i=(this.must_show_branding||this.viewOpts.branding)&&!(RM.common.embedMode&&!_.a.isDesktop),r=i&&_.a.isDesktop&&!this.viewOpts.controlsontop&&!this.isPreview;this.toolbar=new K({mag:this,pages:this.pages,router:this.router,$container:this.$el,isPreview:this.isPreview,hasMenu:this.viewOpts.menubutton,hasProjectInfo:this.viewOpts.projectinfo,hasShare:this.viewOpts.sharebutton&&!g.c.IS_FILE_PROTOCOL,hasPageCounter:this.viewOpts.pagecounter,controlsOnTop:this.viewOpts.controlsontop,brandingInToolbar:r,viewerType:this.viewOpts.viewertype,publishDate:this.published?j()(new Date(this.published),"mmm dd, yyyy"):"unpublished",isSettingsOpened:this.isSettingsOpened}).render(),i&&(this.branding=new J({mag:this,$container:r?this.toolbar.$el.find(".toolbar-branding"):this.$el}).render())}"vertical"==this.viewOpts.viewertype&&(this.onResize(),_.a.isDesktop&&this.getPage(1)&&this.getPage(1).$content.focus(),Object(n.a)("body").on("keydown",this.onVerticalViewKeyDown)),_.a.isDesktop?(Object(n.a)(window).on("mousedown",this.onMouseDown),Object(n.a)(window).on("mouseup",this.onMouseUp),Object(n.a)(window).on("mousewheel",this.onMouseWheel)):(Object(n.a)(window).on("touchstart",this.onDragStart),Object(n.a)(window).on("touchmove",this.onDragMove),Object(n.a)(window).on("touchend touchcancel",this.onDragEnd),Object(n.a)(window).on("pageshow",this.onResize)),f.default.PageVisibilityManager.addEventListener(this.onPageVisibilityChange),this.listenTo(a.a,"form:focus",this.onFormFocus),this.listenTo(a.a,"form:blur",this.onFormBlur),Object(n.a)(window).on("resize",this.onResize),this.isPreview&&this.listenTo(this.model,"change:opts",this.onOptsChange),_.a.isDesktop||Object(n.a)(window).on("orientationchange",this.onResize),Object(n.a)(window).on("gesturestart gestureend",this.onGestureChange),"vertical"==this.viewOpts.viewertype&&this.$magScrollHandler.on("scroll",this.onMagScroll),Object(n.a)("body").on("keyup",this.onKeyup),m.a.generateCSS("paragraph","viewer",document,this.edit_params&&this.edit_params.paragraph_styles),m.a.generateCSS("link","viewer",document,this.edit_params&&this.edit_params.link_styles),RM.screenshot&&"true"==f.default.queryUrlGetParam("pdf")||this.isPreview||m.a.setShortList(m.a.getVeryShortList(this.edit_params&&this.edit_params.fonts));var s=!this.isPreview&&this.model.get("is_published")?"published":"edit",c=this;return"edit"!=s||window.TypekitPreview?l():n.a.getScript(this.TYPEKIT_PREVIEW_API_LINK,(function(t,e,i){l()})),this}function l(){m.a.appendFontsCssToDocument({version:s,fonts:c.edit_params&&c.edit_params.fonts,typekit_url:c.typekit_url})}},destroy:function(){var t=this;return o.a.each(this.pages,(function(t){t.destroy()})),this.pages=null,Object(n.a)("body").off("click","a.external-link",this.toExternalLink).off("click",".maglink.back-to-top",this.backToTopCurrentPage).off("click",".maglink",this.maglink).off("click",".goback-link",this.onGobackLinkClick).off("click",".mailchimp-link",this.onMailchimpLinkClick).off("click",".anchor-link",this.onAnchorLinkClick).off("keydown",this.onVerticalViewKeyDown).off("click",".share-link",this.onShareLinkClick),this.toolbar&&this.toolbar.destroy(),this.navigation&&this.navigation.destroy(),this.cartSidebar&&setTimeout((function(){t.cartSidebar.destroy()}),320),_.a.isDesktop?(Object(n.a)(window).off("mousedown",this.onMouseDown),Object(n.a)(window).off("mouseup",this.onMouseUp),Object(n.a)(window).off("mousewheel",this.onMouseWheel)):(Object(n.a)(window).off("touchstart",this.onDragStart),Object(n.a)(window).off("touchmove",this.onDragMove),Object(n.a)(window).off("touchend touchcancel",this.onDragEnd),Object(n.a)(window).off("pageshow")),this.unsetViewerClasses(),f.default.PageVisibilityManager.removeEventListener(this.onPageVisibilityChange),Object(n.a)(window).off("resize",this.onResize),Object(n.a)(window).off("orientationchange",this.onResize),Object(n.a)(window).off("gesturestart gestureend",this.onGestureChange),"vertical"==this.viewOpts.viewertype&&this.$magScrollHandler.off("scroll",this.onMagScroll),Object(n.a)("body").off("keyup",this.onKeyup),this.active=!1,this.trigger("destroyed"),this.remove()},getUrl:function(){return RM.common.isDomainViewer?window.location.protocol+"//"+window.location.hostname+"/"+(RM.common.customDomainProfile?this.num_id+"/":""):window.location.protocol+"//"+window.location.hostname+"/"+this.num_id+"/"},getPage:function(t){return parseInt(t,10)==t&&(t=parseInt(t,10)),o.a.isNumber(t)?this.pages[t-1]:Object(o.a)(this.pages).find((function(e){return e.uri==t}))},getPageByPath:function(t){return"1"===t.toString()?this.pages[0]:this.pages.find((function(e){return e.pagePath===t}))},getPagesCount:function(){return this.pages&&this.pages.length},isFirstPage:function(){return this.currentPage&&!this.getPage(this.currentPage.num-1)},isLastPage:function(){return this.currentPage&&!this.getPage(this.currentPage.num+1)},getPageId:function(t){var e=o.a.find(this.pages,(function(e){return e.num_id===t}));return e&&e._id},getPageNum:function(t){var e=o.a.find(this.pages,(function(e){return e._id==t}));return e&&e.num},getPageUri:function(t){var e=o.a.find(this.pages,(function(e){return e._id==t}));if(!e)return null;var i=e.uri?e.uri+"/":1==e.num?"":e.num+"/";return this.router.getMagUri(this)+i},getPageTransitionTime:function(){var t=Math.min(this.viewOpts.scalewidth,this.getContainerSizeCached().width),e=this.getContainerSizeCached().height;return _.a.isDesktop?550:_.a.isTablet?t>e?550:470:t>e?520:370},onPageVisibilityChange:function(){var t=this;if(this.currentPage)if(clearTimeout(this.visibilityHandlerTimeout),f.default.PageVisibilityManager.isPageHidden())this.visibilityHandlerTimeout=setTimeout((function(){t.currentPage.stop({widgetTypes:["video","background","iframe"]});var e=t.getPage(t.currentPage.num+1);e&&e.started&&(e.stop({widgetTypes:["video","background","iframe"]}),t.restartNextPage=!0)}),700);else{this.currentPage.start({widgetTypes:["audio","video","background","iframe"],forceStart:!0});var e=this.getPage(this.currentPage.num+1);e&&this.restartNextPage&&(e.start({widgetTypes:["audio","video","background","iframe"],forceStart:!0}),delete this.restartNextPage)}},updateArrowsColor:function(t){if(t){var e=t.arrows_color||"white";this.$el.removeClass("navigation-white-arrows").removeClass("navigation-black-arrows").addClass("navigation-"+e+"-arrows")}},onFormFocus:function(){if(Modernizr.safari&&!_.a.isDesktop&&"vertical"===this.viewOpts.viewertype){var t=this.getScroll();o.a.each(this.pages,(function(e){e.trigger("form:focus",t)})),this.$magScrollContainer&&this.$magScrollContainer.on("scroll",this.onScrollWithFormInFocus)}},onFormBlur:function(){(Modernizr.safari||!_.a.isDesktop)&&"vertical"===this.viewOpts.viewertype&&(o.a.each(this.pages,(function(t){t.trigger("form:blur")})),this.$magScrollContainer&&this.$magScrollContainer.off("scroll",this.onScrollWithFormInFocus))},onScrollWithFormInFocus:function(){if((Modernizr.safari||!_.a.isDesktop)&&"vertical"===this.viewOpts.viewertype){var t=this.getScroll();o.a.each(this.pages,(function(e){e.trigger("page:scrollWithFormInFocus",t)}))}},onDragStart:function(t){clearTimeout(this.touchInProgressTimeout),this.pauseLoading("touch");var e=t.originalEvent.targetTouches[0];this.globalTouchObject={$target:Object(n.a)(t.target).closest(".has-horizontal-scroll, .has-vertical-scroll"),x:e.screenX,y:e.screenY,startTime:+new Date}},onDragMove:function(t){var e=this.globalTouchObject;if(!(t.originalEvent.touches.length>1)&&e){if("horizontal"==this.viewOpts.viewertype)this.currentPage&&this.currentPage.hasFixedWidgets&&Object(n.a)(t.target).closest(this.$mag_container).length&&!e.$target.length&&(e.$target=this.currentPage.$scrollWrapper);else e.$target.length||(e.$target=this.$magScrollContainer);if(e.$target.length){if(!f.default.isPageNativelyScaled()){var i=t.originalEvent.targetTouches[0],r=(i.screenX,e.x,i.screenY-e.y);if(Math.abs(r)>5&&e.$target.hasClass("has-vertical-scroll")){var a=e.$target[0].scrollHeight,o=e.$target.outerHeight();r>0&&e.$target.scrollTop()<=0&&t.preventDefault(),r<0&&e.$target.scrollTop()>=a-o&&t.preventDefault()}e.$target.hasClass("has-horizontal-scroll")}}else t.preventDefault()}},onDragEnd:function(t){this.checkDoubleTap(t),this.touchInProgressTimeout=setTimeout(o.a.bind((function(){this.continueLoading("touch")}),this),400);var e=this.globalTouchObject;if(e){var i=t.originalEvent.changedTouches[0],r=i.screenX-e.x,a=i.screenY-e.y;this.toolbar&&this.toolbar.isMenuOpened()&&Math.abs(r)<3&&Math.abs(a)<3&&+new Date-e.startTime<500&&!f.default.isPageNativelyScaled()&&Object(n.a)(t.target).closest(this.$mag_container).length&&this.toolbar.closeMenu()}delete this.globalTouchObject},checkDoubleTap:function(t){if(!(t.originalEvent.touches.length>0)){var e=+new Date,i=e-(this.lastTouchEndTime||e+1);if(this.lastTouchEndTime=e,i<500&&i>0&&f.default.isPageNativelyScaled()){var r=Object(n.a)('meta[name="viewport"]');if(r.length){var a=r.attr("content"),s=a.replace(/maximum\-scale\=[0-9\.]*/,"maximum-scale=1.0");if(r.attr("content",s),Modernizr.android){var c=Object(n.a)("<div>").appendTo("body");o.a.delay((function(){c.remove()}),500),setTimeout(o.a.bind((function(){r.attr("content",a);var t=Object(n.a)("<div>").appendTo("body");o.a.delay((function(){t.remove()}),500)}),this),1e3)}else r.attr("content",a);this.lastTouchEndTime=0,o.a.delay((function(){Object(n.a)(window).trigger("gesturechange")}),300),o.a.delay((function(){Object(n.a)(window).trigger("gesturechange")}),1e3)}}}},onMouseDown:function(t){this.globalMouseObject={x:t.screenX,y:t.screenY,startTime:+new Date}},onMouseUp:function(t){var e=this.globalMouseObject;if(e){var i=t.screenX-e.x,r=t.screenY-e.y;this.toolbar&&this.toolbar.isMenuOpened()&&Math.abs(i)<3&&Math.abs(r)<3&&+new Date-e.startTime<500&&Object(n.a)(t.target).closest(this.$mag_container).length&&this.toolbar.closeMenu()}delete this.globalMouseObject},onMouseWheel:function(t){t.originalEvent.deltaX<0&&Math.abs(t.originalEvent.deltaY)<2&&t.cancelable&&t.preventDefault()},onKeyup:function(t){if("input"!=t.target.tagName.toLowerCase()&&("textarea"!=t.target.tagName.toLowerCase()||"copyhack"==t.target.className)&&o.a.isEmpty(RM.common.disableShortcuts)&&!this.isInPresentationMode){var e=o.a.chain(k.c.viewports).filter((function(t){return"tablet_portrait"!=t.name||(this.currentPage["viewport_"+t.name]||{}).enabled}),this).map((function(t,e){var i=o.a.clone(t);return i.shortcut=""+(e+1),i})).findWhere({shortcut:String.fromCharCode(t.keyCode)}).value();e&&this.isPreview&&(this.switchToViewport(e.name),this.aboveGlobalWidgetsRendered||"horizontal"!==this.viewOpts.viewertype||this.renderAboveGlobalWidgets(this.currentPage),this.setViewerOptions(e.name),this.setViewerClasses(),this.onResize(),this.loadPages());o.a.find(n.a.keycodes,(function(e,i){var r=n.a.keycodes[i]===t.keyCode;return r&&i,r}))&&this.trigger("keypress-"+t.keyCode,t)}},onKeydown:function(t){if("input"!=t.target.tagName.toLowerCase()&&("textarea"!=t.target.tagName.toLowerCase()||"copyhack"==t.target.className)&&o.a.isEmpty(RM.common.disableShortcuts)&&this.isInPresentationMode&&!(t.altKey||t.ctrlKey||t.metaKey))switch(t.which){case 8:case 33:case 80:case 37:case 72:case 38:case 75:t.preventDefault(),this.goPrevPage({animation:!0});break;case 13:case 34:case 78:case 39:case 76:case 40:case 74:t.preventDefault(),this.goNextPage({animation:!0});break;case 36:t.preventDefault(),this.goFirstPage();break;case 35:t.preventDefault(),this.goLastPage();break;case 9:case 32:t.preventDefault(),t.shiftKey?this.goPrevPage({animation:!0}):this.goNextPage({animation:!0});break;case 77:t.preventDefault(),this.trigger("keypress-"+t.keyCode,t)}},onVerticalViewKeyDown:function(t){if(!this.isInPresentationMode&&"vertical"===this.viewOpts.viewertype&&(t.which===n.a.keycodes.down||t.which===n.a.keycodes.up)){if(t.preventDefault(),this.arrowKeyLastScrollAt&&new Date-this.arrowKeyLastScrollAt<400)return;var e=t.which===n.a.keycodes.down;this.arrowKeyLastScrollAt=+new Date;var i,r,a=window.innerHeight,s=this.getScroll(),c=this.getScrollPosition(),l=Math.round(a/4),u=function(t){return t&&t<=l},d=o.a.bind((function(){var t=this.magPagesPos[this.currentPage.num];return Math.abs(s-t.y)}),this),h=this.currentPage.pageHeight,p=0===c&&!this.isFirstPage();if(e)r=u(i=h-c-a)?h-c:function(t){return t>l&&t<a}(i)?i:a,p&&this.viewOpts.slidein&&(r+=d());else{if(p){var f=this.magPagesPos[this.currentPage.num-1];c=f?f.h:0}r=u(i=c-a)||c<a?-c:-a,p&&this.viewOpts.slidein&&(r-=this.SCROLL_SNAP-d())}this.setScrollPosition({delta:r,animate:!0})}},togglePresentationMode:function(t){!!this.isInPresentationMode!=t&&_.a.isDesktop&&(this.isPreview||(t?(Object(n.a)("body").on("keydown",this.onKeydown),this.trigger("presentationModeOn")):(Object(n.a)("body").off("keydown",this.onKeydown),this.trigger("presentationModeOff")),this.isInPresentationMode=t))},recalcBottomArrowState:function(t){this.currentPage&&t===this.currentPage&&this.navigation&&this.navigation.recalcBottomArrowState(t)},setScrollPosition:function(t){var e;this.currentPage&&("vertical"==this.viewOpts.viewertype?(e=void 0!==t.offset?this.magPagesPos[this.currentPage.num].y+t.offset:this.getScroll()+t.delta,t.animate?this.$magScrollAnimate.animate({scrollTop:e},500):this.setScroll(e)):(e=void 0!==t.offset?t.offset:this.currentPage.$scrollWrapper.scrollTop()+t.delta,t.animate?this.currentPage.$scrollWrapper.animate({scrollTop:e},500):this.currentPage.$scrollWrapper.scrollTop(e)))},getScrollPosition:function(){if(!this.currentPage)return 0;return"vertical"==this.viewOpts.viewertype?Math.max(this.getScroll()-this.magPagesPos[this.currentPage.num].y,0):this.currentPage.$scrollWrapper.scrollTop()},getScroll:function(){return this.$magScrollContainer&&this.$magScrollContainer.scrollTop()},setScroll:function(t){this.$magScrollContainer&&this.$magScrollContainer.scrollTop(t)},onMagScroll:function(){if(document.fullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement||this.hadPlayingVideoOnResize)this.hadPlayingVideoOnResize=!1;else{o.a.isFunction(this._resetUrlStringTimeoutFunc)&&this._resetUrlStringTimeoutFunc(),this.pauseWidgetsLoadingOnScroll();var t=this.findPageOnCurrentMagScroll({pageStartsOnBottom:!Object(T.a)("viewer.offPageStartOnBottom")&&this.isStickyVerticalViewer&&!_.a.isDesktop}),e=this.getScrollParams(t);if(this.lastPageScroll=e.pageScroll,this.lastPageScrollPercent=e.pageScrollPercent,this.showPage(t.page.num,e),this.aboveGlobalAnimations&&this.aboveGlobalAnimations.onScroll({forceApply:!0,scroll:this.getScroll()}),this.trigger("mag scroll",this.getScroll()),this.$bottomArrow&&+this.magOpenTime+2e3<+new Date){this.$bottomArrow.addClass("offscreen");var i=this.$bottomArrow;delete this.$bottomArrow,setTimeout((function(){i.remove()}),400)}}},scrollMagALittle:function(){this.$magScrollAnimate.animate({scrollTop:this.getScroll()+this.getContainerSizeCached().height},500)},findPageOnCurrentMagScroll:function(t){t=t||{};var e,i,n,r,a=this.getScroll(),o=this.getContainerSizeCached(),s=(a=Math.min(Math.max(a,0),this.magHeight-o.height),this.pages.length),c=a+(t.pageStartsOnBottom?o.height-50-16-16:0);for(e=0;e<s;e++){if(i=this.pages[e],n=this.magPagesPos[i.num],c>=(r?r.y+r.h:n.y)&&c<n.y+n.h||e==s-1)return{page:i,scroll:a,pos:n};r=n}},getScrollParams:function(t){var e=Math.max(t.scroll-t.pos.y,0),i={initiator:"scroll",pageScroll:e,pageScrollPercent:e/t.page.pageHeight};if(this.viewOpts.slidein?(i.nextPageScroll=0,i.slideInNextPageScroll=t.pos.h-i.pageScroll):i.nextPageScroll=i.pageScroll-t.pos.h,i.nextPageVisible=t.pos.h-i.pageScroll<this.getContainerSizeCached().height,this.viewOpts.slidein){var n=(t.pos.h-i.pageScroll)/this.getContainerSizeCached().height;i.nextPageBlackout=Math.min(Math.max(n,0),1)}return i},onCurrentPageScroll:function(t,e){this.pauseWidgetsLoadingOnScroll(),this.aboveGlobalAnimations&&this.aboveGlobalAnimations.onScroll({forceApply:!this.isStickyVerticalViewer,scroll:e}),this.lastPageScroll=e,this.lastPageScrollPercent=this.lastPageScroll/t.pageHeight,this.loadPages.__debounced()},scrollCurrentPageALittle:function(){this.currentPage&&this.currentPage.scrollPageALittle()},focusCurrentPage:function(){this.currentPage&&this.currentPage.focusPage()},backToTopCurrentPage:function(){if("vertical"==this.viewOpts.viewertype){var t=this.findPageOnCurrentMagScroll();this.$magScrollAnimate.animate({scrollTop:t.pos.y},500)}else this.currentPage&&this.currentPage.backToTop();RM.analytics&&RM.analytics.sendEvent("Scroll Top Link")},scrollPageToPos:function(t,e){var i,n,r=this.getPage(t),a=this.getContainerSizeCached();e=e||0,e*=r.scale,e+=r.contentPosition.top,"vertical"==this.viewOpts.viewertype?(i=this.magPagesPos[r.num],n=Math.max(0,i.y+e),n=Math.min(n,i.y+i.h-a.height),this.$magScrollAnimate.animate({scrollTop:n},500)):(this.currentPage!=r&&this.showPage(r.num),n=Math.max(0,e),r.scrollTo(n))},pauseWidgetsLoadingOnScroll:function(){},toExternalLink:function(t){var e=Object(n.a)(t.target).closest("a").attr("href");RM.analytics&&RM.analytics.sendEvent("External Link",e)},maglink:function(t){if(2!=t.which&&!t.metaKey&&!t.ctrlKey){var e=Object(n.a)(t.currentTarget).data("link")||Object(n.a)(t.currentTarget).attr("href");if(!e)return!1;if(t.preventDefault(),Object(n.a)(t.currentTarget).hasClass("back-to-top"))return this.backToTopCurrentPage();this.router.navigate(e,{trigger:!0})}},onGobackLinkClick:function(t){this.router.goBack()},onMailchimpLinkClick:function(t){var e,i=Object(n.a)(t.currentTarget);if(!i.hasClass("disabled")){i.flashClass("disabled",3e3);try{e=JSON.parse(i.attr("data-mailchimp"))}catch(t){e=null}e&&v.a.initMailchimpAPI((function(t){f.default.deleteCookie("MCEvilPopupClosed"),t.start(e)}))}},onAnchorLinkClick:function(t){var e=Object(n.a)(t.currentTarget),i=parseInt(e.attr("data-anchor-link-pos"),10)||0,r=e.attr("data-page-id"),a=e.attr("data-page-uri");if(r){var o=this.pages.find((function(t){return t._id===r}));o&&(a=o.num)}i&&a&&(this.scrollPageToPos(a,i),RM.analytics&&RM.analytics.sendEvent("Anchor Link",i))},onShareLinkClick:function(t){b.share({host:(RM.common.embedDomainName||window.location.protocol+"//"+window.location.hostname)+"/",tp:Object(n.a)(t.currentTarget).attr("data-share-provider"),source:"mag links",page:this.currentPage||this.pages[0],mag:o.a.extend(this.model.toJSON(),{user:this.user}),forProject:"mag"==Object(n.a)(t.currentTarget).attr("data-share-type"),customDomain:!(!RM.common.isDomainViewer&&!RM.common.embedDomainName),customDomainProfile:!(!RM.common.customDomainProfile&&"User"!=RM.common.embedDomainType),analytics:this.router.analytics})},showPageCounter:function(t){if(this.toolbar){var e=1;this.currentPage&&(e=this.currentPage.num+(t?"left"==t?1:-1:0),e=Math.max(Math.min(e,this.getPagesCount()),1)),this.toolbar.showPageCounter(this.getPage(e),{showPageCounter:!0})}},showPage:function(t,e){e=e||{},this.active||this.render();var i=this.getPage(t),n=this.currentPage,r=i&&this.getPage(i.num+1),a=this;i&&!this.aboveGlobalWidgetsRendered&&this.renderAboveGlobalWidgets(i),this.isStickyVerticalViewer?this.redrawAboveGlobalWidgets():e.nextPageVisible||"horizontal"===this.viewOpts.viewertype?this.redrawAboveGlobalWidgets(i,r,e.slideInNextPageScroll||e.nextPageScroll,e.animation):i?this.redrawAboveGlobalWidgets(i):n&&this.redrawAboveGlobalWidgets.__debounced(),"vertical"==this.viewOpts.viewertype&&(e.animation=!1,i&&i.scrollOnVerticalMode(e.pageScroll||0),i&&r&&null!=e.nextPageScroll&&(r.scrollOnVerticalMode(e.nextPageScroll),(_.a.isDesktop||Object(T.a)("viewer.offPageStartOnBottom"))&&(e.nextPageVisible?r.start():r.stop())),i&&null!=e.nextPageBlackout&&this.$pages_blackout.css({display:r?"block":"none",opacity:e.nextPageBlackout,"z-index":i.getPageZIndex()}));var o=!this.currentPage;if(!o&&t===this.currentPage.num)return!1;if(!i)return 1!==t&&this.router.onError(),!1;if(n)if("horizontal"==this.viewOpts.viewertype||this.isStickyVerticalViewer)n.stop();else{r==n&&e.nextPageVisible||n.stop();var s=n&&this.getPage(n.num+1);s&&!(s==i||s==r&&e.nextPageVisible)&&s.stop()}else e.animation=!1;this.pauseLoading("page-change-animation"),this.currentPage=i,n&&n.resetWaitForAnimationEnd(),clearInterval(this.showPageCompleteInterval),this.$pages_container.toggleClass("disable-transitions",!e.animation),e.animation&&(this.viewOpts.slidein&&n&&n.num>i.num?n.waitForAnimationEnd(h):i.waitForAnimationEnd(h)),this.direction=!n||n.num<i.num?"forward":"backward";var c=i.num-this.getPreloadPageCount(i.num-1,"forward"===this.direction?"backward":"forward"),l=i.num+this.getPreloadPageCount(i.num-1,this.direction);"horizontal"!=this.opts.viewertype||this.opts.arrows||(c=l=i.num);for(var u=0;u<this.pages.length;u++){var d=this.pages[u];d.num<i.num?d.setPosition("prev",d.num+1==i.num):d.num>i.num?d.setPosition("next",d.num-1==i.num):d.setPosition("center",d.num==i.num),d.num>=c&&d.num<=l&&d.show(),"vertical"==this.viewOpts.viewertype&&(d.num<i.num||d.num>i.num+1)&&d.resetScrollOnVerticalMode()}function h(){function t(){for(var t=0;t<a.pages.length;t++){var e=a.pages[t];(e.num<c||e.num>l)&&e.hide()}i.start(),a.loadPages()}e.animation||o||window.requestAnimationFrame((function(){a.$pages_container.removeClass("disable-transitions")})),a.continueLoading("page-change-animation"),"vertical"==a.viewOpts.viewertype&&"scroll"!=e.initiator&&a.setScroll(a.magPagesPos[i.num].y),a.isPreview&&a.$el.scrollTop(0),clearInterval(a.showPageCompleteInterval),a.loadingPaused?a.showPageCompleteInterval=setInterval((function(){a.loadingPaused||(clearInterval(a.showPageCompleteInterval),t())}),17):t()}!e.animation&&h(),this.scheduleSetUrlString({replace:!o,skipInternalHistory:e.skipInternalHistory}),this.router.setTitle(),this.trigger("pageChanged",i,{showPageCounter:e.animation||e.bySwipe||o||"scroll"==e.initiator,initial:o}),i.trigger("changedTo"),"vertical"==this.viewOpts.viewertype&&this.updateArrowsColor(i)},scheduleSetUrlString:function(){if(!Modernizr.chrome)return this.router.setUrlString.apply(this.router,arguments),this.router.trackPage(),void(this._resetUrlStringTimeoutFunc=!1);var t=arguments;this._resetUrlStringTimeoutFunc=function(){clearTimeout(this._urlStrigScheduleTimeout),this._urlStrigScheduleTimeout=setTimeout(function(){this._resetUrlStringTimeoutFunc=null,this.router.setUrlString.apply(this.router,t),this.router.trackPage()}.bind(this),100)}.bind(this),this._resetUrlStringTimeoutFunc()},goNextPage:function(t){this.isLastPage()||this.currentPage&&this.router.go(this.currentPage.num+1,et(et({},t),{},{isPageNum:!0}))},goPrevPage:function(t){this.isFirstPage()||this.currentPage&&this.router.go(this.currentPage.num-1,et(et({},t),{},{isPageNum:!0}))},goFirstPage:function(){this.router.go(1,{isPageNum:!0})},goLastPage:function(){this.router.go(this.getPagesCount(),{isPageNum:!0})},pauseLoading:function(t){this.pauseReasons=this.pauseReasons||{},this.pauseReasons[t]=!0,this.loadingPaused=!0},continueLoading:function(t){this.pauseReasons=this.pauseReasons||{},this.pauseReasons[t]=!1,this.loadingPaused=!o.a.every(o.a.values(this.pauseReasons),(function(t){return!t}))},loadPages:function(){if(window.RM.timing[g.b.LoadPagesStart]=Date.now(),this.pages&&this.pages.length){var t=this.getPagesLoadOrder();if(t&&t.length){var e,i,n=[],r=[];for(e=0;e<t.length;e++){var a=(i=this.pages[t[e]]).getWidgetsPacks();a.length&&n.push(a),r=r.concat(i.getImmediatePack())}if(n.length){var o=[];for(e=0;e<n.length;e++){0==e&&c(e,0),c(e+1,0);for(var s=1;s<n[e].length;s++)c(e,s)}o.unshift(r),this.widgetsPacksLoadQueue=o,this.stopPagesLoad(),this.loadNextWidgetsPack()}}}function c(t,e){t<0||t>=n.length||e<0||e>=n[t].length||o.push(n[t][e])}},stopPagesLoad:function(){clearTimeout(this.loadNextWidgetsTimer)},loadNextWidgetsPack:function(){if(!this.widgetsPacksLoadQueue.length)return window.RM.timing[g.b.LoadPagesEnd]=Date.now(),void a.a.trigger("widgetsQueue:empty",this.num_id);if(this.loadingPaused)this.loadNextWidgetsTimer=setTimeout(this.loadNextWidgetsPack,50);else{var t=this.widgetsPacksLoadQueue.shift();if(t.length){var e=o.a.uniq(o.a.map(t,"page")),i=e[0];if(1!==e.length||i.shown&&!i.loaded){this.widgetPackCount;i.loadWidgetsPack(t,o.a.bind((function(){this.widgetPackCount++,this.loadNextWidgetsTimer=setTimeout(this.loadNextWidgetsPack,17)}),this))}else this.loadNextWidgetsTimer=setTimeout(this.loadNextWidgetsPack,17)}else this.loadNextWidgetsTimer=setTimeout(this.loadNextWidgetsPack,17)}},getPreloadPageCount:function(t,e){if("horizontal"==this.viewOpts.viewertype)return this.PRELOAD_COUNT[e];for(var i=1,n=0,r="forward"==e?1:-1;n<this.PRELOAD_COUNT[e]&&i*r+t<this.pages.length&&i*r+t>=0;)n+=this.pages[i*r+t].height,i++;return i},getPagesLoadOrder:function(){var t=this.currentPage;if(t){var e,i=t.num-1,n=this.pages.length,r=[],a=this,o=t.num-this.getPreloadPageCount(i,"forward"==this.direction?"backward":"forward"),s=t.num+this.getPreloadPageCount(i,this.direction);if(c(i),"backward"==this.direction){for(c(i-1),c(i+1),e=i-2;e>=o;e--)c(e);for(e=i+2;e<=s;e++)c(e)}else{for(c(i+1),c(i-1),e=i+2;e<=s;e++)c(e);for(e=i-2;e>=o;e--)c(e)}return r}function c(t){t<0||t>=n||!a.pages[t].shown||a.pages[t].loaded||r.push(t)}},onGestureChange:function(){this.onResize.__debounced()},checkFullscreen:function(){this.fullscreenCheckCounter=5,clearInterval(this.fullscreenCheckTimer),this.fullscreenCheckTimer=setInterval(o.a.bind((function(){var t=window.fullScreen||window.innerWidth==screen.width&&window.innerHeight>=screen.height-1;this.togglePresentationMode(t),this.fullscreenCheckCounter--,this.fullscreenCheckCounter||clearInterval(this.fullscreenCheckTimer)}),this),500)},onResize:function(t){var e=this;if(this.checkFullscreen(),!_.a.isDesktop&&"horizontal"==this.viewOpts.viewertype||"vertical"==this.viewOpts.viewertype&&!this.isStickyVerticalViewer){var i="horizontal"==this.viewOpts.viewertype?Object(n.a)("html, body").add(this.$el):this.$el,r=f.default.isPageNativelyScaled(),a=window.innerHeight;337==a&&414==Object(n.a)(window).height()&&a++,i.height(r?"100%":a),!r&&i.scrollTop(0)}var s=this.getContainerSize(),c=this.isPortrait()?"portrait":"landscape",l=!1;if(!_.a.isDesktop&&this.prevOrientation&&this.prevOrientation!==c){var u=this.getPage(this.currentPage.num-1),d=O.a.findPlayingVideo(this.currentPage.widgets)||O.a.findPlayingVideo(null==u?void 0:u.widgets),h=!!d&&Z.a.doBoundingBoxesIntersect(d.$el[0].getBoundingClientRect(),{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth});d&&h?(this.hadPlayingVideoOnResize=!0,setTimeout((function(){d.page.num===e.currentPage.num&&e.setScrollPosition({offset:d.y*e.getScale(e.currentPage.pageViewport)})}),500)):(this.hadPlayingVideoOnResize=!1,this.switchToViewport(this.getMagViewport()),this.setPagesTransitions(),this.stopPagesLoad(),setTimeout(this.onResize,300),setTimeout(this.onResize,1500)),l=!0}if(this.prevOrientation=c,this.isPreview&&"default"!=this.viewport){var p=Math.round((this.$el.width()-s.width)/2),g=Math.round((this.$el.height()-s.height)/2);this.$mag_container.add(this.$mag_viewport_device).css({top:Math.max(g,0),left:Math.max(p,0),width:s.width,height:s.height})}else this.$mag_container.add(this.$mag_viewport_device).css({top:"",left:"",width:"",height:""});this.$mag_viewport_device.attr("data-viewport",this.viewport),this.setNewPagesWidths(s.width,s.height),this.magHeight=0,this.magPagesPos=[];var m=this.pages&&this.pages.length;if(o.a.each(this.pages,o.a.bind((function(t,e){var i=t.onResize({absolutePosition:this.magHeight}),n=0;e<m-1&&this.viewOpts.slidein&&(n=this.SCROLL_SNAP),this.magPagesPos[t.num]={y:this.magHeight,h:i,dh:n},this.magHeight+=i+n}),this)),"vertical"===this.viewOpts.viewertype&&this.magHeight){var v=this.$magScrollSizer.width(),b=0;if(this.isPreview&&"default"!==this.viewport&&(b=Math.max(this.$el.height()-this.getViewportSetting("min_height"),0)),this.$magScrollSizer.css("height",this.magHeight+b),v!=this.$magScrollSizer.width()&&_.a.isDesktop&&this.onResize(),this.currentPage)if(this.isStickyVerticalViewer||this.hadPlayingVideoOnResize){if(l&&!this.hadPlayingVideoOnResize){var y=this.getScrollPosForNewSize();setTimeout(o.a.bind((function(){this.setScroll(y)}),this),0)}}else this.setScroll(this.getScrollPosForNewSize()),this.onMagScroll();this.$bottomArrow&&this.$bottomArrow.toggleClass("offscreen",this.getScroll()+s.height+this.SCROLLABLE_TRESHOLD>this.magHeight)}if("horizontal"==this.viewOpts.viewertype&&this.currentPage&&l&&!this.hadPlayingVideoOnResize){y=this.getScrollPosForNewSize();setTimeout(o.a.bind((function(){this.currentPage.$scrollWrapper.scrollTop(y)}),this),0),this.aboveGlobalWidgetsRendered||setTimeout(o.a.bind((function(){this.aboveGlobalWidgetsRendered||this.renderAboveGlobalWidgets(this.currentPage)}),this),40)}this.currentPage&&this.loadPages.__debounced()},onOptsChange:function(){window.dispatchEvent(new Event("resize"))},getScrollPosForNewSize:function(){return this.currentPage?"vertical"==this.viewOpts.viewertype?this.magPagesPos[this.currentPage.num].y+(this.lastPageScrollPercent||0)*this.currentPage.pageHeight:(this.lastPageScrollPercent||0)*this.currentPage.pageHeight:0},setNewPagesWidths:function(t,e){var i=this.$el.find("#page-position-style"),r=_.a.isDesktop?"":" translateZ(0)",a="        .mag .mag-pages-container .container {\n          left: 0px;\n          width: "+t+"px;\n        }\n        .mag .mag-pages-container .container .page {\n          left: 0px;\n          width: "+t+"px;\n        }\n",o="";if("horizontal"==this.viewOpts.viewertype)o="          .mag .mag-pages-container .container .page.prev-page {\n            -webkit-transform: translateX("+(this.viewOpts.slidein?0:-t)+"px) "+r+";\n            transform: translateX("+(this.viewOpts.slidein?0:-t)+"px) "+r+";\n          }\n          .mag .mag-pages-container .container .page.center-page {\n            -webkit-transform: translateX(0) "+r+";\n            transform: translateX(0) "+r+";\n          }\n          .mag .mag-pages-container .container .page.next-page {\n            -webkit-transform: translateX("+t+"px) "+r+";\n            transform: translateX("+t+"px) "+r+";\n          }";else if(this.isStickyVerticalViewer){var s=this.getContainerSizeCached().height;o="            .mag .mag-pages-container .container .page .page-fixed-bg-container,            .mag .mag-pages-container .container .page .fixed-position-container,            .mag .mag-pages-container .container .page .fixed-position-container-top {              height: "+s+"px;            }\n            .mag .mag-pages-container .container .page .fixed-position-container,            .mag .mag-pages-container .container .page .fixed-position-container-top,            .mag .mag-pages-container .container .page:not(.hide-sticky) .content-scroll-wrapper {              margin-top: "+-s+"px;            }\n"}else o="            .mag .mag-pages-container .container .page.prev-page {\n              top: "+(-e-1)+"px;            }\n            .mag .mag-pages-container .container .page.next-page {\n              top: "+(e+1)+"px;            }\n";i.length||(i=Object(n.a)('<style id="page-position-style" type="text/css">')).appendTo(this.$el),"horizontal"==this.viewOpts.viewertype?(this.$pages_container.addClass("disable-transitions-on-resize"),i.text(a+o),this.$pages_container.height(),this.$pages_container.removeClass("disable-transitions-on-resize")):i.text(a+o)},setPagesTransitions:function(){var t=this.$el.find("#page-transition-style"),e=this.getPageTransitionTime(),i="cubic-bezier(0.40, 0.24, 0.40, 1)",r="        .mag .mag-pages-container .container .page {\n          -webkit-transition:\tall "+e+"ms "+i+";          transition: all "+e+"ms "+i+";        }\n        .mag .mag-pages-container .container .page.center-page {\n          -webkit-transition:\tall "+(e-5)+"ms "+i+";          transition: all "+(e-5)+"ms "+i+";        }\n        ";t.length||(t=Object(n.a)('<style id="page-transition-style" type="text/css">')).appendTo(this.$el),t.text(r)},switchToViewport:function(t){if(this.viewport!=t){var e=this.viewport;this.containerSize=null,this.viewport=t,this.trigger("change:viewport",{viewport:this.viewport,oldViewport:e}),this.aboveGlobalWidgetsRendered=!1,this.aboveGlobalWidgets&&this.aboveGlobalWidgets.forEach((function(t){t.destroy(),t.off()})),this.aboveGlobalAnimations&&this.aboveGlobalAnimations.destroy(),this.aboveGlobalWidgets=[],o.a.each(this.pages,(function(t){t.updateViewport()}))}},getContainerSize:function(){var t,e,i=this;return this.isPreview&&"default"!=this.viewport?(t=this.getViewportWidth(this.viewport),e=Math.min(this.getViewportSetting("min_height"),this.$el.height())):(t=RM.screenshot?Object(n.a)(window).width():this.$el.width(),e=RM.screenshot?window.innerHeight:this.isStickyVerticalViewer&&Modernizr.safari&&!_.a.isDesktop?i.isPortrait()?Math.max(window.innerHeight,screen.height-20-20+1):Math.min(screen.width,screen.height):this.isStickyVerticalViewer?window.innerHeight:this.$el.height()||window.innerHeight),this.containerSize={width:t,height:e},this.containerSize},getContainerSizeCached:function(){return this.containerSize||this.getContainerSize()},getViewportWidth:function(t){return t&&t!==k.b.Default?k.c.dictionary[t].width:this.desktopWidth||k.c.dictionary[k.b.Default].width},isPortrait:function(){return window.screen?window.screen.orientation&&window.screen.orientation.type?!!window.screen.orientation.type.match(/portrait/i):0===window.orientation||90!==window.orientation&&-90!==window.orientation&&window.innerWidth<window.innerHeight:window.innerWidth<window.innerHeight},getMagViewport:function(){var t=this.isPortrait();if(this.isPreview)return this.constructorViewport||"default";var e=k.b.Default,i=window.innerWidth;if(Modernizr.retina||!_.a.isDesktop||Modernizr.ismobile){if(screen&&screen.width&&(i=t?Math.min(screen.width,screen.height):Math.max(screen.width,screen.height)),t)return i<600?k.b.PhonePortrait:i>=600&&i<=1024?k.b.TabletPortrait:k.b.Default;if(i>980)return k.b.Default}if(Modernizr.isipad)return t?k.b.TabletPortrait:k.b.Default;if(!_.a.isDesktop){var n=i,r=o.a.reduce(k.c.viewports,(function(t,e,i){return Math.abs(e.width-n)<=Math.abs(k.c.viewports[t].width-n)?i:t}),0);e=k.c.viewports[r].name}return e},getViewportSetting:function(t,e){return(k.c.dictionary[e||this.viewport]||{})[t]},log:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e]+" ";var i=Object(n.a)("#log");i.length||(i=Object(n.a)('<div id="log">').css({position:"fixed",background:"rgba(0, 0, 0, 0.7)",color:"#fff",width:200,height:300,left:10,top:10,"z-index":999999,overflow:"auto"}).appendTo("body"));var r=i.html(),a=r.split("<br>");i.html(a.slice(-17).join("<br/>")+"<br/>"+t),i.scrollTop(999999)},fixFocusScroll:function(){this.$mag_container.scrollTop(0),this.$mag_container.scrollLeft(0)},matchSameDomainLink:function(t){var e=t.match(new RegExp("//"+f.default.escapeSpecial(window.location.hostname)+"/(.*)")),i=e&&e[1];if(i){var n=this.getPageByPath(i);if(n)return n._id}return t},getScale:function(t){if(RM.screenshot)return 1;var e=Math.min(this.viewOpts.scalewidth,this.getContainerSizeCached().width),i=this.getViewportWidth(t),n=e/i;return S.a.normalize(n,void 0,this.viewport,i,this.opts)},getWidgetById:function(t,e){var i,n,r=e&&e.getWidgetDataById(t)?e:o.a.find(this.pages,(function(e){return e.getWidgetDataById&&e.getWidgetDataById(t)}));return r?(n=r.getWidgetById(t))?i=window.Promise.resolve(n):r.loaded||(i=new window.Promise(function(e,i){this.listenToOnce(r,"loaded"+t,(function(){var n=r.getWidgetById(t);n?e(n):i()}))}.bind(this))):o.a.find(this.aboveGlobalWidgetsData,{_id:t})&&((n=o.a.find(this.aboveGlobalWidgets,{_id:t}))?i=window.Promise.resolve(n):this.aboveGlobalWidgetsRendered||(i=new window.Promise(function(e,i){this.listenToOnce(this,"aboveGlobalWidgetsRendered",(function(){var n=o.a.find(this.aboveGlobalWidgets,{_id:t});n?e(n):i()}))}.bind(this)))),i||window.Promise.reject()},renderAboveGlobalWidgets:function(t){var e=[],i=t.pageViewport;o.a.each(this.aboveGlobalWidgetsData,function(n){var r,a=o.a.find(this.aboveGlobalWidgets,{_id:n._id});if(a&&(a.destroy(),a.off()),n){var s=t.getWidgetViewportData(n,i),c=!this.isPreview&&w.a.hasExpired(s);P.Widgets[s.type]&&!c&&((r=new P.Widgets[s.type](s,t)).$fixedContainer=this.$aboveWidgetsContainer,r.isValid()&&e.push(r))}}.bind(this)),this.aboveGlobalAnimations=this.initializeAboveGlobalAnimation(e,t),o.a.each(e,(function(t){t.render(),t.hidden?y.a.hide(t,!0):y.a.show(t,!0)})),this.aboveGlobalWidgets=o.a.sortBy(e,"y"),this.aboveGlobalWidgetsRendered=!0,this.trigger("aboveGlobalWidgetsRendered")},initializeAboveGlobalAnimation:function(t,e){t=o.a.isArray(t)?t:[t],e.scale=this.getScale(e.pageViewport);var i=new x.a({page:e,widgets:t}),n=[];return o.a.each(t,(function(t){var e=new window.Promise((function(e){t.loaded?e(t):t.on("loaded",e.bind(null,t))}));n.push(e)})),window.Promise.all(n).then(function(){this.aboveAnimationsReady=!0,this.trigger("aboveAnimationsReady")}.bind(this)),this.listenTo(e,"resize",(function(t){o.a.isUndefined(t.prevScale)||t.prevScale===t.scale||i.updateTimelines(),i.onResize({updateAll:!0})})),i},updateAboveGlobalViewport:function(t,e){var i=o.a.find(this.aboveGlobalWidgetsData,{_id:t._id}),n=e.getWidgetViewportData(i,e.pageViewport);if(t.animationObj&&this.aboveGlobalAnimations.removeAnimation(t.animationObj),t.destroy(),t.initialize(n,e),t.hasAnimation()){var r=this.aboveGlobalAnimations.addAnimation(t);r&&r.start()}t.render(),y.a.hide(t,!0)},getAboveGlobalBox:function(t,e,i){var n=o.a.find(this.aboveGlobalWidgetsData,{_id:t}),r=e.getWidgetViewportData(n,e.pageViewport);return f.default.getFixedPositionBox(r.fixed_position,o.a.pick(r,["x","y","w","h"]),e.scale,i)},redrawAboveGlobalWidgets:function(t,e,i,n){if(!t){var r=o.a.isUndefined(this.getScroll())?void 0:this.findPageOnCurrentMagScroll(),a=r&&r.page.num,s=r&&this.getScrollParams(r);t=a&&this.getPage(a),e=t&&this.getPage(t.num+1),i=s&&(s.slideInNextPageScroll||s.nextPageScroll),n=s&&s.animation}i=o.a.isUndefined(i)?void 0:Math.abs(i);var c={width:Math.min(this.viewOpts.scalewidth,this.getContainerSizeCached().width),height:this.getContainerSizeCached().height},l=function(t,e){return!t.page||e&&t.page.pageViewport!==e.pageViewport};if(o.a.isUndefined(i)){var u=this.getPageTransitionTime();o.a.each(this.aboveGlobalWidgets,function(e){var i=t._id&&!y.a.isHidden(e,t._id,this.isPreview),r=t._id&&l(e,t);t._id&&e.updatePage(t),r&&this.updateAboveGlobalViewport(e,t),i?n?e.wasHidden&&f.default.waitForTransitionEnd(t.$el,u,"transform",y.a.show.bind(null,e)):e.wasHidden&&y.a.show(e):!e.wasHidden&&y.a.hide(e)}.bind(this))}else{var d=Math.abs(i);o.a.each(this.aboveGlobalWidgets,function(i){var n=!y.a.isHidden(i,t._id,this.isPreview),r=e&&!y.a.isHidden(i,e._id,this.isPreview),a=n&&r&&t.pageViewport===e.pageViewport,o=this.getAboveGlobalBoxMemoized(i._id,t,c),s=this.getAboveGlobalBoxMemoized(i._id,e||t,c),u=n&&d>o.top+o.height,h=e&&r&&s.top>d;if(u||h||a||!e&&n){var p=u?t:h?e:i.page,f=l(i,p);i.updatePage(p),f?(i.rendered=!1,y.a.hide(i).then(function(){this.updateAboveGlobalViewport(i,p),y.a.show(i)}.bind(this))):i.wasHidden&&y.a.show(i)}else!i.wasHidden&&y.a.hide(i)}.bind(this))}},getUsedFonts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m.a.getUsedFontsFromWidgetsModels(et(et({},t),{},{models:this.pages.reduce((function(t,e){return e.widgets.reduce((function(t,e){return t.push(e)&&t}),t)}),[]),customList:t.includeCustom?o.a.filter(this.edit_params&&this.edit_params.fonts,{provider:"custom"}):[]}))},hasCodeInjection:function(){var t=this;if(o.a.any(["ci_head","ci_body_top","ci_body_bottom","ci_css"],(function(e){return!!t[e]})))return!0;var e=!1;return o.a.each(this.pages,(function(t){o.a.each(t.widgetsData,(function(t){var i=!("iframe"!==t.type||!t.code);if(i&&!t.use_iframe){var n="codeinjection"===X()(t.code,t);if(n){var r=!(!o.a.all(k.c.viewport_listall,(function(e){var i=t[e];return i&&i.hidden||!i}))||!t.hidden);i&&n&&!r&&(e=!0)}}}))})),e},setupEcommerceSidebar:function(){"ecwid"===this.eCommerceManager.getConnectedProvider()?this.cartSidebar=new E.a(this):this.cartSidebar=new M.a(this)}});e.a=nt},ePHO:function(t,e,i){"use strict";i.d(e,"a",(function(){return O}));var n=i("vOnD"),r=i("q1tI"),a=i.n(r),o=i("i8i4"),s=i.n(o),c=i("uxFs"),l=i("5BzK"),u=i("jNGR"),d=i.n(u),h=i("kAAR"),p=i("gzi7"),f=i("lsqT"),g=i.n(f);function m(){return(m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){S(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var O=Object(r.createContext)({}),k=Object(n.default)(l.Flex).withConfig({displayName:"TextPaddings___StyledFlex"})(["zoom:var(--workspace-inverse-zoom);transform:scale(var(--workspace-zoom));transform-origin:left top;"]),P=Object(n.default)(d.a).withConfig({displayName:"TextPaddings___StyledInlineInput"})(["user-select:none !important;appearance:textfield;padding:0 !important;border:none !important;&::-webkit-outer-spin-button,&::-webkit-inner-spin-button{appearance:none;}"]),x=a.a.memo((function(t){var e=t.isActive,i=t.isSmall,o=t.from,u=t.value,d=t.position,h=t.onChange,f=t.disabled,m=window.RM.constructorRouter.zoom.getZoom(),v=g()("Shift"),b="top"===o||"bottom"===o,y=i&&!b,S=Object(r.useRef)(null),O=Object(p.useResizeEffect)(S),x=O.width,C=O.height,j=(b?x:C)*m,_=S&&S.current?S.current.getBoundingClientRect():{x:0,y:0},T=y?10:"top"===o?"22px 22px 0 0":"right"===o?"0 22px 22px 0":"left"===o?"22px 0 0 22px":"0 0 22px 22px",I=Object(r.useMemo)((function(){var t=j-43,e=d*m-21.5;return Math.max(0,e<=t?e:t)}),[d,j,m]),M=y?20:43,E=y?38:b?43:47,D=Object(r.useContext)(c.a).ref,A=D&&D.current?D.current.getBoundingClientRect():{x:0,y:0},$=document.getElementById("paddings-input-portal"),L=a.a.createElement(l.Flex,{position:"relative",justifyContent:y?"flex-start":"flex-end",flexDirection:b?"row":"column",style:w({position:"absolute"},b?{left:I+A.x+_.x*m,top:A.y+_.y*m-("top"===o?M:0)}:{top:I+A.y+_.y*m,left:A.x+_.x*m-("left"===o?E:0)})},a.a.createElement(k,{bg:"blue",width:E,height:M,borderRadius:T,alignItems:"center",justifyContent:"center"},a.a.createElement(P,{fontSize:14,height:18,fontWeight:600,color:"white",placeholder:"0",type:"number",value:u,textAlign:"center",min:0,step:v?10:1,onChange:function(t){return h(parseInt(t.target.value))},autoFocus:!1,disabled:f})));return a.a.createElement(n.StyleSheetManager,{target:document.head},a.a.createElement(a.a.Fragment,null,a.a.createElement(l.Box,{ref:S,width:"100%",height:"100%"}),e&&$?s.a.createPortal(L,$):null))})),C=Object(n.default)(l.Box).withConfig({displayName:"TextPaddings___StyledBox"})(["cursor:",";"],(function(t){return t._css})),j=a.a.memo((function(t){var e=t.from,i=t.isChanged,n=t.onChange,o=t.value,s=void 0===o?0:o,c=t.isSmall,u=t.marginBottom,d=void 0===u?0:u,p=t.marginLeft,f=void 0===p?0:p,g=t.marginRight,b=void 0===g?0:g,y=t.marginTop,w=void 0===y?0:y,O=t.onStart,k=t.onStop,P=Object(r.useContext)(h.StyledFrameContext),j=P&&P.window,_=function(t,e){var i=e;j&&j.addEventListener(t,i),window.addEventListener(t,i)},T=function(t,e){var i=e;j&&j.removeEventListener(t,i),window.removeEventListener(t,i)},I="top"===e||"bottom"===e,M="bottom"===e,E=v(Object(r.useState)(!1),2),D=E[0],A=E[1],$=v(Object(r.useState)(!1),2),L=$[0],R=$[1],F=v(Object(r.useState)(!1),2),B=F[0],z=F[1],W=v(Object(r.useState)(0),2),V=W[0],N=W[1],U=Object(r.useRef)(null),H=v(Object(r.useState)(0),2),G=H[0],K=H[1],q=v(Object(r.useState)(0),2),Y=q[0],J=q[1],Q=Object(r.useRef)(!1).current,X=function(t){Q=!0;var i=I?t.screenY:t.screenX,r="right"===e?V-i:i-V;n(Math.max(0,s+r)),J(Math.max(0,(I?t.clientX:t.clientY)-G))},Z=function(){R(!1),Q&&(z(!1),k&&k(e)),Q=!1};Object(r.useEffect)((function(){return L?(_("mousemove",X),_("mouseup",Z)):(T("mousemove",X),T("mouseup",Z)),function(){T("mousemove",X),T("mouseup",Z)}}),[L]);var tt=function(t){var i=document.getElementById("paddings-input-portal"),n=t.target;i&&!i.contains(n)&&U.current&&!U.current.contains(n)&&(z(!1),R(!1),Z(),k&&k(e))},et=function(t){"Escape"===t.key&&(z(!1),R(!1),Z(),k&&k(e))};Object(r.useEffect)((function(){return L||(B?(_("click",tt),_("keyup",et)):(T("click",tt),T("keyup",et),k&&k(e))),function(){T("click",tt),T("keyup",et)}}),[L,B]);var it=Object(r.useMemo)((function(){return M?D||L?1:0:D||L?2:1}),[L,D]),nt=Object(r.useMemo)((function(){return I?"calc(100% - ".concat(f+b,"px)"):"".concat(it,"px")}),[it,f,b]),rt=Object(r.useMemo)((function(){return I?"".concat(it,"px"):"calc(100% - ".concat(d+w,"px)")}),[it,d,w]),at=Object(r.useMemo)((function(){return I?0+f:void 0}),[f]),ot=Object(r.useMemo)((function(){return I?void 0:0+w}),[w]),st=i?"tomato":"blue";return a.a.createElement(l.Box,m({ref:U,position:"absolute",width:I?"100%":void 0,height:I?void 0:"100%",left:I?0:void 0,top:I?void 0:0},S({},e,0)),a.a.createElement(l.Box,{bg:"rgba(28, 222, 180, 0.18)",style:{width:I?"100%":s,height:I?s:"calc(100% - ".concat(w+d,"px)"),marginTop:I?0:w}}),a.a.createElement(C,m({position:"absolute",onMouseEnter:function(){return A(!0)},onMouseLeave:function(){return A(!1)},onMouseDown:function(t){var i=document.getElementById("paddings-input-portal");if(!i||!i.contains(t.target)){if(!B){var n=t.target.getBoundingClientRect(),r=I?n.x:n.y;K(r),J(Math.max(0,(I?t.clientX:t.clientY)-r)),z(!0)}N(I?t.screenY:t.screenX),R(!0),O&&O(e)}}},S({},e,M?0:"100%"),{style:{width:M?"100%":I?nt:"4px",height:M||I?4:rt,left:M?0:at,top:ot},_css:I?"row-resize":"col-resize"}),a.a.createElement(l.Box,{position:"absolute",width:I?"100%":void 0,height:I?void 0:"100%",bottom:"top"===e?"100%":void 0,top:"bottom"===e?"100%":void 0,left:"right"===e?"100%":void 0,right:"left"===e?"100%":void 0},a.a.createElement(x,{isSmall:c,position:Y,isActive:B,onChange:n,value:s,from:e,disabled:L})),a.a.createElement(l.Flex,{width:"100%",height:"100%",alignItems:"top"===e?"flex-start":"flex-end",justifyContent:"right"===e?"flex-end":void 0},a.a.createElement(l.Box,{width:I?"100%":"".concat(it,"px"),height:I?"".concat(it,"px"):"100%",bg:D||L||M||s&&s>0?st:"transparent"}))),M&&a.a.createElement(l.Box,{position:"absolute",bg:s&&s>1?st:"transparent",top:0,height:"1px",style:{left:at,width:nt}}))})),_=Object(n.default)(l.Box).withConfig({displayName:"TextPaddings___StyledBox2"})(["opacity:",";visibility:",";user-select:none;"],(function(t){return t._css2}),(function(t){return t._css3})),T=Object(n.default)(l.Box).withConfig({displayName:"TextPaddings___StyledBox3"})(["",""],(function(t){return t._css4}));e.b=function(t){var e=t.isVisible,i=t.children,n=t.left,o=t.top,s=t.right,c=t.bottom,u=t.onChange,d=t.changedPaddings,h=void 0===d?{}:d,f=Object(r.useContext)(O),g=f.isPaddingsEnabled,m=f.setIsPaddingsEnabled,v=Object(r.useRef)(null).current,b=function(t){v=t,m(!0)},y=function(t){v&&v!==t||m(!1)},w=Object(r.useRef)(null),S=Object(p.useResizeEffect)(w).height,k=Object(r.useMemo)((function(){return S<43}),[S]);return a.a.createElement(l.Box,{position:"relative",style:{paddingTop:o,paddingLeft:n,paddingRight:s,paddingBottom:c}},e&&a.a.createElement(a.a.Fragment,null,a.a.createElement(_,{contentEditable:!1,display:"inline",_css2:e?1:0,_css3:e?"visible":"hidden"},a.a.createElement(j,{isSmall:k,isChanged:h.top,from:"top",value:o,marginLeft:n,marginRight:s,onChange:function(t){return u({top:t})},onStart:b,onStop:y}),a.a.createElement(j,{isSmall:k,isChanged:h.left,from:"left",value:n,marginTop:o,marginBottom:c,onChange:function(t){return u({left:t})},onStart:b,onStop:y}),a.a.createElement(j,{isSmall:k,isChanged:h.right,from:"right",value:s,marginTop:o,marginBottom:c,onChange:function(t){return u({right:t})},onStart:b,onStop:y}),a.a.createElement(j,{isSmall:k,isChanged:h.bottom,from:"bottom",value:c,marginLeft:n,marginRight:s,onChange:function(t){return u({bottom:t})},onStart:b,onStop:y}))),a.a.createElement(T,{ref:w,_css4:g?"* { user-select: none; }":""},i))}},fueH:function(t,e,i){"use strict";var n=i("q1tI"),r=i.n(n),a=i("scwL"),o=i.n(a),s=i("xG9w"),c=i("JPcv"),l=i.n(c),u=i("Yk1I"),d=i.n(u),h=i("hpUi"),p=i("v83y"),f=["The follies of others are obvious, but our own hide from us; we love to parse others’ missteps but we cover up our own, as the cheat conceals the false die. It is in the nature of men to lay blame: we see others’ mistakes while our own passions swell, carrying us ever farther from improvement. — Buddhist wisdom","No one can long stand on tiptoe. He who thrusts himself forward is not a source of light. No glory comes to the self-satisfied, no honor to the boastful. The proud will not rise high. In the court of good sense, such people are like table discards, repellent to all. The sensible person does not rely on self. — Lao-Tzu","Simplicity in life, language and habits strengthens a nation, but a life of luxury, fancy language and effeminate habit leads to weakness and death. — John Ruskin","Truth is not a matter of talking but comes only through labor and observation. And when you have one truth in hand, two others, like the first leaves of a dicotyledonous plant, will probably appear. — John Ruskin","All things have a beginning and an end. So it is with mankind: there is a beginning and end to all  human affairs. He who understands what is a beginning and what is an end is closer to the truth. — Confucius","Most people are dismayed if deprived of their pleasures. The right course belongs to him who relishes even the passing away of the reason for his joy and is not bitter. — Pascal","When we are clear about things, we have knowledge; with knowledge, we seek the path of truth; when the search is rewarded, the heart becomes good; with the heart made good, the moral view of things that leads to virtue is attained. — Confucius","Wisdom has three faces: when seen from afar, it is grand and severe; on closer approach, it is tender and welcoming; when we are close enough to hear it, the words of  wisdom are severe and demanding. — Chinese wisdom","The sun constantly floods the world with its light, but its light is not exhausted; so your mind should send its light in all directions and not be exhausted. It should flow everywhere, without diminishment, and when it encounters an obstacle, it should react, not with annoyance or anger but should serenely clarify all that yearns to accept it, without any lessening or weariness, bringing light to all that is turned to it, leaving in shadow only that which turns its face away. — Marcus Aurelius","As torches and fireworks pale to invisibility in the sun, so the mind, even the mind of genius, and beauty pale and are eclipsed by the heart’s goodness. — Schopenhauer","Music and sweet treats bring the wanderer to a stop, but wisdom has neither flavor nor smell. When looked for, it is invisible; when listened for, it is inaudible, yet its goodness is inexhaustible. The most powerful thing in the world cannot be seen, heard or touched. — Lao-Tzu","The best ideas are usually those that come without effort, out of the blue. The great intellectual creations come easily. Only a great person can create something great, and such a one works without strain. — John Ruskin","He who talks much rarely puts his words into action. But the wise person fears that his words may not be translated into action. The wise do not utter empty words, lest their actions be inconsistent with their words. — Chinese wisdom","Fear ignorance, but fear false knowledge even more. Turn your eyes from the deceptive world and do not trust your feelings, for they lie; rather look inward to the impersonal, eternal self. Truly, ignorance is like a sealed and airless chamber; in it, the soul sits like a caged bird, neither singing nor spreading its wings. But ignorance is better than any school of thought that is not guided by the wisdom of the soul. — Buddhist wisdom","Some seek their good or happiness in power; others in science, and others in the pleasures of the flesh. But those who come truly close to the good understand that it cannot consist in what can only be mastered by a few. They understand that the true good of humankind is that which can be achieved by all people, without division and without envy; its nature  is such that none can lose it if they do not so choose. — Pascal","The wise person asks only of himself; the unwise man demands everything from others. — Chinese wisdom","To know much and not to put one’s self forward as knowing is the height of morality. To know little and put one’s self forward as knowledgeable is an illness. Only by understanding the disease can one expunge it. — Lao-Tzu","Speak only of that which is as clear to you as the morning, or be silent. — Talmud","Conquer ferocity with love, evil with good, miserliness with generosity, the liar with truth. — Buddhist wisdom","People seek satisfaction, throwing themselves from one thing to another because they feel the emptiness of their lives but do not yet realize the emptiness of the new delight that attracts them. — Pascal","The skilled warrior does not rage. The skilled fighter is not angry. He who is skilled in the use of people is not provocative. This is the virtue of non-resistance. This is being in agreement with Heaven. — Lao-Tzu","The first and principal characteristic of a good and wise person is his consciousness that he knows very little, that many people know more and he seeks always to learn, to study, and not to teach. Those who wish to teach or direct neither teach nor lead well. — John Ruskin","The virtuous person seeks to follow the direct path to the end. What is to be feared is to go halfway and then to weaken. — Chinese wisdom"],g=function(){return f[Math.floor(Math.random()*f.length)]},m=i("w5C2"),v=i("A9VP"),b=i("zMlX"),y=i("LDvm"),w=i("Jzj8"),S=i("a68n"),O=i("HjzJ"),k=i("38uW"),P=i("IrH7"),x=i("w+s/"),C=i("zZDe"),j=i("v92f"),_=i("uU7u"),T=i("ulVh"),I=i("ICos"),M=i("f3SV");function E(t,e){return A(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||L(t,e)||D()}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(t){if(Array.isArray(t))return t}function $(t){return function(t){if(Array.isArray(t))return F(t)}(t)||R(t)||L(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){if(t){if("string"==typeof t)return F(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?F(t,e):void 0}}function R(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function B(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function z(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){B(a,n,r,o,s,"next",t)}function s(t){B(a,n,r,o,s,"throw",t)}o(void 0)}))}}function W(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function V(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?W(Object(i),!0).forEach((function(e){N(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function N(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var H=Object(h.b)({styleToHTML:function(){return r.a.createElement("span",null)},blockToHTML:function(){return r.a.createElement("p",null)},entityToHTML:function(t,e){return t.type===C.b?r.a.createElement("br",null):e}}),G=function(t,e){return p.EditorState.forceSelection(t,e||t.getSelection())},K=function(t,e){return p.RichUtils.toggleInlineStyle(t,e)},q=function(t,e){return"function"==typeof t.get?t.get(e):t[e]},Y=function(t,e){var i={blocks:(q(t,"blocks")||[]).map((function(i){var n,r,a=e&&(null===(n=t[e])||void 0===n?void 0:n.styles)||q(t,"styles"),o=e&&(null===(r=t[e])||void 0===r?void 0:r.blocksMeta)||q(t,"blocksMeta"),s=(a||[]).find((function(t){return t.key===i.key})),c=(o||[]).find((function(t){return t.key===i.key})),l=[];return s&&(l="object"===U(s.inlineStyles)&&s.inlineStyles.hasOwnProperty("keys")&&s.inlineStyles.hasOwnProperty("values")?mt(s.inlineStyles):(null==s?void 0:s.inlineStyles)||[]),V(V({},i),{},{data:(null==c?void 0:c.data)||i.data||{},type:s?s.type:m.a.Unstyled,inlineStyleRanges:l})}))||[],entityMap:q(t,"entityMap")||{}};return Object(p.convertFromRaw)(i)},J=function(t){var e=Object(p.convertToRaw)(t),i=e.blocks.map((function(t){return{key:t.key,text:t.text,entityRanges:t.entityRanges,depth:t.depth}})),n=e.blocks.map((function(t){return{key:t.key,type:t.type,inlineStyles:ft(t.inlineStyleRanges)}})),r=e.blocks.map((function(t){return{key:t.key,data:t.data||{}}}));return{blocks:i,styles:n,entityMap:e.entityMap,blocksMeta:r}},Q=function(t){var e=et(t,!0),i=t.getSelection();if(2!==e.length)return i;if(0!==i.getAnchorOffset()||0!==i.getFocusOffset())return i;var n=t.getCurrentContent(),r=i.getStartKey(),a=n.getBlockForKey(r);return new p.SelectionState({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:a.getText().length,isBackward:!1,isCollapsed:i.isCollapsed()})},X=function(t){var e=t.getCurrentContent();return t.getSelection().merge({anchorKey:e.getFirstBlock().getKey(),anchorOffset:0,focusOffset:e.getLastBlock().getText().length,focusKey:e.getLastBlock().getKey()})},Z=function(t){var e=t.getCurrentInlineStyle();return Object(v.b)(e)};var tt=function(t){var e=t.editorState,i=t.blockKey,n=t.data,r=t.selection||e.getSelection(),a=e.getCurrentContent(),o=a.getBlockMap(),s=a.getBlockForKey(i),c=s.get("data"),u=s.set("data",l.a.Map(V(V({},c?c.toObject():{}),n)));return a.merge({blockMap:o.merge(N({},s.getKey(),u)),selectionBefore:r,selectionAfter:r})},et=function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.getSelection();if(r.isCollapsed())return[r.getStartKey()];var a=t.getCurrentContent(),o=r.getIsBackward(),s=o?r.getFocusKey():r.getAnchorKey(),c=o?r.getAnchorKey():r.getFocusKey(),l=0===r.getFocusOffset()&&0===r.getAnchorOffset()&&s!==c,u=0===r.getFocusOffset()&&s!==c&&r.getAnchorOffset()===(null===(e=a.getBlockForKey(r.getAnchorKey()))||void 0===e||null===(i=e.getCharacterList())||void 0===i?void 0:i.size),d=a.getBlockMap().toIndexedSeq(),h=d.map((function(t){return t&&t.getKey()})).toJS(),p=[],f=h.indexOf(s),g=h.indexOf(c);return f>-1&&g>-1&&(p=h.slice(f,g+1)),(!n&&l||u)&&p.pop(),p},it=function(t){var e=t.getSelection(),i=e.getIsBackward(),n=i?e.getFocusKey():e.getAnchorKey(),r=i?e.getAnchorKey():e.getFocusKey(),a=i?e.getEndOffset():e.getStartOffset(),o=i?e.getStartOffset():e.getEndOffset();if(0===a&&0===o){var s=i?r:n;return{startKey:s,endKey:s,startOffset:0,endOffset:t.getCurrentContent().getBlockForKey(s).getCharacterList().size}}return{startKey:n,endKey:r,startOffset:a,endOffset:o}},nt=function(t){return t.some((function(t){return t&&t.style.length}))},rt=function(t){return t.some((function(t){return function(t){return"text"===t.type}(t)&&3===t.version}))},at=/url\((?:"|'|)(.*?)(?:"|'|)\)/g;function ot(t){return st.apply(this,arguments)}function st(){return(st=z(regeneratorRuntime.mark((function t(e){var i,n,r,a,o,s,c,l,u,d,h,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i={},t.t0=regeneratorRuntime.keys(document.styleSheets);case 2:if((t.t1=t.t0()).done){t.next=24;break}n=t.t1.value,r=document.styleSheets[n],a=null,t.prev=6,a=r.rules||r.cssRules,t.next=16;break;case 10:if(t.prev=10,t.t2=t.catch(6),!r.href||r.href.includes("cloudfront.net")){t.next=16;break}return t.next=15,ct(r.href);case 15:a=t.sent;case 16:if(a){t.next=21;break}if(!r.href||r.href.includes("cloudfront.net")){t.next=21;break}return t.next=20,ct(r.href);case 20:a=t.sent;case 21:if(a)for(o in a)(s=a[o])&&s instanceof CSSFontFaceRule&&(l=null===(c=s.style)||void 0===c?void 0:c.getPropertyValue("src"),(null==(u=null==l?void 0:l.match(at))?void 0:u.length)&&(h=u[u.length-1].slice(4,-1).replace(/"/g,"").replace(/'/g,""),p=null===(d=s.style)||void 0===d?void 0:d.getPropertyValue("font-family").replace(/['"]+/g,""),i[p]=h));t.next=2;break;case 24:if(!e){t.next=26;break}return t.abrupt("return",i[e]||null);case 26:return t.abrupt("return",i);case 27:case"end":return t.stop()}}),t,null,[[6,10]])})))).apply(this,arguments)}var ct=function(){var t=z(regeneratorRuntime.mark((function t(e){var i,n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.text()})).catch((function(t){console.error("Error while getting stylesheet from url ".concat(e,": "),t)}));case 2:if(!(i=t.sent)){t.next=12;break}return(n=document.createElement("style")).type="text/css",n.styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i)),document.head.appendChild(n),r=n.sheet||n.styleSheet,a=r&&(r.rules||r.cssRules)?r.rules||r.cssRules:null,document.head.removeChild(n),t.abrupt("return",a);case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),lt=function(t,e){var i=t;return"string"==typeof i&&/^\d+$/.test(i)&&(i=Number(i)),"string"==typeof i?"v":"".concat(e[0].toLowerCase()).concat(Math.floor(i/100))},ut=function(){var t=z(regeneratorRuntime.mark((function t(e){var i,n,r,a,o,s,c,l,u,d,h,p,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.fontFamily,n=e.fontWeight,r=e.fontStyle,a={features:[],variations:[],characters:[]},o=window.RM.constructorRouter.fonts.findFontByCSSName(i),s=lt(n,r),o&&o.variations&&o.variations.includes(s)){t.next=6;break}return t.abrupt("return",a);case 6:if(c={weight:s},!o||"custom"!==o.provider){t.next=11;break}c.id=o._id,t.next=15;break;case 11:return t.next=13,ot(i);case 13:(l=t.sent)&&(c.url=l);case 15:if(o&&"system"===o.provider&&(c.systemFontName=o.name),!(!c.url&&!c.id&&!c.systemFontName||c.id&&!c.weight)){t.next=19;break}return t.abrupt("return",void 0);case 19:return t.prev=19,t.next=22,Object(y.u)(c);case 22:return u=t.sent,d=u.data,(h=d&&d.features)&&h.length&&(p=Object.values(b.a),f=p.filter((function(t){return h.some((function(e){return e.toLowerCase()===t.toLowerCase()}))})),a.features=f||[]),a.variations=d&&d.variations,a.characters=d&&d.characters,t.abrupt("return",a);case 31:throw t.prev=31,t.t0=t.catch(19),new Error(t.t0||"Can't detect font features");case 34:case"end":return t.stop()}}),t,null,[[19,31]])})));return function(e){return t.apply(this,arguments)}}(),dt=function(t,e){return"".concat(t).concat(";").concat(e)},ht=function(t,e){var i=St.getSelectionOffset(t),n=i.startOffset,r=i.endOffset,a=t.getSelection(),o=St.getSelectedBlocks(t),s=t.getCurrentContent().getBlockMap();return s.forEach((function(t){if(t){var i=t.getKey();if(o.includes(i)){var a=t.getCharacterList().map((function(t,a){if(!t||void 0===a)return t;var s=t.getStyle().filter((function(t){return!!t&&t.startsWith(e)})).toJS(),c=function(t,e){return p.CharacterMetadata.removeStyle(t,e)};if(1===o.length){if(a>=n&&a<r)return s.reduce(c,t)}else if(o[0]===i){if(a>=n)return s.reduce(c,t)}else{if(o[o.length-1]!==i)return s.reduce(c,t);if(a<r)return s.reduce(c,t)}return t})),c=t.set("characterList",a);s=s.set(i,c)}}})),St.forceSelection(p.EditorState.push(t,p.ContentState.createFromBlockArray(s.toArray()),"change-inline-style"),a)},pt=function(t,e){return t.replace("".concat(e).concat(";"),"").split(";")},ft=function(t){var e=[],i=[],n=[];return t.forEach((function(t){var r,a=e.findIndex((function(e){return e.offset===t.offset&&e.length===t.length})),o=t.style.split(";"),s=A(r=o)||R(r)||L(r)||D(),c=s[0],l=s.slice(1).join(";"),u=i.indexOf(c);-1===u&&(i.push(c),u=i.length-1);var d=n.indexOf(l);-1===d&&(n.push(l),d=n.length-1);var h=t.style.replace(c,String(u)).replace(l,String(d));a>-1?e[a].styles.includes(t.style)||e[a].styles.push(h):e.push({offset:t.offset,length:t.length,styles:[h]})})),{styles:gt(e),keys:i,values:n}},gt=function(t){var e=null,i=[];return t.forEach((function(t,n){if(null===e)e=n,i.push(t);else if(i[i.length-1]){var r=i[i.length-1],a=r.offset,o=r.length,c=r.styles;a+o===t.offset&&Object(s.isEqual)(c,t.styles)?i[i.length-1]=V(V({},i[i.length-1]),{},{length:o+t.length}):(e=n,i.push(t))}})),i},mt=function(t){var e=t.keys,i=t.values,n=t.styles,r=[];return n.forEach((function(t){t.styles.forEach((function(n){var a=E(n.split(";"),2),o=a[0],s=a[1];r.push({offset:t.offset,length:t.length,style:"".concat(e[Number(o)]).concat(";").concat(i[Number(s)])})}))})),r},vt={},bt=Math.pow(2,24),yt=function(t){return"text"===t.type},wt=function(t,e){var i=document.createElement("canvas").getContext("2d");return i?(i.font=function(t){return[t.fontStyle,t.fontWeight,t.fontSize?"".concat(t.fontSize,"px"):null,t.fontFamily?'"'.concat(t.fontFamily,'"'):null].filter((function(t){return t})).join(" ")}(e),{width:i.measureText(t).width,height:parseInt(i.font)}):null},St={forceSelection:G,toggleInlineStyle:K,getCurrentBlock:function(t){return t.getCurrentContent().getBlockForKey(t.getSelection().getStartKey())},getCurrentBlockType:function(t){return t.getCurrentContent().getBlockForKey(t.getSelection().getStartKey()).getType()},toggleBlockType:function(t,e){return p.RichUtils.toggleBlockType(t,e)},importTextContent:Y,exportTextContent:J,creatNewWidgetContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.text,i=t.html,n=i?Object(T.b)(i):p.ContentState.createFromText(e||g());return J(n)},fixSelection:Q,getAllTextSelection:X,clearSelection:function(t){var e=p.EditorState.moveSelectionToEnd(t).getSelection();return G(t,e)},hasSelectedText:function(t){var e=t.getSelection();return e.getAnchorKey()!==e.getFocusKey()||e.getAnchorOffset()!==e.getFocusOffset()},clearStylesFromBlock:function(t){var e,i=t.editorState,n=t.block,r=i.getCurrentContent().getBlockMap(),a=n,o="";a?o=a.getKey():(o=i.getSelection().getAnchorKey(),a=r.get(o));var s=a.getCharacterList().map((function(t){return t?t.set("style",t.get("style").clear()):t})),c=a.get("data"),u=l.a.Map(V(V({},c?c.toObject():{}),{},(N(e={},k.c,void 0),N(e,P.c,void 0),N(e,x.c,void 0),e))),d=a.set("characterList",s).set("data",u),h=r.set(o,d);return p.EditorState.push(i,p.ContentState.createFromBlockArray(h.toArray()),"change-inline-style")},getStyleFromSelection:Z,getBlockData:function(t){var e,i=t.editorState,n=t.block,r=t.key;if(n)e=n;else if(i){var a=i.getSelection().getAnchorKey();e=i.getCurrentContent().getBlockMap().get(a)}if(!e)return"";var o=e.getData().toObject();return r?o&&o[r]||void 0:o},setBlockData:function(t){var e=t.editorState,i=t.block,n=t.key,r=t.value,a=Q(e);if(i){var o=tt({editorState:e,selection:a,blockKey:i.getKey(),data:N({},n,r)});return p.EditorState.push(e,o,"change-block-data")}return et(e).reduce((function(t,i){var o=tt({editorState:t,selection:a,blockKey:i,data:N({},n,r)});return p.EditorState.push(e,o,"change-block-data")}),e)},getSelectedBlocks:et,isBlockSelected:function(t,e){return et(t).includes(e)},insertText:function(t){var e=t.editorState,i=t.text,n=t.selection,r=e.getCurrentInlineStyle(),a=n||e.getSelection(),o=e.getCurrentContent(),s=a.isCollapsed()?p.Modifier.insertText(o,a,i,r):p.Modifier.replaceText(o,a,i,r);return p.EditorState.push(e,s,1===i.length?"insert-characters":"insert-fragment")},removeText:function(t){var e=t.editorState,i=t.selection,n=e.getCurrentContent(),r=p.Modifier.removeRange(n,i,"forward");return p.EditorState.push(e,r,"remove-range")},getTextFromTextWidget:function(t){if(3===t.get("version")){var e=Y(t.attributes),i=H(e);if(i){var n=document.createElement("span");return n.innerHTML=i,n.textContent||n.innerText}}return""},findSubstringIndexes:function(t,e){var i=t.getText();return Array.from(o()(i,RegExp(e,"g")),(function(t){return t.index})).filter((function(t){return"number"==typeof t}))},reverseSelection:function(t){return t.getIsBackward()?t.merge({isBackward:!1,anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset()}):t},getSelectionOffset:it,doesSelectionHaveStyle:function(t){if(t.getSelection().isCollapsed()){var e=Z(t);return Boolean(e&&Object.keys(e).length)}var i=t.getCurrentContent(),n=it(t),r=n.startKey,a=n.endKey,o=n.startOffset,s=n.endOffset;if(r===a){var c=i.getBlockForKey(r).getCharacterList().slice(o,s).toJS();return nt(c)}return et(t).some((function(t){var e=i.getBlockForKey(t).getCharacterList(),n=r===t?o:0,c=a===t?s:e.size,l=e.slice(n,c).toJS();return nt(l)}))},selectCurrentBlock:function(t){var e=t.getSelection(),i=e.getStartKey();if(i===e.getEndKey()){var n=t.getCurrentContent(),r=e.merge({anchorKey:i,anchorOffset:0,focusOffset:n.getBlockForKey(i).getText().length,focusKey:i});return G(t,r)}return t},getWordCaretSelection:function(t,e){var i=t.getSelection();if(i.isCollapsed()){var n=t.getCurrentContent(),r=it(t),a=r.startKey,o=r.endKey,s=r.startOffset;r.endOffset;if(a===o){var c=n.getBlockForKey(a).getText(),l=null;if("next"===e)for(var u=s+1;u<=c.length;u++)null!==l||" "!==c[u]&&u!==c.length||(l=u);else if("prev"===e)for(var d=s-1;d>=0;d--)null===l&&(" "===c[d]&&Math.abs(s-d)>1||0===d)&&(l=0===d?0:d+1);if(null!==l){var h=i.merge({anchorKey:a,anchorOffset:l,focusOffset:o,focusKey:l});return G(t,h)}}}},cloneStylesOnReturn:function(t){var e=t.getSelection();if(e.isCollapsed()){var i=t.getCurrentContent(),n=e.getStartKey(),r=i.getBlockForKey(n);if(r){var a=r.getData(),o=p.Modifier.splitBlock(t.getCurrentContent(),t.getSelection()),s=p.EditorState.push(t,o,"split-block"),c=s.getSelection(),l=p.Modifier.mergeBlockData(s.getCurrentContent(),c,a);return{status:"handled",editorState:s=p.EditorState.push(t,l,"split-block")}}}},hasNewTextWidgets:function(t){if(!t)return!1;var e=V({},t);return!(!e.pages||!e.pages.length)&&e.pages.some((function(t){return t.wids&&t.wids.length&&rt(t.wids)}))},someTextWidgets:rt,getAllEntities:function(t,e){var i,n=t.getCurrentContent().getEntityMap(),r=null==n||null===(i=n.__getAll())||void 0===i?void 0:i.toJS();return r?e?Object(s.pick)(r,(function(t){return t.type===e})):r:{}},generateRandomKey:function(){for(var t;void 0===t||vt.hasOwnProperty(t)||!isNaN(+t);)t=Math.floor(Math.random()*bt).toString(32);return vt[t]=!0,t},getLigaturesType:function(t){var e=[b.a.RequiredLigatures,b.a.StandardLigatures,b.a.HistoricalLigatures,b.a.DiscretionaryLigatures];return t.filter((function(t){return e.includes(t)}))},getStylisticSets:function(t){var e=/^ss[\d]{2}$/i,i=Object.values(b.a).filter((function(t){return e.test(t)}));return t.filter((function(t){return i.includes(t)}))},getNumericVariations:function(t){var e=[b.a.LiningFigures,b.a.OldstyleFigures,b.a.ProportionalFigures,b.a.TabularFigures];return t.filter((function(t){return e.includes(t)}))},getFontWeightString:lt,getFontWeightFromString:function(t){var e=t&&$(t),i="v"===e[0];return{style:e[0]&&"i"===e[0]?"italic":"normal",weight:i?"initial":e[1]?100*parseInt(e[1]):400}},getFontFeatures:ut,getTextWidgetFontsList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i={},n=!1,r=function(t){var e=t.fontFamily,i=t.fontStyle,n=t.fontWeight,r=[];if(e){var a=pt(e,v.a.FontFamily);if(r.push(a),a){r.push(i?pt(i,v.a.FontStyle):m.b.fontStyle);var o=n?pt(String(n),v.a.FontWeight):m.b.fontWeight;"number"!=typeof o&&"normal"===o[0]&&(o=m.b.fontWeight),r.push("initial"===String(o)?"variable":o)}}return r.length?r.join("|"):null},a=Object(w.d)(),o=a||{project:[],global:[]},s=function(t,e){return e.filter((function(e){return e.offset<=t&&e.offset+e.length>=t}))},c=function(e){var i,n,a=e.model,c=e.viewport,l={},u=a.blocks,d=c&&(null===(i=t[c])||void 0===i?void 0:i.styles)||q(t,"styles")||[],h=c&&(null===(n=t[c])||void 0===n?void 0:n.blocksMeta)||q(t,"blocksMeta"),p=new Set([]),f=Object(w.c)()||{project:[],global:[]};return u.forEach((function(t){var e,i=h?h.find((function(e){return e.key===t.key})):t,n=i&&i.data;if(n){var a=n.textStyle;if(a&&(e=[].concat($(o.project),$(o.global)).find((function(t){return!!t.name&&t.name.toLowerCase()===a.toLowerCase()})))){var c=e.cssProperties||{},l=c.fontFamily,u=c.fontWeight,g=c.fontStyle,m=r({fontFamily:l,fontStyle:g,fontWeight:u});m&&p.add(m)}var b=n.listStyle;if(b){var y=[].concat($(f.project),$(f.global)).find((function(t){return!!t.name&&t.name.toLowerCase()===b.toLowerCase()}));if(y){var w=y.cssProperties||{},S=w.fontFamily,O=w.fontWeight,k=w.fontStyle,P=r({fontFamily:S,fontStyle:k,fontWeight:O});P&&p.add(P)}}}var x=d.find((function(e){return e.key===t.key}));if(x){var C,j=null===(C=x.inlineStyles.styles)||void 0===C?void 0:C.reduce((function(t,e){return t.push(e.offset),t.push(e.offset+e.length),t}),[]);if(j)j.map((function(t){return s(t,x.inlineStyles.styles).reduce((function(t,e){return e.styles.forEach((function(e){var i=E(e.split(";"),2),n=i[0],r=i[1];t[x.inlineStyles.keys[n]]=x.inlineStyles.values[r]})),t}),{})})).forEach((function(t){var i=e&&e.cssProperties||{},n=t[v.a.FontFamily]||i.fontFamily,a=t[v.a.FontStyle]||i.fontStyle,o=t[v.a.FontWeight]||i.fontWeight,s=r({fontFamily:n,fontStyle:a,fontWeight:o});s&&p.add(s)}))}})),p.forEach((function(t){l[t]=1})),l};if(t&&q(t,"blocks")&&(e.length?e:j.c.viewport_listall).map((function(e){var n=c({viewport:e,model:t});i=V(V({},i),n)})),n){var l=[m.b.fontFamily,m.b.fontStyle,m.b.fontWeight].join("|");i[l]=1}return i},INLINE_STYLE_DELIMITER:";",getStyleValueString:dt,applyInlineStyle:function(t){var e=t.key,i=t.value,n=t.editorState;if(n.getSelection().isCollapsed())return n;var r=ht(n,e);if(void 0===U(i))return r;var a=Array.isArray(i)?i.filter((function(t){return t})).length?i.filter((function(t){return t})).join(";"):null:i;return"string"==typeof a||"number"==typeof a||Array.isArray(a)?St.toggleInlineStyle(r,dt(e,a)):r},removeInlineStyle:ht,getCurrentInlineStylesFromString:pt,getCurrentInlineStyles:function(t,e){var i=t.getCurrentInlineStyle().toJS();if(!e)return i;var n=i.find((function(t){return t.startsWith(e)}));return n?pt(n,e):[]},minifyStyles:ft,unminifyStyles:mt,getInlineStyleForSelection:function(t){var e=t.editorState,i=t.key,n=t.defaultValue,r=St.fixSelection(e),a=e.getCurrentContent(),o=St.getSelectedBlocks(e).map((function(t){return a.getBlockForKey(t)})),c=[];if(!r.isCollapsed()){var l=function(t){var e=Object(s.uniq)(null==t?void 0:t.getStyle().toJS()).filter((function(t){return!c.includes(t)})).filter((function(t){return!i||t.startsWith(i)}));e.length?c.push.apply(c,$(e)):n&&i&&c.push(St.getStyleValueString(i,n))};if(1===o.length)o[0].getCharacterList().slice(r.getStartOffset(),r.getEndOffset()).forEach(l);else o.length>1&&o.forEach((function(t,e){var i=t.getCharacterList();0===e?i.slice(r.getStartOffset()).forEach(l):e===o.length-1&&i.slice(0,r.getEndOffset()).forEach(l),i.forEach(l)}))}return Object(s.uniq)(c)},getUsedTextStyles:function(t){var e=t.filter((function(t){return yt(t)&&3===t.version})),i=Object(w.d)(),n=e.reduce((function(t,e){var i=(e.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[S.i]}));return j.c.viewport_listall.map((function(t){var n=e[t];n&&i.push.apply(i,$((n.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[S.i]}))))})),i.length?[].concat($(t),$(i)):t}),[]).filter((function(t){return t})),r=Object(s.uniq)(n);return[].concat($(i.global),$(i.project)).filter((function(t){return r.includes(t.name)}))},getUsedLinkStyles:function(t){var e=t.filter((function(t){return yt(t)&&3===t.version})),i=Object(w.b)(),n=e.reduce((function(t,e){var i=Object.values(e.entityMap||{}).filter((function(t){return t.type===_.f&&!!t.data})).map((function(t){return t.data.linkStyle}));return j.c.viewport_listall.map((function(t){var n=e[t];n&&i.push.apply(i,$(Object.values(n.entityMap||{}).filter((function(t){return t.type===_.f&&!!t.data})).map((function(t){return t.data.linkStyle}))))})),i.length?[].concat($(t),$(i)).filter((function(t){return t})):t}),[]),r=Object(s.uniq)(n);return[].concat($(i.global),$(i.project)).filter((function(t){return r.includes(t.name)}))},getUsedListStyles:function(t){var e=t.filter((function(t){return yt(t)&&3===t.version})),i=Object(w.c)(),n=e.reduce((function(t,e){var i=(e.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[O.h]}));return j.c.viewport_listall.map((function(t){var n=e[t];n&&i.push.apply(i,$((n.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[O.h]}))))})),i.length?[].concat($(t),$(i)):t}),[]).filter((function(t){return t})),r=Object(s.uniq)(n);return[].concat($(i.global),$(i.project)).filter((function(t){return r.includes(t.name)}))},canUseCustomFonts:function(t){return window.RM.constructorRouter.isOwner?(window.RM.constructorRouter.me&&window.RM.constructorRouter.me.get("permissions")||{}).can_use_custom_fonts:t.get("permissions").can_use_custom_fonts},getStringDifference:function(t,e){var i=d()(t,e),n=i.find((function(t){return 1===t[0]}));if(n){var r=n[1];return{added:!0,text:r,offset:e.indexOf(r),length:r.length}}var a=i.find((function(t){return-1===t[0]}));if(a){var o=a[1];return{added:!1,text:o,offset:t.indexOf(o),length:o.length}}},insertBreakLine:function(t){return p.RichUtils.insertSoftNewline(t)},moveText:function(t){var e=t.editorState,i=t.dropSelection,n=p.Modifier.moveText(e.getCurrentContent(),e.getSelection(),i);return p.EditorState.push(e,n,"insert-fragment")},isWholeBlockSelected:function(t){var e=t.getSelection(),i=t.getCurrentContent();if(!e.isCollapsed()){var n=et(t);if(!n.length)return!1;if(1===n.length&&e.getStartKey()===e.getEndKey()){var r=i.getBlockForKey(e.getStartKey()).getText().length;if(e.getEndOffset()-e.getStartOffset()===r)return!0}else{if(1===n.length&&0===e.getStartOffset()&&0===e.getEndOffset()&&e.getStartKey()!==e.getEndKey())return!0;var a=i.getBlockForKey(e.getEndKey()).getText().length,o=e.getStartOffset(),s=e.getEndOffset();if(0===o&&s===a)return!0}}return!1},getBaseLineHeightStyle:function(t){var e=t.block,i=t.width;if(!e)return{};var n,r=e.getType(),a=Object(S.b)({block:e});if(r||a){var o=Object(w.d)()||{project:[],global:[]};n=[].concat($(o.project),$(o.global)).find((function(t){return!!t.name&&(t.name.toLowerCase()===r.toLowerCase()||t.name.toLowerCase()===a.toLowerCase())}))}for(var s=n&&n.cssProperties||{},c=0,l=0,u=[],d=e.getCharacterList(),h=e.getText(),p=h.length;c<p;){var f=d.get(c);if(f){var g,m=(null===(g=f.getStyle())||void 0===g?void 0:g.toJS())||[],b=h[c],y=m.find((function(t){return t.startsWith(v.a.FontFamily)})),O=m.find((function(t){return t.startsWith(v.a.FontStyle)})),k=m.find((function(t){return t.startsWith(v.a.FontWeight)})),P=m.find((function(t){return t.startsWith(v.a.FontSize)})),x={fontFamily:y&&pt(y,v.a.FontFamily)[0]||s.fontFamily,fontStyle:O&&pt(O,v.a.FontStyle)[0]||s.fontStyle,fontSize:P&&pt(P,v.a.FontSize)[0]||String(s.fontSize),fontWeight:k?parseInt(pt(k,v.a.FontWeight)[0]):s.fontWeight},C=wt(b,x);C&&(l+=C.width,u.push({fontFamily:x.fontFamily,fontSize:x.fontSize,fontWeight:x.fontWeight}))}if(c+=1,l>=i)break}var j={},_={},T={};u.map((function(t){t.fontFamily&&(j[t.fontFamily]=(j[t.fontFamily]||0)+1),t.fontSize&&(T[t.fontSize]=(T[t.fontSize]||0)+1),t.fontWeight&&(_[t.fontWeight]=(_[t.fontWeight]||0)+1)}));var I=function(t){var e=Object.keys(t);if(e.length)return e.reduce((function(e,i){return t[e]>t[i]?e:i}))},M=I(j)||s.fontFamily,E=I(T)||(s.fontSize?String(s.fontSize):void 0);return{fontFamily:M,fontWeight:I(_)||(s.fontWeight?parseInt(String(s.fontWeight)):void 0),fontSize:E?E.includes("px")?E:"".concat(E,"px"):void 0}},getTextSize:wt,setDefaultStyles:function(t){return[{key:v.a.FontSize,value:m.b.fontSize},{key:v.a.FontFamily,value:m.b.fontFamily},{key:v.a.FontWeight,value:m.b.fontWeight},{key:v.a.FontStyle,value:m.b.fontStyle},{key:v.a.Color,value:Object(I.h)(M.c.textWidget.initialColor)}].reduce((function(t,e){return K(t,dt(e.key,e.value))}),G(t,X(t)))},preserveBlockInlineStyles:function(t,e){var i=e.getCurrentContent().getBlockMap(),n=t.getCurrentContent().getBlockMap(),r=String.fromCharCode(8205),a=n.filter((function(t){if(t){var e=i.get(t.getKey());if(!e||!e.getText().length)return;var n=t.getText().length;return!Object(S.b)({block:t})&&!n}return!1})),o=n.filter((function(t){var e=null==t?void 0:t.getText();return e&&e.length>1&&e.includes(r)}));if(o.size){var s=o.reduce((function(t,e){if(e){var i=e.getKey(),n=e.getText(),a=n.indexOf(r),o=e.getCharacterList().delete(a),s=e.set("characterList",o).set("text",n.replace(r,""));return t.set(i,s)}return t}),n);return p.EditorState.set(t,{currentContent:p.ContentState.createFromBlockArray(s.toArray())})}if(a.size){var c=a.reduce((function(t,e){if(e){var n=e.getKey(),a=i.get(n),o=i.last(),s=a?a.getCharacterList().slice(0,1):o.getCharacterList().slice(-1),c=e.set("text",r).set("characterList",s);return t.set(n,c)}return t}),n);return p.EditorState.set(t,{currentContent:p.ContentState.createFromBlockArray(c.toArray())})}return t},silentEntityToggle:function(t,e,i){var n=t.getSelection(),r=p.Modifier.applyEntity(t.getCurrentContent(),e,i);return p.EditorState.set(t,{currentContent:r,selection:n})}};e.a=St},hoWO:function(t,e,i){"use strict";i.r(e),i.d(e,"Widgets",(function(){return u})),i.d(e,"preloadWidgets",(function(){return p}));var n=i("xG9w"),r=i("U/dT"),a=i("KOTZ"),o=i("oBKw"),s=i("p094"),c=i("FJrq");function l(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}var u={background:r.default,button:a.default,picture:o.default,shape:s.default,text:c.default},d={addtocart:"add-to-cart",ecommercecart:"e-commerce-cart",rmheader:"rm-header",rmfooter:"rm-footer"},h=["addtocart","audio","background","button","ecommercecart","facebook","form","picture","gmaps","hotspot","iframe","shape","slideshow","text","twitter","video","rmheader","rmfooter","shots"],p=function(){var t,e=(t=regeneratorRuntime.mark((function t(e){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.default.intersection(h,n.default.difference(n.default.uniq(e),Object.keys(u))),t.next=3,Promise.all(r.map((function(t){return i("Ylwp")("./"+(d[t]?d[t]:t))})));case 3:a=t.sent,n.default.each(r,(function(t,e){u[t]=a[e].default}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){l(a,n,r,o,s,"next",t)}function s(t){l(a,n,r,o,s,"throw",t)}o(void 0)}))});return function(t){return e.apply(this,arguments)}}()},i0ke:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("v83y"),r=i("uU7u"),a=i("KiUg"),o=i("zZDe"),s=new n.CompositeDecorator([r.e,a.c,a.a,o.a])},jcqt:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("q1tI");function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t){var e=t,i=[];function a(t){var n=e;e=t,i.forEach((function(e){var i=e.update,r=e.options;(!r||!r.shouldUpdate||!r.shouldUpdate(n,t))&&i()}))}return[function(t){var o,s=(o=r(Object(n.useState)({}),2)[1],Object(n.useCallback)((function(){o({})}),[]));return Object(n.useEffect)((function(){var e={options:t,update:s};return i.push(e),function(){!function(t,e){var i=t.indexOf(e);if(-1===i)return;t.splice(i,1)}(i,e)}})),[e,a]},a,function(){return e}]}},lRGI:function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),a=i.n(r),o=i("rFsW"),s=i("AIVH");function c(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\n    <div class="common-button" data-id="<%-data._id%>">\n\n        <div class="icon"></div>\n\n    </div>\n\n']);return c=function(){return t},t}var l,u,d,h=(l={},u="template-common-button-widget",d=Object(s.a)(c()),u in l?Object.defineProperty(l,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[u]=d,l);function p(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\n    <input class="text"\n           value="<%-data.text%>"\n           type="text"\n           autocapitalize="off"\n           autocorrect="off"\n           autocomplete="off"\n           spellcheck="false"/>\n\n']);return p=function(){return t},t}var f=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"template-constructor-block-button",Object(s.a)(p()));function g(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n    <div class="text"><%-data.text%></div>\n']);return g=function(){return t},t}var m=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"template-viewer-widget-button",Object(s.a)(g())),v=i("OTSC"),b={STYLE_PREFIXES:{viewer:[".rmwidget.widget-button .common-button"],viewerCurrentLink:[".maglink.current .widget-button .common-button"],constructor:[".block.button .common-button"]},generateIndividualStyleCSS:function(t){var e=this.STYLE_PREFIXES[t.env],i=t.model,r=i.tp,a=this,s=function(n){n=n||"default";var s={default:"",hover:"hovered",current:"current"},c={default:"",hover:"hover-",current:"current-"},l=o.a.isUndefined(s[n])?s.default:s[n],u=o.a.isUndefined(c[n])?c.default:c[n],d=o.a.map(e,(function(t){return t+'[data-id="'+i._id+'"]'+(l?"."+l:"")})).join(",\n")+" {\n";return d+=a.generateStylesStr({model:i,attrPrefix:u,indentation:!0,lineBreaks:!0,env:t.env,state:n}),d+="}\n\n","viewer"===t.env&&("current"===n&&a.isNeedCurrentStyle(i)&&(d+=a.STYLE_PREFIXES.viewerCurrentLink+'[data-id="'+i._id+'"] {\n',d+=a.generateStylesStr({model:i,attrPrefix:u,indentation:!0,lineBreaks:!0}),d+="}\n\n"),"icon"!==r&&"text_and_icon"!==r||(d+=o.a.map(e,(function(t){return t+'[data-id="'+i._id+'"]'+(l?"."+l:"")+" .icon"})).join(",\n")+" {\n",d+='\t background-image: url("'+(Modernizr.retina?i[u+"icon_raster2xUrl"]:i[u+"icon_rasterUrl"])+'");\n',d+="}\n\n","current"===n&&(d+=a.STYLE_PREFIXES.viewerCurrentLink+'[data-id="'+i._id+'"] .icon {\n',d+='\t background-image: url("'+(Modernizr.retina?i[u+"icon_raster2xUrl"]:i[u+"icon_rasterUrl"])+'");\n',d+="}\n\n"))),d},c=s("default");o.a.find(o.a.keys(i),(function(t){return/^current/.test(t)}))&&(c+=s("current")),c+=s("hover");var l="individual_button_style_"+i._id+"_"+t.env;Object(n.a)("#"+l).remove();var u=document.createElement("style");u.type="text/css",u.id=l,u.className="button_styles",u.appendChild(document.createTextNode(c)),document.getElementsByTagName("head")[0].appendChild(u)},generateStylesStr:function(t){var e="",i=t.model,n=t.indentation?"\t":"",r=";"+(t.lineBreaks?"\n":""),a=t.attrPrefix||"";return e+=n+"background-color: "+v.default.getRGBA(o("background-color"),o("background-color-opacity")/100)+r,e+=n+"border-radius: "+s(o("border-radius"))+r,e+=n+"border-width: "+s(o("border-width"))+r,e+=n+"border-color: "+v.default.getRGBA(o("border-color"),o("border-color-opacity")/100)+r,e+=n+"font-family: "+o("font-family")+r,e+=n+"font-weight: "+o("font-weight")+r,e+=n+"font-style: "+o("font-style")+r,e+=n+"color: "+v.default.getRGBA(o("color"),o("color-opacity")/100)+r,e+=n+"font-size: "+s(o("font-size"))+r,e+=n+"letter-spacing: "+s(o("letter-spacing"))+r,i["hover-tansition-duration"]&&(e+=n+"transition: ".concat(i["hover-tansition-duration"],"s")+r),t.env&&t.state&&"viewer"===t.env&&"hover"===t.state&&i["hover-cursor"]&&(e+=n+"cursor: ".concat(i["hover-cursor"])+r),e;function o(t){var e=i[a+t];return("inherit"===e&&a||void 0===e)&&(e=i[t]),"border-color"===t&&"hover-"===a?0==i["hover-border-width"]&&(e=i["border-color"]):"border-color"===t&&"current-"!==a&&0==i["border-width"]&&(e=i["hover-border-color"]),"border-color-opacity"===t&&"hover-"===a?0==i["hover-border-width"]&&(e=i["border-color-opacity"]):"border-color-opacity"===t&&0==i["border-width"]&&(e=i["hover-border-color-opacity"]),e}function s(t){return t+(/px/i.test(t)?"":"px")}},destroyIndividualStyleCSS:function(t){var e="individual_button_style_"+t.model._id+"_"+t.env;Object(n.a)("#"+e).remove()},isNeedCurrentStyle:function(t){var e=t.clickLink;return!(!e||!t.is_global)&&(!(/^http(s?)\:\/\//i.test(e)||/^mailto\:/i.test(e)||/^tel\:/i.test(e))&&!!t.mag.getPageUri(e))}};function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){S(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var O=w(w(w({},h),f),m),k=a.a.View.extend({MIN_ICON_MARGIN:8,initialize:function(t){t&&(o.a.bindAll(this),this.block=t.block,this.model=t.block&&t.block.model,this.model=t.model,this.$container=t.$container,this.environment=t.environment,this.mag=t.mag,o.a.extend(this.model,{env:this.environment}),this.generateIndividualStyleCSS({env:this.environment,model:this.model}),this.template=O["template-common-button-widget"],"constructor"===this.environment?this.text_template=O["template-constructor-block-button"]:this.text_template=O["template-viewer-widget-button"],this.render())},render:function(){this.model.tp;var t=b.generateStylesStr({model:this.model});this.setElement(Object(n.a)(this.template({data:this.model}))),Object(n.a)(this.text_template({data:this.model})).appendTo(this.$el),this.$text=this.$(".text"),this.$icon=this.$(".icon"),this.$button=this.$text.closest(".common-button"),this.$button.attr("style",t),this.applyButtonType(this.model.tp),"circle"===this.model.form&&this.applyCircleRadius(this.model.w),this.applyTextContainerSize(this.model),this.applyIconContainerSize(this.model),this.applyIconPosition(this.model),"viewer"===this.environment&&this.$container.css("border-radius",this.$button.css("border-radius")),this.$el.appendTo(this.$container),this.renderFinishTimeout=setTimeout(function(){var t=["background-color","background-color-opacity","border-width","border-color","border-color-opacity","font-family","font-style","font-weight","color","color-opacity","font-size","letter-spacing"];"circle"!==this.model.form&&t.push("border-radius"),t.forEach(function(t){this.$button.css(t,"")}.bind(this)),this.applyTransition()}.bind(this),500)},renderButtonText:function(t){this.$el.find(".text").text(t)},renderButtonTextWithSizes:function(t,e){e&&this.applyTextContainerSize(e),this.$el.find(".text").text(t).css({display:t?"block":"none"})},applyTransition:function(){"viewer"!==this.environment||Modernizr.touch||this.model.transition&&this.$button.addClass("transition")},applyButtonType:function(t){"text"===t?(this.$text.css("display","inline-block"),this.$icon.css("display","none")):"icon"===t?(this.$icon.css("display","inline-block"),this.$text.css("display","none")):"text_and_icon"===t&&this.$icon.add(this.$text).css("display","inline-block")},applyCircleRadius:function(t){this.$button.css("border-radius","100%")},applyTextContainerSize:function(t){var e=t["letter-spacing"],i=0,n=0;e>0?i=e:e<0&&(n=e),this.$text.css({width:t.text_w+"px","padding-left":i+"px","text-indent":n+"px",height:"viewer"===this.environment?"".concat(t.h,"px"):"".concat(t.text_h,"px"),"line-height":"viewer"===this.environment?"".concat(t.h,"px"):"".concat(t.text_h,"px")})},applyIconContainerSize:function(t){t.tp;var e=t.icon_w,i=t.icon_h;t.icon_pos;this.$icon.css({width:e+"px",height:i+"px","margin-right":"0px","margin-left":"0px"})},calcIconMarginFromText:function(t){return Math.ceil(t/4)},calcIconTopBottomMargin:function(t){return Math.ceil(t/3)},calcTextTopBottomMargin:function(t){return Math.ceil(t/6)},applyIconPosition:function(t){var e=t.icon_pos;"left"===e?this.$button.css({"flex-direction":"row","-webkit-flex-direction":"row"}):"right"===e&&this.$button.css({"flex-direction":"row-reverse","-webkit-flex-direction":"row-reverse"})},generateIndividualStyleCSS:function(t){b.generateIndividualStyleCSS({env:t.env,model:t.model})},destroy:function(){clearTimeout(this.renderFinishTimeout),b.destroyIndividualStyleCSS({env:this.environment,model:this.model}),this.$el&&this.$el.remove()}});e.a=k},m41J:function(t,e,i){"use strict";var n=i("rFsW"),r=i("pFlR"),a={sideAngles:{top:0,right:.5*Math.PI,bottom:Math.PI,left:1.5*Math.PI},calcOrientedTriangleSquare:function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)},intersectsOnAxisProjection:function(t,e,i,n){var r;return t>e&&(r=t,t=e,e=r),i>n&&(r=i,i=n,n=r),t<i&&(t=i),e>n&&(e=n),t<=e},isLinesIntersects:function(t,e,i,n){return a.intersectsOnAxisProjection(t.x,e.x,i.x,n.x)&&a.intersectsOnAxisProjection(t.y,e.y,i.y,n.y)&&a.calcOrientedTriangleSquare(t,e,i)*a.calcOrientedTriangleSquare(t,e,n)<=0&&a.calcOrientedTriangleSquare(i,n,t)*a.calcOrientedTriangleSquare(i,n,e)<=0},isConvexPolygonContainsPoint:function(t,e){for(var i=0;i<t.length;i++){var n=(i+1)%t.length;if(a.calcOrientedTriangleSquare(t[i],t[n],e)<0)return!1}return!0},isConvexPolygonsIntersects:function(t,e){var i,n,r,o;for(i=0;i<t.length;i++)if(a.isConvexPolygonContainsPoint(e,t[i]))return!0;for(i=0;i<e.length;i++)if(a.isConvexPolygonContainsPoint(t,e[i]))return!0;for(i=0;i<t.length;i++)for(n=(i+1)%t.length,r=0;r<e.length;r++)if(o=(r+1)%e.length,a.isLinesIntersects(t[i],t[n],e[r],e[o]))return!0;return!1},doBoundingBoxesIntersect:function(t,e){return t&&e&&!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)},calcBoundingBox:function(t,e,i){var r=a.calcRotatedBox(t),o=n.a.pluck(r,"x"),s=n.a.pluck(r,"y"),c=Math.min.apply(null,o),l=Math.max.apply(null,o),u=Math.min.apply(null,s),d=c,h=u,p=l-c,f=Math.max.apply(null,s)-u;return e&&(["n","c","s"].indexOf(e)>-1&&(d=t.left),["w","c","e"].indexOf(e)>-1&&(h=t.top)),i?{width:p,height:f,left:d,top:h}:{bb_width:p,bb_height:f,bb_left:d,bb_top:h}},boxToRect:function(t){return{width:t.width,height:t.height,top:t.top,bottom:t.top+t.height,left:t.left,right:t.left+t.width}},getBoundingBoxOfElements:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=t.map((function(t){return t.parentElement?1!==e?r.a.getBox(t,e):t.getBoundingClientRect():{bottom:0,height:0,left:0,right:0,top:0,width:0}}));return a.getBoundingBoxOfBoxes(i)},getBoundingBoxOfBoxes:function(t){var e=[],i=[];n.a.each(t,(function(t){var r=void 0!==t.right?n.a.extend({},t):a.boxToRect(t);e.push(r.left),e.push(r.right),i.push(r.top),i.push(r.bottom)}));var r={top:Math.min.apply(null,i),right:Math.max.apply(null,e),bottom:Math.max.apply(null,i),left:Math.min.apply(null,e)};return r.width=r.right-r.left,r.height=r.bottom-r.top,r},getBoundingBoxOfBlocks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map((function(t){var e=t.getBoxData({includeBoundingBox:!0,checkFixedPosition:!0});return{width:e.bb_w,height:e.bb_h,top:e.bb_y,left:e.bb_x}}));return a.getBoundingBoxOfBoxes(e)},calcRotatedBox:function(t){var e=[],i=[0,1,1,0],r=[0,0,1,1],a=t.left+t.width/2,o=t.top+t.height/2,s=t.sinAngle,c=t.cosAngle;return n.a.each(i,(function(n,l){var u=t.left+t.width*i[l],d=t.top+t.height*r[l],h=u-a,p=o-d;u=a+c*h+s*p,d=o+s*h-c*p;e.push({x:u,y:d})})),e},getDistance:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},getBestPoints:function(t,e){for(var i,n,r,o=["right","left","bottom","top"],s={distance:1/0,fromPoint:{},toPoint:{}},c=0;c<o.length;c++)for(var l=0;l<o.length;l++)n=a.getSideCenter(t,o[c]),r=a.getSideCenter(e,o[l]),s=(i=a.getDistance(n,r))<s.distance?{distance:i,fromSide:o[c],fromPoint:n,toSide:o[l],toPoint:r}:s;return s},getSideCenter:function(t,e){var i;switch(e){case"left":i={x:t.left,y:t.top+t.height/2};break;case"top":i={x:t.left+t.width/2,y:t.top};break;case"bottom":i={x:t.left+t.width/2,y:t.top+t.height};break;case"right":default:i={x:t.left+t.width,y:t.top+t.height/2}}return i={x:(i.x-t.centerX)*t.cos-(i.y-t.centerY)*t.sin+t.centerX,y:(i.y-t.centerY)*t.cos+(i.x-t.centerX)*t.sin+t.centerY}},getPerpendicularEnd:function(t,e,i,n){var r=i.angle+a.sideAngles[t];return{x:n*Math.sin(r)+e.x,y:-n*Math.cos(r)+e.y}},getBox:function(t){var e=(t.$el&&t.$el[0]||t.length&&t[0]||t).getBoundingClientRect(),i=t.model?(t.model.attributes.angle||0)*Math.PI/180:0;return e=n.a.extend(e,{angle:i,sin:Math.sin(i),cos:Math.cos(i)}),e=n.a.extend(e,{centerX:e.left+e.width/2,centerY:e.top+e.height/2})},getResizedBoxNested:function(t,e,i,n){var r=i.width/e.width,a=i.height/e.height;return r="height"===n?a:r,a="width"===n?r:a,{left:(t.left-e.left)*r+i.left,top:(t.top-e.top)*a+i.top,width:t.width*r,height:t.height*a}},getResizedBoxByBB:function(t,e,i){var n=i.left+i.width/2,r=i.top+i.height/2,a=i.width/e.width,o=i.height/e.height,s=t.width*a,c=t.height*o;return{left:n-s/2,top:r-c/2,width:s,height:c}},getBoxLimits:function(t,e){var i=t.width/t.height>1,n=i?e.minheight/t.height:e.minwidth/t.width,r=i?e.maxwidth/t.width:e.maxheight/t.height;return{minwidth:e.minwidth?Math.round(t.width*n):1,minheight:e.minheight?Math.round(t.height*n):1,maxwidth:e.maxwidth?Math.round(t.width*r):1/0,maxheight:e.maxheight?Math.round(t.height*r):1/0}}};e.a=a},mkpD:function(t,e,i){"use strict";var n,r,a,o=i("AIVH");function s(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\t<div class="rmwidget widget-background" style="background-color: #<%=data.color%>">\n\n        <% if (data.selectedType == \'picture\') { %>\n            <div class="picture-background" style="opacity: <%=data.opacity || 1%>;"></div>\n        <% } %>\n\n        <% if (data.selectedType == \'video\') { %>\n            <div class="video-background" style="opacity: <%=data.videoopacity || 1%>;">\n                <div class="video-container"></div>\n                <div class="overlay"></div>\n            </div>\n\t\t<% } %>\n\n\t\t<% if (data.selectedType == \'slideshow\') { %>\n\t\t\t<div class="slideshow-background">\n\t\t\t\t<div class="slideshow-container"></div>\n\t\t\t\t<div class="slideshow-preload"></div>\n\t\t\t</div>\n\t\t<% } %>\n\t</div>\n']);return s=function(){return t},t}e.a=(n={},r="template-viewer-widget-background",a=Object(o.a)(s()),r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n)},oBKw:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("rFsW"),a=i("ROz4"),o=i("OTSC"),s=i("f3SV"),c=i("pFlR"),l=i("udqo"),u=i("X7yJ"),d=i("roQd");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f=a.a.extend({antialiasRotation:!0,mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){this.makeBox("widget-picture"),this.canShowPreview()&&this.initPreview(),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.$lqipImg=null,this.useLqip=this.mag&&this.mag.opts&&this.mag.opts.lqip&&(u.a.useLambdaUrl(this.picture)||u.a.useLambdaUrlOldProjects(this.picture));var t=this.getPictureUrl();if(/\.gif/.test(t)&&(this.isGIF=!0),this.$el.html(""),this.isVector(t)&&!s.c.IS_FILE_PROTOCOL)this.loadVector(t);else{var e=!!(this.border_size>0||this.border_radius>0||this.border_radius_max||this.border_radius_independent&&(this.border_radius_tl>0||this.border_radius_tr>0||this.border_radius_bl>0||this.border_radius_br>0)||this.is_full_width||this.is_full_height),i=void 0===this.opacity?1:this.opacity;if(this.insideHotspot&&this.isGIF){var a=this.scale;Object(n.a)("<div/>").appendTo(this.$el).css({position:"absolute","background-image":"url("+t+")","background-position":"50% 50%",width:Math.max(Math.round(this.originalW*a),this.w),height:Math.max(Math.round(this.originalH*a),this.h),top:-Math.round(this.cropY*a),left:-Math.round(this.cropX*a)}).attr("url",t)}else e&&Object(n.a)("<div/>").appendTo(this.$el).addClass("bgpic").css({"background-image":this.useLqip?"":"url(".concat(t,")"),"background-position":(this.fhpos?this.fhpos:50)+"% "+(this.fwpos?this.fwpos:50)+"%","box-shadow":this.border_size>0?"inset 0 0 0 "+this.border_size+"px #"+(this.border_color||"000000"):"none","border-radius":this.getBorderRadius(),opacity:this.useLqip?0:i}).attr("url",this.useLqip?"":t);if(u.a.useLambdaUrl(this.picture)||u.a.useLambdaUrlOldProjects(this.picture)){var o=u.a.getSrcset(this.picture,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},this.getPictureOptions()));Object(n.a)("<img/>").attr("srcset",o).attr("alt",this.getAltText()).attr("src",t).addClass("viewable").toggleClass("saveable",!!(e||this.insideHotspot&&this.isGIF)).css("opacity",0).load(r.a.bind((function(){var e=this.$el.find(".viewable"),n=e&&e.get(0)&&e.get(0).currentSrc||t,a=this.$el.find(".bgpic");a&&a.css({opacity:i,"background-image":"url(".concat(n,")")}).attr("url",n),e&&e.css("opacity",i),this.$lqipImg&&this.$lqipImg.css("opacity",0),r.a.delay(r.a.bind((function(){this.$el.css({overflow:"","border-radius":""}),this.$lqipImg&&this.$lqipImg.remove(),this.$lqipImg=null,this.widgetIsLoaded()}),this),200)}),this)).on("error",r.a.bind((function(){this.$lqipImg&&this.$lqipImg.remove(),this.$lqipImg=null,this.widgetIsLoaded()}),this)).appendTo(this.$el),this.useLqip&&(this.$el.css("overflow","hidden"),(this.border_radius||this.border_radius_max||this.border_radius_independent)&&this.$el.css("border-radius",this.getBorderRadius()),this.$lqipImg=Object(n.a)("<div/>").addClass("lqip").css({"background-image":"url(".concat(u.a.getLqipUrl(this.picture,{cropX:this.cropX,cropY:this.cropY,cropW:this.cropW,cropH:this.cropH,originalW:this.originalW,originalH:this.originalH}),")"),"background-position":"50% 50%",opacity:i}).appendTo(this.$el))}else Object(n.a)("<img/>").appendTo(this.$el).toggleClass("saveable",!!(e||this.insideHotspot&&this.isGIF)).css("opacity",void 0===this.opacity?1:this.opacity).addClass("viewable").load(r.a.bind((function(){this.$el.find("img").attr("url",t),this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded).attr("srcset",this.getSrcset()).attr("alt",this.getAltText()).attr("src",t)}return this.checkLink(),this},getBorderRadius:function(){return this.border_radius_independent?"".concat(this.border_radius_tl||0,"px ").concat(this.border_radius_tr||0,"px ").concat(this.border_radius_bl||0,"px ").concat(this.border_radius_br||0,"px"):"".concat(this.border_radius_max?"9999":this.border_radius||0,"px")},canShowPreview:function(){var t=Boolean(this.getAnimations().find((function(t){return"click"===t.type&&t.steps&&t.steps.length}))),e=!!this.clickLink;return this.preview_enabled&&!t&&!e},isValid:function(){return Boolean(this.picture&&(this.picture.type||this.picture.unscaledUrl||this.picture.finalUrl||this.picture.editedVectorUrl||this.picture.url))},isVector:function(t,e){var i=t||this.picture&&this.picture.url;return"svg"===(e||this.picture&&this.picture.type)||i&&0===r.a.last(i.split(".")).indexOf("svg")},start:function(){return this.started=!0,Modernizr.safari&&this.isGIF&&this.$el.flashClass("fix-safari-gif",100),this},getPictureOptions:function(){var t=this.getAnimations().reduce((function(t,e){return Math.max(t,d.a.maxScaleAnimation(e))}),0);return{width:this.w,height:this.h,cropX:this.cropX,cropY:this.cropY,cropW:this.cropW,cropH:this.cropH,originalW:this.originalW,originalH:this.originalH,scale:c.a.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.opts)?this.page.scale:1,animationScale:t&&t/100,isStretched:this.is_full_width||this.is_full_height}},getPictureUrl:function(){return this.picture?u.a.useLambdaUrl(this.picture)||u.a.useLambdaUrlOldProjects(this.picture)?u.a.getLambdaUrl(this.picture,this.getPictureOptions()):this.picture.finalUrl&&0===r.a.last(this.picture.finalUrl.split(".")).indexOf("svg")?this.picture.finalUrl:(t=c.a.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.opts)?this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.final2xUrl||this.picture.finalUrl:Modernizr.retina&&(window.devicePixelRatio>=3&&(this.picture.final3xUrl||this.picture.unscaledOptimizedUrl)||this.picture.final2xUrl||this.picture.unscaledOptimizedUrl)||this.picture.finalUrl,(this.is_full_width||this.is_full_height)&&(t=this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.final2xUrl||this.picture.finalUrl),t||this.picture.effectUrl||this.picture.editedVectorUrl||this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.url):"";var t},getAltText:function(){return this.picture&&this.alt?r.a.escape(this.alt):void 0},getSrcset:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.picture)return[];if(!this.originalW)return[];if(this.isGIF)return[];if(c.a.isOn(this.page.pageViewport,this.mag.getViewportWidth(this.page.pageViewport),this.mag.viewOpts))return[];if(this.getAnimations().length)return[];if(RM.screenshot)return[];if(this.picture.finalUrl&&0===r.a.last(this.picture.finalUrl.split(".")).indexOf("svg"))return[];var e=Math.floor(this.w),i=[{url:this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl,size:this.originalW},{url:this.picture.final2xUrl&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl),size:3*e},{url:this.picture.final2xUrl,size:2*e},{url:this.picture.finalUrl,size:e}];if(i=i.filter(function(t){return!!t.url&&this.originalW>=t.size}.bind(this)).map((function(t){return"".concat(t.url," ").concat(t.size,"w")})),!t)return i;var n=["".concat(this.picture.finalUrl||this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl," 1x")];return this.picture.final2xUrl&&n.push("".concat(this.picture.final2xUrl," 2x")),this.picture.final2xUrl&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl)&&n.push("".concat(this.picture.final2xUrl&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl)," 3x")),n.concat(i)},loadVector:function(t){this.$el.addClass("svg"),this.svgAjax=n.a.get(t+"?c",r.a.bind((function(e){var i=Object(n.a)(o.default.cleanupSVG(Object(n.a)(e).find("svg").get(0).cloneNode(!0)));i.get(0).removeAttribute("width"),i.get(0).removeAttribute("height"),this.$svg=i;var a=i.get(0).cloneNode(!0);this.$svg.find("title").remove();var s=new Image;Object(n.a)(s).on("load error",r.a.bind((function(){Object(n.a)(s).appendTo(window.document.body).css({width:"100%",height:"100%"});var t=Object(n.a)(a);t.get(0).setAttribute("viewBox","0 0 "+Object(n.a)(s).width()+" "+Object(n.a)(s).height()),t.appendTo(window.document.body);var e=t.get(0).getBBox();this.$svg.get(0).setAttribute("viewBox",e.x+" "+e.y+" "+e.width+" "+e.height),this.$svg.get(0).setAttribute("preserveAspectRatio","xMidYMid meet"),Object(n.a)(s).remove(),t.remove();var i=Object(n.a)('<div class="svg-scale-wrapper"></div>');this.$svg.appendTo(i),i.appendTo(this.$el),this.widgetIsLoaded()}),this)),s.src=t}),this)).fail(this.widgetIsLoaded)},initPreview:function(){this.preview=new l.a({$container:Object(n.a)("body"),$el:this.$el,picture:this.picture,overlayColor:this.preview_overlay_color,originalW:this.originalW,width:this.w,viewportWidth:this.mag.getViewportWidth(this.page.pageViewport),viewport:this.page.pageViewport,viewerOptions:this.mag.viewOpts}),this.$el.addClass("preview-enabled"),this.$el.on("click",function(){this.preview.render(),this.preview.bindClick()}.bind(this))}});e.default=f},p094:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("rFsW"),a=i("ROz4"),o=i("z79a"),s=i("pFlR"),c=i("OTSC"),l=i("QNiq"),u=a.a.extend(o.a.prototype).extend({mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){if(this.makeBox("widget-shape"),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.requiresImageLoad()){if(!this.rasterUrl)return this.widgetIsLoaded(),this;this.$el.addClass("icon"),this.antialiasRotation=!0;var t=Object(n.a)("<img>");t.on("load",r.a.bind((function(){this.$el.html(t),this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded),t.attr("src",Modernizr.retina||s.a.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.opts)?this.raster2xUrl||this.rasterUrl||"":this.rasterUrl||"")}else this.redrawSVG(),this.widgetIsLoaded();return this.checkLink(),this},start:function(){Modernizr.firefox&&!this.requiresImageLoad()&&this.borders>0&&this.redrawSVG()},redrawSVG:function(){var t=this,e={id:t._id,get:function(e){return t[e]}};if("rectangle"!==this.tp||1!==this.opacity||this.radius_rect_independent||l.a.isDesktop&&0!==this.borders){var i=this.generateShapeSVG("viewer-"+c.default.generateUUID(),e,this.$el.width(),this.$el.height());this.$el.html(i)}else{var n=c.default.hex2rgb(this.bg_color),r=c.default.hex2rgb(this.color);n&&n.push(this.bg_opacity),this.$el.css({"background-color":n?"rgba("+n.join(",")+")":"transparent","border-color":r?"rgb("+r.join(",")+")":"transparent","border-radius":this.radius||0,"border-style":"solid","border-width":this.borders,"box-sizing":"border-box"}),this.$el.addClass("div-instead-of-svg")}},requiresImageLoad:function(){return"icon"===this.tp},canRenderImmediately:function(){return!this.requiresImageLoad()},onPageResize:function(t){a.a.prototype.onPageResize.apply(this,arguments),this.requiresImageLoad()||this.redrawSVG()}});e.default=u},pFlR:function(t,e,i){"use strict";var n=i("QNiq"),r=i("v92f"),a=i("I0kf"),o={downscaleEnabled:Object(a.a)("constructor.customViewportWidth"),getNormalizedBox:function(t,e,i,n){return o.isOn(e,i,n)&&o.isCSSZoom()?o.getBox(t,o.getRatio(i)):t&&t.getBoundingClientRect()},getBox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=t?t.getBoundingClientRect():{};return{top:i.top*e,left:i.left*e,width:i.width*e,height:i.height*e,bottom:i.bottom*e,right:i.right*e}},getRatio:function(t){return window.innerWidth/t},getLimitedRatio:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=window.innerWidth/t,a=e/t,o=n?i/t:1;return Math.max(Math.min(r,a),o)},isScaleLayout:function(t){return t&&t.scalableviewer},isOn:function(t,e,i){return o.isDesktopDefault(t)&&o.isScaleLayout(i)&&(o.getRatio(e)>1||o.downscaleEnabled)},isOnForRatio:function(t,e,i){return o.isDesktopDefault(t)&&o.isScaleLayout(i)&&(e>1||o.downscaleEnabled)},isCSSZoom:function(){return!Modernizr.firefox},isCSSTransform:function(){return Modernizr.firefox},isDesktopDefault:function(t){return n.a.isDesktop&&t===r.b.Default},getMinDesktopRatio:function(t){var e=r.c.dictionary[r.b.Default].min_scale_width;return o.downscaleEnabled&&t&&e?e/t:1},equals1:function(t){return Math.abs(t-1)<1e-6},normalize:function(t,e,i,n,a){if(o.equals1(t))return 1;if(o.isDesktopDefault(i)){var s=!e||"zoom"===e&&o.isCSSZoom()||"transform"===e&&o.isCSSTransform();if(o.isScaleLayout(a)&&s){var c=r.c.dictionary[r.b.Default].min_scale_width,l=c&&n?c/n:1;return Math.max(o.downscaleEnabled&&n?l:1,t)}return 1}return t}};e.a=o},phNm:function(t,e,i){"use strict";var n=i("q1z7"),r=i.n(n),a=i("rFsW"),o=i("xi34"),s=i("aCH8"),c=i.n(s),l=i("Xjjk"),u=i.n(l),d=i("Fi5S"),h=i("f3SV");function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){g(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"checkProductActive",value:function(t){return t.active&&(this.productHasActiveSku(t)||this.productHasActivePrice(t))}},{key:"productHasActiveSku",value:function(t){return Array.isArray(null==t?void 0:t.articles)&&t.articles.some((function(t){return t.active}))}},{key:"productHasActivePrice",value:function(t){return t&&t.prices&&t.prices.length&&t.prices.some((function(t){return t.active}))}},{key:"mapProductsSelectList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=t.filter((function(t){return t.active&&(t.articles&&t.articles.length||t.prices&&t.prices.length)||e&&e===t.id})).map((function(t){return{value:t.id,caption:t.name}}));return i.unshift({value:"default",caption:"None"}),i}},{key:"getProductForAddToCart",value:function(t,e){if(!t)return null;var i=this.getActivePrice(t);if(i)return i.productObject=f(f({},t),{},{articles:null,prices:null}),i;var n=this.getSkuBySelectsValues(t,e);return n?(n.productObject=f(f({},t),{},{articles:null,prices:null}),n):null}},{key:"getActivePrice",value:function(t){return Array.isArray(t.prices)?t.prices.find((function(t){return t.active&&"per_unit"===t.billing_scheme})):null}},{key:"getSkuBySelectsValues",value:function(t,e){return t&&Array.isArray(t.articles)&&0!==t.articles.length?1===t.articles.length?t.articles[0]:t.articles.find((function(t){return JSON.stringify(t.attributes)===JSON.stringify(e)})):null}}])&&m(e.prototype,i),n&&m(e,n),t}();function b(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?b(Object(i),!0).forEach((function(e){w(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function w(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function S(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"checkProductActive",value:function(t){return Boolean(null==t?void 0:t.active)}},{key:"productHasActiveSku",value:function(t){var e=this;return(null==t?void 0:t.options)&&t.options.some((function(t){return e.isOptionValid(t)}))}},{key:"isOptionValid",value:function(t){return["SELECT","SIZE","RADIO"].includes(null==t?void 0:t.type)}},{key:"mapProductsSelectList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=t.map((function(t){return{value:t.id,caption:t.name}}));return i.unshift({value:"default",caption:"None"}),e&&!i.find((function(t){return t.value===e}))&&i.push({value:e,caption:"inactive product"}),i}},{key:"getProductForAddToCart",value:function(t,e){var i=y({},t);if(i&&e&&(i.selectedOptions=y({},e),Array.isArray(i.combinations))){var n=i.combinations.find((function(t){return t.options.every((function(t){return e[t.name]===t.value}))}));n&&(i.selectedCombination=y({},n))}return i}},{key:"getProductQuantity",value:function(t){var e=(null==t?void 0:t.selectedCombination)||t;return null==e?void 0:e.quantity}},{key:"isProductAvailable",value:function(t){if(null==t?void 0:t.inStock){var e=this.getProductQuantity(t);if(void 0===e||e)return!0}return!1}},{key:"countCartItemsById",value:function(t,e){var i=0;return Object.keys(e.prices).forEach((function(n){var r,a=e.prices[n];!a||a.id!==t&&(null===(r=a.selectedCombination)||void 0===r?void 0:r.id)!==t||(i+=a.cart_count||0)})),i}},{key:"isOutOfStock",value:function(t,e){if(!t)return!0;var i=this.getProductQuantity(t);if(void 0===i)return!1;var n=this.countCartItemsById(t.selectedCombination?t.selectedCombination.id:t.id,e);return!!(i&&n+1>i)}},{key:"updateCartProductItems",value:function(t,e){var i=y({},e);return i.prices={},Object.keys(e.prices).forEach((function(n){var r=e.prices[n],a=t.find((function(t){return t.id===r.id}));if(a){if(i.prices[n]=y(y({},r),a),r.selectedCombination&&a.combinations){var o=a.combinations.find((function(t){var e;return t.id===(null===(e=r.selectedCombination)||void 0===e?void 0:e.id)}));o&&(i.prices[n].selectedCombination=o)}}else r&&(i.prices[n]=y({},r))})),i}}])&&S(e.prototype,i),n&&S(e,n),t}(),k=i("LDvm");function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function C(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function j(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function _(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){j(a,n,r,o,s,"next",t)}function s(t){j(a,n,r,o,s,"throw",t)}o(void 0)}))}}function T(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function M(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){var e="function"==typeof Map?new Map:void 0;return(E=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return D(t,arguments,L(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),$(n,t)})(t)}function D(t,e,i){return(D=A()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&$(r,i.prototype),r}).apply(null,arguments)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.d(e,"c",(function(){return W})),i.d(e,"a",(function(){return V}));var R,F,B=function(){return{skus:{},prices:{},uniqSkusCount:0,uniqPricesCount:0,shippableProducts:0,changed:(new Date).toISOString(),order:null,provider:null}},z={out_of_stock:"Out of stock"},W={outOfStock:"outOfStock",nothingToInvoice:"nothingToInvoice"},V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(r,t);var e,i,n=(e=r,i=A(),function(){var t,n=L(e);if(i){var r=L(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return M(this,t)});function r(t,e){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(i=n.call(this,t)).type=e,i}return r}(E(Error)),N=function(t,e,i,n){RM.screenshot&&(this.page=n),this.isMagLoaded=!1,this.haveEcommerceCartWidget=!1,this.isCartSidebarHidden=!0,this.productsLoading=!1,this.productsLoaded=!1,this.productsLoadingError=!1,this.cancelingOrder=!1,this.products=null,this.storageKey="_rmcartdata",this.connectedProvider,this.environment=i,this.mag=e,this.router=t,this.events=a.a.extend({},r.a.Events),this.cartData=B(),this.cartItemsLimit=25;var o=window.navigator.language;return this.userLocale=o?o.substring(0,2):"en",this.isConstructor()?this.mag.has("_id")?this.onMagFullLoaded():d.a.once("mag:loadfull:complete",this.onMagFullLoaded,this):(this.mag.model.has("_id")&&this.onMagFullLoaded(),this.restoreBackupCartData()),this};a.a.extend(N.prototype,{ecommerceProviders:["stripe","ecwid"],CONNECTION_TIMEOUT:5e3,stripeJsSrc:"https://js.stripe.com/v3/",isConstructor:function(){return this.environment===h.c.environment.constructor},isViewer:function(){return this.environment===h.c.environment.viewer},isPreview:function(){return this.environment===h.c.environment.preview},getStorageKey:function(){return"".concat(this.storageKey,"_").concat(this.mag.num_id)},onMagFullLoaded:function(){this.isMagLoaded||(this.isMagLoaded=!0,this.haveEcommerceCartWidget=this.hasEcommerceWidget(),this.connectedProvider=this.getConnectedProvider(),this.cartData.provider=this.connectedProvider,this.connectEcommerceAdapter(),this.events.trigger("ecommerce:update:provider",this.connectedProvider),this.connectedProvider&&!this.productsLoading&&("stripe"===this.connectedProvider&&this.addStripeLibrary(),this.getProducts(this.connectedProvider)))},hasEcommerceWidget:function(){var t=this.isConstructor()?this.mag.globalWidgets:RM.screenshot?this.page.widgetsData:[].concat(T(this.mag.staticGlobalWidgetsData),T(this.mag.aboveGlobalWidgetsData));return N.hasEcommerceWidget(this.environment,t)},getEcommerceData:function(){var t=null;return this.isConstructor()?this.mag.has("ecommerce_data")&&(t=this.mag.get("ecommerce_data")):this.mag.model.has("ecommerce_data")&&(t=this.mag.model.get("ecommerce_data")),t},connectEcommerceAdapter:function(){if(this.connectedProvider)switch(this.connectedProvider){case"stripe":this.adapter=new v;break;case"ecwid":this.adapter=new O}else this.adapter=null},updateEcommerceDataFromServer:function(){var t=this;Object(k.j)(this.mag.get("num_id")).then((function(e){(null==e?void 0:e.ecommerce_data)&&(t.mag.set({ecommerce_data:e.ecommerce_data},{silent:!0}),t.connectedProvider=t.getConnectedProvider(),t.cartData.provider=t.connectedProvider,t.connectEcommerceAdapter(),t.events.trigger("ecommerce:update:provider",t.connectedProvider))}))},getStripeConnectedUserId:function(){if(!this.isMagLoaded)return null;var t=this.getEcommerceData();return t&&t.stripe&&t.stripe.stripe_data&&t.stripe.stripe_data.stripe_user_id?t.stripe.stripe_data.stripe_user_id:null},getProducts:(F=_(regeneratorRuntime.mark((function t(e){var i,n,r,a,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.productsLoading=!0,i=this.isConstructor()?this.mag.get("num_id"):this.mag.model.get("num_id"),n=this.isViewer()?"published_projects":"projects",r=RM.screenshot&&"preview"===RM.screenshotMode?"?type=preview":this.isViewer()?"?type=published":"",a="stripe"===e?"/api/".concat(n,"/").concat(i,"/ecommerce/stripe/products/"):"/api/ecommerce/".concat(i,"/").concat(e,"/products").concat(r),t.abrupt("return",o.a.ajax({type:"GET",url:a,context:this}).done((function(t){return t&&t.data&&(s.products=t.data),s.productsLoaded=!0,s.events.trigger("ecommerce:loadproducts:complete"),s.products})).fail((function(t){throw t.status,s.productsLoadingError=!0,s.events.trigger("ecommerce:loadproducts:complete"),new V("Loading products error")})).always((function(){s.productsLoading=!1})));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return F.apply(this,arguments)}),updateCartProductItems:(R=_(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=null===(e=this.adapter)||void 0===e?void 0:e.updateCartProductItems(this.products,this.cartData))){t.next=9;break}return this.cartData=i,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData),t.abrupt("return",this.cartData);case 9:throw new V("Update cart data error");case 10:case"end":return t.stop()}}),t,this)}))),function(){return R.apply(this,arguments)}),addStripeLibrary:function(){if(!(this.isConstructor()||window.Stripe&&window.Stripe.version)){var t=document.createElement("script"),e=document.getElementsByTagName("body")[0];t.setAttribute("async","async"),t.setAttribute("src",this.stripeJsSrc),e.appendChild(t)}},getConnectedProvider:function(){var t,e=this;return this.ecommerceProviders.forEach((function(i){e.isMagConnectedTo(i)&&(t=i)})),t},isMagConnectedTo:function(t){if(!this.isMagLoaded)return!1;if(!this.ecommerceProviders.includes(t))return!1;var e=this.getEcommerceData();return!!e&&Boolean(e[t]&&e[t].status&&"connected"===e[t].status)},canBeConnectedTo:function(t){if(!this.isConstructor())return!1;var e=this.getConnectedProvider();return!e||t===e},connectToStripe:function(){return new Promise(function(t,e){window.open("/api/connect/ecommerce/stripe/connect?num_id="+this.mag.get("num_id"),"_blank"),this.initSocket().then(function(e){this.mag.set({ecommerce_data:e},{silent:!0}),t()}.bind(this)).catch((function(t){e(t)}))}.bind(this))},disconnectFrom:function(t){return new Promise(function(e,i){o.a.ajax({type:"GET",url:"/api/connect/ecommerce/".concat(t,"/disconnect?num_id=").concat(this.mag.get("num_id")),success:function(i){if(i&&i.status){this.products=null;var n=this.getEcommerceData();n[t]||(n[t]={}),n[t]=i,this.mag.set({ecommerce_data:n},{silent:!0})}e(i)},error:function(t){i(t)},context:this})}.bind(this))},getTextValue:function(t){var e,i=this.getEcommerceData(),n=null==i||null===(e=i.texts)||void 0===e?void 0:e[t];return n?u()(n):z[t]},saveTextValue:function(t,e){var i=this.getEcommerceData();i.texts||(i.texts={});var n=e||z[t];i.texts[t]=n,this.mag.save({ecommerce_data:i},{patch:!0})},initSocket:function(){return new Promise(function(t,e){var i=window.location.origin===h.c.readymag_auth_host&&h.c.stripe_live?"sockets.readymag.com/stripe-auth":"/stripe-auth",n=io(i,{timeout:this.CONNECTION_TIMEOUT});n.on("connect",function(){n.emit("wainting for mag stripe auth update",{num_id:this.mag.get("num_id"),user:this.router.me.pick("name","email","_id"),hash:this.mag.get("socket_hash")}),n.on("state-update",(function(i){n.disconnect(),i.error?e(i.error):t(i.ecommerce_data)}))}.bind(this))}.bind(this))},checkCartDisabledControls:function(){if(this.haveEcommerceCartWidget){var t=this.getEcommerceCartBlock(),e=this.getEcommerceData();t&&t.checkDisabledControls(e.stripe&&e.stripe.status&&"connected"===e.stripe.status)}},getEcommerceCartBlock:function(){return this.haveEcommerceCartWidget&&this.isConstructor()?this.router.workspace.findBlockByFunction((function(t){return t.attributes.type===h.c.ecommerceCartBlockName})):null},getCartWidgetData:function(){if(!this.isConstructor()){var t=this.mag.staticGlobalWidgetsData.find((function(t){return t.type===h.c.ecommerceCartBlockName}));return t||this.mag.aboveGlobalWidgetsData.find((function(t){return t.type===h.c.ecommerceCartBlockName}))}return null},getProductsLikeOptionsList:function(t){return this.products&&this.adapter?this.adapter.mapProductsSelectList(this.products,t):[]},checkProductActive:function(t){if(t){var e=this.getProductById(t);if(e)return!!this.adapter&&this.adapter.checkProductActive(e)}},productHasActiveSku:function(t){return!(!t||!this.adapter)&&this.adapter.productHasActiveSku(t)},isOptionValid:function(t){return this.adapter&&this.adapter.isOptionValid(t)},isSkuAvailable:function(t){return!!t.active&&("infinite"===t.inventory.type||("finite"===t.inventory.type&&t.inventory.quantity>0||"bucket"===t.inventory.type&&("in_stock"===t.inventory.value||"limited"===t.inventory.value)))},getProductById:function(t){return this.products&&Array.isArray(this.products)?this.products.find((function(e){return e.id===t})):null},getProductsStatus:function(){return this.productsLoading?"loading":this.productsLoaded?"loaded":"failed"},getSkusByProductId:function(t){var e=this.getProductById(t);return e?e.articles:null},getFirstAvailableSku:function(t){return t?t.find(function(t){return this.isSkuAvailable(t)}.bind(this)):null},getFirstAvailableSkuForProductId:function(t){return this.getFirstAvailableSku(this.getSkusByProductId(t))},changeCartSidebarVisibility:function(){return this.isCartSidebarHidden=!this.isCartSidebarHidden,d.a.trigger("ecommerce:cartsidebar:visibility:changed",this.isCartSidebarHidden),this.isCartSidebarHidden},checkItemQuantity:function(t){if("string"!=typeof t){var e=t;return!!("infinite"===e.inventory.type||"finite"===e.inventory.type&&e.inventory.quantity||"bucket"===e.inventory.type&&"out_of_stock"!==e.inventory.value)}if(this.cartData.skus[t]){var i=this.cartData.skus[t];return"infinite"===i.inventory.type||"finite"===i.inventory.type&&i.cart_count<i.inventory.quantity||"bucket"===i.inventory.type&&"out_of_stock"!==i.inventory.value}return!1},checkItemQuantityOnUpdate:function(t){if(this.cartData.skus[t]){var e=this.cartData.skus[t];return"infinite"===e.inventory.type||"finite"===e.inventory.type&&e.cart_count<=e.inventory.quantity||"bucket"===e.inventory.type&&"out_of_stock"!==e.inventory.value}return!1},getCartData:function(){return this.cartData},markCartChange:function(){this.cartData.changed=(new Date).toISOString()},isProductAvailable:function(t){var e;return null===(e=this.adapter)||void 0===e?void 0:e.isProductAvailable(t)},isOutOfStock:function(t){var e;return null===(e=this.adapter)||void 0===e?void 0:e.isOutOfStock(t,this.cartData)},getProductForAddToCart:function(t,e){var i;return null===(i=this.adapter)||void 0===i?void 0:i.getProductForAddToCart(t,e)},addProductToCart:function(t){switch(t.object){case"price":return this.addPriceToCart(t);case"product":return this.addEcwidToCart(t);case"sku":return this.addSkuToCart(t);default:return new V("provider not found")}},addSkuToCart:function(t){if(!t||!t.id)return new V("Sku data isn't valid or doesn’t have an id");if(this.cartData.skus[t.id]){if(!this.checkItemQuantity(t.id))return new V("You can’t add this product with attribute "+t.id+". It's out of stock",W.outOfStock);this.cartData.skus[t.id]=Object.assign({},t,{cart_count:this.cartData.skus[t.id].cart_count+1})}else{if(this.cartData.uniqSkusCount+1>this.cartItemsLimit)return new V("You can’t add more than "+this.cartItemsLimit+" items to the cart");if(!this.checkItemQuantity(t))return new V("You can’t add this product with attribute "+t.id+". It's out of stock",W.outOfStock);this.cartData.skus[t.id]=Object.assign({},t,{cart_count:1}),this.cartData.uniqSkusCount+=1,t.productObject.shippable&&(this.cartData.shippableProducts+=1)}return this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData),this.cartData},addPriceToCart:function(t){if(!t||!t.id||!t.active)return new V("Price data isn't valid or doesn’t have an id");if(this.cartData.prices[t.id])this.cartData.prices[t.id]=Object.assign({},t,{cart_count:this.cartData.prices[t.id].cart_count+1});else{if(this.cartData.uniqPricesCount+1>this.cartItemsLimit)return new V("You can’t add more than "+this.cartItemsLimit+" items to the cart");this.cartData.prices[t.id]=Object.assign({},t,{cart_count:1}),this.cartData.uniqPricesCount+=1}return this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData),this.cartData},addEcwidToCart:function(t){if(!t||!t.id)return new V("Product data isn't valid or doesn’t have an id");var e=this.getCartItenKey(t);return this.isProductAvailable(t)?this.isOutOfStock(t)?new V("You can’t add more product ".concat(t.id," items to the cart"),W.outOfStock):(this.cartData.prices[e]?this.cartData.prices[e].cart_count+=1:(this.cartData.prices[e]=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?x(Object(i),!0).forEach((function(e){C(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({cart_count:1},t),this.cartData.uniqPricesCount+=1),this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData),this.cartData):new V("You can’t add this product ".concat(t.id,". It's out of stock"),W.outOfStock)},getCartItenKey:function(t){return"product"===t.object&&t.selectedOptions&&Object.keys(t.selectedOptions).length>0?c()("".concat(t.id,"-").concat(JSON.stringify(t.selectedOptions))):t.id},increaseCartItem:function(t){this.cartData.prices[t]&&(this.cartData.prices[t].cart_count+=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},increaseSkuCartItem:function(t){if(this.cartData.skus[t]){if(!this.checkItemQuantity(t))return new V("You can’t add more this product with attribute "+t+". It's out of stock",W.outOfStock);this.cartData.skus[t].cart_count+=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData)}},decreaseCartItem:function(t){this.cartData.prices[t]&&this.cartData.prices[t].cart_count>1&&(this.cartData.prices[t].cart_count-=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},decreaseSkuCartItem:function(t){this.cartData.skus[t]&&this.cartData.skus[t].cart_count>1&&(this.cartData.skus[t].cart_count-=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},removeFromCart:function(t){this.cartData.prices[t]&&(delete this.cartData.prices[t],this.cartData.uniqPricesCount-=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},removeSkuFromCart:function(t){this.cartData.skus[t]&&(this.cartData.skus[t].productObject.shippable&&(this.cartData.shippableProducts-=1),delete this.cartData.skus[t],this.cartData.uniqSkusCount-=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},clearCart:function(){this.cartData=B(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData)},updateCartSkus:function(t){var e=this,i=[];if(t.forEach((function(t){e.cartData.skus[t.id]&&(e.cartData.skus[t.id]=Object.assign({},e.cartData.skus[t.id],t),e.checkItemQuantityOnUpdate(t.id)||i.push(e.cartData.skus[t.id].productObject.name))})),this.backupCartData(),i.length)return i},updateCartData:function(){return new Promise(function(t,e){this.cartData&&this.cartData.skus||e(new V("Empty cart"));var i=[];for(var n in this.cartData.skus)this.cartData.skus.hasOwnProperty(n)&&i.push(n);var r=i.length?a.a.uniq(i).join(","):null;o.a.ajax({type:"GET",url:"/api/projects/"+this.mag.num_id+"/ecommerce/stripe/skus/"+(r?"?skus_ids="+r:""),contentType:"application/json; charset=utf-8",dataType:"json",success:function(i){if(i&&i.data){var n=this.updateCartSkus(i.data);if(n){var r=n.length>1;e(new V("This item".concat(r?"s":""," cannot be used to create an order: ").concat(n.join(", ")," ").concat(r?"are":"is"," out of stock"),W.outOfStock))}t(this.cartData)}}.bind(this),error:function(){e(new V("Error occurred while updating the skus:",i))}})}.bind(this))},hasShippableProducts:function(){return!!this.cartData.shippableProducts||!!this.cartData.uniqPricesCount},setShippingForm:function(t){this.cartData.shippingForm=a.a.cloneWithObjects(t),this.markCartChange(),this.backupCartData()},getShippingForm:function(){return a.a.cloneWithObjects(this.cartData.shippingForm)},getShippingOptions:function(){return this.cartData.order&&this.cartData.order.shipping_methods?this.cartData.order.shipping_methods.map((function(t){return{id:t.id,label:t.description,amount:t.amount}})):null},setOrder:function(t){this.cartData.order=t,this.backupCartData()},getOrder:function(){return this.cartData.order},deleteOrder:function(){this.cartData.order=null,this.backupCartData()},cancelOrder:function(){return this.changeOrder({status:"canceled"})},changeShippingMethod:function(t){return this.changeOrder({selected_shipping_method:t})},changeOrder:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e,i){this.cartData.order||i(new V("No order")),this.cancelingOrder&&i(),this.cancelingOrder=!0,o.a.ajax({type:"PATCH",url:"/api/projects/"+this.mag.num_id+"/ecommerce/stripe/orders/"+this.cartData.order.id+"/",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){this.cancelingOrder=!1,e(t)}.bind(this),error:function(t){this.cancelingOrder=!1,i(new V(t.responseText))}})}.bind(this))},setCustomer:function(t){this.cartData.customer=t,this.backupCartData()},createOrUpdateCustomer:function(t,e){return new Promise((function(i,n){o.a.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/customers/"),data:JSON.stringify({customer_data:e}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){i(t)},error:function(t){n(new V(t.responseText))}})}))},getCustomer:function(){return this.cartData.customer},setInvoiceItems:function(t){this.cartData.invoiceItems=t,this.backupCartData()},unsetInvoiceItems:function(){delete this.cartData.invoiceItems,this.backupCartData()},createInvoiceItems:function(t,e,i){return new Promise((function(n,r){o.a.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoice_items/"),data:JSON.stringify({customer_id:e,prices:i}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){n(t)},error:function(t){r(new V(t.responseText))}})}))},setInvoice:function(t){this.cartData.invoice=t,this.backupCartData()},unsetInvoice:function(){delete this.cartData.invoice,this.backupCartData()},createInvoice:function(t,e){return new Promise((function(i,n){o.a.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/"),data:JSON.stringify({invoiceData:e}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){i(t)},error:function(t){t.responseJSON&&"invoice_no_customer_line_items"===t.responseJSON.code?n(new V(t.responseJSON.message,W.nothingToInvoice)):n(new V(t.responseText))}})}))},getInvoice:function(t,e){return new Promise((function(i,n){o.a.ajax({type:"GET",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/").concat(e,"/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new V("Not valid response, getInvoice"))},error:function(t){n(new V(t.responseText))}})}))},deleteDraftInvoice:function(t,e){return new Promise((function(i,n){o.a.ajax({type:"DELETE",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/").concat(e,"/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new V("Not valid response"))},error:function(t){n(new V(t.responseText))}})}))},voidDraftInvoice:function(t,e){return new Promise((function(i,n){o.a.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/").concat(e,"/void/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new V("Not valid response"))},error:function(t){n(new V(t.responseText))}})}))},finalizeInvoice:function(t,e){return new Promise((function(i,n){o.a.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/").concat(e,"/finalize/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new V("Not valid response"))},error:function(t){n(new V(t.responseText))}})}))},getPaymentIntent:function(t,e){return new Promise((function(i,n){o.a.ajax({type:"GET",url:"/api/projects/".concat(t,"/ecommerce/stripe/payment_intents/").concat(e,"/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new V("Not valid response"))},error:function(t){n(new V(t.responseText))}})}))},updatePaymentIntent:function(t,e,i){return new Promise((function(n,r){o.a.ajax({type:"PATCH",url:"/api/projects/".concat(t,"/ecommerce/stripe/payment_intents/").concat(e,"/"),contentType:"application/json; charset=utf-8",data:JSON.stringify({paymentIntentData:i}),dataType:"json",success:function(t){t&&t.data?n(t.data):r(new V("Not valid response"))},error:function(t){r(new V(t.responseText))}})}))},validateCartData:function(t){return!(!t||"object"!==P(t)||isNaN(Date.parse(t.changed))||isNaN(Date.parse(t.backuped))||"number"!=typeof t.uniqSkusCount||"number"!=typeof t.uniqPricesCount||"object"!==P(t.skus)||"object"!==P(t.prices)||"object"!==P(t.order)&&null!==t.order)},getInvalidAddToCartWidgets:function(){var t=this.mag.getAllWidgets().filter((function(t){return"addtocart"===t.type&&!t.hidden}));if(!t||!t.length)return[];var e=this.products?this.products.map((function(t){return t.id})):[];return t.filter((function(t){return!t.selected_product_id||!e.includes(t.selected_product_id)}))},restoreBackupCartData:function(){if(Modernizr.localstorage){var t=localStorage.getItem(this.getStorageKey());if(t){var e=JSON.parse(t);if(!e.provider||e.provider!==this.connectedProvider)return void this.clearBackup();var i=((Date.now()-Date.parse(e.backuped))/1e3/60/60).toFixed(2);this.validateCartData(e)&&i<=24?this.cartData=e:this.clearBackup()}}},backupCartData:function(){Modernizr.localstorage&&(this.cartData.backuped=(new Date).toISOString(),localStorage.setItem(this.getStorageKey(),JSON.stringify(this.cartData)))},clearBackup:function(){Modernizr.localstorage&&localStorage.removeItem(this.getStorageKey())}}),N.hasEcommerceWidget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t===h.c.environment.constructor?Boolean(e.find((function(t){return t.get("type")===h.c.ecommerceCartBlockName}))):Boolean(e.find((function(t){return t.type===h.c.ecommerceCartBlockName})))};e.b=N},rVpV:function(t,e,i){"use strict";var n=i("rFsW"),r=i("roQd"),a=i("OTSC"),o=i("v92f"),s={GLOBAL_UNIQUE_KEYS:["hidden","z"],GLOBAL_UNIQUE_KEY_PREFIX:"_",FADE_DURATION:200,getUniqueValue:function(t,e,i){var r=e[this.GLOBAL_UNIQUE_KEY_PREFIX+t]||[],a=n.a.findWhere(r,{pid:i});return void 0===(a=a||n.a.findWhere(r,{pid:"default"})||{}).value?e[t]:a.value},resetGlobalData:function(t,e){var i=this;return n.a.each(o.c.viewport_listall,(function(r){n.a.each(i.GLOBAL_UNIQUE_KEYS,(function(a){r==="viewport_"+e?t.set(i.GLOBAL_UNIQUE_KEY_PREFIX+a,[]):n.a.isEmpty(t[r])||(t[r][i.GLOBAL_UNIQUE_KEY_PREFIX+a]=[])}))})),{}},isGlobalKey:function(t){return-1!==this.GLOBAL_UNIQUE_KEYS.indexOf(t)},getGlobalPrefixedKey:function(t){return this.isGlobalKey(t)?this.GLOBAL_UNIQUE_KEY_PREFIX+t:null},fillUniqueAttributeSets:function(t,e,i){var r={};return e.is_global?(Object(n.a)(this.GLOBAL_UNIQUE_KEYS).each(function(a){if(n.a.has(t,a)&&void 0!==t[a]){var o=e[this.GLOBAL_UNIQUE_KEY_PREFIX+a]||[],s=n.a.findWhere(o,{pid:i}),c=n.a.findWhere(o,{pid:"default"});s?s.value=t[a]:o.push({pid:i,value:t[a]}),c||o.push({pid:"default",value:void 0===e[a]?null:e[a]}),r[this.GLOBAL_UNIQUE_KEY_PREFIX+a]=o}}.bind(this)),r):t},ensurePageDefRecord:function(t){Object(n.a)(this.GLOBAL_UNIQUE_KEYS).each(function(e){var i=t[this.GLOBAL_UNIQUE_KEY_PREFIX+e]||[];n.a.findWhere(i,{pid:"default"})||i.push({pid:"default",value:void 0===t[e]?null:t[e]}),t[this.GLOBAL_UNIQUE_KEY_PREFIX+e]=i}.bind(this))},fillUniqueValues:function(t,e,i){i=i||{},n.a.each(t,(function(r,a){if(n.a.contains(this.GLOBAL_UNIQUE_KEYS,a)&&(!i.props||n.a.contains(i.props,a))){var o=this.getUniqueValue(a,t,e);t[a]=void 0===o?r:o}}),this)},isHidden:function(t,e,i){return this.getUniqueValue("hidden",t,e)||!i&&r.a.hasExpired(t)},show:function(t,e){e=Boolean(e),t.$el.toggleClass("no-transition",e),t.$el.addClass("above-all-fade"),t.$el.hasClass("fade-in")&&!e||(t.cancelHide&&t.cancelHide(),t.show(),n.a.delay((function(){t.$el.addClass("fade-in")}),50))},hide:function(t,e){return e=Boolean(e),t.$el.addClass("above-all-fade"),new window.Promise((function(i){t.$el.hasClass("fade-in")||e?(t.$el.toggleClass("no-transition",e),t.$el.removeClass("fade-in"),e?(t.hide(),i()):t.cancelHide=a.default.waitForTransitionEnd(t.$el,s.FADE_DURATION,"opacity",(function(){t.hide(),i()}))):i()}))}};e.a=s},roQd:function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),a=i.n(r),o=i("rFsW"),s=i("pFlR"),c=i("OTSC"),l=i("QNiq");function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var f={LOOP_TYPES:{swing:"swing",repeat:"repeat"},EVENT_TYPES:["load","scroll","hover","click"],POINTER_EVENTS:["click","hover"],EXTERNAL_TRIGGER_BLOCK_EXCLUDE:["facebook","twitter","form","gmaps","slideshow","audio","video"],ANIMATION_BLOCK_EXCLUDE:["facebook","twitter"],POINTER_EVENTS_BLOCK_EXCLUDE:["form","gmaps","slideshow","audio","video"],DEFAULT_LOOP_TYPE:"swing",ACTIVE_TRIGGER_CLASS:"active-trigger",ACTIVE_TRIGGER_REMOVE_CLASS:"active-trigger-remove",ACTIVE_TRIGGER_HIGHLIGHT_CLASS:"active-trigger-highlight",ANIMATIONS_PLAYED_STORAGE_KEY:"animationsPlayed",DEG_TO_RAD:Math.PI/180,ANIMATION_PROPERTIES:function(){var t=!1,e="animation",i="AnimationIteration",n="AnimationEnd",r="animation-timing-function",a="@keyframes",o="transform",s="transform",c="Webkit Moz O ms Khtml".split(" "),l="webkit moz o MS кhtml".split(" "),u=document.createElement("div");if(null!=u.style.animationName)t=!0,i=i.toLowerCase(),n=n.toLowerCase();else for(var d=0;d<c.length;d++)if(null!=u.style[c[d]+"AnimationName"]){e=c[d]+"Animation",i=l[d]+i,n=l[d]+n,r="-"+c[d].toLowerCase()+"-"+r,a="@-"+c[d].toLowerCase()+"-keyframes",t=!0;break}if(null==u.style.transform)for(d=0;d<c.length;d++)if(null!=u.style[c[d]+"Transform"]){o=c[d]+"Transform",s="-"+c[d].toLowerCase()+"-transform";break}return u=null,{animationSupported:t,animationJS:e,animationIterationJS:i,animationEndJS:n,animationTimingFunctionCSS:r,keyframeCSS:a,transformJS:o,transformCSS:s}}(),createAnimationTimeline:function(t){return new b(t)},getNormalizedAnimation:function(t,e,i,n,r,a,c,l){var u={dx:0,dy:0,from_opacity:100,opacity:100,from_rotate:0,rotate:0,from_scale:100,scale:100},d={use_move:["dx","dy"],use_opacity:["from_opacity","opacity"],use_rotate:["from_rotate","rotate"],use_scale:["from_scale","scale"]},h=o.a.extend({},t),p=h.loop;h.loop=!1,h.steps=[];for(var f={dx:0,dy:0},g=0;g<t.steps.length;g++){var m=o.a.extend({},t.steps[g]);o.a.each(d,o.a.bind((function(t,e){m[e]?(u[t[0]]=m[t[0]],u[t[1]]=m[t[1]]):(m[t[0]]=u[t[0]],m[t[1]]=u[t[1]])}),this)),i&&(m.dx=0,m.rotate=0,m.from_rotate=0),n&&(m.dy=0,m.rotate=0,m.from_rotate=0),"scroll"!=h.type||e||0!=g||(m.delay_px=0),1!=r&&e&&(m.dx*=r,m.dy*=r),"scroll"==h.type?(m.calcedDuration=v(m,f),m.calcedDelay=m.delay_px?m.delay_px*s.a.normalize(r,void 0,a,c,l):0):(m.calcedDuration=m.duration||.001,m.calcedDelay=m.delay||0),m.acceleration=m.acceleration||"none","scroll"===h.type?m.loop=!1:p&&0===g&&(m.loop=p),h.steps.push(m),f=m}return h.trigger=t.trigger&&!o.a.isArray(t.trigger)?[t.trigger]:o.a.clone(t.trigger)||[],h;function v(t,e){var i,n=t.dx-e.dx,r=t.dy-e.dy;return i=0!=n||0!=r?Math.pow(n*n+r*r,.5)/t.speed:300/t.speed,Math.ceil(i)}},normalizeLoopValue:function(t){return!!t&&(this.LOOP_TYPES[t]||this.DEFAULT_LOOP_TYPE)},isExternalTriggerAllowed:function(t){return this.isPointerEvent(t)},normalizeAnimationTriggers:function(t){return t&&!o.a.isArray(t)?[t]:o.a.clone(t)||[]},normalizeAnimations:function(t){return t&&!o.a.isArray(t)?[t]:t||[]},isEmpty:function(t){return!(t&&t.type&&"none"!==t.type&&t.steps&&t.steps.length)},isMoveOnly:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.steps&&t.steps.length&&t.steps.every((function(t){return t.use_move&&!t.use_scale&&!t.use_rotate}))},isNonMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.steps&&t.steps.length&&t.steps.every((function(t){return!t.use_move}))},getUuidHash:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return t.UUID})).filter((function(t){return t})).sort().join(",")},isPointerEvent:function(t){return-1!==this.POINTER_EVENTS.indexOf(t)},canHaveAnimation:function(t){var e=t.attributes||t.model&&t.model.attributes||{};return e.type&&-1===this.ANIMATION_BLOCK_EXCLUDE.indexOf(e.type)},arePointerEventsAllowed:function(t){var e=t.attributes||t.model&&t.model.attributes||{};return e.type&&-1===this.POINTER_EVENTS_BLOCK_EXCLUDE.indexOf(e.type)},getBlocksContainingTriggers:function(t){var e=o.a.map(t,(function(t){return t.id||t._id}));return o.a.reduce(t,function(t,i){var n=this.normalizeAnimations(i.model?i.model.get("animation"):i.animation),r=[].concat(h(n.reduce((function(t,e){return e.trigger?[].concat(h(t),h(f.normalizeAnimationTriggers(e&&e.trigger))):t}),[])),h(i.triggers||i.model&&i.model.get("triggers")||[]));return r.length&&o.a.intersection(e,r).length&&t.push(i.id?i.id:i._id),t}.bind(this),[])},restoreTriggers:function(t,e,i){var n=[];return o.a.each(t,function(t){var r=this,a=e[t],s=o.a.find(i,{id:a});if(s&&s.getAllTriggers().length){n.push(s),s.model.getAnimations().forEach((function(t){var i=r.normalizeAnimationTriggers(t&&t.trigger);t.trigger=i.reduce((function(t,i){return e[i]?[].concat(h(t),[e[i]]):t}),[])}));var c=s.model.get("triggers");c&&s.model.set("triggers",c.reduce((function(t,i){return e[i]?[].concat(h(t),[e[i]]):t}),[]))}}.bind(this)),n},isScaleUp:function(t){return Boolean(o.a.find(t&&t.steps,(function(t,e){return t.use_scale&&(0===e&&t.from_scale>100||t.scale>100)})))},maxScaleAnimation:function(t){return t&&t.steps&&t.steps.length?t.steps.reduce((function(t,e){return Math.max(t,e.from_scale||0,e.scale||0)}),0):0},canBeAccelerated:function(t){return!l.a.isDesktop||!this.isScaleUp(t)},getPermanentAnimationId:function(t,e){return t.fixed_position||t.is_full_width||t.is_full_height||t.sticked?t._id:e},getAnimationsPlayed:function(){if(o.a.isUndefined(this._animationsPlayed))try{var t=Modernizr.localstorage?window.localStorage.getItem(this.ANIMATIONS_PLAYED_STORAGE_KEY):c.default.getCookie(this.ANIMATIONS_PLAYED_STORAGE_KEY),e=t&&JSON.parse(t);this._animationsPlayed=o.a.isArray(e)?e:[]}catch(t){this._animationsPlayed=[]}return this._animationsPlayed},persistHasPlayed:function(t){if(!this.hasPlayed(t))try{var e=JSON.stringify([].concat(this.getAnimationsPlayed(),t));Modernizr.localstorage?window.localStorage.setItem(this.ANIMATIONS_PLAYED_STORAGE_KEY,e):c.default.createCookie(this.ANIMATIONS_PLAYED_STORAGE_KEY,e),delete this._animationsPlayed}catch(t){}},hasPlayed:function(t){return t&&-1!==this.getAnimationsPlayed().indexOf(t)},hasExpired:function(t){var e=this,i=this.normalizeAnimations(t.animation);return Boolean(i.length)&&i.every((function(i){var n=e.getPermanentAnimationId(t,i.UUID);return i.playOnce&&e.hasPlayed(n)}))}},g=0,m=f.ANIMATION_PROPERTIES,v=function(){function t(e){var i=e.id,n=e.steps,r=e.initialStep;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"name",void 0),d(this,"duration",void 0),d(this,"iterationCount",void 0),d(this,"fillMode","none"),d(this,"css",void 0),d(this,"hasRotation",!1),d(this,"force3d",void 0),d(this,"loop",void 0),this.name="animation_".concat(i);var a=n.find((function(t){return t.loop}));this.loop=!!a&&f.normalizeLoopValue(a.loop),this.iterationCount=this.loop?"infinite":1,this.hasRotation=n.find((function(t,e){return Boolean(t.use_rotate&&(0===e&&0!==t.from_rotate||0!==t.rotate))})),this.duration=n.reduce((function(t,e){return t+e.calcedDelay+e.calcedDuration}),0),this.css=t.getKeyframes(i,n,this.duration,this.hasRotation,this.force3d,r)}var e,i,n;return e=t,n=[{key:"getKeyframes",value:function(t,e,i,n,r,a){for(var o=0,s=[[0]],c=e.length,l=0;l<c;l++){var u=e[l].calcedDelay/i,d=e[l].calcedDuration/i;u>=1e-4?s[s.length-1].push(o+u):u=0,o+=u+d,l==c-1&&(o=1),s.push([o])}var h="".concat(m.keyframeCSS," animation_").concat(t," {\n"),p={none:"linear","ease-in":"ease-in","ease-out":"ease-out","ease-both":"ease-in-out"};for(h+=this.getKeyframe(s[0],{dx:a?a.dx:0,dy:a?a.dy:0,opacity:a?a.opacity:e[0].from_opacity,rotate:a?a.rotate:e[0].from_rotate,scale:a?a.scale:e[0].from_scale},p[e[0].acceleration],n,r),l=0;l<c;l++)h+=this.getKeyframe(s[l+1],e[l],e[l+1]?p[e[l+1].acceleration]:void 0,n,r);return h+="}\n"}},{key:"getKeyframe",value:function(t,e,i,n,r){var a="\t";return a+=o.a.map(t,(function(t){return 100*t+"%"})).join(", ")+" {",a+=m.transformCSS+": "+this.getTransformString({x:e.dx,y:e.dy,angle:e.rotate,scale:e.scale/100,hasRotation:n,isKeyframe:!0,force3d:r})+"; ",a+="opacity: "+(0===e.opacity?0:e.opacity/100)+"; ",i&&(a+=m.animationTimingFunctionCSS+": "+i),a+="}\n"}},{key:"getTransformString",value:function(t){var e,i=t.x,n=t.y,r=t.angle,a=t.scale,o=t.hasRotation,c=t.isKeyframe,l=t.force3d;if(a<.001&&(a=.001),o&&c)e=l?"translate3d(".concat(i,"px, ").concat(n,"px, 0) rotate(").concat(r,"deg) scale(").concat(a,")"):"translate(".concat(i,"px, ").concat(n,"px) rotate(").concat(r,"deg) scale(").concat(a,")");else{var u=a,d=0;if(r&&(r*=f.DEG_TO_RAD,u=Math.cos(r)*a,d=Math.sin(r)*a),u=Math.abs(u)<1e-6?0:u,d=Math.abs(d)<1e-6?0:d,Modernizr.edge){var h,p=null===(h=window.RM.viewerRouter)||void 0===h?void 0:h.mag;p&&(n*=s.a.getRatio(p.getViewportWidth(p.viewport)))}var g=u+","+d,m=-d+","+u,v=i+","+n;e=l?"matrix3d(".concat(g,",0,0,").concat(m,",0,0,0,0,1,0,").concat(v,",0,1)"):"matrix(".concat(g).concat(",").concat(m).concat(",").concat(v,")")}return e}}],(i=[{key:"getDirection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?this.loop===f.LOOP_TYPES.repeat?"reverse":"alternate-reverse":this.loop===f.LOOP_TYPES.repeat?"normal":"alternate"}}])&&u(e.prototype,i),n&&u(e,n),t}(),b=a.a.View.extend({initialize:function(t){o.a.bindAll(this),o.a.extend(this,t),m.animationSupported&&(this.active=!1,this.reversed=!1,this.$el.toggleClass("force3d",!!this.force3d),"scroll"!==this.type?(this.generateKeyframeAnimation(),this.duration=this.sequences.reduce((function(t,e){return t+e.duration}),0)):(this.duration=this.steps.reduce((function(t,e){return t+e.calcedDelay+e.calcedDuration}),0),this.generateFrameByFrameAnimation()))},generateKeyframeAnimation:function(){var t=this;g+=1,this.id=g,this.sequences=this.steps.reduce((function(e,i,n){var r=t.steps.slice(n+1),a=r.findIndex((function(t){return t.loop}));return 0===n||i.loop?[].concat(h(e),[new v({id:"".concat(t.id,"_").concat(e.length+1),steps:[i].concat(h(r.slice(0,-1!==a?a:r.length))),force3d:t.force3d,initialStep:e.length?t.steps[n-1]:void 0})]):e}),[]),this.loop=this.sequences.map((function(t){return t.loop})).find((function(t){return t})),this.isFullLoop=1===this.sequences.length&&Boolean(this.sequences[0].loop),this.keyframesStyle=document.createElement("style"),this.keyframesStyle.innerHTML=this.sequences.reduce((function(t,e){return t+e.css}),""),this.$el.append(this.keyframesStyle),this.$el.on(m.animationIterationJS,(function(e){e.stopPropagation();var i=t.sequences.find((function(t){return t.name===e.originalEvent.animationName}));i&&t.onAnimationIteration(e,i)})),this.$el.on(m.animationEndJS,(function(e){e.stopPropagation();var i=t.sequences.find((function(t){return t.name===e.originalEvent.animationName})),n=t.reversed?h(t.sequences).reverse():t.sequences;i&&i.name===n[n.length-1].name&&t.onAnimationEnd(e,i)})),this.applyStepState(this.screenshotMode&&"load"===this.type?this.steps.length-1:"initial",!0)},generateFrameByFrameAnimation:function(){var t=0,e={dx:0,dy:0,opacity:this.steps[0].from_opacity,rotate:this.steps[0].from_rotate,scale:this.steps[0].from_scale};this.frames=[],this.frames.push({ind:0,isDelay:!1,params:e});for(var i=0;i<this.steps.length;i++){var n=this.steps[i];n.calcedDelay&&(this.frames.push({ind:t+1,isDelay:!0,params:e}),t+=n.calcedDelay),e={dx:n.dx,dy:n.dy,opacity:n.opacity,rotate:n.rotate,scale:n.scale,acceleration:n.acceleration},this.frames.push({ind:t+1,isDelay:!1,params:e}),t+=n.calcedDuration}this.seek(0)},applyStepState:function(t,e){var i;if(this.$el.removeClass("invisible"),"initial"===t)this.$el[0].style[m.transformJS]=v.getTransformString({x:0,y:0,angle:this.steps[0].from_rotate,scale:this.steps[0].from_scale/100,hasRotation:this.hasRotation,isKeyframe:e,force3d:this.force3d}),i=this.steps[0].from_opacity,this.$el[0].style.opacity=0===i?0:i/100;else{var n=this.steps[t];this.$el[0].style[m.transformJS]=v.getTransformString({x:n.dx,y:n.dy,angle:n.rotate,scale:n.scale/100,hasRotation:this.hasRotation,isKeyframe:e,force3d:this.force3d}),i=n.opacity,this.$el[0].style.opacity=0===i?0:i/100}var r="hover"===this.type&&this.animationTrigger.length>0&&!this.selfTriggered,a="hover"!==this.type&&("initial"!==t||this.animationTrigger.length>0);0===i&&(r||a)&&this.$el.addClass("invisible")},play:function(){if(!this.screenshotMode&&m.animationSupported){var t=m.animationJS;this.stop(),this.$el.removeClass("invisible"),this.$el.outerHeight(),window.requestAnimationFrame(function(){var e=this;this.$el[0].style[t+"Name"]=this.sequences.map((function(t){return t.name})).join(", "),this.$el[0].style[t+"Duration"]=this.sequences.map((function(t){return t.duration+"s"})).join(", "),this.$el[0].style[t+"Delay"]=this.sequences.reduce((function(t,i,n){var r=e.sequences[n-1];return[].concat(h(t),[r?"".concat(r.duration,"s"):"0s"])}),[]).join(", "),this.$el[0].style[t+"IterationCount"]=this.sequences.map((function(t){return t.iterationCount})).join(", "),this.$el[0].style[t+"Direction"]=this.sequences.map((function(t){return t.getDirection()})).join(", "),this.$el[0].style[t+"FillMode"]=this.sequences.map((function(t){return t.fillMode})).join(", "),this.$el[0].style[t+"PlayState"]=""}.bind(this)),this.active=!0,this.reversed=!1}},reverse:function(){if(!this.screenshotMode&&m.animationSupported){var t=m.animationJS;this.stop(),this.$el.removeClass("invisible"),this.$el.outerHeight();var e=h(this.sequences).reverse().filter((function(t){return t.loop!==f.LOOP_TYPES.swing}));this.$el[0].style[t+"Name"]=e.map((function(t){return t.name})).join(", "),this.$el[0].style[t+"Duration"]=e.map((function(t){return t.duration+"s"})).join(", "),this.$el[0].style[t+"Delay"]=e.reduce((function(t,i,n){var r=e[n-1];return[].concat(h(t),[r?"".concat(r.duration,"s"):"0s"])}),[]).join(", "),this.$el[0].style[t+"IterationCount"]=e.map((function(){return 1})).join(", "),this.$el[0].style[t+"Direction"]=e.map((function(t){return t.getDirection(!0)})).join(", "),this.$el[0].style[t+"FillMode"]=e.map((function(t){return t.fillMode})).join(", "),this.$el[0].style[t+"PlayState"]="",this.active=!0,this.reversed=!0}},stop:function(){this.$el.removeClass("invisible"),this.$el[0].style[m.animationJS]="",this.active=!1,this.reversed=!1},onAnimationEnd:function(){this.reversed=!this.reversed,this.active=!1,this.$el[0].style[m.animationJS]="",this.applyStepState(this.reversed?this.steps.length-1:"initial",!0),this.trigger("full-cycle-end")},onAnimationIteration:function(t,e){this.loop===f.LOOP_TYPES.swing?Math.round(t.originalEvent.elapsedTime/e.duration)%2?this.reversed=!0:(this.reversed=!1,this.trigger("full-cycle-end")):this.trigger("full-cycle-end")},resume:function(){this.screenshotMode||m.animationSupported&&(l.a.isDesktop?this.$el[0].style[m.animationJS+"PlayState"]="running":this.play(),this.active=!0)},pause:function(){m.animationSupported&&(l.a.isDesktop?this.$el[0].style[m.animationJS+"PlayState"]="paused":this.stop(),this.active=!1)},seek:function(t){if(m.animationSupported){t=Math.max(Math.min(t,this.duration),0);var e,i,n,r,a=this.frames.length;for(e=0;e<a&&!(this.frames[e].ind>t);e++);e--,this.frames[e].isDelay?i=o(this.frames[e].params,this.frames[e].params,0,1):(n=e?this.frames[e].ind-1:0,r=e==a-1?this.duration:this.frames[e+1].ind-1,i=o(this.frames[e?e-1:0].params,this.frames[e].params,t-n,r-n+1)),this.$el[0].style[m.transformJS]=v.getTransformString({x:i.dx,y:i.dy,angle:i.rotate,scale:i.scale/100,hasRotation:this.hasRotation,isKeyframe:!1,force3d:this.force3d}),this.$el[0].style.opacity=0==i.opacity?0:i.opacity/100,this.$el.toggleClass("invisible",0==i.opacity)}function o(t,e,i,n){if(0==i)return t;if(i==n-1)return e;var r=i/(n-1);return{dx:t.dx==e.dx?t.dx:s(t.dx,e.dx,r,e.acceleration),dy:t.dy==e.dy?t.dy:s(t.dy,e.dy,r,e.acceleration),opacity:t.opacity==e.opacity?t.opacity:s(t.opacity,e.opacity,r,e.acceleration),rotate:t.rotate==e.rotate?t.rotate:s(t.rotate,e.rotate,r,e.acceleration),scale:t.scale==e.scale?t.scale:s(t.scale,e.scale,r,e.acceleration)}}function s(t,e,i,n){return t+(e-t)*(n&&"none"!=n?"ease-in"==n?i*i:"ease-out"==n?i*(2-i):i<.5?i*i*2:2*i*(2-i)-1:i)}},destroy:function(){this.$el.off(m.animationIterationJS,this.onAnimationIteration),this.$el.off(m.animationEndJS,this.onAnimationEnd),this.$el[0].style[m.animationJS]="",this.$el[0].style[m.transformJS]="",this.$el[0].style.opacity="",this.$el.removeClass("force3d"),this.keyframesStyle&&Object(n.a)(this.keyframesStyle).remove(),this.reversed=!1,this.active=!1}});e.a=f},sn3M:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(t){var e,i,n,r=t.className,a=t.selector,o=t.label,s=t.styles,c=String(r||a);return e={},i=c,n={label:o,style:"".concat(a||"."+r," { ").concat(s," }")},i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}},sxjd:function(t,e,i){"use strict";var n=i("q1tI"),r=i.n(n),a=i("JPcv"),o=i.n(a),s=i("v83y"),c=i("wMS7"),l=i.n(c),u=i("8AXF"),d=i("8Tds"),h=i("fueH"),p=i("A9VP"),f=i("i0ke"),g=i("hpUi"),m=i("3ES5"),v=i("uU7u"),b=i("zZDe"),y=i("DwEc"),w=i("HjzJ");function S(t){return function(t){if(Array.isArray(t))return O(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return O(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var k=function t(e,i){if(i&&"function"==typeof i){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r],i);i(e)}},P=function(t){var e,i=function(t){var e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=t,e};if("undefined"!=typeof DOMParser){var n=new DOMParser;try{null!==(e=n.parseFromString(t,"text/html"))&&null!==e.body||(e=i(t))}catch(n){e=i(t)}}else e=i(t);return e},x=function(t,e){var i=Array.from(t.childNodes).reduce((function(t,i){return i.nodeName.toLowerCase()===e&&t[t.length-1]&&t[t.length-1].some((function(t){return t.nodeName.toLowerCase()===e}))?(t[t.length-1].push(i),t):[].concat(S(t),[[i]])}),[]).reduce((function(t,i){if(i.some((function(t){return t.nodeName.toLowerCase()===e}))){var n=document.createElement(e),r="ul"===e?w.a.Unordered:w.a.Ordered;return n.setAttribute("class",r),"ol"===e&&(n.style.counterReset=w.i),i.forEach((function(t){if(t.firstChild){var e,i=t.firstChild.cloneNode(!0),a=null===(e=t.getAttribute("class"))||void 0===e?void 0:e.replace(r,""),o=t.getAttribute("style");a&&i.setAttribute("class",a),o&&i.setAttribute("style",o),n.appendChild(i)}})),[].concat(S(t),[n])}return[].concat(S(t),S(i))}),[]).reduce((function(t,e){return"".concat(t).concat(e.outerHTML)}),"");t.innerHTML=i},C=function(t){k(t,(function(t){if("span"===t.nodeName.toLowerCase()&&1===t.childNodes.length&&t.firstChild&&"span"===t.firstChild.nodeName.toLowerCase()){var e=t,i=e.firstChild,n=[e.getAttribute("style"),i.getAttribute("style")];e.setAttribute("style",n.join(";")),e.innerHTML=t.firstChild.innerHTML}}))},j=function(t){k(t,(function(t){if("a"===t.nodeName.toLowerCase()&&t.childNodes.length>1){var e=Array.from(t.childNodes).reduce((function(t,e){if("span"===e.nodeName.toLowerCase()&&e.style.fontSize){var i=parseInt(e.style.fontSize);return i>t?i:t}return t}),0);e>0&&(t.style.fontSize="".concat(e,"px"))}}))},_=function(t){t.querySelectorAll("li").forEach((function(t){if(t.childNodes.length){var e=document.createElement("span");e.innerHTML=t.innerHTML,t.innerHTML=e.outerHTML,e.remove()}}))},T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{mergeSpans:!0},i=P(t);return e.mergeSpans&&C(i.body),x(i.body,"ol"),x(i.body,"ul"),_(i.body),j(i.body),i.body.innerHTML},I=i("Jzj8"),M=i("f3SV"),E=i("v92f");function D(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function A(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function $(t){return function(t){if(Array.isArray(t))return F(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||R(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||R(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){if(t){if("string"==typeof t)return F(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?F(t,e):void 0}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var B=function(t){var e,i,a=t.model,s=t.scale,c=t.currentPage,u=t.viewport,f=t.viewerOptions,S=t.editorState,O=Object(n.useMemo)((function(){return S.getCurrentContent()}),[S]),k=null===(e=a.flags)||void 0===e?void 0:e.calculatedLineHeight,P=L(Object(I.k)(),1)[0],x=Object(n.useContext)(y.b).model,C=Object(g.b)({styleToHTML:function(t){var e=o.a.OrderedSet([t]),i=Object(p.b)(e);if(Object.keys(i).length)return r.a.createElement("span",{style:i})},blockToHTML:function(t){var e=O.getBlockForKey(t.key),i=t.data,n=i.textStyle,o=i.align,s=i.lineHeight,c=i.textIndent,l=i.paddings,u=void 0===l?{}:l,d=i.listStyle,p=Object(w.e)(t.type)?d:void 0,f=[t.type,n,o,p].filter((function(t){return t})).join(" "),g=k?h.a.getBaseLineHeightStyle({block:e,width:a.w}):{},m=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?D(Object(i),!0).forEach((function(e){A(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({textIndent:c,lineHeight:s?"".concat(s,"px"):void 0,paddingLeft:u.left,paddingRight:u.right,paddingTop:u.top,paddingBottom:u.bottom},g);if(Object(w.e)(t.type))return r.a.createElement(w.b,{type:t.type,className:f,style:m});var v=function(t){var e=[].concat($(P.global),$(P.project)).find((function(e){return e.name===t}));return e?e.tag:M.c.AVAILABLE_TEXT_TAGS[0]}(n),b={className:f,style:m};return t.text||t.entityRanges&&t.entityRanges.length?r.a.createElement(v,b):r.a.createElement(v,b,r.a.createElement("br",null))},entityToHTML:function(t,e){var i=e;return t.type===v.f?r.a.createElement(v.a,{is_global:a.is_global,is_above:a.is_above,page:null==x?void 0:x.page,currentPageNum:null==c?void 0:c.num,data:t.data},i):t.type===b.b?r.a.createElement("br",null):i}})(O);return r.a.createElement(m.a,{bgColor:a.bgColor,textDirection:a.textDirection||d.b.LTR,autosize:a.autosize,columns:a.columns,verticalAlign:a.verticalAlign,scale:s,viewport:u||E.b.Default,viewerOptions:f,useBaseline:null===(i=a.flags)||void 0===i?void 0:i.baseline},r.a.createElement("div",{className:"text-viewer",dangerouslySetInnerHTML:{__html:l.a.sanitize(T(C,{mergeSpans:!0}),{ADD_ATTR:["target"]})}}))},z=r.a.memo(B,(function(t,e){var i,n,r,a,o,s;return!e.isConstructorPreview&&e.scale===t.scale&&(null===(i=e.model)||void 0===i||!i.is_above||!(!(null===(n=t.currentPage)||void 0===n?void 0:n.num)||(null===(r=e.pagesLinks)||void 0===r?void 0:r.length)&&(null===(a=e.currentPage)||void 0===a?void 0:a.num)&&(null===(o=t.currentPage)||void 0===o?void 0:o.num)&&(e.pagesLinks.includes(e.currentPage.num)||e.pagesLinks.includes(null===(s=t.currentPage)||void 0===s?void 0:s.num))))}));e.a=function(t){var e=t.editorState,i=t.isConstructorPreview,a=Object(n.useContext)(y.b).model,o=Object(n.useContext)(u.BackboneContext).model,c=e||Object(n.useMemo)((function(){return s.EditorState.createWithContent(h.a.importTextContent(o),f.a)}),[]),l=window.RM.constructorRouter&&!window.RM.constructorRouter.preview,d=Object(n.useMemo)((function(){if(l)return[];var t=h.a.getAllEntities(c,v.f);return Object.keys(t).length?Object.keys(t).filter((function(e){var i;return(null===(i=t[e].data)||void 0===i?void 0:i.type)===v.b.Page})).map((function(e){var i;return null===(i=t[e].data)||void 0===i?void 0:i.pageNum})):[]}),[c]);return r.a.createElement(z,{model:o,editorState:c,scale:null==a?void 0:a.scale,currentPage:null==a?void 0:a.currentPage,viewport:null==a?void 0:a.viewport,viewerOptions:null==a?void 0:a.viewerOptions,isConstructorPreview:i,pagesLinks:d})}},tcT1:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("q1z7"),a=i.n(r),o=i("rFsW"),s=i("5ta/"),c=i("avvt"),l=i("OTSC"),u=i("f3SV"),d=i("JW7n"),h=i("fueH"),p=i("LDvm"),f=i("QNiq"),g=i("hoWO");function m(t,e,i,n,r,a,o){try{var s=t[a](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function v(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(t){m(a,n,r,o,s,"next",t)}function s(t){m(a,n,r,o,s,"throw",t)}o(void 0)}))}}var b,y,w,S=a.a.Router.extend({routes:{":user/:mag/num/:pageNum/":"startByPageNum",":user(/)(:mag)(/)(*pageUri)(/)":"start"},mags:{},initialize:function(){var t=this;if(window.RM.timing[u.b.DomLoaded]=window.performance.timing.domLoading,window.RM.timing[u.b.ScriptsLoaded]=window.performance.timing.domContentLoadedEventEnd,window.RM.timing[u.b.RouterInit]=Date.now(),Modernizr.addTest("chrome",(function(){return o.a.isObject(window.navigator)&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),RM.common.isDomainViewer&&(RM.common.customDomainProfile?this.route(":mag(/)(*pageUri)(/)","start"):this.route("(*pageUri)(/)","start")),RM.common.isDownloadedSource&&(this.route("(*pageUri)(/)","start"),/msie [6-9]/i.test(navigator.userAgent)&&(location.href="sorry.html")),Object(n.a)("html").toggleClass("viewer-embed-mode",!!RM.common.embedMode),o.a.bindAll(this),this.environment=u.c.environment.viewer,this.started=!1,!RM.common.isDownloadedSource&&window.RM.data.usersLoader.me&&(this.me=window.RM.data.usersLoader.me),this.$mags_container=Object(n.a)("#mags"),this.magsData=window.ServerData&&window.ServerData.mags,this.userPermissions=window.ServerData&&window.ServerData.userPermissions,this.internalHistory=[],this.magsData){if(this.cachedMag=this.magsData.mag,!this.cachedMag||!this.cachedMag.user||!this.cachedMag.user._id)return;RM.common.isDownloadedSource||(this.cachedMag.user.isMe=this.me&&this.me.get("_id")==this.cachedMag.user._id),RM.common.isDomainViewer&&(this.magUri=this.cachedMag.uri,this.userUri=this.cachedMag.user&&this.cachedMag.user.uri)}RM.screenshot||i.e(33).then(i.bind(null,"hXNS")).then((function(e){var i=e.default;RM.analytics=RM.analytics||new i({router:t}),t.analytics=RM.analytics,RM.common.isDomainViewer||l.default.processCustomTrackingEventCookies()})),this.isPreview||Modernizr.sessionstorage&&window.sessionStorage.removeItem("constructorViewport")},startByPageNum:function(t,e,i){this.start(t,e,null,i)},getPageUrlFromCodeExportLink:function(t){var e;if(!t)return t;if(null===(e=window.RM.config)||void 0===e?void 0:e.root){var i=window.RM.config.root;return"/"===i[0]&&(i=i.substr(1)),t.replace(i,"")}return t},start:function(t,e,r,s){var l=this;if(RM.common.isDomainViewer&&(this.magsData.magNotFound||this.magsData.domainNotFound||this.magsData.magNotPublished||this.magsData.subscriptionExpired))i.e(7).then(i.bind(null,"AnuO")).then((function(t){new(0,t.default)({type:"domain-error",$container:Object(n.a)("#service-pages"),templateData:{state:l.magsData}}).render()}));else if(isNaN(parseInt(s))&&(s=void 0),Modernizr.msie||Modernizr.msie11)i.e(32).then(i.bind(null,"YqYG")).then((function(t){new(0,t.default)({$parent:Object(n.a)("body > .popups"),router:l,opts:{type:"type-browsers-viewer"}}).render()}));else{if(!s)if(RM.common.isDomainViewer&&!RM.common.customDomainProfile)parseInt(t,10)!=t&&t&&/^p\d+\/?$/i.test(t)?(r=null,e=t,t=null):(r=t,t=this.userUri,e=this.magUri),RM.common.isDownloadedSource&&(r=this.getPageUrlFromCodeExportLink(r));else if(RM.common.isDownloadedSource)r=this.getPageUrlFromCodeExportLink(t),t=null,e=null;else if(parseInt(t,10)==t||/^p\d+\/?$/i.test(t)){var u=e;e=t,r=u,t=null}else if(RM.common.customDomainProfile){u=e;e=t,r=u,t=this.userUri}else if(!e)return this.notFound();this.latestFragment=a.a.history.getFragment(),r=r||1,s&&(r=s);var d=t+"_"+e;if(this.username=t,this.started!=d||this.loaded==d)if(this.started=d,this.loaded!=this.started){if(this.cachedMag&&!o.a.isEmpty(this.cachedMag))return this.cachedMag instanceof c.a||this.cachedMag.forbidden||this.cachedMag.is_suspended||(this.cachedMag=new c.a(this.cachedMag,this)),this.mag=this.cachedMag,void this.onPreloadMag(r,!!s);this._loadingMagDataXHR&&this._loadingMagDataXHR.abort(),this._loadingMagDataXHR=this.fetchData(this.username,e,{success:o.a.bind((function(t){this.mag&&this.mag.num_id&&t&&t.num_id!=this.mag.num_id&&window.location.reload(),this.mag=new c.a(t,this),this.cachedMag=this.mag,this.onPreloadMag(r,!!s)}),this),error:this.notFound})}else this.go(r,{animation:!1,isPageNum:!!s})}},onPreloadMag:function(t,e){var i=this;Object(g.preloadWidgets)(l.default.usedWidgets(this.mag.pages||[],this.mag.aboveGlobalWidgetsData)).finally((function(){i.onLoadMag(t,e)}))},onLoadMag:function(t,e){var i,r=this;if(window.RM.timing[u.b.MagLoaded]=Date.now(),this.loaded=this.started||!0,this.mag.forbidden)return this.requestMagPassword(this.latestFragment,o.a.clone(this.mag)),delete this.cachedMag,delete this.loaded,void delete this.started;if(this.mag.is_suspended)this.showSuspended();else{var a=new Event(u.a.ProjectInitialized,{bubbles:!0});document.dispatchEvent(a),!this.isPreview&&(h.a.hasNewTextWidgets(window.ServerData&&window.ServerData.mags&&window.ServerData.mags.mag)||h.a.hasNewTextWidgets(this.mag&&this.mag.model&&this.mag.model.attributes)||h.a.someTextWidgets(this.mag.aboveGlobalWidgetsData))&&Object(d.d)("viewer"),RM.common.isDownloadedSource||(n.a.post("/api/countview/"+this.mag.num_id),RM.analytics&&(RM.analytics._triggerProjectView=!0)),this.mag._requested_page&&!e?(i=this.mag._requested_page,delete this.mag._requested_page):i=t,Modernizr.addTest("screenshot-mode",(function(){return RM.screenshot})),this.mag.render(),this.go(i,{animation:!1,isPageNum:e});var s=new Event(u.a.ProjectRendered,{bubbles:!0});if(document.dispatchEvent(s),RM.common.mode="mag",!this.isPreview){window.RM.timing[u.b.MagRendered]=Date.now();var c=RM.viewerRouter.mag.currentPage.num;setTimeout((function(){window.RM.timing[u.b.DomComplete]=window.performance.timing.domComplete;var t={};Object.keys(window.RM.timing).forEach((function(e){t[e]=RM.timing[e]-window.performance.timing.navigationStart}));var e=window.innerWidth,i=!f.a.isDesktop||Modernizr.ismobile?Modernizr.isipad||e>=600?"tablet":"phone":"desktop";Object(p.E)("frontend-rendering",{mag_num_id:r.mag.num_id,viewport:r.mag.viewport,start_page:c,widgets_count:o.a.reduce(RM.viewerRouter.mag.pages,(function(t,e){return t+(e.widgets?e.widgets.length:0)}),0)+r.mag.aboveGlobalWidgets.length,device:i,timing:t})}),1e4)}}},getAnalyticsDimensions:function(){return{magId:this.mag&&this.mag.model&&this.mag.model.get("num_id")||this.mag&&this.mag.num_id,magCreatorId:this.mag&&this.mag.model&&this.mag.model.user.get("_id")||this.mag&&this.mag.user._id,pageType:"viewer",userId:this.me&&this.me.get("_id")}},fetchData:function(t,e,i){return(i=i||{}).url=t?"/api/readymag/"+t+"/"+e:"/api/readymag/"+e,n.a.ajax(i)},sendReadyEvent:function(t){t=t||{},t=o.a.defaults(t,{page:{}});var e=document.createElement("MyExtensionDataElement");e.setAttribute("width",t.page.width),e.setAttribute("height",t.page.height),e.setAttribute("_id",t.page._id),document.documentElement.appendChild(e);var i=document.createEvent("Events");if(t&&t.error?i.initEvent("MyErrorEvent",!0,!1):i.initEvent("MyExtensionEvent",!0,!1),e.dispatchEvent(i),window.loadNotifier){if(t.error)return window.loadNotifier({error:t.error});window.loadNotifier({width:t.page.width,height:t.page.height})}},setTitle:function(){if(this.mag&&this.mag.currentPage){var t=o.a.extend({},this.mag.model.toJSON());t.user=this.mag.user,document.title=s.getFinalSEO(this.mag.currentPage,t,{customDomain:!!RM.common.isDomainViewer}).title}},trackPage:function(){RM.screenshot||o.a.defer(o.a.bind((function(){this.analytics&&this.analytics.trackPage()}),this))},go:function(t,e){if(t=t||1,e.isPageNum)return this.mag.showPage(t,e);var i=this.mag.getPageByPath(t)||{};this.mag.showPage(i.num||t,e)},goBack:function(){var t=this.internalHistory[this.internalHistory.length-2];t&&(t&&this.go(t,{skipInternalHistory:!0}),this.internalHistory.pop())},setUrlString:function(t){if(!this.noUrlRewrite&&(t=t||{},!RM.screenshot)){var e,i=this.mag.currentPage;if(e=RM.common.isDomainViewer&&!RM.common.customDomainProfile||RM.common.isDownloadedSource?"":RM.common.customDomainProfile?this.getMagUri(this.mag):this.username?this.mag.user.uri+"/"+(this.mag.uri||this.mag.num_id)+"/":this.isPreview?this.mag.num_id+"/":this.getMagUri(this.mag),this.isPreview&&(e+="preview/"),i&&"1"!=i.num&&(e+=(i.pagePath||i.uri||i.num.toString())+"/"),t.skipInternalHistory?RM.analytics&&RM.analytics.sendEvent("Back Link",e):this.internalHistory.push(i.num.toString()),e!==a.a.history.getFragment()){var n=(parseInt(o.a.last(a.a.history.getFragment(),"/"))||1)==i.num||t.replace;RM.common.isDownloadedSource&&"/"!==o.a.last(e)&&(e+="/"),RM.common.homepageRewrite||this.navigate(e,{replace:n})}}},getPreviousFragment:function(){return this.internalHistory[this.internalHistory.length-2]},getMagUri:function(t){return RM.common.customDomainProfile?(t.uri||t.num_id)+"/":RM.common.isDomainViewer?"":o.a.isEmpty(t.user)?t.num_id+"/":t.user.uri+"/"+(t.uri||t.num_id)+"/"},getUserPermissions:function(){return this.userPermissions||[]},onError:function(){this.mag&&this.go(1,{animation:!1})},createLoginViewForIframe:function(t,e,r){var a=this;i.e(13).then(i.bind(null,"BVsp")).then((function(i){new(0,i.default)({useNavigate:!1,$node:Object(n.a)(t),router:a,joinCallback:e,errorMessages:r}).render()}))},createMagFromTemplate:(w=v(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.e(13).then(i.bind(null,"5Rpd"));case 2:new(0,t.sent.default)({router:this,me:this.me,tp:e,templateID:n});case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return w.apply(this,arguments)}),destroy:function(){this.cachedMag&&this.cachedMag.destroy(),this.magPasswordView&&this.magPasswordView.remove(),this.magSuspendedView&&this.magSuspendedView.remove()},requestMagPassword:(y=v(regeneratorRuntime.mark((function t(e,r){var a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.magPasswordView){t.next=6;break}return t.next=3,i.e(35).then(i.bind(null,"3r0x"));case 3:a=t.sent,o=a.default,this.magPasswordView=new o({router:this,$parent:Object(n.a)("#mags")});case 6:this.magPasswordView.render({mag:r,mag_url:e});case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return y.apply(this,arguments)}),showSuspended:(b=v(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.e(7).then(i.bind(null,"AnuO"));case 2:e=t.sent,new(0,e.default)({type:"mag-suspended",$container:Object(n.a)("#service-pages")}).render();case 6:case"end":return t.stop()}}),t)}))),function(){return b.apply(this,arguments)}),notFound:function(){o.a.defer(v(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.e(7).then(i.bind(null,"AnuO"));case 2:e=t.sent,r=e.default,new r({type:"404",$container:Object(n.a)("#service-pages")}).render();case 6:case"end":return t.stop()}}),t)}))))}});e.default=S},uU7u:function(t,e,i){"use strict";i.d(e,"f",(function(){return k})),i.d(e,"b",(function(){return O})),i.d(e,"c",(function(){return P})),i.d(e,"a",(function(){return x})),i.d(e,"e",(function(){return C})),i.d(e,"d",(function(){return _})),i.d(e,"i",(function(){return T})),i.d(e,"g",(function(){return I})),i.d(e,"h",(function(){return M}));var n=i("q1tI"),r=i.n(n),a=i("wMS7"),o=i.n(a),s=i("v83y"),c=i("DwEc"),l=i("8AXF"),u=i("8Tds"),d=i("fueH"),h=i("A9VP");function p(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){v(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function b(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){if(t){if("string"==typeof t)return S(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var O,k="LINK";!function(t){t.URL="URL",t.Page="Page",t.Email="Email",t.Phone="Phone",t.Anchor="Anchor",t.ScrollToTop="ScrollToTop",t.GoBack="GoBack"}(O||(O={}));var P={name:"link-1",label:"Default Link Style",style:{link:{textColor:"0080FF64",color:"0080FF64",type:u.a.Solid,size:1,padding:0},hover:{textColor:"0080FF64",color:"0080FF64",type:u.a.None,size:1,padding:0},current:{textColor:"0080FF64",color:"0080FF64",type:u.a.None,size:1,padding:0}}},x=function(t){var e=Object(n.useContext)(l.BackboneContext).model,i=Object(n.useContext)(c.b).model,a=Object(n.useContext)(c.a).model,s=y(a?a.useTextWidgetStore({partial:!1}):Object(n.useState)(null),1)[0],u=(window.RM.viewerRouter||window.RM.constructorRouter&&window.RM.constructorRouter.preview||{}).mag,p=t.contentState&&t.entityKey?t.contentState.getEntity(t.entityKey).getData():t.data||{},g=p.url,v=p.target,w=void 0===v?"_self":v,S=p.type,k=p.linkStyle,x=p.anchorPosition,C=p.pageNum,j=p.pageUri,T=p.id,I=p.pageId,M=t.contentState&&t.blockKey&&"number"==typeof t.start&&"number"==typeof t.end?function(t){var e=t.contentState,i=t.start,n=t.end,r=t.blockKey,a=e.getBlockForKey(r).getCharacterList().slice(i,n),o={};if(a.size){var s=a.reduce((function(t,e){if(void 0===t)return 0;if(e){var i=e.getStyle().find((function(t){return Boolean(null==t?void 0:t.startsWith(h.a.FontSize))})),n=i&&d.a.getCurrentInlineStylesFromString(i,h.a.FontSize),r=(null==n?void 0:n.length)?parseInt(n[0]):0;return r>t?r:t}return t}),0);s>0&&(o.fontSize=s)}return o}({contentState:t.contentState,start:t.start,end:t.end,blockKey:t.blockKey}):{},E=function(t){var e=[k||P.name].concat(b("string"==typeof t?[t]:t));if(a&&a.currentLinkStyle&&"link"!==a.currentLinkStyle&&s){var i=_(s);i&&i.id===T&&e.push(a.currentLinkStyle)}return e.join(" ")},D=function(){var t;if(!u||!C&&!j)return"";var e=window.RM.common&&window.RM.common.isDownloadedSource&&!window.RM.common.homepageRewrite&&(null===(t=window.RM.config)||void 0===t?void 0:t.root)||"/";if(j){var i=u.getPage(j);if(i&&i._id)return"".concat(e).concat(u.getPageUri(i._id))}if(C){var n=u.getPage(C);if(n&&n._id)return"".concat(e).concat(u.getPageUri(n._id))}return"javascript:void(0)"},A=function(){if(window.RM.constructorRouter&&!window.RM.constructorRouter.previewMode)return[];var n=[],r=t.is_global||e&&e.is_global,a=t.is_above||e&&e.is_above,o=t.currentPageNum?t.currentPageNum===C:i&&i.currentPage&&i.currentPage.num===C,s=t.page?t.page.num===C:i&&i.page&&i.page.num===C;return(a?o:s)&&(n.push("back-to-top"),r&&n.push("current")),n};return r.a.createElement("a",f({},function(){switch(S){case O.URL:return{href:(t=g,/^http(s?):\/\//i.test(t)?t:"http://".concat(t)),target:w,rel:"noopener noreferrer",className:E("external-link")};case O.Email:return{href:"mailto:".concat(g),className:E("external-link")};case O.Phone:return{href:"tel:".concat(g),className:E("external-link")};case O.Anchor:return{href:"javascript:void(0)",className:E("anchor-link"),"data-anchor-link-pos":x,"data-page-uri":u&&C?C:"","data-page-id":u&&I?I:void 0};case O.ScrollToTop:return{href:"javascript:void(0)",className:E(["maglink","back-to-top"])};case O.GoBack:return{href:"javascript:void(0)",className:E("goback-link")};case O.Page:return{href:D(),target:w,className:E([].concat(b("_blank"===w?[]:["maglink"]),b(A())))};default:return{}}var t}(),{style:m({pointerEvents:u?void 0:"none"},M),dangerouslySetInnerHTML:"string"==typeof t.children?{__html:o.a.sanitize(t.children)}:void 0}),"string"!=typeof t.children?t.children:null)},C={strategy:function(t,e,i){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&i.getEntity(e).getType()===k}),e)},component:x},j=function(t){if(!t.getSelection().isCollapsed()){var e=t.getCurrentContent(),i=t.getSelection().getStartKey(),n=t.getSelection().getStartOffset();return e.getBlockForKey(i).getEntityAt(n)}return null},_=function(t){var e=j(t);return e?t.getCurrentContent().getEntity(e).getData()||{}:null},T=function(t){var e=t.editorState,i=p(t,["editorState"]),n=_(e),r=(null==n?void 0:n.id)||d.a.generateRandomKey(),a=e.getCurrentContent().createEntity(k,"MUTABLE",m(m({},i),{},{id:r})),o=a.getLastCreatedEntityKey(),c=s.EditorState.set(e,{currentContent:a}),l=c.getSelection();if(n){var u=j(c),h=0,f=0,g=c.getCurrentContent().getBlockForKey(l.getAnchorKey());g&&g.findEntityRanges((function(t){return t.getEntity()===u}),(function(t,e){t<=l.getFocusOffset()&&t+e>=l.getFocusOffset()&&(h=t,f=e)})),f-h>0&&(l=new s.SelectionState({anchorKey:l.getAnchorKey(),anchorOffset:h,focusKey:l.getAnchorKey(),focusOffset:f,isBackward:l.getIsBackward(),hasFocus:l.getHasFocus()}))}return s.RichUtils.toggleLink(c,l,o)},I=function(t){var e=t.getSelection();return e.isCollapsed()?t:s.RichUtils.toggleLink(t,e,null)},M=function(t){var e=t.editorState,i=t.oldStyle,n=t.newStyle,r=d.a.getAllEntities(e,k);if(Object.keys(r).length){var a=Object.keys(r).reduce((function(t,e){var a,o=r[e];return o&&(null===(a=o.data)||void 0===a?void 0:a.linkStyle)===i?t.mergeEntityData(e,{linkStyle:n}):t}),e.getCurrentContent());return s.EditorState.forceSelection(s.EditorState.push(e,a,"apply-entity"),e.getSelection())}return e}},udqo:function(t,e,i){"use strict";var n=i("q1z7"),r=i.n(n),a=i("xi34"),o=i("rFsW"),s=i("OTSC"),c=i("pFlR"),l=i("AIVH");function u(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n  <div>\n    <div class="picture-preview-box">\n      <div class="picture-preview-box-overlay" style="background-color: <%=overlayColor%>;"></div>\n      <img class="picture-preview-box-image" srcset="<%=previewSrc%>" style="<%= Object.keys(originalStyle).map(function(key) { return key + \':\' + originalStyle[key] }).join(\'; \') %>" />\n    </div>\n  </div>\n']);return u=function(){return t},t}var d,h,p,f=(d={},h="template-picture-preview-box",p=Object(l.a)(u()),h in d?Object.defineProperty(d,h,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[h]=p,d),g=r.a.View.extend({viewportWidth:void 0,viewport:void 0,viewerOptions:void 0,initialize:function(t){o.a.bindAll(this),o.a.extend(this,t)},render:function(){if(this.picture){this.removing=!1,Object(a.a)("body").addClass("picture-preview-loading"),this.originalRect=this.getRect(this.$el[0]),this.orientation=this.getOrientation(),this.originalStyle=this.getOriginalStyle();var t=f["template-picture-preview-box"];return this.$preview=Object(a.a)(t({overlayColor:this.overlayColor,previewSrc:this.getPreviewSrc(),originalStyle:this.originalStyle})),this.$container.append(this.$preview),Object(a.a)(window).on("scroll",this.onScroll),Object(a.a)("body").on("keypress keyup keydown",this.onKeyPress),setTimeout(this.setVisible,100),this.$preview}},imagePreload:function(){var t=this;if(!this.removing&&this.picture){var e=this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.final3xUrl||this.picture.final2xUrl||this.picture.finalUrl;this.getPreviewSrc()!==e?(this.img=new Image,this.img.onload=function(){Object(a.a)("body").removeClass("picture-preview-loading"),t.$preview&&setTimeout((function(){t.removing||t.$preview.find(".picture-preview-box .picture-preview-box-image").attr("src",t.img.src).removeAttr("srcset")}),100)},this.img.src=e):Object(a.a)("body").removeClass("picture-preview-loading")}},remove:function(t){var e=this;if(this.removing=!0,Object(a.a)("body").removeClass("picture-preview-loading"),Object(a.a)("body").off("keypress keyup keydown",this.onKeyPress),Object(a.a)(window).off("scroll",this.onScroll),this.img&&(this.img.src="",delete this.img),this.$preview){var i=this.$preview.find(".picture-preview-box");i.removeClass("visible loaded").removeClass(this.orientation),s.default.waitForTransitionEnd(i.find(".picture-preview-box-overlay"),300,"opacity",(function(){e.$preview&&e.$preview.remove(),delete e.$preview})),t&&t()}},changeColor:function(t){this.$preview&&this.$preview.find(".picture-preview-box-overlay").css("background-color",t)},onScroll:function(){this.remove()},setVisible:function(){var t=this;if(!this.removing){var e=this.$preview.find(".picture-preview-box img")[0],i=function i(){e.removeEventListener("load",i),t.$preview.find(".picture-preview-box").addClass("visible").addClass(t.orientation),s.default.waitForTransitionEnd(t.$preview.find(".picture-preview-box .picture-preview-box-overlay"),300,"opacity",t.imagePreload)};setTimeout((function(){e.complete?i():e.addEventListener("load",i)}),100)}},getPreviewSrc:function(){var t=this.$el.find("img")[0];return t&&(t.currentSrc||t.src)||this.picture&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl||this.picture.final2xUrl||this.picture.finalUrl)},getOriginalStyle:function(){if(!this.originalRect)return{};var t=c.a.isOn(this.viewport,this.viewportWidth,this.viewerOptions)&&c.a.isCSSZoom()?c.a.getRatio(this.viewportWidth):1,e={top:Number(this.originalRect.top+.5*this.originalRect.height)*t+"px",left:Number(this.originalRect.left+.5*this.originalRect.width)*t+"px"};return"portrait"===this.orientation?e.height=this.originalRect.height*t+"px":"landscape"===this.orientation&&(e.width=this.originalRect.width*t+"px"),e},getOrientation:function(){var t=this.originalRect.height/this.originalRect.width,e=Object(a.a)(window).width();return Object(a.a)(window).height()/t<e?"portrait":"landscape"},bindClick:function(){var t=this;this.$preview&&this.$preview.on("click",(function(){t.remove()}))},onKeyPress:function(t){27===t.keyCode&&this.remove()},getRect:function(t){var e=o.a.extend({},t.getBoundingClientRect());if(Modernizr.safari){var i=c.a.isOn(this.viewport,this.viewportWidth,this.viewerOptions)&&c.a.isCSSZoom()?c.a.getRatio(this.viewportWidth):1;e.top=e.top+(Object(a.a)(window).scrollTop()-Object(a.a)(window).scrollTop()/i)}return e}});e.a=g},ulVh:function(t,e,i){"use strict";var n=i("v83y"),r=i("DYKh"),a=i.n(r),o=i("Zgb7"),s=i.n(o),c=i("hpUi"),l=i("fueH"),u=i("M7m1"),d=i("w5C2"),h=i("uU7u"),p=i("A9VP"),f=i("Dkmh"),g=i("a68n"),m=Object(c.a)({htmlToEntity:function(t,e,i){if("a"===t)return i(h.f,"MUTABLE",Object(u.c)(e))},htmlToStyle:function(t,e,i){return"b"===t?i.add(l.a.getStyleValueString(p.a.FontWeight,"700")):"i"===t?i.add(l.a.getStyleValueString(p.a.FontStyle,"italic")):i},htmlToBlock:function(t,e){if("p"===t)return{type:d.a.Unstyled,data:Object(u.b)(e,{ignore:{lineHeight:!0,textStyles:!0}})}}}),v="data-draftjs-conductor-fragment",b='[data-contents="true"] [contenteditable="false"]',y=function(t,e,i){var r,o,c,l=(i||window).getSelection();if(e.clipboardData&&l&&t&&0!==l.rangeCount&&!function(t){var e=t.anchorNode,i=t.focusNode;if(!e||!i)return!1;var n=e instanceof Element?e:e.parentElement,r=i instanceof Element?i:i.parentElement,a=n&&n.closest(b),o=r&&r.closest(b);return a&&o&&(a.contains(o)||o.contains(a))}(l)&&(null===(r=t.current)||void 0===r?void 0:r._latestEditorState)){var u=function(t,e){var i=s()(t,e).selectionState,n=a()(t.getCurrentContent(),i);return n.every((function(t){return Boolean(t&&0===t.getText().length)}))?null:n}(null===(o=t.current)||void 0===o?void 0:o._latestEditorState,null===(c=t.current)||void 0===c?void 0:c.editor);if(u){var d=n.ContentState.createFromBlockArray(u.toArray()),h=JSON.stringify(Object(n.convertToRaw)(d)),p=document.createElement("div");p.appendChild(l.getRangeAt(0).cloneContents()),p.setAttribute(v,h),p.setAttribute("style","white-space: pre-wrap;"),e.clipboardData.setData("text/plain",l.toString()),e.clipboardData.setData("text/html",p.outerHTML),e.preventDefault()}}},w=function(t,e){var i,n=null===(i=t.current)||void 0===i?void 0:i.editor,r=function(i){y(t,i,e)};return n&&n.addEventListener("copy",r),n&&n.addEventListener("cut",r),{unregister:function(){n&&n.removeEventListener("copy",r),n&&n.removeEventListener("cut",r)}}},S=function(t,e){var i=t.current,n=null==i?void 0:i.editor;if(i&&n){var r=!1,a=function(t){r=Object(f.b)({event:t,keyCode:86,ctrlOrCmd:!0,shift:!0})},o=function(t){var e,n;t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1;var a,o=null===(e=t.clipboardData)||void 0===e?void 0:e.getData("text/plain"),s=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");o&&((null===(a=i.props)||void 0===a?void 0:a.handlePaste)&&i.props.handlePaste(o,s,null==i?void 0:i._latestEditorState,r))};return n.addEventListener("keydown",a,!0),n.addEventListener("paste",o,!0),{unregister:function(){n.removeEventListener("keydown",a,!0),n.removeEventListener("paste",o,!0)}}}},O=function(t){var e=t.text,i=t.html,r=t.editorState,a=t.pastedWithShift,o=l.a.fixSelection(r),s=r.getCurrentContent(),c=l.a.getSelectedBlocks(r),u=function(){var t=!a,u=c.some((function(t){var e=s.getBlockForKey(t);return!!Object(g.b)({editorState:r,block:e})}));if(t&&!u){var d=i?function(t){var e=(new DOMParser).parseFromString(t,"text/html").querySelector("[".concat(v,"]"));if(e){var i=e.getAttribute(v);try{if(i){var r=JSON.parse(i);if(r)return Object(n.convertFromRaw)(r)}}catch(t){return null}}return null}(i):void 0,h=i?m(i):void 0;if(d||h){var p=(null==d?void 0:d.getBlockMap())||(null==h?void 0:h.getBlockMap());if(p){var f=n.Modifier.replaceWithFragment(s,o,p);return n.EditorState.push(r,f,"insert-fragment")}}}return e?l.a.insertText({editorState:r,text:e}):r}();if(1===c.length){var d,p=s.getBlockForKey(c[0]),f=p.getEntityAt(o.getStartOffset());if(f&&(null===(d=s.getEntity(f))||void 0===d?void 0:d.getType())===h.f){var b=0,y=0;p.findEntityRanges((function(t){return t.getEntity()===f}),(function(t,e){b=t,y=e}));var w=(null==e?void 0:e.length)||0,S=o.getStartOffset(),O=o.getEndOffset(),k=Math.abs(O-S),P=o.merge({anchorOffset:b,focusOffset:y+w-k});u=l.a.silentEntityToggle(u,P,f),u=n.EditorState.push(r,u.getCurrentContent(),"apply-entity");var x=S+w,C=o.merge({anchorOffset:x,focusOffset:x});u=l.a.forceSelection(u,C)}}return u},k=function(t,e){var i=t.current,n=null==i?void 0:i.editor;if(i&&n){var r=function(t){var r;t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,i._dragCount=0,i.exitCurrentMode();var a=P(t);if(a){if(null===(r=i.props)||void 0===r?void 0:r.handleDrop){var o,s=i._internalDrag?"internal":"external";null===(o=i.props)||void 0===o||o.handleDrop(a,{},s)}i._internalDrag=!1,function(){var t=n;if(t){var i=new MouseEvent("mouseup",{view:e,bubbles:!0,cancelable:!0});t.dispatchEvent(i)}}()}};return n.addEventListener("drop",r,!0),{unregister:function(){n.removeEventListener("drop",r,!0)}}}},P=function(t){var e=null,i=null,r=function(t){return t&&t.ownerDocument?t.ownerDocument:document}(t.currentTarget);if("function"==typeof r.caretRangeFromPoint){var a=r.caretRangeFromPoint(t.x,t.y);e=a.startContainer,i=a.startOffset}else{if(!t.rangeParent)return null;e=t.rangeParent,i=t.rangeOffset}var o=function(t){var e="data-offset-key",i=t.nodeType===Node.TEXT_NODE&&t.parentElement||t;if(!i)return null;var n=i.closest("[".concat(e,"]"));if(!n)return null;var r=n.getAttribute(e),a=null==r?void 0:r.split("-");return a&&a.length?a[0]:null}(e);return o?new n.SelectionState({anchorKey:o,anchorOffset:i,focusKey:o,focusOffset:i,isBackward:!1,hasFocus:!1}):null};i.d(e,"b",(function(){return m})),i.d(e,"c",(function(){return w})),i.d(e,"e",(function(){return S})),i.d(e,"a",(function(){return O})),i.d(e,"d",(function(){return k}))},uxFs:function(t,e,i){"use strict";var n=i("vOnD"),r=i("q1tI"),a=i.n(r),o=i("xG9w"),s=i("saLn"),c=i("8AXF"),l=i("v83y"),u=i("5BzK"),d=i("L2iM"),h=i("A9VP"),p=i("3ES5"),f=i("fueH"),g=i("ulVh"),m=i("QuYs"),v=i("3KdP"),b=i("kAAR"),y=i.n(b);function w(){return(w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function S(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}var O=function(t,e){t.isEditMode;var i=t.textDirection,n=t.autosize,o=t.columns,s=t.verticalAlign,c=t.bgColor,y=t.shouldShowSelectionBorder,O=t.useBaseline,k=S(t,["isEditMode","textDirection","autosize","columns","verticalAlign","bgColor","shouldShowSelectionBorder","useBaseline"]),P=Object(r.useRef)(null),x=Object(r.useContext)(b.StyledFrameContext);return Object(r.useEffect)((function(){if(P&&null!==P.current){var t=x&&x.window||window,e=P,i=Object(g.c)(e,t),n=Object(g.d)(e,t),r=Object(g.e)(e,t);return function(){i.unregister(),null==n||n.unregister(),null==r||r.unregister()}}}),[P]),Object(r.useEffect)((function(){e.current&&P.current&&!e.current.focusEditor&&(e.current.focusEditor=P.current.focus)}),[P,e]),a.a.createElement(p.a,{ref:e,textDirection:i,autosize:n,columns:o,verticalAlign:s,bgColor:c,shouldShowSelectionBorder:y,useBaseline:O},a.a.createElement(u.Box,null,a.a.createElement(l.Editor,w({ref:P,spellCheck:!1,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",stripPastedStyles:!1,blockRenderMap:l.DefaultDraftBlockRenderMap.merge(Object(d.b)()),customStyleFn:h.b,handlePaste:function(t,e,i,n){var r=Object(g.a)({text:t,html:e,editorState:i,pastedWithShift:n});return r?(n||window.RM.constructorRouter.trigger("notice:triggerEduTip",v.a.TextWidgetPasteWithoutFormatting,{showOnce:!0}),k.onChange(r),"handled"):"not-handled"},handleReturn:function(t,e){if(t.shiftKey){var i=f.a.insertBreakLine(e);return k.onChange(i),m.d.sendEvent(m.b.KeyPress,{eventLabel:"Line-breaking"}),"handled"}var n=f.a.cloneStylesOnReturn(e);if(n){var r=n.status,a=n.editorState;return k.onChange(a),r}return"not-handled"},handleDrop:function(t){return t?(k.onChange(f.a.moveText({editorState:k.editorState,dropSelection:t})),"handled"):"not-handled"}},k))))},k=a.a.forwardRef(O),P=i("8Tds"),x=i("a68n"),C=i("IrH7"),j=i("ePHO"),_=i("DwEc"),T=i("Dkmh"),I=i("JW7n"),M=i("OTSC"),E=i("HjzJ"),D=i("Jzj8"),A=i("w5C2"),$=i("sxjd"),L=i("gzi7");function R(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function F(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?R(Object(i),!0).forEach((function(e){B(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function B(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function z(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||V(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||V(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){if(t){if("string"==typeof t)return N(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?N(t,e):void 0}}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}i.d(e,"a",(function(){return U}));var U=a.a.createContext({}),H=function(t){var e,i=t.readOnly,n=Object(r.useContext)(c.BackboneContext),u=n.model,d=n.modelSet,p=n.modelSave,g=Object(r.useContext)(_.a).model,m=g.useTextWidgetStore,v=g.isEditMode,b=g.workspace,y=g.selected,w=W(m({partial:!1}),2),S=w[0],O=w[1],I=Object(r.useContext)(j.a).isPaddingsEnabled,M=Object(s.a)(p,400).callback,$=Object(s.a)((function(t){if(v&&t.getLastChangeType()){var e=f.a.exportTextContent(t.getCurrentContent()),i=Object.keys(e),n=o.pick.apply(void 0,[u].concat(z(i))),r=Object(o.isEqual)(e,n);d(e),r||M()}}),20).callback;Object(r.useEffect)((function(){v&&setTimeout((function(){var t;null===(t=N.current)||void 0===t||t.focusEditor()}),0)}),[v]),Object(r.useEffect)((function(){$(S)}),[S]);var R=Object(r.useMemo)((function(){return S.getSelection().getHasFocus()}),[S]),V=Object(r.useMemo)((function(){return v}),[v,R]),N=Object(r.useRef)(null),U=Object(L.useResizeEffect)(N).height;Object(r.useEffect)((function(){U>0&&U!==u.h&&v&&(!(u.columns&&u.columns.count>1)&&u.autosize&&(d({h:U}),M()))}),[U,u.autosize,u.columns]),Object(r.useEffect)((function(){Modernizr.firefox||v||S.getSelection().isCollapsed()||O(f.a.clearSelection(S))}),[v]);var H=W(Object(D.h)(),2),G=H[0],K=H[1];return Object(r.useEffect)((function(){var t=f.a.getCurrentInlineStyles(S,h.a.FontFamily)[0]||A.b.fontFamily,e=f.a.getCurrentInlineStyles(S,h.a.FontWeight)[0]||A.b.fontWeight,i=f.a.getCurrentInlineStyles(S,h.a.FontStyle)[0]||A.b.fontStyle;if(t&&e&&i){var n=Object(D.a)({fontFamily:t,fontWeight:e,fontStyle:i});G[n]||f.a.getFontFeatures({fontFamily:t,fontWeight:e,fontStyle:i}).then((function(t){if(t){var e=t.features,i=t.variations,r=t.characters;K(F(F({},G),{},B({},n,{features:e,variations:i,characters:r})))}}))}}),[S]),a.a.createElement(k,{ref:N,isEditMode:v,bgColor:u.bgColor,textDirection:u.textDirection||P.b.LTR,autosize:u.autosize,columns:u.columns,verticalAlign:u.verticalAlign,useBaseline:null===(e=u.flags)||void 0===e?void 0:e.baseline,shouldShowSelectionBorder:V,editorState:S,blockStyleFn:function(t){var e=t.getType();return[e,Object(x.b)({block:t}),Object(C.d)({block:t}),Object(E.e)(e)?Object(E.d)({block:t}):void 0].filter((function(t){return t})).join(" ")},onChange:function(t){var e=t.getSelection(),i=t;i=f.a.preserveBlockInlineStyles(i,S),i=(i=f.a.forceSelection(i,f.a.reverseSelection(e))).getSelection().isCollapsed()?i:f.a.forceSelection(i,f.a.fixSelection(i)),Modernizr.safari&&!e.isCollapsed()&&(i=l.EditorState.acceptSelection(i,i.getSelection())),O(i)},readOnly:!v||!y||i||I,keyBindingFn:T.c,handleKeyCommand:function(t){var e=Object(T.a)({action:t,editorState:S,workspace:b});if(e){var i=e.editorState,n=e.status;return O(i),n}return"not-handled"}})},G=Object(n.default)(u.Box).withConfig({displayName:"TextConstructor___StyledBox"})(["user-select:none;"]),K=Object(n.default)(u.Box).withConfig({displayName:"TextConstructor___StyledBox2"})(["user-select:none;"]),q=Object(n.default)(u.Box).withConfig({displayName:"TextConstructor___StyledBox3"})(["user-select:none;"]),Y=Object(n.default)(u.Box).withConfig({displayName:"TextConstructor___StyledBox4"})(["user-select:none;"]),J=function(t){var e=t.size,i=t.height,n=t.width,r=t.onClick;return(a.a.createElement(a.a.Fragment,null,a.a.createElement(G,{position:"absolute",top:0,left:0,width:n+2*e,height:e,onClick:r}),a.a.createElement(K,{position:"absolute",bottom:0,left:0,width:n+2*e,height:e,onClick:r}),a.a.createElement(q,{position:"absolute",top:0,left:0,width:e,height:i+2*e,onClick:r}),a.a.createElement(Y,{position:"absolute",top:0,right:0,width:e,height:i+2*e,onClick:r})))},Q=Object(n.default)(u.Box).withConfig({displayName:"TextConstructor___StyledBox5"})(["width:calc(var(--workspace-inverse-zoom) * 100%);height:calc(var(--workspace-inverse-zoom) * 100%);zoom:var(--workspace-inverse-zoom);transform:scale(var(--workspace-zoom));transform-origin:left top;"]),X=Object(n.default)(u.Box).withConfig({displayName:"TextConstructor___StyledBox6"})(["pointer-events:none;user-select:none;"]);e.b=function(){var t=Object(r.useContext)(_.a).model,e=t.useTextWidgetStore,i=t.fontStyles,n=t.isResizing,o=t.leaveEditMode,s=t.isEditMode,l=t.canControlsBeClosed,u=t.onIframeLoaded,d=W(e({partial:!1}),1)[0],h=Object(r.useContext)(c.BackboneContext).model,p=h.autosize,f=h.w,g=h.h,m=h.columns,v=W(Object(r.useState)(!1),2),b=v[0],w=v[1];Object(r.useEffect)((function(){(b||n)&&M.default.getFocusBack()}),[b,n]);var S=Object(r.useRef)(null),O=p&&(!m||m&&m.count<=1),k=O?500:0,P=O?{position:"absolute",top:-1*k,left:-1*k,width:"calc(100% + ".concat(2*k,"px)"),height:"calc(100% + ".concat(2*k,"px)")}:{},x=W(Object(r.useState)(!1),2),C=x[0],T=x[1],E=W(Object(r.useState)(!1),2),D=E[0],A=E[1];return Object(r.useEffect)((function(){s&&!C&&T(!0)}),[s]),a.a.createElement(U.Provider,{value:{ref:S}},a.a.createElement(j.a.Provider,{value:{isPaddingsEnabled:b,setIsPaddingsEnabled:w}},a.a.createElement(Q,{height:"100%",width:"100%",position:"relative"},C&&a.a.createElement(y.a,{ref:S,style:F({display:s?void 0:"none",pointerEvents:!s||b||n?"none":void 0,userSelect:"none"},P),head:a.a.createElement(a.a.Fragment,null,a.a.createElement("style",null,"\n                      body {\n                        margin: 0;\n                        height: 100vh;\n                        width: 100vw;\n                        overflow: hidden;\n                        box-sizing: border-box;\n                        padding: ".concat(k,"px;\n                      }\n\n                      ol, ul {\n                        padding: 0;\n                        margin: 0;\n                      }\n                  ")),i.map((function(t,e){return"style"===t.tag?a.a.createElement("style",{key:e},"".concat(t.style)):"link"===t.tag?a.a.createElement("link",{key:e,rel:"stylesheet",type:t.type,href:t.href}):void 0}))),contentDidMount:function(){u(),A(!0)}},a.a.createElement(I.a,{mode:"constructor"}),O&&s&&a.a.createElement(J,{size:k,height:g,width:f,onClick:function(){l()&&o()}}),a.a.createElement(H,null)),s&&D?null:a.a.createElement(X,{height:"100%",width:"100%",position:"absolute",top:0,left:0},a.a.createElement($.a,{editorState:d,isConstructorPreview:!0})))))}},v92f:function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return a}));var n,r,a,o=i("rFsW"),s=i("f3SV"),c=i("I0kf");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!function(t){t.Default="default",t.TabletPortrait="tablet_portrait",t.PhonePortrait="phone_portrait"}(r||(r={})),function(t){t.Default="viewport_default",t.TabletPortrait="viewport_tablet_portrait",t.PhonePortrait="viewport_phone_portrait"}(a||(a={}));var h=[{name:r.Default,min_scale_width:Object(c.a)("constructor.customViewportWidth")?769:1024,max_width:2048,width:1024,min_height:400,max_height:201600,caption:"Laptop & Tablet Landscape",shortcut:"1"},{name:r.TabletPortrait,width:768,min_height:926,max_height:201600,caption:"Tablet Portrait",shortcut:"2",deprecated:!0},{name:r.PhonePortrait,width:320,min_height:568,max_height:201600,caption:"Phone Portrait",shortcut:"3"}],p=["x","y","w","h","z","hidden","angle","flip_h","flip_v","pack_id","fixed_position","is_full_width","is_full_height","sticked","sticked_margin","animation","triggers"],f=(d(n={background:o.a.union(["color","opacity","selectedType","picture","slideshow"],p),picture:o.a.union(["picture","cropW","cropH","cropX","cropY","originalW","originalH","ratio","scale","pic_opacity","pic_color","border_size","border_color","border_radius","border_radius_max","border_radius_tl","border_radius_tr","border_radius_bl","border_radius_br","border_radius_independent","opacity","anchor_link_pos","preview_overlay_color"],p),slideshow:o.a.union(["images_h","captions_h","play_method"],p),text:Object(c.a)("constructor.textv3")?o.a.union(["styles","bgColor","columns","blocksMeta","entityMap"],p):o.a.union(["column_count","column_gap","bg_color","bg_opacity"],p),shape:o.a.union(["rasterUrl","raster2xUrl","borders","weight","anchor_link_pos","bg_color"],p),button:o.a.union(["text_w","text_h","em_w","anchor_link_pos","font-size","font-style","font-weight","font-family","color","color-opacity","letter-spacing","hover-color","hover-color-opacity","current-font-size","current-font-style","current-font-weight","current-font-family","current-color","current-color-opacity","current-letter-spacing","background-color","background-color-opacity","hover-background-color","hover-background-color-opacity","current-background-color","current-background-color-opacity","border-radius","border-width","border-color","border-color-opacity","hover-border-width","hover-border-color","hover-border-color-opacity","current-border-radius","current-border-width","current-border-color","current-border-color-opacity"],p),hotspot:o.a.union(["borders","weight","anchor_link_pos"],p),form:o.a.union(["layout","style","style-colored-button-default","style-colored-button-hover","style-colored-fields","style-outlined-button-default","style-outlined-button-hover","style-outlined-fields","style-underlined-button-default","style-underlined-button-hover","style-underlined-fields"],p)},s.c.ecommerceCartBlockName,o.a.union(["text_w","text_h","em_w","background-color","background-color-opacity","border-radius","border-width","border-color","border-color-opacity","font-family","font-style","font-weight","color","color-opacity","font-size","letter-spacing","hover-background-color","hover-background-color-opacity","hover-border-width","hover-border-color","hover-border-color-opacity","hover-color","hover-color-opacity","hover-border-radius","hover-tansition-duration"],p)),d(n,s.c.addToCartBlockName,o.a.union(["layout","btn_w","btn_h","text_w","text_h","select_btn_margin","attributes_margin","background-color","background-color-opacity","border-radius","border-width","border-color","border-color-opacity","font-family","font-style","font-weight","font-size","color","color-opacity","letter-spacing","text-align","hover-tansition-duration","hover-background-color","hover-background-color-opacity","hover-border-radius","hover-border-width","hover-border-color","hover-border-color-opacity","hover-color","hover-color-opacity","attrs-background-color","attrs-background-color-opacity","attrs-border-radius","attrs-border-width","attrs-border-color","attrs-border-color-opacity","attrs-font-family","attrs-font-style","attrs-font-weight","attrs-font-size","attrs-color","attrs-color-opacity","attrs-letter-spacing","attrs-text-align","attrs-hover-background-color","attrs-hover-background-color-opacity","attrs-hover-border-radius","attrs-hover-border-width","attrs-hover-border-color","attrs-hover-border-color-opacity","attrs-hover-color","attrs-hover-color-opacity","attrs-icon-h","attrs-icon-w","attrs-text_w","attrs-text_h"],p)),d(n,"shots",o.a.union(["playbackType","scrollSpeed","scrollStartPoint","startPointOffset","scrollDelay","hoverDirection"],p)),n),g=o.a.map(h,(function(t){return"viewport_"+t.name})),m=o.a.without(g,"viewport_default"),v=h.reduce((function(t,e){return u(u({},t),{},d({},e.name,e))}),{});e.c={viewports:h,viewport_fields_common:p,viewport_fields:f,viewport_listall:g,viewport_list:m,widgetViewportFields:function(t){return f[t]||p},dictionary:v}},vvfI:function(t,e,i){"use strict";i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var n=i("fueH"),r="textIndent",a=function(t){var e=t.editorState,i=t.block,a=n.a.getBlockData({editorState:e,block:i,key:r});return"number"==typeof a?a:void 0},o=function(t){var e=t.editorState,i=t.value,a=t.block;return n.a.setBlockData({editorState:e,block:a,key:r,value:i})},s=function(t){var e=t.editorState,i=t.method,n=a({editorState:e})||0,r=e.getSelection().toJS(),s=r.focusOffset,c=0===r.anchorOffset&&0===s;return"increase"===i&&c?o({editorState:e,value:n+28}):"decrease"===i&&c&&n>0?o({editorState:e,value:Math.max(0,n+-28)}):void 0}},"w+s/":function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o})),i.d(e,"d",(function(){return s})),i.d(e,"b",(function(){return c}));var n=i("fueH");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a="paddings",o=function(t){var e=t.editorState,i=t.block,o=n.a.getBlockData({editorState:e,block:i,key:a});return"object"===r(o)?o:void 0},s=function(t){var e=t.block,i=t.editorState,r=t.paddings;return n.a.setBlockData({editorState:i,block:e,key:a,value:r})},c=function(t){var e=t.blockPaddings,i=t.stylePaddings;return{left:!(!i||!e)&&Boolean(i.left&&e.left),top:!(!i||!e)&&Boolean(i.top&&e.top),bottom:!(!i||!e)&&Boolean(i.bottom&&e.bottom),right:!(!i||!e)&&Boolean(i.right&&e.right)}}},w5C2:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return o})),i.d(e,"d",(function(){return c})),i.d(e,"c",(function(){return l}));var n=i("sn3M");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o,s={fontSize:18,lineHeight:26,fontFamily:"Roboto",fontWeight:400,fontStyle:"normal",fontWeights:["n1","i1","n3","i3","n4","i4","n5","i5","n7","i7","n9","i9"]};!function(t){t.Unstyled="unstyled"}(o||(o={}));var c=a({},o.Unstyled,{element:"p"}),l=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Object(n.a)({selector:'[data-block="true"], .widget-text-v3 p:not([class]), .widget-text-v3 p[class=""]',label:"Unstyled",styles:""}))},z79a:function(t,e,i){"use strict";var n=i("xi34");window.iconSVGCache=[];var r=function(){};r.prototype={MAX_ICON_CACHE_SIZE:30,generateShapeSVG:function(t,e,i,r,a){var o,s=e.get("bg_color")||e.viewport_default&&e.viewport_default.bg_color,c=this.getRGBA(s||"ffffff",e.get("bg_opacity")),l=this.getRGBA(e.get("color"),e.get("opacity"));if("ellipse"==(a="hotspot"===e.get("type")?a||e.get("pin_type"):a||e.get("tp"))){var u=i/2,d=r/2,h=e.get("borders");o=_("ellipse",{cx:u,cy:d,rx:u,ry:d},c,l,h=Math.min(h,u,d),e.id+"_"+t,e.get("opacity"))}if("rectangle"==a||"polygon"==a){"hotspot"===e.get("type")&&(l=c="rgba(0, 0, 0, 0)");var p,f="rectangle"==a?4:e.get("sides"),g=(h=e.get("borders"),e.get("radius")||0),m=e.get("radius_rect_independent"),v={tlRadius:e.get("radius_rect_tl")||0,trRadius:e.get("radius_rect_tr")||0,blRadius:e.get("radius_rect_bl")||0,brRadius:e.get("radius_rect_br")||0},b=function(t,e,i,n){for(var r,a,o,s=2*Math.PI/t,c=Math.PI/2-(t%2==1?0:s/2),l=[],u=999999,d=-999999,h=999999,p=-999999,f=0;f<t;f++)r=c+f*s,a=.5+.5*Math.cos(r),o=.5-.5*Math.sin(r),l.push({x:a,y:o}),a<u&&(u=a),a>d&&(d=a),o<h&&(h=o),o>p&&(p=o);for(f=0;f<t;f++)l[f].x=(l[f].x-u)*(e/(d-u)),l[f].y=(l[f].y-h)*(i/(p-h)),l[f].x=Math.round(1e5*l[f].x)/1e5,l[f].y=Math.round(1e5*l[f].y)/1e5;return l}(f,i,r),y=function(t){if(!t)return 99999;for(var e,i=99999,n=t.length,r=0;r<n;r++){var a=t[r].x-t[(r+1)%n].x,o=t[r].y-t[(r+1)%n].y;(e=Math.sqrt(a*a+o*o))<i&&(i=e),t[r].side=e}return i}(b);o=_("path",{path:"rectangle"===a&&m?function(t,e){var i=t.tlRadius,n=t.trRadius,r=t.brRadius,a=t.blRadius,o=e.trTop,s=e.tlTop,c=e.tlLeft,l=e.blLeft,u=e.blBottom,d=e.brBottom,h=e.brRight,p=e.trRight;return"M ".concat(o.x," 0\n        L ").concat(s.x," ").concat(s.y,"\n        A ").concat(i," ").concat(i," 0 0 0 ").concat(c.x," ").concat(c.y,"\n        L ").concat(l.x," ").concat(l.y,"\n        A ").concat(a," ").concat(a," 0 0 0 ").concat(u.x," ").concat(u.y,"\n        L ").concat(d.x," ").concat(d.y,"\n        A ").concat(r," ").concat(r," 0 0 0 ").concat(h.x," ").concat(h.y,"\n        L ").concat(p.x," ").concat(p.y,"\n        A ").concat(n," ").concat(n," 0 0 0 ").concat(o.x," ").concat(o.y,"\n        Z")}(v,p=function(t,e,i){var n=e.trRadius,r=e.tlRadius,a=e.blRadius,o=e.brRadius;return n=Math.min(n,i/2),r=Math.min(r,i/2),a=Math.min(a,i/2),o=Math.min(o,i/2),{trTop:{x:t[0].x-n,y:t[0].y},tlTop:{x:t[1].x+r,y:t[1].y},tlLeft:{x:t[1].x,y:t[1].y+r},blLeft:{x:t[2].x,y:t[2].y-a},blBottom:{x:t[2].x+a,y:t[2].y},brBottom:{x:t[3].x-o,y:t[3].y},brRight:{x:t[3].x,y:t[3].y-o},trRight:{x:t[0].x,y:t[0].y+n}}}(b,v,y)):function(t,e,i){if(!t)return"";for(var n=t.length,r="",a=0;a<n;a++){var o=2*a+1,s=(2*a+2)%(2*n);if(r+=0==a?"M":"L",e){r+=e[o].x+" "+e[o].y+" ";var c=e[o].x-e[s].x,l=e[o].y-e[s].y,u=1/((c*c+l*l)/4)-1/(i*i),d=Math.sqrt(1/u);r+="A"+d+" "+d+" 0 0 0 "+e[s].x+" "+e[s].y+" "}else r+=t[a].x+" "+t[a].y+" "}return r+" Z "}(b,(p=function(t,e,i){if(!t)return{};if(e<=1e-4)return{};var n=[],r=t.length;e=Math.min(e,i/2);for(var a=0;a<r;a++){var o,s,c,l,u=t[a],d=t[(a+1)%r],h=t[a].side,p=(d.x-u.x)/h,f=(d.y-u.y)/h;o=u.x+p*e,s=u.y+f*e,c=d.x-p*e,l=d.y-f*e,o=Math.round(1e5*o)/1e5,s=Math.round(1e5*s)/1e5,c=Math.round(1e5*c)/1e5,l=Math.round(1e5*l)/1e5,n.push({x:o,y:s}),n.push({x:c,y:l})}return{points:n,radius:e}}(b,g,y)).points,p.radius)},c,l,h,e.id+"_"+t,e.get("opacity"))}if("line"==a){h=e.get("weight"),d=Math.round(r/2)+(h%2==1?.5:0);var w,S=[13*h/3,2*h/3].join(" "),O=h>1?[.001,5*h/3].join(" "):[1,2].join(" "),k=.5===h?"crispEdges":"auto",P="dotted"==e.get("stroke")?h/2:0;if(w="M"+P+" "+d+" L"+i+" "+d,"solid"==e.get("stroke")&&(o='<path d="'.concat(w,'" style="fill: none; stroke: ').concat(c,"; stroke-width: ").concat(h,'" shape-rendering="').concat(k,'" />')),"double"==e.get("stroke")){var x="M"+P+" "+(d+h)+" L"+i+" "+(d+h);o='<path d="'.concat("M"+P+" "+(d-h)+" L"+i+" "+(d-h),'" style="fill: none; stroke: ').concat(c,"; stroke-width: ").concat(h,';" shape-rendering="').concat(k,'"/>'),o+='<path d="'.concat(x,'" style="fill: none; stroke: ').concat(c,"; stroke-width: ").concat(h,'" shape-rendering="').concat(k,'"/>')}"dotted"==e.get("stroke")&&(o='<path d="'.concat(w,'" stroke-linecap="round" stroke-dasharray="').concat(O,'" style="fill: none; stroke: ').concat(c,"; stroke-width: ").concat(h,'"  shape-rendering="').concat(k,'"/>')),"dashed"==e.get("stroke")&&(o='<path d="'.concat(w,'" stroke-dasharray="').concat(S,'" style="fill: none; stroke: ').concat(c,"; stroke-width: ").concat(h,'" shape-rendering="').concat(k,'"/>'))}if("icon"==a){var C=this.iconData||this.current_icon_data;if(!C)return null;var j=C.$svg.clone();return j.css({width:"100%",height:"100%"}),c=this.getRGBA(s,1),j.find("*:not(.fixed-color)").each((function(){var t=Object(n.a)(this);t.css({fill:"","fill-opacity":""}),t.get(0).removeAttribute("fill"),t.get(0).removeAttribute("fill-opacity")})),j.get(0).setAttribute("fill",c),j.get(0).setAttribute("fill-opacity",e.get("bg_opacity")),j}return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+i+'px" height="'+r+'px">'+o+"</svg>";function _(t,e,i,n,r,a,o){var s="mask_"+a,c="clip_"+a,l="",u=2;return r>0&&o>.99&&(u=1),l="<defs>",r>0&&(l+='<mask id="'+s+'">',"path"==t&&(l+='<path d="'+e.path+'" style="fill:white; stroke:black; stroke-width:'+r*u+'"/>'),"ellipse"==t&&(l+='<ellipse cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'" style="fill:white; stroke:black; stroke-width:'+r*u+'"/>'),l+="</mask>"),l+='<clippath id="'+c+'">',"path"==t&&(l+='<path d="'+e.path+'"/>'),"ellipse"==t&&(l+='<ellipse cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'"/>'),l+="</clippath>",l+="</defs>","path"==t&&(l+='<path mask="url(#'+s+')" d="'+e.path+'" style="fill:'+i+'; stroke:none; stroke-width:0; pointer-events: visiblePainted;"/>'),"ellipse"==t&&(l+='<ellipse mask="url(#'+s+')" cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'" style="fill:'+i+'; stroke:none; stroke-width:0; pointer-events: visiblePainted;"/>'),0==r||("path"==t&&(l+='<path clip-path="url(#'+c+')" d="'+e.path+'" style="fill:none; stroke:'+n+"; stroke-width:"+2*r+'; pointer-events: visiblePainted;"/>'),"ellipse"==t&&(l+='<ellipse clip-path="url(#'+c+')" cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'" style="fill:none; stroke:'+n+"; stroke-width:"+2*r+'; pointer-events: visiblePainted;"/>')),l}},getRGBA:function(t,e){if(0==e)return"none";var i=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)];return e>.99?"rgb("+i[0]+","+i[1]+","+i[2]+")":"rgba("+i[0]+","+i[1]+","+i[2]+", "+e+")"}},e.a=r},zMlX:function(t,e,i){"use strict";var n,r;function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o})),function(t){t.Smallcaps="smcp",t.StandardLigatures="liga",t.DiscretionaryLigatures="dlig",t.RequiredLigatures="rlig",t.HistoricalLigatures="hlig",t.Fractions="frac",t.Alternates="salt",t.StylisticSet01="ss01",t.StylisticSet02="ss02",t.StylisticSet03="ss03",t.StylisticSet04="ss04",t.StylisticSet05="ss05",t.StylisticSet06="ss06",t.StylisticSet07="ss07",t.StylisticSet08="ss08",t.StylisticSet09="ss09",t.StylisticSet10="ss10",t.StylisticSet11="ss11",t.StylisticSet12="ss12",t.StylisticSet13="ss13",t.StylisticSet14="ss14",t.StylisticSet15="ss15",t.StylisticSet16="ss16",t.StylisticSet17="ss17",t.StylisticSet18="ss18",t.StylisticSet19="ss19",t.StylisticSet20="ss20",t.LiningFigures="lnum",t.OldstyleFigures="onum",t.ProportionalFigures="pnum",t.TabularFigures="tnum"}(r||(r={}));var o=(a(n={},r.LiningFigures,"Lining Figures"),a(n,r.OldstyleFigures,"Oldstyle Figures"),a(n,r.ProportionalFigures,"Proportional Figures"),a(n,r.TabularFigures,"Tabular Figures"),n)},zWgA:function(t,e){var i={instagram:[/^\s*<blockquote\s+class=.instagram-media.*<\/blockquote>\s*<script.*src=.*instagram.+>.*<\/script>\s*$/gi],pinterest:[/^\s*<a.*data-pin-do=.*<\/a>([\s\S]*<script.*src=.*pinterest.+>.*<\/script>)?\s*$/i],facebookvideo:[/^\s*<div\s+id=.fb-root.*<\/div>[\s\S]*<script>.*src.*facebook.*sdk.*<\/script>[\s\S]*<div\s+class=.fb-video.*<\/div>\s*$/i],readymag:[/^\s*<a\s+class=.rm-mag-embed.*<\/a>[\s\S]*<script.+id=.readymag-embed-init.+><\/script>\s*$/i],ecommerce:[/^\s*<form\s+action=.*method=.*POST.+>[\s\S]*<script.*src=.*stripe.+>.*<\/script>[\s\S]*<\/form>\s*$/gim,/^\s*(<!--.*-->)?[\s\S]*<script.*src=.*stripe.+>[\s\S]*<\/script>[\s\S]*(<!--.*-->)?[\s\S]*<button .*>.*<\/button>[\s\S]*<div .*>.*<\/div>[\s\S]*<script>.*stripe.*<\/script>\s*$/gim,/^\s*<div\s+id=.+>[\s\S]*<\/div>[\s\S]*<script[\s\S]*scriptUrl[\s\S]*shopifycdn[\s\S]*>*<\/script>.*$/gim,/^\s*<script\s+src=.*gumroad.+><\/script>[\s\S]*<div\s+class=.gumroad-product-embed.+>[\s\S]*<\/div>\s*$/gim,/^\s*<script\s+src=.*gumroad.+><\/script>[\s\S]*<a\s+class=.gumroad-button.+>[\s\S]*<\/a>\s*$/gim,/^\s*<div\s+class=.*ecwid.+><\/div>[\s\S]*<script.+ecwid.+>.*<\/script>[\s\S]*<script.*>.*xProduct.*<\/script>\s*$/gim,/^\s*<div\s+class=.*ecsp.+><\/div>[\s\S]*<script.+ecwid.+>.*<\/script>[\s\S]*<script.*>.*xProduct.*<\/script>\s*$/gim,/^\s*<div\s+class=.*ec-cart-widget.+><\/div>[\s\S]*<div>[\s\S]*<script.+ecwid.+>.*<\/script>[\s\S]*<script.*>.*Ecwid.*<\/script>[\s\S]*<\/div>\s*$/gim,/^\s*<div\s+id=.*.+><\/div>[\s\S]*<script.+ecwid.+>.*<\/script>[\s\S]*<script.*>.*xProduct.*<\/script>[\s\S]*<\/div>\s*$/gim],gdpr:[/^\s*<a\s+href="https:\/\/www\.iubenda\.com\/privacy-policy\/\d+"[\w\d\s/:;.,'"=-]*>[\w\d\s/:;.,'"=-]*<\/a>\s*<script[\w\d\s/:;.,'"=-]*>\(function\s*\(w,d\)\s*{[\s\S]*s\.src="https:\/\/cdn\.iubenda\.com\/iubenda\.js";[\s\S]*}\)\([\w\s,]*\);<\/script\s*>\s*$/gim,/^\s*<script[\w\d\s/:;.,'="-]*src="https:\/\/consent\.cookiebot\.com\/[\w\d-]+\/cd\.js"[\w\d\s/:;.,'="-]*><\/script\s*>\s*$/gim,/^\s*<script\s*(type="text\/javascript"){0,1}\s*>\s*var\s+cpm\s*=\s*{};\s*\(function\(h,u,b\){[\w\d\s()[\]{}/.,:;="'-]+e\.src='https:\/\/cookiehub\.net(\/dev){0,1}\/c2\/[\w\d-]+\.js';[\w\d\s()[\]{}/.,:;="'-]+}\)\([\w\d\s,]+\);\s*<\/script\s*>\s*$/gim],video:[/^\s*<video[\s\S]*>[\s\S]*<\/video>\s*$/gim],iframe:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.replace(/<!--[\s\S]*-->/gi,"");return/^\s*<iframe[\s\S]*>[\s\S]*<\/iframe>\s*$/i.test(e)}};t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=t.trim();for(var r in i){var a=i[r];if("function"==typeof a)return a(n,e)?r:"codeinjection";for(var o in a)if("function"==typeof(o=a[o])){if(o(n,e))return r}else{var s=new RegExp(o.source,o.flags);if(s.test(n.replace(/\n/g,"")))return r}}return"codeinjection"}},zZDe:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return o}));var n=i("q1tI"),r=i.n(n),a="BR_ENTITY",o={strategy:function(t,e,i){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&i.getEntity(e).getType()===a}),e)},component:function(){return r.a.createElement("br",null)}}}}]);