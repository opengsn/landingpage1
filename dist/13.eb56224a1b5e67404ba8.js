(window.webpackJsonp=window.webpackJsonp||[]).push([[13,32],{"5Rpd":function(t,e,a){"use strict";a.r(e);var r=a("xi34"),o=a("rFsW"),i=a("f3SV"),n=a("BVsp"),s=a("YqYG"),c=a("QNiq"),l=a("I0kf"),p=a("OTSC"),u=function(t){if(o.a.bindAll(this),o.a.extend(this,t),!RM.common.magCreationInProgress)if(this.analytics=this.router&&this.router.analytics,this.router?this.router==RM.viewerRouter?this.routerName="viewer":this.router==RM.collectorRouter?this.routerName="collector":this.router==RM.homepageRouter?this.routerName="homepage":this.router==RM.constructorRouter?this.routerName="constructor":this.routerName="unknown":this.routerName="error",this.analytics&&!this.noCreateRequestTracking&&this.analytics.sendEvent("Create Mag Request",{_tp:this.tp+"_"+(this.templateID?"template":"blank")+"_"+this.routerName+"_"+(this.me?"has-me":"no-me"),_template_id:this.templateID}),c.a.isDesktop)if(Modernizr.msie||Modernizr.msie11)this.showIEPopupWarning();else if(this.me){var e="function"==typeof this.me.get?this.me.get("permissions"):this.me.permissions;this.skipPermissionsCheck||e&&e.can_create_mag?this.innerCreateMag():this.showCreatePopupWarning()}else this.showJoinForm();else this.showMobilePopupWarning()};u.prototype.innerCreateMag=function(){var t={};this.analytics&&(this.analytics.sendEvent("Create Mag",{_tp:this.tp+"_"+(this.templateID?"template":"blank")+"_"+this.routerName,_template_id:this.templateID}),this.templateID&&this.analytics.sendEvent("Templates action",{label:"From templates page",category:"Process Actions"})),this.currentFolderId&&(t.folder=this.currentFolderId),this.sharedUser&&(t.user=this.sharedUser),RM.common.magCreationInProgress=!0,r.a.ajax({url:i.c.readymag_auth_host+(this.templateID?"/api/magFromTemplate/"+this.templateID:"/api/mag/"),type:"POST",data:t,success:o.a.bind((function(t){"function"==typeof this.success&&this.success(),RM.common.magCreationInProgress=!1,window.location.href=i.c.readymag_auth_host+"/edit/"+t.num_id+"/contents/"}),this),error:o.a.bind((function(){if("function"==typeof this.error&&this.error(),RM.common.magCreationInProgress=!1,console.log(arguments),alert("Creating project problem. Contact tech support, please: "+i.c.SUPPORT_MAIL),this.me){var t="function"==typeof this.me.get?this.me.get("uri"):this.me.uri;t&&(window.location.href=i.c.readymag_auth_host+"/"+t)}}),this)})},u.prototype.showCreatePopupWarning=function(){s.default&&new s.default({$parent:Object(r.a)("body > .popups"),router:this.router,opts:{type:"type-create"},alert_source:"create mag"}).render()},u.prototype.showMobilePopupWarning=function(){s.default&&new s.default({$parent:Object(r.a)("body > .popups"),router:this.router,opts:{type:"type-switch-desktop-create"},alert_source:"create mag mobile"}).render()},u.prototype.showIEPopupWarning=function(){s.default&&new s.default({$parent:Object(r.a)("body > .popups"),router:this.router,opts:{type:"type-browsers"}}).render()},u.prototype.showJoinForm=function(){if(Object(l.a)("authorization.newFlow"))return p.default.saveJoinData(),void(window.location.href="".concat(i.c.readymag_host,"/auth/join").concat(this.templateID?"?template="+this.templateID:""));var t=new n.default({router:this.router,useNavigate:!1,$container:Object(r.a)("body")});t.render(),t.$el.css("z-index",9999),t.createMagParams={templateID:this.templateID,tp:this.tp,noCreateRequestTracking:!0},o.a.delay(o.a.bind((function(){t.switchTo("join"),t.show()}),this),100)},e.default=u},BVsp:function(t,e,a){"use strict";a.r(e);var r,o=a("xi34"),i=a("q1z7"),n=a.n(i),s=a("rFsW"),c=a("aCH8"),l=a.n(c),p=a("OTSC"),u=a("f3SV"),d=a("AIVH");function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function g(){var t=f(['\n    <div class="rmpreloader button">\n        <div class="arc"></div>\n    </div>\n']);return g=function(){return t},t}function m(){var t=f(['\n\n\t<div class="login-popup hidden">\n\n\t\t<div class="login-popup-wrapper">\n\t\t\t<div class="login ljr-panel hidden">\n        <div class="header"><a href="/join/" class="link">Join</a> or <span>Log in</span></div>\n\t\t\t\t<form method="post" action="/api/redirect" id="login_form">\n\t\t\t\t\t<input name="username" autocapitalize="off" autocorrect="off" required="required" class="email-input input-template"  autocomplete="on" type="email" spellcheck="false" value="" placeholder="Email"/>\n\t\t\t\t\t<input name="password" autocapitalize="off" autocorrect="off" required="required" class="password-input input-template" autocomplete="on"  type="password" spellcheck="false" value=""  placeholder="Password" />\n\t\t\t\t\t<input name="url" type="hidden" value="" />\n\t\t\t\t\t<div class="go">Log in</div>\n\t\t\t\t</form>\n        <div class="social-caption">Log in with</div>\n        <div class="social-auth" data-provider=\'facebook\'>\n          <span class="icon"></span>\n          <span class="buttonText">Facebook</span>\n        </div>\n        <div class="social-auth" data-provider=\'google\'>\n          <span class="icon"></span>\n          <span class="buttonText">Google</span>\n        </div>\n\t\t\t\t<a href="/recover/" class="link forgot">Forgot password?</a>\n\t\t\t\t<div class="error">Invalid email or password</div>\n\t\t\t</div>\n\n\n      <div class="join ljr-panel hidden">\n        <div class="header"><span>Join</span> or <a href="/login/" class="link">Log in</a></div>\n        <input autocapitalize="on"  autocorrect="off" required="required" class="fullname-input input-template for-validate"  maxlength="24" type="text"     spellcheck="false" value="" placeholder="Name" />\n        <input autocapitalize="off" autocorrect="off" required="required" class="email-input input-template for-validate"     type="email"    spellcheck="false" value="" placeholder="Email" />\n        <input autocapitalize="off" autocorrect="off" required="required" class="password-input input-template for-validate"  type="password" spellcheck="false" value="" placeholder="Password" />\n\n        <div class="checkbox-container">\n          <label>\n            <input type="checkbox" class="terms-checkbox for-validate" required="required">\n            <span class="checkmark"></span>\n          </label>\n          <p>I accept Readymag’s\n            <a href="https://readymag.com/readymag/terms-and-privacy/" target="_blank">Terms and Privacy Policy</a>\n          </p>\n        </div>\n\n\n        <div class="checkbox-container">\n          <label>\n            <input type="checkbox" class="subscribe-checkbox">\n            <span class="checkmark"></span>\n          </label>\n          <p>Кeep me updated on news and offers</p>\n        </div>\n\n\n        <div class="go">Join</div>\n\n        <div class="social-caption">Sign up with</div>\n        <div class="social-auth" data-provider=\'facebook\'>\n          <span class="icon"></span>\n          <span class="buttonText">Facebook</span>\n        </div>\n        <div class="social-auth" data-provider=\'google\'>\n          <span class="icon"></span>\n          <span class="buttonText">Google</span>\n        </div>\n      <div class="error"></div>\n\n      </div>\n\n        <div class="recover ljr-panel hidden">\n            <div class="header"><span>Reset Password</span></div>\n            <div class="wrapper">\n                <div class="info">Please enter your email address and we\'ll send you instructions:</div>\n                <input name="username" autocapitalize="off" autocorrect="off" required="required" class="email-input input-template"  autocomplete="on" type="email" spellcheck="false" value="" placeholder="Email"/>\n                <div class="go">Submit</div>\n            </div>\n            <div class="send-message">If an account exists for this email address, you will shortly get instructions for resetting your password. If you have not received such a message, please check that you have entered the same email address you used to register your Readymag account.</div>\n            <div class="go-back">Go Back</div>\n        </div>\n\n        <div class="reset ljr-panel hidden">\n            <div class="header"><span>Reset Password</span></div>\n            <input autocapitalize="off" autocorrect="off" required="required" class="new-password-input input-template"  type="password" spellcheck="false" value="" placeholder="New Password" />\n            <input autocapitalize="off" autocorrect="off" required="required" class="verify-password-input input-template"  type="password" spellcheck="false" value="" placeholder="Verify Password" />\n            <div class="go">Save</div>\n            <div class="error"></div>\n        </div>\n\n            <div class="forbidden ljr-panel hidden">\n                <div class="header"><span>Login forbidden</span></div>\n                <div class="wrapper">\n                    <div class="info">It seems Readymag is displayed as an embedded page on the third party web site. Login is disabled due to security reasons.<br/><br/>Please <a href="https://readymag.com/login" target="_blank">login or join</a> on the original Readymag page.</div>\n                </div>\n            </div>\n\n\n            <div class="close-popup"></div>\n      <a href="/" class="link go-main"></a>\n\t\t</div>\n\t</div>\n\n']);return m=function(){return t},t}function f(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var y=(h(r={},"template-common-login",Object(d.a)(m())),h(r,"template-common-login-preloader",Object(d.a)(g())),r),v=a("5Rpd"),b=a("QNiq"),w=(a("I0kf"),n.a.View.extend({events:{"click .link":"link","click .close-popup":"closePopup","input .login.ljr-panel input.password-input":"onPasswordInput","keydown .login.ljr-panel input":"loginInputKey","click .login.ljr-panel .go":"tryLogin","submit .login.ljr-panel #login_form":"onLoginFormSubmit","click .login.ljr-panel .social-auth":"socialAuth","input .join.ljr-panel input.password-input":"onPasswordInput","keydown .join.ljr-panel input":"joinInputKey","click .join.ljr-panel .go":"createAccount","click .join.ljr-panel .social-auth":"socialAuth","click .join.ljr-panel label .checkmark":"changeCheckboxState","keyup .join.ljr-panel input.for-validate":"validateForm","click .recover.ljr-panel .go":"sendRecoverRequest","click .recover.ljr-panel .go-back":"backFromRecover","input .reset.ljr-panel input":"onPasswordInput","click .reset.ljr-panel .go":"resetPassword","click .login-popup-wrapper":"closeOutsideClick",touchstart:"onTouchStart",touchmove:"onTouchMove"},ERROR_MESSAGES:{invalid_email:"Not a valid email",min:"At least 8 characters long",letters:"Password must include letters",oneOf:"The same as email",password_dont_match:"Passwords don't match"},defaultErrorMessageHTML:'An error has occured. Please contact our support: <a href="mailto:'.concat(u.c.SUPPORT_MAIL,'">').concat(u.c.SUPPORT_MAIL,"</a>."),initialize:function(t){s.a.bindAll(this),s.a.extend(this,t),s.a.extend(this.ERROR_MESSAGES,this.errorMessages),this.template=y["template-common-login"],this.template_button_preloader=y["template-common-login-preloader"],this.logged=!1,this.animationSpeed=0,this.disableAnimations||s.a.delay(s.a.bind((function(){this.animationSpeed=300}),this),100),this.enableCors(),Object(o.a)(window).on("message",this.processLoginMessages)},render:function(){this.setElement(this.$node||Object(o.a)(this.template({})).appendTo(this.$container)),this.disableScrollWatcher=!!this.$node,this.setElement(this.$el),this.rendered=!0,this.$nameInput=this.$(".join.ljr-panel .fullname-input"),this.$emailInput=this.$(".join.ljr-panel .email-input"),this.$pswInput=this.$(".join.ljr-panel .password-input"),this.$termsCheckbox=this.$(".join.ljr-panel .terms-checkbox"),this.$joinButton=this.$(".join.ljr-panel .go");var t=p.default.queryUrlGetParam("email");t&&this.$(".email-input").val(t)},showError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultErrorMessageHTML;this.$(".join.ljr-panel .error").html(t)},clearErrors:function(){this.$(".join.ljr-panel .error").html("")},link:function(t){if(t.stopPropagation(),2!==t.which&&!t.metaKey&&!t.ctrlKey){var e=Object(o.a)(t.currentTarget).attr("href");if(!e)return!1;if(!this.useNavigate)return/login/i.test(e)&&this.switchTo("login"),/join/i.test(e)&&this.switchTo("join"),/recover/i.test(e)&&this.switchTo("recover"),!1;this.router.navigate(e,{trigger:!0}),t.preventDefault()}},closePopup:function(){Object(o.a)("#homepage-main-project__root-link")&&Object(o.a)("#homepage-main-project__root-link")[0]&&Object(o.a)("#homepage-main-project__root-link")[0].click()},changeCheckboxState:function(t){var e=Object(o.a)(t.target).siblings("input[type='checkbox']");e.is(":checked")?e.prop("checked",!1):e.prop("checked",!0),Object(o.a)(t.target).toggleClass("checked"),Object(o.a)(t.target).parent().siblings("p").toggleClass("checked"),this.validateForm(),t.preventDefault()},validateForm:function(){""!==this.$nameInput.val()&&this.$pswInput.is(":valid")&&this.$emailInput.is(":valid")&&this.$termsCheckbox.is(":checked")?this.$joinButton.addClass("active"):this.$joinButton.removeClass("active")},closeOutsideClick:function(t){b.a.isDesktop&&Object(o.a)(t.target).hasClass("login-popup-wrapper")&&this.closePopup()},show:function(t){this.shown||(Object(o.a)("body").addClass("disable-scroll"),this.urlToBack=t,0===this.animationSpeed&&this.$el.flashClass("no-animation",15),this.$el.removeClass("hidden"),this.trigger("shown"),this.shown=!0,Object(o.a)("body").on("keyup",this.onBodyKeyUp),this.onResize())},hide:function(t){this.shown&&(this.$el.addClass("hidden"),s.a.delay((function(){Object(o.a)("body").removeClass("disable-scroll")}),this.animationSpeed),this.trigger("hidden",t),this.shown=!1,Object(o.a)("body").off("keyup",this.onBodyKeyUp),this.onResize())},onBodyKeyUp:function(t){27===t.keyCode&&this.closePopup()},switchTo:function(t){var e=this.$(".ljr-panel."+t),a=window.matchMedia("(max-width: 768px)").matches,r=e.siblings(".ljr-panel"),o=("recover"===t||"login"===t)&&".dop-container-join"===this.$el.selector&&a;"recover"===t&&this.$(".recover.ljr-panel .email-input").val(this.$(".login.ljr-panel .email-input").val()),e.removeClass("hidden"),b.a.isDesktop&&setTimeout((function(){e.find("input").eq(0).focus()}),0),this.disableAnimations?(r.addClass("hidden"),o&&RM.viewerRouter.mag.onResize()):s.a.delay((function(){r.addClass("hidden"),o&&RM.viewerRouter.mag.onResize()}),this.animationSpeed/4),this.onResize()},onResize:function(){Object(o.a)(window).width()<=768&&this.$(".login").hasClass("hidden")&&this.$(".login-popup-wrapper").css("height",652),Object(o.a)(window).width()<=768&&this.$(".join").hasClass("hidden")&&this.$(".login-popup-wrapper").css("height",466)},showButtonPreloader:function(t){var e,a,r,i=t.width(),n=t.height();e=Object(o.a)(this.template_button_preloader()),t.append(e),t.css({color:"transparent","background-image":"none"}),t.addClass("processing"),a=e.width(),r=e.height(),e.css({left:Math.floor((i-a)/2),top:Math.floor((n-r)/2)})},hideButtonPreloader:function(t){t.find(".rmpreloader").remove(),t.css({color:"","background-image":""}),t.removeClass("processing")},loginInputKey:function(t){13===t.keyCode&&this.tryLogin()},tryLogin:function(){var t=this,e=o.a.trim(this.$(".login.ljr-panel .email-input").val()),a=this.$(".login.ljr-panel .password-input").val(),r=this.$(".login.ljr-panel .go"),i=p.default.queryUrlGetParam("redirect");r.hasClass("processing")||""!==e&&""!==a&&(this.showButtonPreloader(r),this.requestLogin(e,a,(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Please check that you have entered your login and password correctly.";if(e&&e.redirect)return window.location.href=e.redirect;if(e){if(i)return window.location.href=u.c.readymag_auth_host+i;if(t.logged=!0,p.default.saveJoinData("native"),t.createMagParams)return t.redirectAfterJoin(e.uri);var o=Modernizr.sessionstorage&&window.sessionStorage.getItem("rm.loginReturnUrl",window.location.pathname);Modernizr.sessionstorage&&window.sessionStorage.removeItem("rm.loginReturnUrl"),t.$('.login.ljr-panel #login_form input[name="url"]').val(u.c.readymag_auth_host+(o||"/"+e.uri)),t.$(".login.ljr-panel #login_form").submit()}else t.hideButtonPreloader(r),clearTimeout(t.wrongTimeout),t.$(".login.ljr-panel").addClass("wrong-login"),t.$(".login.ljr-panel .error").html(a),t.wrongTimeout=setTimeout(s.a.bind((function(){this.$(".login.ljr-panel").removeClass("wrong-login")}),t),3500),t.isdesktop||t.$el.scrollTop(9999)})))},requestLogin:function(t,e,a){var r,i=this,n={pass:l()(e)};return n[t.match(/@/)?"email":"uri"]=t,this.clearErrors(),r=u.c.readymag_auth_host+"/api/user/?timestamp="+(new Date).getTime(),o.a.post(r,n,(function(t){a&&a(t)})).error((function(t){a&&a(null,404===t.status?void 0:i.defaultErrorMessageHTML)})),!1},onLoginFormSubmit:function(){return this.logged},showErrors:function(t){clearTimeout(this.wrongTimeout),this.$(".join.ljr-panel").addClass("wrong-join"),this.showError(Array.isArray(t)?t.join(" <br/>"):t),this.wrongTimeout=setTimeout(s.a.bind((function(){this.$(".join.ljr-panel").removeClass("wrong-join")}),this),2e3)},redirectHandler:function(t,e,a){if(t)return window.location.href=t,!0;this.redirectAfterJoin(e.uri,a)},createAccount:function(){var t=this;if(!this.$(".join.ljr-panel input").hasClass("err")&&this.$joinButton.hasClass("active")){var e,a,r,i,n={email:this.$emailInput.val(),name:o.a.trim(this.$(".join.ljr-panel .fullname-input").val()),pass:this.$pswInput.val(),page:window.location.pathname,subscribe:this.$(".join.ljr-panel .subscribe-checkbox").is(":checked")},c=this.$joinButton,d=p.default.queryUrlGetParam("redirect");if(this.clearErrors(),!c.hasClass("processing")&&""!==n.name&&""!==n.email&&""!==n.pass){p.default.isValidEmail(n.email)||(e=!0,r=n.email,this.$emailInput.prop("type","text").addClass("err").val(this.ERROR_MESSAGES.invalid_email));var h=this.getPasswordErrors(n.pass,[n.email]);if(h.length&&(a=!0,i=n.pass,this.$pswInput.prop("type","text").addClass("err").val(this.ERROR_MESSAGES[h[0]])),(e||a)&&(clearTimeout(this.showErrorTimeout),this.showErrorTimeout=setTimeout(s.a.bind((function(){e&&this.$emailInput.removeClass("err").prop("type","email").val(r),a&&this.$pswInput.removeClass("err").prop("type","password").val(i)}),this),3e3)),!e&&!a){this.showButtonPreloader(c),this.router.analytics.sendEvent("Join","General"),n.pass=l()(n.pass);var g=u.c.readymag_auth_host+"/api/register";o.a.ajax({type:"POST",data:n,url:g,success:function(e){p.default.saveJoinData("native"),t.redirectHandler(d,e,c)},error:function(e){var a;t.hideButtonPreloader(c),403===e.status?a="User with email ".concat(n.email," already exists. Forgot your password?"):406===e.status&&(a="Name must not contain links."),t.showError(a)}})}}}},joinInputKey:function(t){13===t.keyCode&&this.createAccount()},sendRecoverRequest:function(){var t=this.$(".recover.ljr-panel .email-input").val(),e=this.$(".recover.ljr-panel .go");e.hasClass("processing")||p.default.isValidEmail(t)&&(this.showButtonPreloader(e),this.requestRecover(t,s.a.bind((function(t){this.hideButtonPreloader(e),this.$(".recover.ljr-panel").addClass("request-sended")}),this)))},requestRecover:function(t,e){var a;this.clearErrors(),a=u.c.readymag_auth_host+"/api/recoverypass",o.a.post(a,{email:t},e).error((function(t){404===t.status?e&&e():this.showError()}))},backFromRecover:function(){this.useNavigate?this.router.navigate("login/",{trigger:!0}):this.switchTo("login")},resetPassword:function(){var t=this,e=o.a.trim(this.$(".reset.ljr-panel .new-password-input").val()),a=o.a.trim(this.$(".reset.ljr-panel .verify-password-input").val()),r=window.ServerData.recover,i=[],n=this.$(".reset.ljr-panel .go");if(!n.hasClass("processing")&&""!==e&&""!==a){if(e!==a&&i.push(this.ERROR_MESSAGES.password_dont_match),this.getPasswordErrors(e).forEach((function(e){return i.push(t.ERROR_MESSAGES[e])})),i.length)return clearTimeout(this.wrongTimeout),this.$(".reset.ljr-panel").addClass("wrong-reset"),this.$(".reset.ljr-panel .error").html(i.join(" <br/>")),void(this.wrongTimeout=setTimeout(s.a.bind((function(){this.$(".reset.ljr-panel").removeClass("wrong-reset")}),this),2e3));r&&r.recover_code&&r.email&&(this.showButtonPreloader(n),o.a.ajax({type:"POST",data:{email:r.email,pass:l()(e),code:r.recover_code},url:u.c.readymag_auth_host+"/api/changepass",success:function(){window.location.href="/login/"},error:s.a.bind((function(){this.hideButtonPreloader(n),this.showError()}),this)}))}},onPasswordInput:function(t){var e=Object(o.a)(t.currentTarget);p.default.filterNonAscii(e)&&(e.addClass("error-input"),s.a.defer(s.a.bind((function(){e.removeClass("error-input")}),this)))},socialAuth:function(t){var e=this;this.$button=Object(o.a)(t.currentTarget);var a=this.$button.attr("data-provider"),r=u.c.readymag_auth_host+"/api/auth/"+a;if(!this.$button.hasClass("processing")){this.showButtonPreloader(this.$button),this.$button.closest(".join.ljr-panel").length&&this.router.analytics&&this.router.analytics.sendEvent("Join","General ".concat(a));var i=screen.width,n=screen.height,s=Math.min(1e3,i),c=Math.min(700,n-40),l=Math.ceil((i-s)/2),p=Math.ceil((n-c)/2);this.socialAuthWindow=window.open(r,"_blank",["toolbar=no","location="+(window.opera?"no":"yes"),"directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no","width="+s,"height="+c,"top="+p,"left="+l].join()),this.authInProgress=!0,this.popupCheckInterval=setInterval((function(){e.socialAuthWindow&&!e.socialAuthWindow.closed||(e.authInProgress=!1,clearInterval(e.popupCheckInterval),e.hideButtonPreloader(e.$button))}),100)}},handleSocialAuthResult:function(t){var e,a=this;if(this.authInProgress=!1,!t||t.error||!t.user||!t.user.uri)return this.hideButtonPreloader(this.$button),t.error&&(this.$el.scrollTop(this.$el[0].scrollHeight-this.$el.outerHeight()),this.showErrors(["Something went wrong"]),clearTimeout(this.showSocialErrorTimeout),this.showSocialErrorTimeout=setTimeout((function(){a.clearErrors()}),4e3)),void(t.user&&t.user.name&&(this.switchTo("join"),this.$(".join.ljr-panel .fullname-input").val(t.user.name),this.$(".join.ljr-panel .email-input").focus()));if(t.user.createdViaFacebook&&(e="facebook"),t.user.createdViaGoogle&&(e="google"),e)p.default.saveJoinData(e),this.redirectAfterJoin(t.user.uri,this.$button);else{var r=p.default.queryUrlGetParam("redirect");if(r)return window.location.href=u.c.readymag_auth_host+r;window.location.href=u.c.readymag_auth_host+"/"+t.user.uri}},processLoginMessages:function(t){if(this.authInProgress){var e=t.originalEvent||{};if(e.origin===u.c.readymag_auth_host){var a=JSON.parse(decodeURIComponent(e.data));a&&"social-auth"===a.event&&(clearInterval(this.popupCheckInterval),this.socialAuthWindow&&this.socialAuthWindow.close(),this.handleSocialAuthResult(a.message))}}},redirectAfterJoin:function(t){var e=s.a.isFunction(this.joinCallback)?500:0;s.a.isFunction(this.joinCallback)&&this.joinCallback();var a=p.default.queryUrlGetParam("redirect");if(a)return window.location.href=u.c.readymag_auth_host+a;setTimeout(s.a.bind((function(){var e=u.c.readymag_auth_host+"/"+t+"/";if(!b.a.isDesktop||Modernizr.msie||Modernizr.msie11)window.location.href=e;else{var a=Modernizr.sessionstorage&&window.sessionStorage.getItem("rm.loginReturnUrl",window.location.pathname);if(Modernizr.sessionstorage&&window.sessionStorage.removeItem("rm.loginReturnUrl"),a)return window.location.href=u.c.readymag_auth_host+a;var r=this.createMagParams,o=r&&r.templateID,i=r&&r.tp?r.tp+"-join-form":"join-form";new v.default({router:this.router,me:{permissions:{can_create_mag:!0},uri:t},tp:i,templateID:o,noCreateRequestTracking:r&&r.noCreateRequestTracking,error:s.a.bind((function(){this.hideButtonPreloader(this.$button)}),this)})}}),this),e)},enableCors:function(){o.a.ajaxPrefilter((function(t,e,a){-1!==t.url.indexOf(u.c.readymag_auth_host)&&(t.xhrFields={withCredentials:!0})}))},onTouchStart:function(t){this.disableScrollWatcher||(this.scrollY=t.originalEvent.touches.item(0).clientY)},onTouchMove:function(t){if(!this.disableScrollWatcher){var e=Object(o.a)(t.currentTarget),a=this.scrollY-t.originalEvent.touches.item(0).clientY;(a<0&&e.scrollTop()<=0||a>0&&e.scrollTop()+e.height()>=e[0].scrollHeight)&&t.preventDefault(),this.scrollY=t.originalEvent.touches.item(0).clientY}},destroy:function(){this.hide(),Object(o.a)(window).off("message",this.processLoginMessages),setTimeout(s.a.bind((function(){this.$el.remove()}),this),400)},getPasswordErrors:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return t.length<8&&a.push("min"),e.includes(t)&&a.push("oneOf"),/[a-zA-Z]+/.test(t)||a.push("letters"),a}}));e.default=w},YqYG:function(t,e,a){"use strict";a.r(e);var r=a("xi34"),o=a("q1z7"),i=a.n(o),n=a("rFsW"),s=a("AIVH");function c(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n\t<%\n\t\tvar categories = {\n\t\t\t'type-duplicate':\t\t\t\t'category-upgrade',\n\t\t\t'type-create':\t\t\t\t\t'category-upgrade',\n\t\t\t'type-export-pdf':\t\t\t\t'category-upgrade',\n\t\t\t'type-export-code':\t\t\t\t'category-upgrade',\n\t\t\t'type-more-pages':\t\t\t\t'category-upgrade',\n\t\t\t'type-upload-fonts':\t\t\t'category-upgrade',\n\t\t\t'type-custom-seo':\t\t\t\t'category-upgrade',\n\t\t\t'type-custom-sharing':\t\t\t'category-upgrade',\n\t\t\t'type-code-injection':\t\t\t'category-upgrade',\n\t\t\t'type-widget-shots':\t\t\t'category-upgrade',\n\t\t\t'type-publish-noemail':\t\t\t'category-confirm-email',\n\t\t\t'type-publish-limit':\t\t\t'category-upgrade',\n\t\t\t'type-publish-ecommerce':\t\t\t'category-upgrade',\n\t\t\t'type-switch-desktop-create':\t'category-mobile',\n\t\t\t'type-switch-desktop-continue':\t'category-mobile',\n\t\t\t'type-browsers':\t\t\t\t'category-browsers',\n\t\t\t'type-browsers-viewer':\t\t\t\t'category-browsers',\n\t\t\t'type-shared-failed':\t\t\t'category-shared-failed',\n\t\t\t'type-shared-unlock-page':\t\t'category-shared-unlock-page',\n\t\t};\n\n\t\tvar headers = {\n\t\t\t'category-upgrade':\t\t\t'',\n\t\t\t'category-upgrade-skip':\t'Push the Limits',\n\t\t\t'category-browsers':\t\t'Browser Support',\n\t\t\t'category-shared-failed':\t'Sorry, something<br/>went wrong.',\n\t\t\t'category-confirm-email':\t'Account Activation',\n\t\t};\n\n\t\tvar texts = {\n\t\t\t'type-duplicate':\t\t\t\t'To duplicate this project you need to upgrade your account. You can find out more about our subscription plans <a href=\"/pricing\" class=\"learn-more\">here</a>.',\n\t\t\t'type-create':\t\t\t\t\t'To create more projects you need to upgrade your account. You can find out more about our subscription plans <a href=\"/pricing\" class=\"learn-more\">here</a>.',\n\t\t\t'type-publish-noemail':\t\t\t'Please verify your email address<br />to publish this project.',\n\t\t\t'type-publish-limit':\t\t\t'Please upgrade your account<br />to publish more than one project.',\n\t\t\t'type-publish-ecommerce': 'Please upgrade your account<br />to publish project with ecommerce.',\n\t\t\t'type-export-pdf':\t\t\t\t'Please upgrade your account<br/>to export the project to PDF.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-export-code':\t\t\t\t'Please upgrade your account<br/>in order to export the source<br/>code of your projects.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-more-pages':\t\t\t\t'Please upgrade your account<br/>to create more pages.<br><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-custom-seo':\t\t\t\t'Please upgrade your account<br/> to customize SEO parameters.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-custom-sharing':\t\t\t'Please upgrade your account<br/>to customize social sharing info.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-code-injection':\t\t\t'Please upgrade your account to<br/>make custom code work after<br/>you publish the project.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-widget-shots':\t\t\t'Please upgrade your account to<br/>make Shots widget work after<br/>you publish the project.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-browsers':\t\t\t\t'Sorry, our Editor doesn’t support Internet Explorer. This may change in the future, but for now please use Chrome, Firefox or Safari.',\n\t\t\t'type-browsers-viewer':\t\t\t'This site can't be displayed in Internet Explorer. Please switch to <a href=\"https://support.apple.com/en-jo/HT204416\">Safari</a>, <a href=\"https://www.google.com/chrome/\">Google Chrome</a>, <a href=\"https://www.mozilla.org/en-US/firefox/new/\">Firefox</a>, or <a href=\"https://www.microsoft.com/en-us/windows/microsoft-edge\">Microsoft Edge</a>.',\n\t\t\t'type-switch-desktop-create':\t'To create a project, please use your laptop or desktop computer.',\n\t\t\t'type-switch-desktop-continue':\t'To continue, please use your laptop or desktop computer.',\n\t\t\t'type-shared-failed':\t\t\t'Please contact <a href=\"mailto:support@readymag.com\" class=\"learn-more\">support</a>.',\n\t\t\t'type-upload-fonts':\t\t\t'Please upgrade your account<br/>to upload your own fonts.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t};\n\n\t\tvar buttons = {\n\t\t\t'category-upgrade':\t\t\t\t'<a href=\"/settings#change-plan\" class=\"button main upgrade\">Upgrade</a><div class=\"cancel-wrapper\">or ' + (['type-code-injection', 'type-widget-shots'].includes(opts.type) ? '<span class=\"button cancel\" data-type=\"skip\">Skip</span>' : '<span class=\"button cancel\">Cancel</span>') + '</div>',\n\t\t\t'category-browsers':\t\t\t'<div class=\"button main ok\">Okay</div>',\n\t\t\t'category-mobile':\t\t\t\t'<div class=\"button main ok\">Okay</div>',\n\t\t\t'category-shared-failed':\t\t'<div class=\"button close\">Close</div>',\n\t\t\t'category-shared-unlock-page':\t'<div class=\"button ok\">Ok</div>',\n\t\t\t'category-confirm-email':\t\t'<div  class=\"button main resend\">Resend</div><div class=\"cancel-wrapper\">or <span class=\"button cancel\">Cancel</span></div>',\n\t\t};\n\n\t\tvar category = categories[opts.type]\n\t\tvar header = headers[category]\n\t\tvar text = texts[opts.type] || opts.text\n\t\tvar button = buttons[category]\n\n\t\tif (opts.is_contributor) {\n\t\t\ttext = 'Please upgrade owner’s account<br/>to be able to use this feature.'\n\t\t\tbutton = '<a href=\"mailto:' + opts.owner_email + '\" class=\"contact-link\">Contact owner</a><div class=\"cancel-wrapper\">' + (['type-code-injection', 'type-widget-shots'].includes(opts.type) ? 'or <span class=\"button cancel\" data-type=\"skip\">Skip</span>' : '<span class=\"button cancel\">Cancel</span>') + '</div>'\n\t\t}\n\n\t%>\n\n\t<div class=\"alert-popup <%=category%>\">\n\t\t<div class=\"panel-wrapper\">\n\t\t\t<div class=\"center-table\">\n\t\t\t\t<div class=\"center-cell\">\n\t\t\t\t\t<div class=\"panel\">\n\n\t\t\t\t\t\t<%=(header ? '<div class=\"header\">' + header + '</div>' : '')%>\n\n\t\t\t\t\t\t<div class=\"icon\" <%=(opts.icon ? 'style=\"background-image:url(' + opts.icon + ')\"' : \"\")%>><div class=\"icon-inner\"></div></div>\n\n\t\t\t\t\t\t<%=(text ? '<div class=\"text\">' + text + '</div>' : '')%>\n\n\t\t\t\t\t\t<%=(opts.type == 'type-browsers-viewer' ? '<div class=\"icon additional\"></div>' : '')%>\n\n\t\t\t\t\t\t<%=(button ? '<div class=\"buttons\">' + button + '</div>' : '')%>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n"],["\n\t<%\n\t\tvar categories = {\n\t\t\t'type-duplicate':\t\t\t\t'category-upgrade',\n\t\t\t'type-create':\t\t\t\t\t'category-upgrade',\n\t\t\t'type-export-pdf':\t\t\t\t'category-upgrade',\n\t\t\t'type-export-code':\t\t\t\t'category-upgrade',\n\t\t\t'type-more-pages':\t\t\t\t'category-upgrade',\n\t\t\t'type-upload-fonts':\t\t\t'category-upgrade',\n\t\t\t'type-custom-seo':\t\t\t\t'category-upgrade',\n\t\t\t'type-custom-sharing':\t\t\t'category-upgrade',\n\t\t\t'type-code-injection':\t\t\t'category-upgrade',\n\t\t\t'type-widget-shots':\t\t\t'category-upgrade',\n\t\t\t'type-publish-noemail':\t\t\t'category-confirm-email',\n\t\t\t'type-publish-limit':\t\t\t'category-upgrade',\n\t\t\t'type-publish-ecommerce':\t\t\t'category-upgrade',\n\t\t\t'type-switch-desktop-create':\t'category-mobile',\n\t\t\t'type-switch-desktop-continue':\t'category-mobile',\n\t\t\t'type-browsers':\t\t\t\t'category-browsers',\n\t\t\t'type-browsers-viewer':\t\t\t\t'category-browsers',\n\t\t\t'type-shared-failed':\t\t\t'category-shared-failed',\n\t\t\t'type-shared-unlock-page':\t\t'category-shared-unlock-page',\n\t\t};\n\n\t\tvar headers = {\n\t\t\t'category-upgrade':\t\t\t'',\n\t\t\t'category-upgrade-skip':\t'Push the Limits',\n\t\t\t'category-browsers':\t\t'Browser Support',\n\t\t\t'category-shared-failed':\t'Sorry, something<br/>went wrong.',\n\t\t\t'category-confirm-email':\t'Account Activation',\n\t\t};\n\n\t\tvar texts = {\n\t\t\t'type-duplicate':\t\t\t\t'To duplicate this project you need to upgrade your account. You can find out more about our subscription plans <a href=\"/pricing\" class=\"learn-more\">here</a>.',\n\t\t\t'type-create':\t\t\t\t\t'To create more projects you need to upgrade your account. You can find out more about our subscription plans <a href=\"/pricing\" class=\"learn-more\">here</a>.',\n\t\t\t'type-publish-noemail':\t\t\t'Please verify your email address<br />to publish this project.',\n\t\t\t'type-publish-limit':\t\t\t'Please upgrade your account<br />to publish more than one project.',\n\t\t\t'type-publish-ecommerce': 'Please upgrade your account<br />to publish project with ecommerce.',\n\t\t\t'type-export-pdf':\t\t\t\t'Please upgrade your account<br/>to export the project to PDF.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-export-code':\t\t\t\t'Please upgrade your account<br/>in order to export the source<br/>code of your projects.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-more-pages':\t\t\t\t'Please upgrade your account<br/>to create more pages.<br><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-custom-seo':\t\t\t\t'Please upgrade your account<br/> to customize SEO parameters.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-custom-sharing':\t\t\t'Please upgrade your account<br/>to customize social sharing info.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-code-injection':\t\t\t'Please upgrade your account to<br/>make custom code work after<br/>you publish the project.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-widget-shots':\t\t\t'Please upgrade your account to<br/>make Shots widget work after<br/>you publish the project.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-browsers':\t\t\t\t'Sorry, our Editor doesn’t support Internet Explorer. This may change in the future, but for now please use Chrome, Firefox or Safari.',\n\t\t\t'type-browsers-viewer':\t\t\t'This site can\\'t be displayed in Internet Explorer. Please switch to <a href=\"https://support.apple.com/en-jo/HT204416\">Safari</a>, <a href=\"https://www.google.com/chrome/\">Google Chrome</a>, <a href=\"https://www.mozilla.org/en-US/firefox/new/\">Firefox</a>, or <a href=\"https://www.microsoft.com/en-us/windows/microsoft-edge\">Microsoft Edge</a>.',\n\t\t\t'type-switch-desktop-create':\t'To create a project, please use your laptop or desktop computer.',\n\t\t\t'type-switch-desktop-continue':\t'To continue, please use your laptop or desktop computer.',\n\t\t\t'type-shared-failed':\t\t\t'Please contact <a href=\"mailto:support@readymag.com\" class=\"learn-more\">support</a>.',\n\t\t\t'type-upload-fonts':\t\t\t'Please upgrade your account<br/>to upload your own fonts.<br/><a href=\"/pricing\" class=\"learn-more\">See the pricing</a>.',\n\t\t};\n\n\t\tvar buttons = {\n\t\t\t'category-upgrade':\t\t\t\t'<a href=\"/settings#change-plan\" class=\"button main upgrade\">Upgrade</a><div class=\"cancel-wrapper\">or ' + (['type-code-injection', 'type-widget-shots'].includes(opts.type) ? '<span class=\"button cancel\" data-type=\"skip\">Skip</span>' : '<span class=\"button cancel\">Cancel</span>') + '</div>',\n\t\t\t'category-browsers':\t\t\t'<div class=\"button main ok\">Okay</div>',\n\t\t\t'category-mobile':\t\t\t\t'<div class=\"button main ok\">Okay</div>',\n\t\t\t'category-shared-failed':\t\t'<div class=\"button close\">Close</div>',\n\t\t\t'category-shared-unlock-page':\t'<div class=\"button ok\">Ok</div>',\n\t\t\t'category-confirm-email':\t\t'<div  class=\"button main resend\">Resend</div><div class=\"cancel-wrapper\">or <span class=\"button cancel\">Cancel</span></div>',\n\t\t};\n\n\t\tvar category = categories[opts.type]\n\t\tvar header = headers[category]\n\t\tvar text = texts[opts.type] || opts.text\n\t\tvar button = buttons[category]\n\n\t\tif (opts.is_contributor) {\n\t\t\ttext = 'Please upgrade owner’s account<br/>to be able to use this feature.'\n\t\t\tbutton = '<a href=\"mailto:' + opts.owner_email + '\" class=\"contact-link\">Contact owner</a><div class=\"cancel-wrapper\">' + (['type-code-injection', 'type-widget-shots'].includes(opts.type) ? 'or <span class=\"button cancel\" data-type=\"skip\">Skip</span>' : '<span class=\"button cancel\">Cancel</span>') + '</div>'\n\t\t}\n\n\t%>\n\n\t<div class=\"alert-popup <%=category%>\">\n\t\t<div class=\"panel-wrapper\">\n\t\t\t<div class=\"center-table\">\n\t\t\t\t<div class=\"center-cell\">\n\t\t\t\t\t<div class=\"panel\">\n\n\t\t\t\t\t\t<%=(header ? '<div class=\"header\">' + header + '</div>' : '')%>\n\n\t\t\t\t\t\t<div class=\"icon\" <%=(opts.icon ? 'style=\"background-image:url(' + opts.icon + ')\"' : \"\")%>><div class=\"icon-inner\"></div></div>\n\n\t\t\t\t\t\t<%=(text ? '<div class=\"text\">' + text + '</div>' : '')%>\n\n\t\t\t\t\t\t<%=(opts.type == 'type-browsers-viewer' ? '<div class=\"icon additional\"></div>' : '')%>\n\n\t\t\t\t\t\t<%=(button ? '<div class=\"buttons\">' + button + '</div>' : '')%>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n"]);return c=function(){return t},t}var l,p,u,d=(l={},p="template-common-alert",u=Object(s.a)(c()),p in l?Object.defineProperty(l,p,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[p]=u,l),h=i.a.View.extend({template:d["template-common-alert"],events:{"click .button":"onButtonClick",click:"hideOnBgClick","click .button.upgrade":"upgrade","click .button.cancel":"hide","click .button.close":"hide","click .button.ok":"hide","click .contact-link":"hide","click .button.resend":"resendConfirmationEmail"},initialize:function(t){n.a.bindAll(this),n.a.extend(this,t),this.opts=this.opts||{},this.router=this.router||RM.homepageRouter||RM.collectorRouter||RM.constructorRouter,this.router&&this.router.analytics&&this.router.analytics.sendEvent("Alert Show",{label:this.alert_source,_alert_source:this.alert_source})},render:function(){this.setElement(Object(r.a)(this.template({opts:this.opts}))),this.$parent&&(this.$parent instanceof Element&&(this.$parent=Object(r.a)(this.$parent)),this.$parent.append(this.$el).addClass("visible")),n.a.delay(n.a.bind((function(){this.$el.addClass("show")}),this),50),Object(r.a)("body").on("keyup",this.onBodyKeyUp),RM.common.disableShortcuts.alert=!0},hide:function(){delete RM.common.disableShortcuts.alert,Object(r.a)("body").off("keyup",this.onBodyKeyUp),this.$el.removeClass("show").addClass("hide"),n.a.delay(n.a.bind((function(){this.remove(),this.$parent&&this.$parent.removeClass("visible")}),this),400),this.trigger("hide",{lastButtonClicked:this.lastButtonClicked})},upgrade:function(t){Modernizr.sessionstorage&&window.sessionStorage.setItem("rm.accountUpgradeReturnUrl",window.location.pathname),this.router&&this.router.analytics&&this.router.analytics.sendEvent("Alert Upgrade",{label:this.alert_source,_alert_source:this.alert_source}),2==t.which||t.metaKey||t.ctrlKey||this.router&&this.router==RM.collectorRouter&&(this.hide(),this.router.navigate("/settings#change-plan",{trigger:!0}),t.preventDefault())},onBodyKeyUp:function(t){27==t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.hide())},hideOnBgClick:function(t){Object(r.a)(t.target).closest(".panel").length||this.hide()},resendConfirmationEmail:function(){r.a.get("/api/user/confirm/resend"),this.hide()},onButtonClick:function(t){var e=Object(r.a)(t.currentTarget).attr("data-type");this.lastButtonClicked=e}});e.default=h}}]);