(window.webpackJsonp=window.webpackJsonp||[]).push([[4,8,11,12,14,15,16,17,18,19,20,21],{"+FcJ":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("q1tI"),r=i.n(n).a.createContext({model:{pageScale:1,pageContentTop:0,magContainerHeight:0,widgetBoxTop:0,isStarted:!1,canBeUsed:!0,isSelected:!1}})},"1cLU":function(t,e,i){"use strict";var n=i("vOnD"),r=i("q1tI"),o=i.n(r),a=i("lU33"),s=i("8AXF"),c=i("f3SV"),l=i("za5s"),h=i("5BzK"),d=i("0w1S"),u=i.n(d),p=i("wOk9");function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var m,g,b=(m=p.breakpoints,g=1,function(t){if(Array.isArray(t))return t}(m)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(m,g)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(t,e):void 0}}(m,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],v=Object(n.default)(u.a).withConfig({displayName:"RmFooter___StyledText"})(["display:inline-block;text-decoration:none;font-style:normal;&:hover{color:",";}"],(function(t){return t._css})),w=function(t){var e=t.label,i=t.url,n=t.showComma,r=t.isMobile;return(o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{as:"a",fontFamily:"Graphik",color:"darkGray",fontWeight:400,fontSize:12,letterSpacing:-.04,lineHeight:r?"1":"24px",href:i,_css:Object(l.themeGet)("colors.orange")},e),n&&o.a.createElement(u.a,{fontFamily:"Graphik",color:"darkGray",fontWeight:400,fontSize:12,letterSpacing:-.04,lineHeight:r?"1":"24px"},","," ")))},y=Object(n.default)(u.a).withConfig({displayName:"RmFooter___StyledText2"})(["font-style:normal;"]),_=Object(n.default)(h.Box).withConfig({displayName:"RmFooter___StyledBox"})(["",""],(function(t){return t._css2})),x=Object(n.default)(u.a).withConfig({displayName:"RmFooter___StyledText3"})(["display:inline-block;text-decoration:none;font-style:normal;&:hover{color:",";}"],(function(t){return t._css3})),S=function(t){var e=t.items,i=t.width,n=t.title,r=t.isMobile;return(o.a.createElement(h.Box,{width:i},o.a.createElement(h.Box,{borderBottom:"1px solid rgba(128, 128, 128, 0.24)",pb:"6px",mb:"16px"},o.a.createElement(y,{fontFamily:"Graphik",fontWeight:400,fontSize:16,letterSpacing:-.04,lineHeight:"24px",color:"darkGray"},n)),o.a.createElement(_,{_css2:e.length>1&&!r?"display: flex; align-items: flex-start; justify-content: space-between;":""},e.map((function(t,i){return o.a.createElement(h.Box,{key:"ul-".concat(i),mb:r&&t.mobileSeparator?36:void 0},t.items.map((function(t,n){return o.a.createElement(h.Box,{mr:e.length-1!==i||r?void 0:30,key:"ul-".concat(i,"-li-").concat(n)},o.a.createElement(x,{as:"a",href:t.url,color:"white",fontFamily:"Graphik",fontWeight:400,fontSize:16,letterSpacing:-.04,lineHeight:"24px",_css3:Object(l.themeGet)("colors.orange")},t.label))})))})))))},O=Object(n.default)(h.Box).withConfig({displayName:"RmFooter___StyledBox2"})([""," ",""],(function(t){return t._css4}),(function(t){return t._css5})),C=Object(n.default)(h.Flex).withConfig({displayName:"RmFooter___StyledFlex"})(["",""],(function(t){return t._css6})),k=Object(n.default)(h.Flex).withConfig({displayName:"RmFooter___StyledFlex2"})(["",""],(function(t){return t._css7}));e.a=function(){var t=c.c.readymag_host,e=Object(r.useContext)(s.BackboneContext).model;return o.a.createElement(a.default,{query:"(min-width: ".concat(b,")")},(function(i){var n=e&&e.isMobileViewport||!i;return(o.a.createElement(O,{bg:"rgb(40, 40, 40)",height:"100%",width:"100%",_css4:e&&e.transform?"padding: 0 !important; transform: ".concat(e.transform,";"):"",_css5:e&&e.zoom?"zoom: ".concat(e.zoom,";"):""},o.a.createElement(h.Box,{m:"0 auto",width:n?"100%":1024,height:"100%",p:"58px 20px 16px"},o.a.createElement(C,{alignItems:"flex-start",justifyContent:"space-between",mb:n?76:38,_css6:n?"display: block":""},o.a.createElement(S,{title:"Company",isMobile:n,width:n?"100%":230,items:[{mobileSeparator:!0,items:[{label:"About",url:"".concat(t,"/about/")},{label:"R/masters",url:"".concat(t,"/examples/r-masters")}]}]}),o.a.createElement(S,{title:"News",isMobile:n,width:n?"100%":482,items:[{mobileSeparator:!0,items:[{label:"Product updates",url:"".concat(t,"/readymag/product-updates/")},{label:"Subscribe to newsletter",url:"http://subscribe.readymag.com/"},{label:"Medium",url:"https://medium.com/@readymag"}]},{mobileSeparator:!1,items:[{label:"Facebook",url:"https://www.facebook.com/readymag"},{label:"Twitter",url:"https://twitter.com/readymag"},{label:"Are.na",url:"https://www.are.na/readymag"}]},{mobileSeparator:!0,items:[{label:"Dribbble",url:"https://dribbble.com/readymag"},{label:"Instagram",url:"https://www.instagram.com/readymag/"},{label:"Pinterest",url:"https://www.pinterest.ru/readymagpins/boards/"}]}]}),o.a.createElement(S,{title:"Support",isMobile:n,width:n?"100%":230,items:[{items:[{label:"Templates",url:"".concat(t,"/templates")},{label:"Help",url:"https://help.readymag.com/"},{label:"support@readymag.com",url:"mailto:support@readymag.com"}]}]})),o.a.createElement(k,{alignItems:"flex-start",_css7:n?"display: block;":""},o.a.createElement(h.Box,{width:n?"100%":252},o.a.createElement(u.a,{fontFamily:"Graphik",color:"darkGray",fontWeight:400,fontSize:12,letterSpacing:-.04,lineHeight:n?"1":"24px"},"Â© ",(new Date).getFullYear()," Readymag Inc.")),o.a.createElement(h.Box,{width:n?"100%":""},o.a.createElement(w,{label:"Terms of service",url:"".concat(t,"/readymag/terms-and-privacy/"),showComma:!0,isMobile:n}),o.a.createElement(w,{label:"Privacy policy",url:"".concat(t,"/readymag/terms-and-privacy/2/"),isMobile:n}))))))}))}},"3uGt":function(t,e,i){"use strict";var n=i("vOnD"),r=i("q1tI"),o=i.n(r),a=i("xi34"),s=i("za5s"),c=i("lU33"),l=i("T6+y"),h=i.n(l),d=i("OTSC"),u=i("f3SV"),p=function(t){var e=t.activeLink,i=t.size;return(o.a.createElement("svg",{width:"80",height:"80",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 80 80",preserveAspectRatio:"xMidYMid meet",style:{height:"".concat(i,"px"),width:"".concat(i,"px")}},o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("circle",{fill:e?"#000000":"#ec520b",fillRule:"nonzero",cx:"40",cy:"40",r:"40"}),o.a.createElement("path",{d:"M57.746 59.179v-6.216c0-1.24-.678-1.863-1.801-1.863-1.334 0-2.433.99-2.48 2.191v5.88h-2.254v-6.215c0-1.24-.678-1.864-1.801-1.864-1.334 0-2.433.99-2.48 2.191v5.88h-2.254v-9.717h2.028l.226.827.11.101.108-.101c.453-.624 1.576-1.037 2.48-1.037 1.622 0 2.792.64 3.385 1.653l.561-.624c.562-.624 1.692-1.037 2.59-1.037 2.48 0 3.836 1.45 3.836 3.517v6.418h-2.254v.016zM23.442 28.913h-.414v6.707h-2.215V20h5.381c2.418 0 4.539 1.606 4.539 4.383 0 2.674-2.262 4.382-4.68 4.382l4.976 6.418v.43h-2.526l-5.061-6.7zm2.877-2.214c1.217 0 2.332-.85 2.332-2.23s-1.115-2.23-2.332-2.23h-3.244v4.46h3.244z",stroke:"#FFF",strokeWidth:".2",fill:"#FFF"}),o.a.createElement("path",{d:"M20.116 58.672l38.23-38.23 1.213 1.211-38.23 38.23-1.213-1.211z",stroke:"#FFF",strokeWidth:".6",fill:"#FFF"}))))},f=i("8AXF"),m=i("I0kf"),g=i("wOk9"),b=i("0w1S"),v=i.n(b),w=i("3wuR"),y=i.n(w),_=i("5BzK");function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return S(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var O=x(g.breakpoints,1)[0],C=u.c.readymag_host,k=u.c.readymag_auth_host,T=Object(n.default)(_.Box).withConfig({displayName:"HeaderMobile___StyledBox"})(["display:block;text-decoration:none;pointer-events:",";"],(function(t){return t._css})),I=Object(n.default)(v.a).withConfig({displayName:"HeaderMobile___StyledText"})(["&:hover{color:",";}"],(function(t){return t._css2})),E=function(t){var e=t.label,i=t.url,n=t.active,r=t.onClick;return(o.a.createElement(T,{as:"a",onClick:r,mb:40,href:i,_css:n?"none":"all"},o.a.createElement(I,{lineHeight:"1",letterSpacing:"-2.4px",fontFamily:"Graphik",fontWeight:400,fontSize:32,color:n?"tomato":"#000",_css2:Object(s.themeGet)("colors.tomato")},e)))},j=Object(n.default)(_.Box).withConfig({displayName:"HeaderMobile___StyledBox2"})([".constructor:not(.preview) &{display:none !important;}"]),R=Object(n.default)(_.Flex).withConfig({displayName:"HeaderMobile___StyledFlex"})(["transform:translateX(",");transition:transform 0.3s ease-in-out;overflow:scroll;-webkit-overflow-scrolling:touch;"],(function(t){return t._css3})),M=function(t){var e=t.activeLink,i=t.isAuthorized,n=x(Object(r.useState)(!1),2),a=n[0],s=n[1];return o.a.createElement(c.default,{query:"(min-width: ".concat(O,")")},(function(t){return t?o.a.createElement(o.a.Fragment,null):o.a.createElement(j,null,o.a.createElement(_.Box,{position:"fixed",top:"0",right:"0",m:"6px 6px",zIndex:99999999},o.a.createElement(_.Box,{as:"button",width:48,height:48,bg:"#fff",borderRadius:"50%",border:"none",p:"0",display:"inline-block",onClick:function(){return s(!a)}},o.a.createElement(_.Flex,{justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},o.a.createElement(y.a,null)))),o.a.createElement(R,{alignItems:"center",width:"100vw",height:"100vh",position:"fixed",zIndex:9999999,top:"0",left:"0",bg:"#fff",_css3:a?"0":"100%"},o.a.createElement(_.Box,{width:"100%",p:"68px 20px"},o.a.createElement(E,{label:"Features",url:"".concat(C,"/features"),active:e===P.features}),o.a.createElement(E,{label:"Pricing",url:"".concat(C,"/pricing"),active:e===P.pricing}),o.a.createElement(E,{label:"Examples",url:"".concat(C,"/examples"),active:e===P.examples||e===P.explore}),o.a.createElement(E,{label:"Learn",url:"".concat(C,"/learn"),active:e===P.learn}),i?o.a.createElement(E,{label:"Log out",url:"".concat(k,"/logout")}):o.a.createElement(E,{label:"Join or Log in",url:Object(m.a)("authorization.newFlow")?"".concat(C,"/auth/join"):"".concat(C,"/join"),onClick:function(t){if(!Object(m.a)("authorization.newFlow"))return!0;t.preventDefault(),d.default.saveJoinData();var e=t.currentTarget;window.location.href=e.href}}))))}))};function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return A(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}i.d(e,"b",(function(){return z})),i.d(e,"a",(function(){return P}));var P,z=o.a.createContext({}),L=Object(n.default)(v.a).withConfig({displayName:"Header___StyledText"})(["text-decoration:none;&:hover{color:",";}.text-on-dark &{color:#fff;&:hover,&.active{color:",";}}.white-theme.scrolled &{color:#000 !important;&:hover,&.active{color:"," !important;}}"],(function(t){return t._css}),(function(t){return t._css2}),(function(t){return t._css3})),B=function(t){var e=t.label,i=t.url,n=t.active,r=t.last;return(o.a.createElement(_.Box,{mr:r?void 0:16,display:"inline-block"},o.a.createElement(L,{as:"a",href:i,fontFamily:"Graphik",fontWeight:400,fontSize:16,lineHeight:"24px",letterSpacing:"-0.1px",color:n?"tomato":"#000",onClick:function(t){window.location.href.replace(/\/$/,"")===i.replace(/\/$/,"")&&(t.preventDefault(),Object(a.a)("html").animate({scrollTop:0},300))},_css:Object(s.themeGet)("colors.tomato"),_css2:Object(s.themeGet)("colors.tomato"),_css3:Object(s.themeGet)("colors.tomato")},e)))},D=Object(n.default)(_.Box).withConfig({displayName:"Header___StyledBox"})(["display:inline-flex;outline:none;text-decoration:none;&:hover{color:#fff;background-color:",";}"],(function(t){return t._css4})),F=function(t){var e=t.label,i=t.url,n=t.onClick;return(o.a.createElement(D,{as:"a",onClick:n,bg:"rgba(244, 244, 244, 0.96)",borderRadius:200,href:i,width:100,height:40,textAlign:"center",color:"#000",alignItems:"center",justifyContent:"center",_css4:Object(s.themeGet)("colors.tomato")},o.a.createElement(v.a,{fontFamily:"Graphik",fontSize:16,fontWeight:400,letterSpacing:"-0.1px"},e)))},W=[64,96,128,192,256],H=function(t,e){var i=t.split(".").pop(),n=function(t){var e=2*t;return W.reduce((function(t,i){return e<=i&&e>t?i:t}),W[0])}(e);return t&&n?t.replace(".".concat(i),"_".concat(n,".").concat(i)):""},N=$(g.breakpoints,1)[0];!function(t){t.features="features",t.pricing="pricing",t.explore="explore",t.examples="examples",t.learn="learn"}(P||(P={}));var V=Object(n.default)(_.Flex).withConfig({displayName:"Header___StyledFlex"})(["cursor:default;"]),G=Object(n.default)(_.Cover).withConfig({displayName:"Header___StyledCover"})(["background-repeat:no-repeat;text-decoration:none;"]),U=Object(n.default)(v.a).withConfig({displayName:"Header___StyledText2"})(["text-transform:uppercase;"]),K=Object(n.default)(_.Box).withConfig({displayName:"Header___StyledBox2"})(["font-size:0;"]);e.c=function(t){var e=t.activeLink,i=u.c.readymag_host,n=u.c.readymag_auth_host,a=Object(r.useContext)(f.BackboneContext).model,s=Object(r.useContext)(z).model,l=a?a.activeLink:e,g=h()({bindTo:document&&document.getElementById("rm-header-mobile-portal")}).Portal,b=$(Object(r.useState)(!1),2),v=b[0],w=b[1],y=$(Object(r.useState)(""),2),x=y[0],S=y[1],O=$(Object(r.useState)(""),2),C=O[0],k=O[1];Object(r.useEffect)((function(){d.default.loadLoggedUser((function(t){t&&Object.keys(t).length&&(w(!0),S(t.name),t.pic&&k(H(t.pic,48)))}))}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.default,{query:"(min-width: ".concat(N,")")},(function(t){var e=s?s.isDesktop:t;return(o.a.createElement(_.Box,{position:"fixed",width:"100%",zIndex:99999},o.a.createElement(V,{height:"100%",width:"100%",alignItems:"center",justifyContent:"space-between",p:e?16:"6px 6px"},v?o.a.createElement(_.Box,{height:e?40:48,width:e?"100%":"auto",display:"inline-block"},o.a.createElement(G,{as:"a",href:n,alignItems:"center",justifyContent:"center",bg:C?"transparent":"lightGray",height:e?40:48,width:e?40:48,backgroundImage:C?"url(".concat(C,")"):void 0,borderRadius:"50%",backgroundSize:"cover",backgroundPosition:"center","aria-label":"Profile"},o.a.createElement(U,{fontWeight:400,fontSize:16,lineHeight:1.25,letterSpacing:"-0.04px",fontFamily:"Graphik"},C?"":function(){if(!x)return"";var t=$(x.split(" "),2),e=t[0],i=t[1];return i?e[0]+i[0]:e[0]}()))):o.a.createElement(_.Box,{height:e?40:48,width:"100%"},o.a.createElement(_.Box,{as:"a",href:i,height:e?40:48,display:"inline-block"},o.a.createElement(p,{size:e?40:48,activeLink:!!l}))),e&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Box,{textAlign:"center",width:"100%"},o.a.createElement(B,{label:"Features",url:"".concat(i,"/features"),active:l===P.features}),o.a.createElement(B,{label:"Pricing",url:"".concat(i,"/pricing"),active:l===P.pricing}),o.a.createElement(B,{label:"Examples",url:"".concat(i,"/examples"),active:l===P.explore||l===P.examples}),o.a.createElement(B,{label:"Learn",url:"".concat(i,"/learn"),active:l===P.learn,last:!0})),o.a.createElement(K,{textAlign:"right",width:"100%"},v?o.a.createElement(F,{label:"Log out",url:"".concat(n,"/logout")}):o.a.createElement(o.a.Fragment,null,o.a.createElement(F,{label:"Join",url:Object(m.a)("authorization.newFlow")?"".concat(i,"/auth/join"):"".concat(i,"/join"),onClick:function(t){if(!Object(m.a)("authorization.newFlow"))return!0;t.preventDefault(),d.default.saveJoinData();var e=t.currentTarget;window.location.href=e.href}}),o.a.createElement(F,{label:"Log in",url:Object(m.a)("authorization.newFlow")?"".concat(i,"/auth/login"):"".concat(i,"/login")})))))))})),o.a.createElement(g,null,o.a.createElement(M,{activeLink:l,isAuthorized:v})))}},"3wuR":function(t,e,i){"use strict";var n=i("284h"),r=i("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(i("pVnL")),a=n(i("q1tI")),s=r(i("vOnD")),c=i("za5s"),l=(0,s.default)((function(t){return a.createElement("svg",(0,o.default)({width:16,height:4,viewBox:"0 0 16 4",role:"img"},t),a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 4a2 2 0 110-4 2 2 0 010 4zm6 0a2 2 0 110-4 2 2 0 010 4zm6 0a2 2 0 110-4 2 2 0 010 4z"}))})).withConfig({displayName:"TridotIcon",componentId:"sc-14ket6q-0"})(["display:block;",";",";",";"],c.color,c.width,c.height);e.default=l},"60Nw":function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),o=i.n(r),a=i("rFsW"),s=i("8CCW"),c=i.n(s),l=i("OTSC"),h=i("f3SV"),d=i("3eHG"),u=i("WoDZ"),p=i("zWgA"),f=i.n(p);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var g={},b={findPlugin:function(t){var e=f()(t.code,t);return a.a.find(g,(function(t,i){return i.toLowerCase()===e}))}},v=o.a.View.extend({embed_type:null,containerSelector:null,resizable:!0,proportional:!1,forceFrameSize:!1,initialize:function(t){this.block=t.block,this.widget=t.widget,a.a.bindAll(this),this.isInViewer=RM.viewerRouter||RM.constructorRouter&&RM.constructorRouter.preview},parse:function(t,e){return e(t)},sanitize:function(t){return Object(n.a)(t)},draw:function(t){t()}});function w(t,e){if(t){var i=["allow-top-navigation","allow-top-navigation-by-user-activation","allow-modals","allow-popups","allow-popups-to-escape-sandbox"],n=e&&Array.isArray(e)?e.filter((function(t){return!a.a.contains(i,t.toLowerCase())})):["allow-scripts","allow-forms","allow-same-origin"];t.attr("sandbox",n.join(" "))}}b.instagramEmbedCallbacks=[],b.initInstagram=function(t){if(window.instgrm&&window.instgrm.Embeds&&a.a.isFunction(window.instgrm.Embeds.process))return instgrm.Embeds.process(),t();b.instagramEmbedCallbacks.push(t),b.instagramInitXhr&&b.instagramInitXhr.abort(),Object(n.a)('body > script[src^="//platform.instagram.com"]').remove(),b.instagramInitXhr=n.a.ajax({url:l.default.selectProtocol("//platform.instagram.com/en_US/embeds.js"),dataType:"script",cache:!0,success:function(){a.a.each(b.instagramEmbedCallbacks,(function(t){a.a.isFunction(t)&&t()}))}})},g.Instagram=v.extend({embed_type:"instagram",containerSelector:"iframe",resizable:!0,initialize:function(t){v.prototype.initialize.apply(this,arguments),this.block&&a.a.extend(this.block.frame,{minwidth:164,minheight:264})},parse:function(t,e){return e(t.replace(/<script.*script>/i,""))},draw:function(t,e,i){var n,r,o,a,s,c=0,l=!1;e.html(t),b.initInstagram(function(){s=setInterval(function(){if(c++,n=e.children(this.containerSelector),(r=n.height())||c>20){if(r||c>50)return r&&"constructor"===RM.common.mode&&(o=n.width(),a=n.height()),clearInterval(s),void i(o,a);if(l)return;l=!0,i()}}.bind(this),100)}.bind(this))},customResizeHandler:function(t,e,i){return t}}),b.pinterestEmbedCallbacks=[],b.initPinterest=function(t){var e,i=0;if(a.a.isFunction(window.parsePinBtns))return t();b.pinterestEmbedCallbacks.push(t),Object(n.a)('body > script[src^="assets.pinterest.com/js/pinit.js"]').remove(),Object(n.a)("body").prepend(Object(n.a)('<script defer src="//assets.pinterest.com/js/pinit.js" data-pin-build="parsePinBtns"><\/script>')),e=setInterval((function(){i++,(a.a.isFunction(window.parsePinBtns)||i>20)&&(clearInterval(e),t())}),100)},g.Pinterest=v.extend({embed_type:"pinterest",containerSelector:"a",resizable:!1,forceFrameSize:!0,containerSelectors:{buttonPin:"span",buttonFollow:"span",embedPin:"span",embedUser:"span",embedBoard:"span"},parse:function(t,e){var i=t.match(/data-pin-do=\"(\S+)\"/);return a.a.isArray(i)&&i[1]&&(this.pinterestType=i[1],this.containerSelector=this.containerSelectors[this.pinterestType]||this.containerSelector),e&&e(t.replace(/<script.*script>/i,""))},draw:function(t,e,i){b.initPinterest(function(){var n,r,o,a,s,c,l=0,h=!1;e.html(t),this.pinterestType||this.parse(t[0].outerHTML),this.pinterestType&&e.addClass(this.pinterestType),window.parsePinBtns(e.get(0)),s=setInterval(function(){if(l++,n=e.children(this.containerSelector).filter((function(){return/PIN_\d+/.test(this.className)})),(r=n.height())||l>20){if(r||l>50)return r&&"constructor"===RM.common.mode&&(o=n.outerWidth(!0),a=n.outerHeight(!0),"buttonFollow"==this.pinterestType&&(c=n.children("i")).length&&(o+=(c.outerWidth()||1)-1)),clearInterval(s),void i(o,a);if(h)return;h=!0,i()}}.bind(this),100)}.bind(this))}}),g.FacebookVideo=v.extend({embed_type:"fbvideo",containerSelector:"iframe",resizable:!0,proportional:!0,forceFrameSize:!0,initialize:function(t){v.prototype.initialize.apply(this,arguments),this.block&&a.a.extend(this.block.frame,{minwidth:220,minheight:124})},parse:function(t,e){return e(t.replace(/<script.*script>/gi,"").replace(/<div\s+id=(\'|\")fb-root(\'|\")><\/div>/gi,""))},draw:function(t,e,i){var n,r,o;e.html(t),d.a.initFacebookAPI(function(){window.FB.XFBML.parse(e.get(0),function(){n=e.find(this.containerSelector),r=n.width(),o=n.height(),i(r,o)}.bind(this))}.bind(this))}}),b.readymagEmbedCallbacks=[],b.initReadymag=function(t){if(RM.common.isReadymagEmbedInited&&a.a.isFunction(window.RM_EMBED_parse))return t();b.readymagEmbedCallbacks.push(t),window.RM_EMBED_initAsync=function(){RM.common.isReadymagEmbedInited=!0,a.a.each(b.readymagEmbedCallbacks,(function(t,e){a.a.isFunction(t)&&t()})),b.readymagEmbedCallbacks=[]},b.readymagInitXhr||(Object(n.a)('body > script[src~="RM_EMBED_"]').remove(),b.readymagInitXhr=n.a.ajax({url:h.c.EMBED_SCRIPT_MAIN,dataType:"script"}))},g.Readymag=v.extend({embed_type:"readymag",containerSelector:"iframe",resizable:!0,initialize:function(t){v.prototype.initialize.apply(this,arguments),this.block&&this.block.frame&&a.a.extend(this.block.frame,{minwidth:288,minheight:236,maxwidth:512,maxheight:383})},parse:function(t,e){return e(t.replace(/<script.*script>/i,""))},draw:function(t,e,i){e.html(t),b.initReadymag(function(){window.RM_EMBED_parse(function(){var t=e.find(this.containerSelector),n=t.width(),r=t.height();i(n+2,r)}.bind(this))}.bind(this))}}),g.IFrame=v.extend({embed_type:"simple-iframe",containerSelector:"iframe",resizable:!0,parse:function(t,e){var i;return(i=t.match(/[\s\S]*?(\<iframe[\s\S]*?\>)[\s\S]*?(\<\/iframe\>)[\s\S]*?/i))&&i[1]&&i[2]?e(i[1]+i[2]):e(null)},sanitize:function(t){var e=Object(n.a)(t);if("object"!==m(e)||!e.length)return e;var i,r=Object(n.a)("<iframe></iframe>"),o=e.get(0).attributes,s=["allowtransparency","allowfullscreen","height","name","sandbox","scrolling","seamless","src","width","allow"];return Object(a.a)(o).each((function(t){if("object"===m(t)&&t.specified&&a.a.contains(s,t.name.toLowerCase())){var e=t.name.toLowerCase(),n=t.value;"src"==e&&"https:"==window.location.protocol&&(n=n.replace(/^http(s?):\/\//i,"//")),"sandbox"===e&&(i=n.split(" ")),r.attr(e,n)}})),this.isInViewer||w(r,i),r},draw:function(t,e,i){var n=t[0].src;if(n&&n.trim())if(RM.screenshot&&u.a.getVideoProvider(n))this.setPosterInsteadOfVideo(n,e,i);else{e.html(t);var r,o,a,s,c,l=0,h=!1;c=setInterval(function(){if(l++,r=e.children(this.containerSelector),(o=r.height())||l>20){if(o||l>50)return o&&"constructor"===RM.common.mode&&(a=r.width(),s=r.height()),clearInterval(c),void i(a,s);if(h)return;h=!0,i()}}.bind(this),100)}else i()},setPosterInsteadOfVideo:function(t,e,i){var r=u.a.getVideoProvider(t),o=Object(n.a)("<img/>");u.a.getEmbedData(t,(function(t){u.a.getHighResVideoThumbnail({provider:r,thumbnail_url:t.thumbnail_url}).then(a.a.bind((function(t){!function(t){o[0].src=t,e.css({"background-color":"#000"}),o.css({position:"absolute",top:0,bottom:0,margin:"auto",width:"100%",height:"auto"}),e.append(o)}(t)}),this))}),(function(){"function"==typeof i&&i()}))}}),g.CodeInjection=v.extend({embed_type:"code-injection",containerSelector:"rm-code-injection",resizable:!0,HEAD_PASSTHROUGH_SELECTOR:"",parse:function(t,e){return e(t)},sanitize:function(t){return n.a.parseHTML(t,document,!0)},draw:function(t,e,i){var r=Object(n.a)(document).find("head"),o="<head>",a='<body style="padding:0; margin: 0; width: 100%; height: 100%; min-width: initial; min-height: auto;">',s=r.find(this.HEAD_PASSTHROUGH_SELECTOR),l=Object(n.a)('<iframe seamless style="width: 100%; height: 100%;"></iframe>'),h=Object(n.a)("<div></div>");if(!this.isInViewer||this.block&&this.block.model.get("use_iframe")||this.widget&&this.widget.use_iframe){this.isInViewer||w(l),s.each((function(){o+=this.outerHTML})),o+='<script src="https://unpkg.com/jquery@2.2.3/dist/jquery.min.js"><\/script>',o+="</head>",h.html(t),a+=h[0].innerHTML+"</body>";var d='<!DOCTYPE html><html style="width: 100%; height: 100%; min-width: initial; min-height: auto;">'+o+a+"</html>";return e.html(l),l[0].contentWindow.document.open(),l[0].contentWindow.document.write(d),l[0].contentWindow.document.close(),i(l.width(),l.height())}t=Object(n.a)(t),h.html(t),h.find("script").each((function(){var t;this.src&&this.text&&((t=document.createElement("script")).text=this.text,this.text="",Object(n.a)(t).insertAfter(Object(n.a)(this)))})),c()(e,h[0].innerHTML,{done:function(){return i(null,null)}}),e.css({"font-family":"initial","font-weight":"initial"})},loadNodeWithScripts:function(t,e,i){var r,o=Object(n.a)('<div id="fake"></div>'),s=[];o.html(e),(r=o.find("script")).each((function(){this.src&&this.text?(s.push({src:this.src}),s.push({text:this.text})):s.push({src:this.src,text:this.text})}));var c=a.a.find(s,(function(t){return!!t.src}));if(!s.length||!c||s<2)t.html(o[0].innerHTML);else{r.remove();var l=0;t.html(o[0].innerHTML),function e(){var n,r,o,a=s[l];if(!a)return i();l++,n=document.createElement("script"),a.src&&(n.src=a.src);a.text&&(n.text=a.text);if(!a.src)return t[0].appendChild(n),e();a.src&&(n.onload=function(){clearInterval(r),e()},o=0,r=setInterval((function(){++o>10&&(n.onload=null,e())}),1e3),t[0].appendChild(n))}()}}}),g.Ecommerce=g.CodeInjection.extend({embed_type:"ecommerce"}),g.Gdpr=g.CodeInjection.extend({embed_type:"gdpr"}),g.Video=g.CodeInjection.extend({embed_type:"html5-video"}),e.a=b},"98k/":function(t,e,i){"use strict";i.r(e);var n=i("ROz4"),r=i("rFsW"),o=i("60Nw"),a=n.a.extend({render:function(){this.makeBox("widget-iframe"),this.rendered=!0;var t=this.getPluginClass();return t?(this.plugin=new t({widget:this}),this.$el.addClass(this.plugin.embed_type),this.started?this.drawPlugin():(this.contentCleared=!0,!RM.screenshot&&!this.drawInProgress&&this.widgetIsLoaded()),this):(this.widgetIsLoaded(),this)},drawPlugin:function(){this.$el.empty(),this.contentCleared=!1,this.drawInProgress=!0,this.plugin.parse(this.code,function(t){if(this.$data=this.plugin.sanitize(t),RM.screenshot&&setTimeout(r.a.bind((function(){this.widgetIsLoaded()}),this),5e3),this.plugin.draw(this.$data,this.$el,function(t,e){var i=RM.screenshot?5e3:2e3;this.loadTimeout=setTimeout(function(){this.drawInProgress=!1,this.destroyed||(this.widgetIsLoaded(),this.$data.off&&this.$data.off("load"),this.started||this.clearContent())}.bind(this),i)}.bind(this)),!RM.screenshot){if(!r.a.isFunction(this.$data.one))return;this.$data.one("load",function(){this.drawInProgress=!1,!this.destroyed&&this.started&&(this.widgetIsLoaded(),clearTimeout(this.loadTimeout))}.bind(this))}}.bind(this))},widgetIsLoaded:function(){this.loaded||this.destroyed||(this.loaded=!0,this.trigger("loaded"))},isValid:function(){return this.code&&this.getPluginClass()},start:function(){return this.started=!0,this.destroyed||!this.rendered||this.contentCleared&&this.drawPlugin(),this},stop:function(){return this.started=!1,this.plugin?(this.widgetIsLoaded(),this.drawInProgress?void 0:(this.clearContent(),this)):this},clearContent:function(){this.clear_content&&(this.$el.empty(),this.contentCleared=!0)},getPluginClass:function(){return o.a.findPlugin(this)},destroy:function(){return this.clearContent(),this.plugin&&this.plugin.remove(),n.a.prototype.destroy.apply(this,arguments)}});e.default=a},A0Lk:function(t,e,i){!function(){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function i(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+e+";"}function r(t){var e=t.a.offsetWidth,i=e+100;return t.f.style.width=i+"px",t.c.scrollLeft=i,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function o(t,i){function n(){var t=o;r(t)&&t.a.parentNode&&i(t.g)}var o=t;e(t.b,n),e(t.c,n),r(t)}function a(t,e){var i=e||{};this.family=t,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var s=null,c=null,l=null,h=null;function d(){return null===h&&(h=!!document.fonts),h}function u(){if(null===l){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}l=""!==t.style.font}return l}function p(t,e){return[t.style,t.weight,u()?t.stretch:"","100px",e].join(" ")}a.prototype.load=function(t,e){var r=this,a=t||"BESbswy",l=0,h=e||3e3,u=(new Date).getTime();return new Promise((function(t,e){if(d()&&!function(){if(null===c)if(d()&&/Apple/.test(window.navigator.vendor)){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);c=!!t&&603>parseInt(t[1],10)}else c=!1;return c}()){var f=new Promise((function(t,e){!function i(){(new Date).getTime()-u>=h?e(Error(h+"ms timeout exceeded")):document.fonts.load(p(r,'"'+r.family+'"'),a).then((function(e){1<=e.length?t():setTimeout(i,25)}),e)}()})),m=new Promise((function(t,e){l=setTimeout((function(){e(Error(h+"ms timeout exceeded"))}),h)}));Promise.race([m,f]).then((function(){clearTimeout(l),t(r)}),e)}else!function(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e),t()})):document.attachEvent("onreadystatechange",(function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())}))}((function(){function c(){var e;(e=-1!=g&&-1!=b||-1!=g&&-1!=v||-1!=b&&-1!=v)&&((e=g!=b&&g!=v&&b!=v)||(null===s&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=s&&(g==w&&b==w&&v==w||g==y&&b==y&&v==y||g==_&&b==_&&v==_)),e=!e),e&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(l),t(r))}var d=new i(a),f=new i(a),m=new i(a),g=-1,b=-1,v=-1,w=-1,y=-1,_=-1,x=document.createElement("div");x.dir="ltr",n(d,p(r,"sans-serif")),n(f,p(r,"serif")),n(m,p(r,"monospace")),x.appendChild(d.a),x.appendChild(f.a),x.appendChild(m.a),document.body.appendChild(x),w=d.a.offsetWidth,y=f.a.offsetWidth,_=m.a.offsetWidth,function t(){if((new Date).getTime()-u>=h)x.parentNode&&x.parentNode.removeChild(x),e(Error(h+"ms timeout exceeded"));else{var i=document.hidden;!0!==i&&void 0!==i||(g=d.a.offsetWidth,b=f.a.offsetWidth,v=m.a.offsetWidth,c()),l=setTimeout(t,50)}}(),o(d,(function(t){g=t,c()})),n(d,p(r,'"'+r.family+'",sans-serif')),o(f,(function(t){b=t,c()})),n(f,p(r,'"'+r.family+'",serif')),o(m,(function(t){v=t,c()})),n(m,p(r,'"'+r.family+'",monospace'))}))}))},t.exports=a}()},ARm2:function(t,e,i){"use strict";i.r(e);var n=i("rFsW"),r=i("ROz4"),o=i("3eHG"),a=i("qHzu"),s=r.a.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,initialize:function(){return r.a.prototype.initialize.apply(this,arguments),"type_like_box"===this.current_type&&(this.current_type="type_page",this.type_page=this.type_like_box),this},render:function(){return this.makeBox("widget-facebook"),this.rendered=!0,this.started?this.start():!RM.screenshot&&this.widgetIsLoaded(),this},start:function(){if(this.started=!0,this.destroyed||!this.rendered||this.innerRendered)return this;this.innerRendered=!0;var t,e,i=this;return this.current_type?((e=this[this.current_type]).w=this.w,e.h=this.h,"mag"===e.use_own_url?e.url=this.page.mag.getUrl():"page"!==e.use_own_url&&e.url||(e.url=this.page.getUrl()),t=a.a["template-constructor-block-facebook-"+this.current_type],this.$el.html(t({data:e})).removeClass(["type_like_button","type_page","type_comments"].join(" ")).addClass(this.current_type),"type_comments"===this.current_type?this.$el.css({"overflow-x":"hidden","overflow-y":"auto"}):"type_like_button"!==this.current_type&&this.$el.css({overflow:"hidden"}),o.a.initFacebookAPI((function(){!i.destroyed&&i.innerRendered&&window.FB.XFBML.parse(i.$el.get(0),(function(){n.a.delay((function(){!i.destroyed&&i.innerRendered&&(i.widgetIsLoaded(),"type_like_button"===i.current_type&&(i.iframe_w=i.$("iframe").width(),i.iframe_h=i.$("iframe").height()))}),500)}))})),this):(this.widgetIsLoaded(),this)},stop:function(){return this.started=!1,this}});e.default=s},"B/vB":function(t,e,i){"use strict";i.r(e);var n=i("q1z7"),r=i.n(n),o=i("xi34"),a=i("i8i4"),s=i.n(a),c=i("ROz4"),l=i("LazK"),h=i("8AXF"),d=c.a.extend({ignoreScale:!0,render:function(){this.makeBox("widget-rm-header"),this.$header=Object(o.a)("<div>").appendTo(this.$el).get(0);var t=new r.a.Model({activeLink:this.activeLink});return Object(h.renderReact)({component:l.a,domElement:this.$header,model:t}),this.rendered=!0,this.widgetIsLoaded(),this},destroy:function(){return s.a.unmountComponentAtNode(this.$header),c.a.prototype.destroy.apply(this,arguments)}});e.default=d},FKU0:function(t,e,i){"use strict";i.r(e);var n=i("ROz4"),r=i("q1tI"),o=i.n(r),a=i("q1z7"),s=i.n(a),c=i("8AXF"),l=i("+FcJ"),h=i("fEUr");function d(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function g(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function b(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function a(t){g(o,n,r,a,s,"next",t)}function s(t){g(o,n,r,a,s,"throw",t)}a(void 0)}))}}var v,w,y,_=n.a.extend({triggerWidgets:[],initialize:function(t){this.model=new s.a.Model(t),n.a.prototype.initialize.apply(this,arguments)},render:(y=b(regeneratorRuntime.mark((function t(){var e,n,r,a,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.basePath&&this.numberOfImages){t.next=2;break}return t.abrupt("return");case 2:return this.makeBox("widget-shots"),t.next=5,Promise.resolve().then(i.bind(null,"8AXF"));case 5:return e=t.sent,n=e.renderReact,t.next=9,Promise.all([i.e(25),i.e(29)]).then(i.bind(null,"3TY3"));case 9:return r=t.sent,a=r.Shots,this.stateModel=new s.a.Model(this.getCurrentState()),n({component:function(){return o.a.createElement(c.CreateContextProvider,{context:l.a,model:h.stateModel},o.a.createElement(a,{mode:window.RM.screenshot?"screenshoter":"viewer",onFirstRender:h.onFirstRender,onFirstFrameLoaded:h.widgetIsLoaded}))},domElement:this.el,model:this.model}),t.abrupt("return",this);case 15:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)}),getCurrentState:function(){return{pageScale:this.page.scale,pageContentTop:this.page.contentPosition.top,magContainerHeight:this.page.mag.getContainerSizeCached().height,widgetBoxTop:this.calcBoxStyle({calcBBox:!0}).dimensions.top}},getViewerType:function(){return this.page.mag&&this.page.mag.viewOpts&&this.page.mag.viewOpts.viewertype||"vertical"},onFirstRender:function(){var t;(this.rendered=!0,this._scheduleStart&&this.start(),this.playbackType===h.b.scroll)&&(t=this.isAbove()&&"vertical"===this.getViewerType()?this.page.mag.getScroll():this.page.getScroll(),this.handleScroll(t))},handleScroll:function(t){this.rendered&&this.stateModel.set(f(f({},this.getCurrentState()),{},{currentScrollOffset:t}))},handlePointerMovement:function(t){if(this.rendered){"touches"in t&&"horizontal"===this.getViewerType()&&this.hoverDirection===h.a.horizontally&&t.stopPropagation();var e="touches"in t?t.touches[0].clientX:t.clientX,i="touches"in t?t.touches[0].clientY:t.clientY,n=t.target;if(n){var r=n.getBoundingClientRect(),o=Modernizr.firefox?1:this.page.scale,a=e/o-r.left,s=i/o-r.top;this.hoverDirection===h.a.horizontally?this.stateModel.set({hoverPercent:a/r.width}):this.hoverDirection===h.a.vertically&&this.stateModel.set({hoverPercent:s/r.height})}}},getTriggerWidgets:(w=b(regeneratorRuntime.mark((function t(){var e,i,n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],i=d(this.triggers),t.prev=2,r=regeneratorRuntime.mark((function t(){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.value,r=void 0,t.prev=2,t.next=5,o.page.mag.getWidgetById(i,o.page);case 5:r=t.sent,t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(2),t.abrupt("return","continue");case 11:if(r){t.next=13;break}return t.abrupt("return","continue");case 13:if(!r.rendered){t.next=17;break}e.push(r),t.next=20;break;case 17:return t.next=19,new Promise((function(t){return o.listenToOnce(r,"rendered",t)}));case 19:e.push(r);case 20:case"end":return t.stop()}}),t,null,[[2,8]])})),i.s();case 5:if((n=i.n()).done){t.next=12;break}return t.delegateYield(r(),"t0",7);case 7:if("continue"!==t.t0){t.next=10;break}return t.abrupt("continue",10);case 10:t.next=5;break;case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(2),i.e(t.t1);case 17:return t.prev=17,i.f(),t.finish(17);case 20:return e.length||e.push(this),t.abrupt("return",e);case 22:case"end":return t.stop()}}),t,this,[[2,14,17,20]])}))),function(){return w.apply(this,arguments)}),bindTriggers:(v=b(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTriggerWidgets();case 2:this.triggerWidgets=t.sent,this.triggerWidgets.forEach((function(t){t.el instanceof HTMLElement&&(t.el.addEventListener("mousemove",e.handlePointerMovement),t.el.addEventListener("touchmove",e.handlePointerMovement))}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)}),unbindTriggers:function(){var t=this;this.triggerWidgets.forEach((function(e){e.el instanceof HTMLElement&&(e.el.removeEventListener("mousemove",t.handlePointerMovement),e.el.removeEventListener("touchmove",t.handlePointerMovement))}))},start:function(){for(var t=this,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];n.a.prototype.start.apply(this,i),this.rendered?(this.playbackType===h.b.scroll?this.isAbove()&&"vertical"===this.getViewerType()?this.listenTo(this.page.mag,"mag scroll",this.handleScroll):this.listenTo(this.page,"page scroll",this.handleScroll):this.playbackType===h.b.hover&&this.bindTriggers(),setTimeout((function(){t.stateModel.set({isStarted:!0})}),1)):this._scheduleStart=!0},stop:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.a.prototype.stop.apply(this,e),this.rendered&&(this.stopListening(),this.unbindTriggers(),this.stateModel.set({isStarted:!1}))},destroy:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.a.prototype.destroy.apply(this,e)}});e.default=_},JZqd:function(t,e,i){"use strict";var n,r=i("AIVH");function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(){var t=c(['\n\n    <div class="hotspot-fullscreen-wrapper invisible">\n        <div class="center-table">\n            <div class="center-cell">\n\n            </div>\n        </div>\n    </div>\n\n']);return a=function(){return t},t}function s(){var t=c(['\n\n    <div class="common-hotspot">\n\n\t    <div class="pin"></div>\n\n    </div>\n\n']);return s=function(){return t},t}function c(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}e.a=(o(n={},"template-common-hotspot-widget",Object(r.a)(s())),o(n,"template-common-hotspot-widget-mobile-wrapper",Object(r.a)(a())),n)},LazK:function(t,e,i){"use strict";var n=i("3uGt");i.d(e,"a",(function(){return n.c}))},RO0k:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("rFsW"),o=i("ROz4"),a=i("3eHG"),s=i("pFlR"),c=o.a.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,render:function(){this.makeBox("widget-gmaps"),this.$el.html(Object(n.a)('<div class="map-container"></div>')),this.rendered=!0;var t=this.api_key;return this.mag&&this.mag.opts&&this.mag.opts.gmaps_key&&this.mag.opts.gmaps_key!==this.api_key&&(t=this.mag.opts.gmaps_key),a.a.initGMapsAPI(t,function(){this.destroyed||r.a.defer(function(){this.destroyed||(s.a.isOn(this.page.pageViewport,this.mag.getViewportWidth(this.page.pageViewport),this.mag.opts)&&this.scale(),this.map=new google.maps.Map(this.$(".map-container").get(0),{zoom:this.map_zoom,center:new google.maps.LatLng(this.center_lat,this.center_lng),mapTypeId:this.map_type_id||google.maps.MapTypeId.ROADMAP,disableDefaultUI:!this.show_controls,streetViewControl:!1,scrollwheel:void 0===this.scrollwheel||!!this.scrollwheel}),this.marker_lat&&this.marker_lng&&"directions"!==this.current_type&&(this.marker=new google.maps.Marker({map:this.map,position:new google.maps.LatLng(this.marker_lat,this.marker_lng)}),google.maps.event.addListener(this.marker,"click",function(){this.infowindow&&this.infowindow.open(this.map,this.marker)}.bind(this)),this.infowindow=new google.maps.InfoWindow({maxWidth:this.w-100}),this.formatted_address?this.infowindow.setContent(this.formatted_address):(new google.maps.Geocoder).geocode({latLng:new google.maps.LatLng(this.marker_lat,this.marker_lng)},function(t,e){e===google.maps.GeocoderStatus.OK&&t[0]&&this.infowindow.setContent(t[0].formatted_address)}.bind(this))),"directions"===this.current_type&&this.direction_start_lat&&this.direction_start_lng&&this.direction_end_lat&&this.direction_end_lng&&this.direction_route_type?(this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer({preserveViewport:!0}),this.directionsService.route({origin:new google.maps.LatLng(this.direction_start_lat,this.direction_start_lng),destination:new google.maps.LatLng(this.direction_end_lat,this.direction_end_lng),travelMode:google.maps.TravelMode[this.direction_route_type.toUpperCase()]},function(t,e){e===google.maps.DirectionsStatus.OK&&(this.directionsDisplay.setDirections(t),this.directionsDisplay.setMap(this.map),google.maps.event.addListener(this.map,"tilesloaded",function(){this.widgetIsLoaded()}.bind(this)))}.bind(this))):google.maps.event.addListener(this.map,"tilesloaded",function(){this.widgetIsLoaded()}.bind(this)),"custom"===this.current_type&&this.custom_json&&this.map.setOptions({styles:JSON.parse(this.custom_json)}))}.bind(this))}.bind(this)),this},scale:function(){var t=this.mag.getScale(this.page.pageViewport),e=this.$(".map-container");if(s.a.isCSSZoom())e.css("zoom",1/t);else if(s.a.isCSSTransform()){var i=100*t,n=(i-100)/2;e.css({transform:"scale("+1/t+") translate(-"+n+"%, -"+n+"%)",width:i+"%",height:i+"%"})}},start:function(){return this.started=!0,this.rendered&&!this.destroyed&&this.map?(google.maps.event.trigger(this.map,"resize"),this.map.setCenter(new google.maps.LatLng(this.center_lat,this.center_lng)),this):this},destroy:function(){return this.map&&google.maps.event.clearListeners(this.map,"tilesloaded"),this.marker&&google.maps.event.clearListeners(this.marker,"click"),o.a.prototype.destroy.apply(this,arguments)}});e.default=c},"T6+y":function(t,e,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__rest||function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i("q1tI"),s=i("i8i4"),c=o(i("gHsK"));e.errorMessage1="You must either add a `ref` to the element you are interacting with or pass an `event` to openPortal(e) or togglePortal(e).",e.default=function(t){void 0===t&&(t={});var i=t.closeOnOutsideClick,o=void 0===i||i,l=t.closeOnEsc,h=void 0===l||l,d=t.bindTo,u=t.isOpen,p=void 0!==u&&u,f=t.onOpen,m=t.onClose,g=t.onPortalClick,b=r(t,["closeOnOutsideClick","closeOnEsc","bindTo","isOpen","onOpen","onClose","onPortalClick"]),v=c.default(),w=v.isServer,y=v.isBrowser,_=a.useState(p),x=_[0],S=_[1],O=a.useRef(x),C=a.useCallback((function(t){O.current=t,S(t)}),[]),k=a.useRef(),T=a.useRef(y?document.createElement("div"):null);a.useEffect((function(){y&&!T.current&&(T.current=document.createElement("div"))}),[y,T]);var I=a.useMemo((function(){if(!w)return d&&s.findDOMNode(d)||document.body}),[w,d]),E=function(t){if(!t)return{portal:T,targetEl:k,event:t};var e=t||{};e.persist&&e.persist(),e.portal=T,e.targetEl=k,e.event=t;var i=t.currentTarget;return!k.current&&i&&i!==document&&(k.current=e.currentTarget),e},j=Object.entries(b).reduce((function(t,e){var i=e[0],n=e[1];return t[i]=function(t){w||n(E(t))},t}),{}),R=a.useCallback((function(t){if(!w){var i=E(t);if(null==k.current)throw setTimeout((function(){return C(!0)}),0),Error(e.errorMessage1);f&&f(i),C(!0)}}),[w,T,C,k,f]),M=a.useCallback((function(t){if(!w){var e=E(t);m&&O.current&&m(e),O.current&&C(!1)}}),[w,m,C]),$=a.useCallback((function(t){return O.current?M(t):R(t)}),[M,R]),A=a.useCallback((function(t){return"Escape"===t.key&&h?M(t):void 0}),[h,M]),P=a.useCallback((function(t){var e=function(e){return e.current.contains(t.target)};e(T)||0!==t.button||!O.current||e(k)||o&&M(t)}),[w,M,o,T]),z=a.useCallback((function(t){if(!w&&T.current instanceof HTMLElement){var e=E(t);T.current.contains(e.target)&&g&&g(e),P(t)}}),[P]),L=a.useRef({});a.useEffect((function(){if(!w&&I instanceof HTMLElement&&T.current instanceof HTMLElement){var t={onScroll:"scroll",onWheel:"wheel"},e=T.current;return I.appendChild(T.current),Object.entries(t).forEach((function(t){var e=t[0],i=t[1];b[e]&&(L.current[e]=function(t){return b[e](E(t))},document.addEventListener(i,L.current[e]))})),document.addEventListener("keydown",A),document.addEventListener("mousedown",z),function(){Object.entries(t).forEach((function(t){var e=t[0],i=t[1];b[e]&&(document.removeEventListener(i,L.current[e]),delete L.current[e])})),document.removeEventListener("keydown",A),document.removeEventListener("mousedown",z),I.removeChild(e)}}}),[w,P,A,I,T]);var B=a.useCallback((function(t){var e=t.children;return null!=T.current?s.createPortal(e,T.current):null}),[T]);return Object.assign([R,M,O.current,B,$,k,T],n(n({isOpen:O.current,openPortal:R,ref:k,closePortal:M,togglePortal:$,Portal:B,portalRef:T},j),{bind:n({ref:k},j)}))}},TLUl:function(t,e,i){"use strict";i.r(e);var n=i("rFsW"),r=i("ROz4"),o=i("5ta/"),a=i("3eHG"),s=i("wS4Y"),c=r.a.extend({CONTENT_WAIT_TICK:100,CONTENT_WAIT_MAX_TICKS:20,CONTENT_IMG_WAIT:1e3,DO_NOT_WAIT_FOR_PRELOAD:!0,render:function(){var t,e;return this.makeBox("widget-twitter"),this.rendered=!0,this.current_type?("mag"===(e=this[this.current_type]).use_own_url?e.url=this.page.mag.getUrl():"page"!==e.use_own_url&&e.url||(e.url=this.page.getUrl()),RM.screenshot||(e.text=o.getFinalShare(this.page,n.a.extend(this.page.mag.model.toJSON(),{user:this.page.mag.user}),{forProject:"mag"===e.use_own_url,customDomain:RM.common.isDomainViewer}).tweet),t=s.a["template-constructor-block-twitter-"+this.current_type],this.$el.html(t(e)),"type_timeline"===this.current_type&&this.$el.find("a").attr({width:this.w,height:this.h}),a.a.initTwitterAPI(function(){this.destroyed||(window.twttr&&window.twttr.widgets&&n.a.isFunction(window.twttr.widgets.load)&&window.twttr.widgets.load(),Object(n.a)(["type_timeline","type_embed"]).contains(this.current_type)?this.waitForTwitterContent():this.widgetIsLoaded())}.bind(this)),this):(this.widgetIsLoaded(),this)},waitForTwitterContent:function(){var t,e,i,r=0,o=!1,a={type_timeline:".timeline-Widget",type_embed:"blockquote.tweet"};clearInterval(t),t=setInterval(n.a.bind((function(){r++,this.destroyed?clearInterval(t):(1==(e=this.$el.find("iframe")).length&&(i=a[this.current_type],o=e.contents().find(i).length>0),(o||r>this.CONTENT_WAIT_MAX_TICKS)&&("type_embed"==this.current_type&&e.css({margin:0,"max-width":"100%"}),"type_timeline"==this.current_type&&(console.log("$frame : ",e),e.css({width:"100%",height:"100%!important","max-width":"100%"})),clearInterval(t),setTimeout(n.a.bind((function(){this.widgetIsLoaded()}),this),this.CONTENT_IMG_WAIT)))}),this),this.CONTENT_WAIT_TICK)}});e.default=c},bJpI:function(t,e,i){"use strict";i.r(e);var n=i("ROz4"),r=i("zzMN"),o=n.a.extend({render:function(){var t=this,e=!1;if(RM.screenshot)window.ServerData.userPermissions&&window.ServerData.userPermissions.can_use_e_commerce&&(e=!0);else{var i=RM.viewerRouter?RM.viewerRouter.getUserPermissions():RM.constructorRouter.me.get("permissions");i&&i.can_use_e_commerce&&(e=!0)}if(e)return this.makeBox("widget-add-to-cart"),this.seamlessFontsShow(function(){this.$el.removeClass("fonts-pending")}.bind(this),function(){this.$el.addClass("fonts-pending")}.bind(this)),this.addToCartWidget=new r.a({data:this,environment:"viewer",$container:this.$el,eCommerceManager:this.mag.eCommerceManager}),RM.screenshot?(this.addToCartWidget.on("loaded",(function(){t.widgetIsLoaded()})),setTimeout((function(){t.widgetIsLoaded()}),1e4)):this.widgetIsLoaded(),this.addToCartWidget.render(),this.rendered=!0,this},destroy:function(){return this.addToCartWidget&&this.addToCartWidget.destroy(),this.addToCartWidget=null,n.a.prototype.destroy.apply(this,arguments)}});e.default=o},cBBe:function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),o=i.n(r),a=i("rFsW"),s=i("JZqd"),c=i("OTSC"),l=o.a.View.extend({TIP_GAP:15,initialize:function(t){t&&(a.a.bindAll(this),this.block=t.block,this.model=t.model,this.$container=t.$container,this.environment=t.environment,this.mag=t.mag,this.template=s.a["template-common-hotspot-widget"],this.render())},render:function(){this.setElement(Object(n.a)(this.template({data:this.model}))),"viewer"===this.environment&&(this.apply_tip_container_size({width:this.model.tip_w,height:this.model.tip_h}),this.apply_tip_position(this.model)),this.$el.appendTo(this.$container)},apply_tip_container_size:function(t){t&&0===t.height&&(t.height=120),t&&this.$(".tip").css(t)},apply_tip_bg_color:function(t){this.$(".blocks-wrapper").css("background-color",c.default.getRGBA(t["tip_background-color"],t["tip_background-color-opacity"]/100))},apply_tip_border_radius:function(t){this.$(".blocks-wrapper").add(this.$(".tip")).css("border-radius",t["tip_border-radius"]+"px")},apply_tip_box_shadow:function(t){this.$(".tip").toggleClass("box-shadow",!!t["tip_box-shadow"])},apply_tip_position:function(t){var e,i=this.$(".tip"),n=t.tip_pos,r=t.tip_w,o=t.tip_h||120,a=t.w,s=t.h,c="",l="",h=this.TIP_GAP;return"top"===n?(c=-(h+o),l=a/2-r/2):"right"===n?(c=s/2-o/2,l=a+h):"bottom"===n?(c=s+h,l=a/2-r/2):"left"===n&&(c=s/2-o/2,l=-(h+r)),e={top:c,left:l},i.css(e),e},destroy:function(){this.remove()}});e.a=l},fEUr:function(t,e,i){"use strict";var n,r,o;i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return o})),function(t){t.hover="hover",t.scroll="scroll"}(n||(n={})),function(t){t.horizontally="horizontally",t.vertically="vertically"}(r||(r={})),function(t){t.bottom="bottom",t.center="center",t.top="top"}(o||(o={}))},gHsK:function(t,e,i){"use strict";var n,r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Browser="browser",t.Server="server",t.Native="native"}(n=e.Device||(e.Device={}));var o=n.Browser,a=n.Server,s=n.Native,c=!("undefined"==typeof window||!window.document||!window.document.createElement),l="undefined"!=typeof navigator&&"ReactNative"==navigator.product?s:c?o:a,h={isBrowser:l===o,isServer:l===a,isNative:l===s,device:l,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:l===o&&!!window.addEventListener,canUseViewport:l===o&&!!window.screen},d=function(){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e){return r(r({},t),e)}),{})}((t=h,Object.keys(t).map((function(e){return t[e]})),h));var t},u=d();e.weAreServer=function(){h.isServer=!0,u=d()},e.useSSR=function(){return u},e.default=e.useSSR},gdoY:function(t,e,i){"use strict";i.r(e);var n=i("bJpI"),r=i("lEnl"),o=i("U/dT"),a=i("KOTZ"),s=i("yERL"),c=i("ARm2"),l=i("mrVI"),h=i("oBKw"),d=i("RO0k"),u=i("uHXJ"),p=i("98k/"),f=i("p094"),m=i("Cf19"),g=i("FJrq"),b=i("TLUl"),v=i("11zj"),w=i("B/vB"),y=i("rJ9t"),_=i("FKU0");e.default={addtocart:n.default,audio:r.default,background:o.default,button:a.default,ecommercecart:s.default,facebook:c.default,form:l.default,picture:h.default,gmaps:d.default,hotspot:u.default,iframe:p.default,shape:f.default,slideshow:m.default,text:g.default,twitter:b.default,video:v.default,rmheader:w.default,rmfooter:y.default,shots:_.default}},gm8A:function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),o=i.n(r),a=i("rFsW"),s=i("OTSC"),c=i("AIVH");function l(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\t<div class="button">\n\t\t<div class="caption"></div>\n\t\t<svg class="error" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 26"><path d="M17 19.8c-1.4 0-2.6 1.1-2.6 2.6s1.1 2.6 2.6 2.6c1.4 0 2.6-1.1 2.6-2.6S18.4 19.8 17 19.8zM19 0.4h-4L15 17.4h4L19 0.4z"/></svg>\n\t\t<div class="pending"></div>\n\t\t<svg class="show-if-empty-submitted-text" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 26"><path d="M31.4 3C30.6 2.3 29.4 2.3 28.6 3l0 0L13.1 18.6l-7.8-7.8 0 0c-0.8-0.7-2-0.7-2.7 0 -0.8 0.8-0.8 2 0 2.7l0 0L13.1 24.1l0.4-0.4h0L31.4 5.8l0 0C32.1 5 32.1 3.8 31.4 3z"/></svg>\n\t</div>\n']);return l=function(){return t},t}var h,d,u,p=(h={},d="template-common-form-button",u=Object(c.a)(l()),d in h?Object.defineProperty(h,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):h[d]=u,h),f=i("QNiq"),m=i("f3SV"),g=i("I0kf");function b(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var w=o.a.View.extend({MIN_FIELD_WIDTH:50,MIN_FIELD_HEIGHT:30,CAPTCHA_WIDTH:304,CAPTCHA_HEIGHT:78,CAPTCHA_INVISIBLE:!0,LINE_HEIGHT_FACTOR:1.2,INVALID_COLOR:"ff4828",INVALID_BORDER_WIDTH:2,DROPDOWN_TRIANGLE:{SVG:'<svg class="form-dropdown-triangle" width="9" height="6" preserveAspectRatio="none" viewBox="0 0 9 6" xmlns="http://www.w3.org/2000/svg"><path d="M3.763 5.196L.536 1.676A1 1 0 0 1 1.273 0h6.454a1 1 0 0 1 .737 1.676l-3.227 3.52a1 1 0 0 1-1.474 0z" fill-rule="evenodd"/></svg>',OPACITY_MULTIPLIER:.4,W:9,H:6,FONT_SIZE:18},CHECKBOX_TICK:{SVG:'<svg width="19" height="14" preserveAspectRatio="none" viewBox="0 0 19 14" xmlns="http://www.w3.org/2000/svg"><path d="M6.657 10.9L17.263.292a1 1 0 1 1 1.415 1.414L7.364 13.021a.997.997 0 0 1-1.414 0L.293 7.364A1 1 0 1 1 1.707 5.95l4.95 4.95z" fill-rule="evenodd"/></svg>',W:19,H:14,FONT_SIZE:18},initialize:function(t){a.a.bindAll(this),this.data=t.data,this.$container=t.$container,this.environment=t.environment,this.buttonTemplate=p["template-common-form-button"]},render:function(t){var e=this;t=t||{},this.rendered?t.force&&this.$el&&this.$el.empty():(this.setElement(Object(n.a)("<div>")),this.$el.addClass("form-wrapper").appendTo(this.$container),"constructor"!==this.environment&&this.$el.on(f.a.isDesktop?"mouseenter":"touchstart",".button",this.onButtonHover).on(f.a.isDesktop?"mouseleave":"touchend",".button",this.onButtonHoverOut),this.$el.on("change","select",this.onDropdownChange).on("mouseenter",".input-wrapper",this.onInputHover).on("mouseleave",".input-wrapper",this.onInputHoverOut),this.rendered=!0);var i,r,o=this.data,a=o.fields,c=Object(n.a)('<div><form enctype="multipart/form-data" method="post" target="form_submit_iframe"></form></div>'),l=c.find("form"),h=RM.constructorRouter&&RM.constructorRouter.previewMode,d=!!RM.constructorRouter,u=!1;if(RM.screenshot)window.ServerData.userPermissions&&window.ServerData.userPermissions.can_use_forms_file_upload&&(u=!0);else{var p=RM.viewerRouter?RM.viewerRouter.getUserPermissions():RM.constructorRouter.me.get("permissions");p&&p.can_use_forms_file_upload&&(u=!0),p&&!p.can_use_forms&&Object(g.a)("constructor.canUseFormPermission")&&!1}for(var m=0;m<a.length;m++){var b=a[m];if(("file"!==b.tp||u||d)&&("captcha"!==b.tp||Object(g.a)("viewer.formsCaptcha")||d)){i="vertical"===o.layout&&"text"===b.tp,(r=Object(n.a)(i?"<textarea>":"<input>")).addClass("js-input"),r.attr("type","text").attr("autocapitalize","name"===b.tp?"on":"off").attr("autocomplete","off").attr("autocorrect","off").attr("name",b.caption).attr("placeholder",b.caption+(b.optional&&"viewer"!==this.environment?" (optional)":"")).attr("spellcheck",!1).attr("data-sort",b.sort),"email"===b.tp&&r.attr("inputmode","email"),"phone"===b.tp&&r.attr("inputmode","tel"),"number"===b.tp&&r.attr("inputmode","numeric"),"checkbox"===b.tp&&r.attr("type","checkbox"),"dropdown"===b.tp&&(r.attr({tabindex:-1}),r.prop({readonly:!0}),r.addClass("fake-dropdown"));var v=Object(n.a)('<div class="input-wrapper js-input-wrapper"/>');if(v.append(r),v.append('<div class="overlay"></div>'),"viewer"!==this.environment&&i){var w=Object(n.a)('<span class="input-line-control input-line-control-add js-add-line"></span>'),y=Object(n.a)('<span class="input-line-control input-line-control-remove js-remove-line"></span>');v.append(w).append(y)}if("file"===b.tp){"viewer"===this.environment&&r.attr("type","file");var _="formfiles-".concat(this.data._id).concat("viewer"!==this.environment?"-constructor":"");r.attr("name","formfiles"),r.attr("id",_),r.attr("multiple",""),r.attr("accept",(window.ServerData.config.FORMS_ACCEPTED_MIMES||[]).join(",")),r.addClass("input-file");var x=b.caption+(b.optional&&"viewer"!==this.environment?" (optional)":"")||"Add files";v.append(Object(n.a)("<label ".concat(u?'for="'.concat(_,'"'):"",' class="input-file-label').concat("viewer"!==this.environment?" no-hover":"",'" data-empty-text="').concat(x).concat(h&&!u?" (Pro plan only)":"",'"><span class="files-name">').concat(x).concat(h&&!u?" (Pro plan only)":"",'</span><span class="files-count"></span></label>'))),"viewer"===this.environment&&v.append(Object(n.a)('<span class="input-file-control input-file-control-add"></span><span class="input-file-control input-file-control-remove"></span>'))}if(v.appendTo(l),"dropdown"===b.tp&&b.items){var S=Object(n.a)("<select>"),O=Object(n.a)(this.DROPDOWN_TRIANGLE.SVG);S.attr("name",b.caption),Object(n.a)('<option value="" selected></option>').prop("disabled",!b.optional).appendTo(S);for(var C=0;C<b.items.length;C++)Object(n.a)("<option>").attr("value",b.items[C]).text(b.items[C]).appendTo(S);r.parent().append(O).append(S)}if("checkbox"===b.tp){var k=f.a.isDesktop?"":"input-checkbox-wrapper-mobile";r.wrap('<label class="input-checkbox-wrapper '+k+'"></label>'),r.after('\t\t\t\t\t\t<div class="input-checkbox-inner"> \t\t\t\t\t\t\t<span class="label">'+r.attr("placeholder")+'</span> \t\t\t\t\t\t\t<span class="tick">'+this.CHECKBOX_TICK.SVG+"</span> \t\t\t\t\t\t</div>")}}}if(Object(n.a)(this.buttonTemplate()).appendTo(l),this.$el.html(c.html()).addClass("common-form"),this.data.captcha&&Object(g.a)("viewer.formsCaptcha")&&!RM.common.isDownloadedSource){var T=s.default.generateUUID(),I=Object(n.a)('<div id="'.concat(T,'" class="captcha-holder captcha-invisible"></div>'));this.$el.find("form").append(I),window.recaptchaReadyPromise&&window.recaptchaReadyPromise.then((function(){e.captcha=window.grecaptcha.render(T,{sitekey:window.ServerData.config.RECAPTCHA_SITEKEY,callback:e.captchaCallback.bind(e),theme:I.data("type")||"light",size:"invisible"})}))}this.$button=this.$(".button"),this.$buttonIcons=this.$(".button svg"),this.$inputs=this.$(".input-wrapper"),this.$triangles=this.$(".form-dropdown-triangle"),this.$fileInputLabel=this.$inputs.find(".input-file-label"),this.$fileInputLabelText=this.$inputs.find(".input-file-label > .files-name"),this.$fileInputLabelCount=this.$inputs.find(".input-file-label > .files-count"),"viewer"===this.environment&&(this.$fileInput=this.$inputs.find(".input-file"),this.$fileInput&&this.$fileInput.on("change",this.onFileChange),this.$fileAddCtrl=this.$(".input-file-control-add"),this.$fileRemoveCtrl=this.$(".input-file-control-remove"),this.$fileRemoveCtrl&&this.$fileRemoveCtrl.on("click",this.onFileRemove)),this.recalcStyles()},executeCaptcha:function(t){this.hasOwnProperty("captcha")?(this.captchaExecuteCallback=t,window.grecaptcha.reset(this.captcha),window.grecaptcha.execute()):t()},captchaCallback:function(t){var e=this;this.captchaResponse=t,setTimeout((function(){return e.captchaExecuteCallback(t)}),0)},validateFiles:function(t){if(!t||!t.length)return!0;var e=RM.viewerRouter?RM.viewerRouter.getUserPermissions():RM.constructorRouter.me.get("permissions");if(t.length>e.forms_file_upload_count)return alert(m.c.MSG_UPLOAD_FORMS_FILES_ERROR),!1;var i,n=b(t);try{for(n.s();!(i=n.n()).done;){if(i.value.size>e.forms_file_upload_limit)return alert(m.c.MSG_UPLOAD_FORMS_SIZE_ERROR),!1}}catch(t){n.e(t)}finally{n.f()}return!0},onFileChange:function(){var t=this.$fileInput.get(0).files;if(!t||!t.length)return this.$fileRemoveCtrl&&this.$fileRemoveCtrl.hide(),this.$fileAddCtrl&&this.$fileAddCtrl.show(),this.$fileInputLabelText.text(this.$fileInputLabel.data("emptyText")),this.$fileInputLabelCount.text(""),void this.$fileInputLabel.removeClass("has-files");if(!this.validateFiles(t))return this.onFileRemove();this.$fileInputLabel.addClass("has-files"),this.$fileRemoveCtrl&&this.$fileRemoveCtrl.show(),this.$fileAddCtrl&&this.$fileAddCtrl.hide();var e=(t[0].name||"Filename").split("\\").join("/").split("/").pop();this.$fileInputLabelText.text(e),this.$fileInputLabelCount.text(t.length>1?" +".concat(t.length-1):"")},onFileRemove:function(){this.$fileInput.val(""),this.onFileChange()},onDropdownChange:function(t){Object(n.a)(t.currentTarget).parent().find(".js-input").val(Object(n.a)(t.currentTarget).val())},setButtonHoverState:function(){this.forcePseudoState="hover",this.applyButtonStyle()},unsetButtonHoverState:function(){this.forcePseudoState=!1,this.applyButtonStyle()},recalcStyles:function(t){this.$el.attr("data-layout",this.data.layout).attr("data-style",this.data.style),this.$button.find(".caption").text(this.data["button-caption"]),this.resizeElements(t),this.applyInputsStyle(this.$inputs),this.applyButtonStyle(t)},getMinimalDimensions:function(){var t,e=this.data,i=e.fields,n=e["style-"+e.style+"-fields"],r=e["style-"+e.style+"-button-default"],o=this.getButtonValue.bind(this,r,n),a=i.find((function(t){return"captcha"===t.tp})),s=r.gutter+(i.length-(a&&this.CAPTCHA_INVISIBLE?1:0))*n.gutter,c=n["underline-width"]||0,l=Math.max(Math.ceil(o("font-size")*this.LINE_HEIGHT_FACTOR),this.MIN_FIELD_HEIGHT)+c,h=Math.max(Math.ceil(n["font-size"]*this.LINE_HEIGHT_FACTOR),this.MIN_FIELD_HEIGHT)+c,d=Math.max(l,h);return"vertical"===e.layout&&(t={width:Math.max(a&&!this.CAPTCHA_INVISIBLE?this.CAPTCHA_WIDTH:0,this.MIN_FIELD_WIDTH),height:s+this.getTotalInputsHeight(i,d)+d}),"horizontal"===e.layout&&(t={width:s+i.length*this.MIN_FIELD_WIDTH+a&&!this.CAPTCHA_INVISIBLE?this.CAPTCHA_WIDTH:this.MIN_FIELD_WIDTH,height:Math.max(d,a&&!this.CAPTCHA_INVISIBLE?this.CAPTCHA_HEIGHT:0)}),t},getTotalInputsHeight:function(t,e){return a.a.reduce(t,function(t,i){return"text"===i.tp?t+this.getExtraTextareaDimensions(i.rows,e).height:"captcha"===i.tp?t+this.CAPTCHA_INVISIBLE?0:this.CAPTCHA_HEIGHT:t+e}.bind(this),0)},getRowsCount:function(t){return a.a.reduce(t,(function(t,e){return t+("captcha"===e.tp?0:"text"===e.tp&&e.rows||1)}),0)},getInputDimensions:function(t){var e,i,n=this.data,r=n.fields,o=r.length+1,a=n["style-"+n.style+"-button-default"],s=n["style-"+n.style+"-fields"],c=r.find((function(t){return"captcha"===t.tp})),l=a.gutter+(r.length+(c?-1:0))*s.gutter,h=t&&void 0!==t.w?t.w:n.w,d=t&&void 0!==t.h?t.h:n.h,u="vertical"===n.layout,p=Math.floor(u?d:h),f=u?this.CAPTCHA_HEIGHT:this.CAPTCHA_WIDTH,m=p-l-(c&&!this.CAPTCHA_INVISIBLE?f+s.gutter:0);if(u){var g=this.getLineHeight(),b=m-this.getRowsCount(r)*g.input-g.input,v=Math.ceil(b/(o-(c?1:0)));e=g.input+v,i=this.getTotalInputsHeight(r,e)+e+l-p}else i=(e=Math.ceil(m/(o-(c?1:0))))*(r.length+1)+l-p;return{overflow:i,itemSize:e,itemOtherSize:u?h:d,gutter:s.gutter,lastGutter:a.gutter+s.gutter}},getLineHeight:function(){var t=this.data||{},e=this.LINE_HEIGHT_FACTOR,i=this.getButtonValue(t["style-"+t.style+"-button-default"],t["style-"+t.style+"-fields"],"font-size"),n=t["style-"+t.style+"-fields"]["font-size"];return{input:Math.floor(e<10?e*n:e),button:Math.floor(e<10?e*i:e)}},getExtraTextareaDimensions:function(t,e){t=t||1;var i=this.getLineHeight(),n=Math.round(e-i.input),r=this.data&&"underlined"==this.data.style,o=r?n:Math.ceil(n/2),a=r?0:Math.floor(n/2);return{height:t*i.input+o+a,top:o,bottom:a}},resizeElements:function(t){var e=this.data,i="vertical"===e.layout,r=e.fields,o=r.length,a=this.getInputDimensions(t),s=a.overflow,c=e["style-"+e.style+"-fields"],l=(c&&c["underline-width"]||0)+2;this.$inputs.add(this.$button).each(function(t,e){var c={},h=a.itemSize,d=t===o-1,u=t<o,p=r[t],f=Object(n.a)(e),m=t>=o+1-s;if(m&&h--,c[i?"height":"width"]=h+"px",c[i?"width":"height"]=a.itemOtherSize+"px",u&&(c[i?"margin-bottom":"margin-right"]=d?a.lastGutter:a.gutter),c[i?"margin-right":"margin-bottom"]="",i&&p&&"captcha"===p.tp&&delete c.height,!i&&p&&"captcha"===p.tp&&delete c.width,i&&p&&"text"===p.tp){var g=p.rows||1,b=f.find(".js-input"),v=f.find(".js-add-line"),w=f.find(".js-remove-line"),y=this.getExtraTextareaDimensions(g,a.itemSize);c.height=y.height+(m?-1:0)+"px",b.css({top:y.top-l,bottom:y.bottom}),b.attr({rows:g}),v.css({top:y.top-l}),w.css({bottom:y.bottom+l}),f.toggleClass("is-multiline",g>1)}f.css(c)}.bind(this))},showInputPlaceholdersAsValues:function(t){this.$inputs.each((function(e,i){var r=Object(n.a)(i).find(".js-input");"checkbox"===r.attr("type")?r.parent().find(".label").addClass("input-checkbox-preview"):r.val(t?r.attr("placeholder"):"")}))},applyInputsStyle:function(t,e){var i=this;e=e||{};var r,o=this.data,s=(o.fields,a.a.clone(o["style-"+o.style+"-fields"]));"underlined"===o.style?(e.invalid&&(s["underline-color"]=this.INVALID_COLOR,s["underline-opacity"]=100,s["underline-width"]=s["underline-width"]||this.INVALID_BORDER_WIDTH),r={"background-color":"transparent","border-radius":0,"box-shadow":"inset 0 "+-s["underline-width"]+"px 0 0 "+this.getRgba(s["underline-color"],s["underline-opacity"])}):(e.invalid&&(s["border-color"]=this.INVALID_COLOR,s["border-opacity"]=100,s["border-width"]=s["border-width"]||this.INVALID_BORDER_WIDTH),r={"background-color":this.getRgba(s.color,s.opacity),"border-radius":s["border-radius"]+"px","box-shadow":"inset 0 0 0 "+s["border-width"]+"px "+this.getRgba(s["border-color"],s["border-opacity"])});var c={"font-family":s["font-family"],"font-style":s["font-style"],"font-weight":s["font-weight"],color:this.getRgba(s["text-color"],s["text-opacity"]),"font-size":s["font-size"],"letter-spacing":s["letter-spacing"],"margin-bottom":s["underline-width"]?s["underline-width"]+"px":0};t.filter(":not(.captcha-wrapper)").css(r).find(".js-input:not(.captcha-wrapper), select").css(c),t.find(".input-checkbox-inner .label").css(c),t.find(".input-file-label").css(c),t.find(".js-add-line, .js-remove-line").css({"font-size":s["font-size"]}),t.find(".form-dropdown-triangle").each(function(t,e){var i=Object(n.a)(e),r=i.parent(),o=r.find(".js-input"),a=o.position().top,c=r.height()-o.height()-a,l=this.getSvgSizesFromFontSize(s["font-size"],"DROPDOWN_TRIANGLE");i.css({fill:this.getRgba(s["text-color"],s["text-opacity"]*this.DROPDOWN_TRIANGLE.OPACITY_MULTIPLIER),top:a,bottom:c,width:l.w,height:l.h})}.bind(this)),t.find(".input-checkbox-inner svg").each((function(t,e){var r=Object(n.a)(e),o=i.getSvgSizesFromFontSize(s["font-size"],"CHECKBOX_TICK");r.css({fill:i.getRgba(s["text-color"],s["text-opacity"]),width:o.w,height:o.h})}))},applyButtonStyle:function(){var t=this.data,e=(t.fields,t["style-"+t.style+"-fields"]),i=t["style-"+t.style+"-button-default"],n=t["style-"+t.style+"-button-hover"],r=this.getButtonValue.bind(this,i,e),o=this.getHoverValue.bind(this,n,i,e),a=r("letter-spacing");this.$button.css({"line-height":this.$button.height()+"px","background-color":this.getRgba(r("color"),r("opacity")),"border-radius":r("border-radius")+"px","box-shadow":"inset 0 0 0 "+r("border-width")+"px "+this.getRgba(r("border-color"),r("border-opacity")),"font-family":r("font-family"),"font-style":r("font-style"),"font-weight":r("font-weight"),color:this.getRgba(r("text-color"),r("text-opacity")),"font-size":r("font-size"),"letter-spacing":a,"text-align":r("text-align"),"text-indent":a/2||0}),this.$buttonIcons.css({fill:this.getRgba(r("text-color"),r("text-opacity"))}),this.$button.attr("data-default",this.$button.attr("style")),this.$button.css({"background-color":this.getRgba(o("color"),o("opacity")),"box-shadow":"inset 0 0 0 "+o("border-width")+"px "+this.getRgba(o("border-color"),o("border-opacity")),color:this.getRgba(o("text-color"),o("text-opacity"))}),this.$button.attr("data-hover",this.$button.attr("style")),this.forcePseudoState||this.$button.attr("style",this.$button.attr("data-default")),this.$button.outerHeight(),this.$button.toggleClass("with-transition",!!n.transition&&"viewer"==this.environment)},getRgba:function(t,e){var i=s.default.hex2rgb(t);return"rgba("+i[0]+", "+i[1]+","+i[2]+","+e/100+")"},getButtonValue:function(t,e,i){return"inherit"===t[i]?e[i]:t[i]},getHoverValue:function(t,e,i,n){return"inherit"===t[n]?this.getButtonValue(e,i,n):t[n]},onInputHover:function(t){var e=this.data,i=a.a.clone(e["style-"+e.style+"-fields"]);Object(n.a)(t.currentTarget).find(".form-dropdown-triangle").css("fill",this.getRgba(i["text-color"],i["text-opacity"]))},onInputHoverOut:function(t){var e=this.data,i=a.a.clone(e["style-"+e.style+"-fields"]);Object(n.a)(t.currentTarget).find(".form-dropdown-triangle").css("fill",this.getRgba(i["text-color"],i["text-opacity"]*this.DROPDOWN_TRIANGLE.OPACITY_MULTIPLIER))},onButtonHover:function(t){this.$button.hasClass("submitted")||this.$button.attr("style",this.$button.attr("data-hover"))},onButtonHoverOut:function(t){this.$button.attr("style",this.$button.attr("data-default"))},destroy:function(){this.$fileInput&&this.$fileInput.off("change",this.onFileChange),this.$el.off(f.a.isDesktop?"mouseenter":"touchstart",".button",this.onButtonHover).off(f.a.isDesktop?"mouseleave":"touchend",".button",this.onButtonHoverOut).off("change","select",this.onDropdownChange),this.$el&&this.$el.remove()},getSvgSizesFromFontSize:function(t,e){var i=this[e].H,n=this[e].W,r=this[e].FONT_SIZE;return{h:t*i/r,w:t*n/r}}});e.a=w},mrVI:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("rFsW"),o=i("ROz4"),a=i("OTSC"),s=i("gm8A");i("I0kf");function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d=o.a.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,NUMBER_TEST_REGEX:/^[0-9.,`']+$/,events:{"focus :input":"onFocus","blur :input":"onBlur"},render:function(){var t;(this.makeBox("widget-form"),this.rendered=!0,this.captcha&&!window.recaptchaReadyPromise)&&(window.recaptchaReadyPromise=new Promise((function(e){t=e})),window.onloadRecaptchaCallback=function(){t()},Object(n.a)('<script src="https://www.google.com/recaptcha/api.js?onload=onloadRecaptchaCallback&render=explicit" async><\/script>').appendTo("head"));return this.seamlessFontsShow(function(){this.$el.removeClass("fonts-pending")}.bind(this),function(){this.$el.addClass("fonts-pending")}.bind(this)),this.formWidget=new s.a({data:this,environment:"viewer",$container:this.$el}),this.formWidget.render(),this.$button=this.$(".button"),this.$button.on("click",this.onButtonClick),this.$(".js-input").on("keydown",this.onInputKeyDown),this.$(".js-input").on("input",this.onInput),this.$("select").on("change",this.onInput),RM.screenshot?this.waitForUsedFontsLoad():this.widgetIsLoaded(),this},hasFontsToLoad:function(){return!0},destroy:function(){return this.formWidget&&this.formWidget.destroy(),this.formWidget=null,this.$(".button").off("click",this.onButtonClick),o.a.prototype.destroy.apply(this,arguments)},waitForUsedFontsLoad:function(){this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.widgetIsLoaded):this.widgetIsLoaded()},onFocus:function(){Backbone.trigger("form:focus",this._id)},onBlur:function(){Backbone.trigger("form:blur",this._id)},onButtonClick:function(){var t=this;this.$button.hasClass("submitted")||(this.setButtonState("pending"),this.formWidget.executeCaptcha((function(){t.sendForm()})))},sendForm:function(){this.validateForm()?("Text after submit"===this.button_caption_after_submit||!this.button_caption_after_submit||this.submit_mode&&"textAfterSubmit"!==this.submit_mode?this.$button.addClass("empty-submitted-text"):this.$button.find(".caption").text(this.button_caption_after_submit),RM.common.isDownloadedSource&&!RM.common.homepageRewrite?this.submitToIframe(function(t){t?(this.setButtonState("error"),RM.analytics&&RM.analytics.sendEvent("Form Submit Error",t)):this.setButtonState("submitted")}.bind(this)):this.submitForm(function(t){t?(this.setButtonState("error"),t.responseJSON&&"email_not_confirmed"===t.responseJSON.name&&r.a.delay((function(){alert(t.responseJSON.message)}),100),RM.analytics&&RM.analytics.sendEvent("Form Submit Error",t)):this.setButtonState("submitted")}.bind(this)),this.link_after_submit&&this.submit_mode&&"textAfterSubmit"!==this.submit_mode&&this.applyLink()):this.setButtonState()},applyLink:function(){var t;"toUrlAfterSubmit"===this.submit_mode?this.openInNewTab(this.link_after_submit):(t=this.page.mag.getPageUri?"/"+this.page.mag.getPageUri(this.link_after_submit):"javascript:void(0)",this.mag.router.navigate(t,{trigger:!0}))},openInNewTab:function(t){Object.assign(document.createElement("a"),{target:"_blank",rel:"noopener",href:t}).click()},getDataBySort:function(t){return t=parseInt(t,10),r.a.findWhere(this.fields,{sort:t})},validateForm:function(){var t=this.$(".js-input"),e=!0;return!(this.captcha&&!this.formWidget.captchaResponse)&&(r.a.each(t,function(t){var i=Object(n.a)(t),r=i.val().trim(),o=this.getDataBySort(i.attr("data-sort")),s=!0;if(r)switch(o.tp){case"name":case"text":case"dropdown":break;case"email":a.default.isValidEmail(r)||(s=!1);break;case"phone":/^[0123456789 +-]+$/.test(r)||(s=!1);break;case"number":this.NUMBER_TEST_REGEX.test(r)&&!isNaN(parseFloat(r))||(s=!1);break;case"checkbox":o.optional||i.prop("checked")||(s=!1);break;case"captcha":this.formWidget.captchaResponse||(s=!1)}else s=o.optional;s||(this.formWidget.applyInputsStyle(i.closest(".input-wrapper"),{invalid:!0}),e=!1)}.bind(this)),e)},onInput:function(t){var e=Object(n.a)(t.currentTarget).parent().find(".js-input");this.formWidget.applyInputsStyle(e.closest(".input-wrapper")),this.setButtonState()},onInputKeyDown:function(t){t.keyCode!==n.a.keycodes.enter||Object(n.a)(t.target).is("textarea")||(t.preventDefault(),this.onButtonClick()),!Object(n.a)(t.target).is("textarea")||t.keyCode!==n.a.keycodes.up&&t.keyCode!==n.a.keycodes.down||t.stopPropagation()},getFormData:function(){var t={wid:this._id,mag_num_id:this.page.mag.num_id,is_preview:!(!RM.constructorRouter||!RM.constructorRouter.preview),fields:[]};return this.captcha&&(t.captcha=this.formWidget.captchaResponse),r.a.each(this.fields,function(e){if("captcha"!==e.tp){var i=this.$(".js-input[data-sort="+e.sort+"]");if(0!==i.length){var n=i.val().trim();if("checkbox"===e.tp&&(n=i.prop("checked")?"On":"Off"),"number"===e.tp){var r=parseFloat(n);n=isNaN(r)?n:r}"file"!==e.tp&&t.fields.push({caption:e.caption,type:e.tp,value:n})}}else t.captcha=this.formWidget.captchaResponse}.bind(this)),t},submitForm:function(t){this.xhr&&this.xhr.abort();var e=this.$el.find("form");e.length||(e=this.$el.find(".form-wrapper").wrap('<form enctype="multipart/form-data" method="post" target="form_submit_iframe"></form>').parent().attr("action","/api/connect/forms/send/"+this.page.mag.num_id));var i=new FormData(e.get(0)),r=this.getFormData();if(r&&r.fields){var o,a=l(r.fields);try{for(a.s();!(o=a.n()).done;){var s=o.value;i.delete(s.name)}}catch(t){a.e(t)}finally{a.f()}}for(var h=0,d=Object.keys(r);h<d.length;h++){var u=d[h];i.append(u,"object"===c(r[u])&&null!==r[u]?JSON.stringify(r[u]):r[u])}var p=i.get("formfiles");!p||p.size&&p.name||i.delete("formfiles"),this.xhr=n.a.ajax({url:"/api/connect/forms/send/"+this.page.mag.num_id,method:"POST",dataType:"json",data:i,cache:!1,contentType:!1,processData:!1,success:function(){t()},error:function(e){t({status:e.status,responseJSON:e.responseJSON,responseText:e.responseText})}}),RM.analytics&&RM.analytics.sendEvent("Form Submit Click")},submitToIframe:function(t){var e,i=this.endpoint_url&&this.endpoint_url.custom_url;if(!i)return t("No custom URL specified for submit");Object(n.a)("#form_submit_iframe").length||Object(n.a)('<iframe id="form_submit_iframe" name="form_submit_iframe" style="display:none;"></iframe>').appendTo("body"),(e=this.$el.find("form")).length||(e=this.$el.find(".form-wrapper").wrap('<form method="post" target="form_submit_iframe" enctype="multipart/form-data"></form>')),e.attr("action",i),e.get(0).submit(),t(null),RM.analytics&&RM.analytics.sendEvent("Form Submit Click")},setButtonState:function(t){t=t||"";this.$button.removeClass(["error","submitted","pending"].join(" ")).addClass(t)}});e.default=d},qHzu:function(t,e,i){"use strict";var n,r=i("AIVH");function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(){var t=l(['\n\t<div class="fb-comments fb" data-href="<%-data.url ? data.url : \'http://readymag.com\'%>" data-width="<%=data.w%>" data-num-posts="<%=data.num_posts%>" data-colorscheme="<%=data.theme%>"></div>\n\t<div class="overlay"></div>\n']);return a=function(){return t},t}function s(){var t=l(['\n\t<div class="fb-page fb" data-href="<%-data.url ? data.url : \'https://www.facebook.com/readymag\'%>" data-width="<%=data.w%>" data-height="<%=data.h%>" data-show-facepile="<%=data.show_faces%>" data-colorscheme="<%=data.theme%>" data-tabs="<%=data.show_stream ? \'timeline, events, messages\' : \'\'%>" data-show-border="true" data-small-header="<%=data.small_header%>" data-adapt-container-width="true"></div>\n\t<div class="overlay"></div>\n']);return s=function(){return t},t}function c(){var t=l(['\n\t<div class="fb-like fb" data-href="<%-data.url ? data.url : \'http://readymag.com\'%>" <%=data.share_button || data.send_button ? \'data-share="true"\' : \'\'%> data-width="<%=data.w%>" data-show-faces="<%=data.show_faces%>" data-colorscheme="<%=data.theme%>" data-layout="<%=data.layout%>" data-type="data.type_like_button"></div>\n\t<div class="overlay"></div>\n']);return c=function(){return t},t}function l(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}e.a=(o(n={},"template-constructor-block-facebook-type_like_button",Object(r.a)(c())),o(n,"template-constructor-block-facebook-type_page",Object(r.a)(s())),o(n,"template-constructor-block-facebook-type_comments",Object(r.a)(a())),n)},rJ9t:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("i8i4"),o=i.n(r),a=i("ROz4"),s=i("pFlR"),c=i("8AXF"),l=i("1cLU");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u=a.a.extend({ignoreScale:!0,render:function(){return this.makeBox("widget-rm-footer"),Object(n.a)(".widget-rm-footer").css({background:"rgb(40, 40, 40)"}),this.propsModel=new Backbone.Model(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({isMobileViewport:!1},this.getStyles())),this.$footer=Object(n.a)("<div>").appendTo(this.$el).get(0),Object(c.renderReact)({component:l.a,domElement:this.$footer,model:this.propsModel}),this.rendered=!0,this.widgetIsLoaded(),this},destroy:function(){return o.a.unmountComponentAtNode(this.$footer),a.a.prototype.destroy.apply(this,arguments)},getStyles:function(){var t=this.mag.getViewportWidth(this.page.pageViewport);if(s.a.isOn(this.page.pageViewport,t,this.mag.viewOpts)){var e=1/s.a.getRatio(t),i=s.a.isCSSZoom(),n=s.a.isCSSTransform();return{zoom:i?"".concat(e):null,transform:n?"scale(".concat(e,")"):null}}},onPageResize:function(){a.a.prototype.onPageResize.apply(this,arguments),this.propsModel.set(this.getStyles())}});e.default=u},uHXJ:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("rFsW"),o=i("ROz4"),a=i("OTSC"),s=i("JZqd"),c=i("z79a"),l=i("cBBe"),h=i("QNiq"),d=i("oBKw"),u=i("SF2O"),p=i("O5Jf"),f=i("I0kf"),m=o.a.extend(c.a.prototype).extend({DO_NOT_WAIT_FOR_PRELOAD:!0,PHONE_TIP_WIDTH:280,MOUSE_LEAVE_TIMEOUT:100,EDGE_GAP:16,events:{"click .pin":"onPinClick",mouseenter:"onMouseenter",mouseleave:"onMouseleave"},render:function(){var t;if(this.makeBox("widget-hotspot"),this.rendered=!0,this.phoneTipWrapperTemplate=s.a["template-common-hotspot-widget-mobile-wrapper"],this.isPreview=!(!RM.constructorRouter||!RM.constructorRouter.preview),t={model:this,$container:this.$el,environment:"viewer",mag:this.page&&this.page.mag,block:null},this.hotspotWidget=new l.a(t),this.$pin=this.$(".pin").addClass("viewer"),this.started&&this.renderTip(),"icon"===this.pin_type){if(this.$el.addClass("icon"),!this.rasterUrl)return this.widgetIsLoaded(),this;var e=Object(n.a)("<img>");e.on("load",r.a.bind((function(){this.$(".pin").html(e),this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded),e.attr("src",this.raster3xUrl||this.raster2xUrl||this.rasterUrl||"")}else this.renderPinShape(),this.widgetIsLoaded();return this},renderPinShape:function(){var t,e=new Backbone.Model(this);e.id=this._id,t=this.generateShapeSVG("viewer",e,this.w,this.h),this.$pin.html(t)},renderTip:function(){this.isTipRendered||(this.$tip=Object(n.a)('<div class="tip viewer invisible"></div>'),this.$tip.toggleClass("box-shadow",this["tip_box-shadow"]),this.$tip.css({"border-radius":this["tip_border-radius"]}),this.$blocksWrapper=Object(n.a)('<div class="blocks-wrapper"></div>'),this.$blocksWrapper.appendTo(this.$tip),this.$blocksWrapper.css({"background-color":a.default.getRGBA(this["tip_background-color"],this["tip_background-color-opacity"]/100),"border-radius":this["tip_border-radius"]}),this.$(".common-hotspot").append(this.$tip),this.pictureData=r.a.findWhere(this.wids||[],{type:"picture"}),this.textData=r.a.findWhere(this.wids||[],{type:"text"}),this.hasPictureWidget=!(!this.pictureData||this.pictureData.hidden),this.hasTextWidget=!(!this.textData||this.textData.hidden),this.hasPictureWidget&&(this.pictureData.insideHotspot=!0,this.pictureWidget=new d.default(this.pictureData,this.page,this.$blocksWrapper),this.pictureWidget.isValid()?(this.pictureData.w=Math.min(this.tip_w,this.pictureData.w),this.pictureWidget.render()):(this.tip_h-=this.pictureWidget.h||0,this.textData&&(this.textData.y=0),this.pictureWidget=null,this.hasPictureWidget=!1)),this.hasTextWidget&&(this.textData.insideHotspot=!0,this.textData.hasGlobalParent=this.is_global,Object(f.a)("constructor.textv3")&&3===this.textData.version?this.textWidget=new p.default(this.textData,this.page,this.$blocksWrapper):this.textWidget=new u.default(this.textData,this.page,this.$blocksWrapper),this.textWidget.w=Math.min(this.tip_w,this.textWidget.w),this.textWidget.render()),this.hasPictureWidget||this.hasTextWidget?(this.$closeButton=Object(n.a)('<div class="hotspot-phone-close"></div>'),this.$tip.append(this.$closeButton),this.isTipRendered=!0):this.$tip.remove())},updatePage:function(t){o.a.prototype.updatePage.apply(this,arguments),this.textWidget&&this.textWidget.updatePage(t)},start:function(){return this.started=!0,this.rendered&&!this.destroyed&&this.renderTip(),this},stop:function(){return this.started=!1,this.isTipVisible&&this.hideTip(),this},applyTipPosition:function(){var t,e,i,n,o,a,s,c=this.calcDistsToPageVisibleBounds(),l=this.w,h=this.h,d=this.$tip.width(),u=this.$tip.height(),p=this.hotspotWidget.TIP_GAP,f=this.tip_pos,m=r.a.pick(this,"w","h","tip_w","tip_h","tip_pos"),g=!1,b=!1;function v(t){var e,i,n,r;switch(t){case"top":e=c.top-h/2-p-u,n=c.bottom+h/2+p,r=c.left-d/2,i=c.right-d/2;break;case"right":e=c.top-u/2,n=c.bottom-u/2,r=c.left+l/2+p,i=c.right-l/2-p-d;break;case"bottom":e=c.bottom+h/2+p,n=c.bottom-h/2-p-u,r=c.left-d/2,i=c.right-d/2;break;case"left":e=c.top-u/2,n=c.bottom-u/2,r=c.left-l/2-p-d,i=c.right+l/2+p}return{top:e,left:r,bottom:n,right:i}}i=this.tip_pos,o=i,a=-1/0,s=!1,r.a.each(["top","right","bottom","left"],(function(t){if(!s){var e=v(t);n=r.a.min(e),t===i&&e[t]>0?(o=t,s=!0):n>a&&e[t]>=0&&(a=n,o=t)}})),f=o,m.tip_pos=f,e=this.hotspotWidget.apply_tip_position(m),t=v(f),r.a.each(t,function(t,i){if(t<0)switch(i){case"top":e.top-=t-this.EDGE_GAP,g=!0;break;case"bottom":g||(e.top+=t-this.EDGE_GAP);break;case"left":e.left-=t-this.EDGE_GAP,b=!0;break;case"right":b||(e.left+=t-this.EDGE_GAP)}}.bind(this)),this.$tip.css(e)},adjustPictureSize:function(){var t,e=this.tip_w/this.PHONE_TIP_WIDTH;this.pictureWidget&&(t=this.isPhone()?{width:this.PHONE_TIP_WIDTH,height:this.pictureData.h/e}:{width:this.pictureData.w,height:this.pictureData.h},this.pictureWidget.$el.css(t))},onPinClick:function(){this.isHoverable()||(this.isTipVisible?this.hideTip():this.isTipRendered&&this.showTip(),RM.analytics&&this.isTipVisible&&RM.analytics.sendEvent("Hotspot Click"))},onMouseenter:function(){this.isHoverable()&&this.isTipRendered&&(clearTimeout(this.mouseLeaveTimeout),this.isTipVisible||this.showTip(),RM.analytics&&RM.analytics.sendEvent("Hotspot Hover"))},onMouseleave:function(){this.isHoverable()&&(clearTimeout(this.mouseLeaveTimeout),this.mouseLeaveTimeout=setTimeout(function(){this.hideTip()}.bind(this),this.MOUSE_LEAVE_TIMEOUT))},showTip:function(){this.isTipRendered&&(this.adjustPictureSize(),this.isPhone()?(this.$phoneTipWrapper=this.$phoneTipWrapper||Object(n.a)(this.phoneTipWrapperTemplate()),this.$phoneTipWrapper.toggleClass("preview",this.isPreview),this.$phoneTipWrapper.detach().appendTo(this.isPreview?".mag-pages-container":"body"),this.$phoneTipWrapper.on("touchstart",this.onTipTouchStart),this.$phoneTipWrapper.on("touchmove",this.onTipTouchMove),this.$tipParent=this.$tip.parent(),this.$tip.detach().appendTo(this.$phoneTipWrapper.find(".center-cell")),r.a.defer(function(){this.$phoneTipWrapper.removeClass("invisible")}.bind(this)),this.$phoneTipWrapper.on("click",function(t){Object(n.a)(t.target).closest(".tip").is(this.$tip)||(this.hideTip(),this.$phoneTipWrapper.off())}.bind(this)),this.$closeButton.on("click",this.onCloseButtonClick)):(this.hotspotWidget.apply_tip_container_size({width:this.tip_w,height:this.tip_h}),this.applyTipPosition(),this.$tip.removeClass("invisible"),this.BringToTopZ(),this.page.mag.router.$mags_container.on("mousedown touchstart",this.onGlobalMouseDown),this.isHoverable()||Object(n.a)("body").on("keydown",this.onBodyKeyDown)),this.listenTo(this.page.mag,"change:viewport",this.onMagViewportBeforeChange),this.isTipVisible=!0)},hideTip:function(){this.isTipVisible&&(this.isTipVisible=!1,clearTimeout(this.mouseLeaveTimeout),this.isPhone()?(this.$phoneTipWrapper.addClass("invisible"),this.$phoneTipWrapper.off("touchstart",this.onTipTouchStart),this.$phoneTipWrapper.off("touchmove",this.onTipTouchMove),r.a.delay(function(){this.$tip.detach().appendTo(this.$tipParent),this.$phoneTipWrapper&&this.$phoneTipWrapper.detach()}.bind(this),200)):(this.$tip.addClass("invisible"),this.BackToNormalZ(),Object(n.a)("body").off("keydown",this.onBodyKeyDown)),this.stopListening(this.page.mag,"change:viewport"))},onTipTouchStart:function(t){this.tipScrollY=t.originalEvent.touches.item(0).clientY},onTipTouchMove:function(t){t.stopPropagation();var e=Object(n.a)(t.currentTarget),i=this.tipScrollY-t.originalEvent.touches.item(0).clientY;(i<0&&e.scrollTop()<=0||i>0&&e.scrollTop()+e.height()>=e[0].scrollHeight)&&t.preventDefault(),this.tipScrollY=t.originalEvent.touches.item(0).clientY},onCloseButtonClick:function(){this.$closeButton.off("click",this.onCloseButtonClick),this.hideTip()},onMagViewportBeforeChange:function(){this.hideTip()},onGlobalMouseDown:function(t){var e=Object(n.a)(t.target),i=e.closest(".pin"),r=e.closest(".tip");i.is(this.$pin)||r.is(this.$tip)||(this.page.mag.router.$mags_container.off("mousedown touchstart",this.onGlobalMouseDown),this.hideTip())},isPhone:function(){return h.a.isPhone||this.isPreview&&"phone_portrait"===this.page.mag.viewport},isHoverable:function(){return"hover"===this.tip_show_on&&h.a.isDesktop&&!this.isPhone()&&"tablet_portrait"!==this.page.mag.viewport},onBodyKeyDown:function(t){t.keyCode===n.a.keycodes.esc&&this.hideTip()},destroy:function(){return this.hotspotWidget&&this.hotspotWidget.destroy(),this.hotspotWidget=null,o.a.prototype.destroy.apply(this,arguments)}});e.default=m},wS4Y:function(t,e,i){"use strict";var n,r=i("AIVH");function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(){var t=d(['\n\t<%=code%>\n\t<div class="overlay"></div>\n']);return a=function(){return t},t}function s(){var t=d(['\n\t<%=code%>\n\t<div class="overlay"></div>\n']);return s=function(){return t},t}function c(){var t=d(['\n\t<a href="https://twitter.com/intent/tweet?button_hashtag=<%-hash%>" class="twitter-hashtag-button" data-size="<%=large_button ? \'large\' : \'medium\'%>">Tweet #<%-hash%></a>\n\t<div class="overlay"></div>\n']);return c=function(){return t},t}function l(){var t=d(['\n\t<a href="https://twitter.com/<%-username ? username : \'Readymag\'%>" class="twitter-follow-button" data-show-count="false" data-show-screen-name="<%=show_name ? \'true\' : \'false\'%>" data-lang="en" data-size="<%=large_button ? \'large\' : \'medium\'%>">Follow @<%-username%></a>\n\t<div class="overlay"></div>\n']);return l=function(){return t},t}function h(){var t=d(['\n\t<a href="https://twitter.com/share" class="twitter-share-button" data-url="<%-url%>" data-lang="en" data-size="<%=large_button ? \'large\' : \'medium\'%>" data-text="<%- typeof text !== \'undefined\' ? text : \'\'%>">Tweet</a>\n\t<div class="overlay"></div>\n']);return h=function(){return t},t}function d(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}e.a=(o(n={},"template-constructor-block-twitter-type_tweet",Object(r.a)(h())),o(n,"template-constructor-block-twitter-type_follow",Object(r.a)(l())),o(n,"template-constructor-block-twitter-type_hashtag",Object(r.a)(c())),o(n,"template-constructor-block-twitter-type_timeline",Object(r.a)(s())),o(n,"template-constructor-block-twitter-type_embed",Object(r.a)(a())),n)},yERL:function(t,e,i){"use strict";i.r(e);var n=i("xi34"),r=i("KOTZ"),o=i("A0Lk"),a=i.n(o),s=i("OTSC"),c=i("f3SV"),l=r.default.extend({initialize:function(){r.default.prototype.initialize.apply(this,arguments),this.is_above&&this.mag.on("destroyed",this.destroy)},render:function(){var t=this,e=!1;if(RM.screenshot)window.ServerData.userPermissions&&window.ServerData.userPermissions.can_use_e_commerce&&(e=!0);else{var i=RM.viewerRouter?RM.viewerRouter.getUserPermissions():RM.constructorRouter.me.get("permissions");i&&i.can_use_e_commerce&&(e=!0)}if(e){if(r.default.prototype.render.apply(this,arguments),!RM.screenshot){this.mag.eCommerceManager.events.on("ecommerce:cartdata:changed",this.renderTotalItems);var n=this["font-family"];if(n&&!c.c.systemFontsList.includes(n.toLowerCase())){var o=new a.a(this["font-family"]);o.load().then((function(){t.renderTotalItems(t.mag.eCommerceManager.getCartData())})).catch((function(){t.renderTotalItems(t.mag.eCommerceManager.getCartData())}))}else this.renderTotalItems(this.mag.eCommerceManager.getCartData())}return this}},renderTotalItems:function(t){if(t&&(t.skus||t.prices)){var e=0;for(var i in t.skus)t.skus.hasOwnProperty(i)&&(e+=t.skus[i].cart_count);for(var n in t.prices)t.prices.hasOwnProperty(n)&&(e+=t.prices[n].cart_count);var r=e?"".concat(this.text||""," ").concat(e):this.text||"",o=this.recalcTextInputSize(r);this.renderButtonTextWithSizes(r,o)}},onButtonClick:function(){this.mag.eCommerceManager.changeCartSidebarVisibility()},recalcTextInputSize:function(t){var e,i,r,o,a=this["font-size"],c=this["letter-spacing"],l=this["font-family"],h=this["font-style"],d=this["font-weight"];return this.$textInputSizeAdjuster||(this.$textInputSizeAdjuster=Object(n.a)("<div/>"),this.$textInputSizeAdjuster.css({position:"absolute",left:"-9999px",top:"-9999px","white-space":"pre",width:"auto"}),Object(n.a)(document.getElementById("tmp")).append(this.$textInputSizeAdjuster)),this.$textInputSizeAdjuster.addClass("for-text-size-calc").addClass(s.default.generateUUID()),this.$textInputSizeAdjuster.text(t.trim()),this.$textInputSizeAdjuster.css({"font-family":l,"font-style":h,"font-weight":d,"font-size":a+"px","letter-spacing":c+"px"}),e=this.$textInputSizeAdjuster.width(),i=this.$textInputSizeAdjuster.height(),this.$textInputSizeAdjuster.css("letter-spacing",0).text("M"),r=this.$textInputSizeAdjuster.width(),r=2*Math.ceil(r/2),o=this.$textInputSizeAdjuster.height(),0===t.length&&(e=r,i=o),e=2*Math.ceil(e/2),{text_w:e+=r,text_h:i=2*Math.ceil(i/2)}},destroy:function(){return this.mag.eCommerceManager.events.off("ecommerce:cartdata:changed",this.renderTotalItems),this.$textInputSizeAdjuster&&(this.$textInputSizeAdjuster.remove(),this.$textInputSizeAdjuster=null),r.default.prototype.destroy.apply(this,arguments)}});e.default=l},zzMN:function(t,e,i){"use strict";var n=i("xi34"),r=i("q1z7"),o=i.n(r),a=i("rFsW"),s=i("OTSC"),c=i("f3SV"),l=i("AIVH");function h(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\t<div class="add-to-cart-wrap">\n\t\t<div class="add-to-cart-attributes"></div>\n\t\t<div class="button-wrap">\n\t\t\t<div class="add-to-cart-button">\n\t\t\t\t<div class="add-to-cart-error-block"></div>\n\t\t\t\t<div class="button-icon"></div>\n\t\t\t\t<input type="text" class="button-text" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" readonly="readonly"/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="sizes-calculating-block"></div>\n\t</div>\n']);return h=function(){return t},t}var d,u,p,f=(d={},u="template-common-add-to-cart-wrap",p=Object(l.a)(h()),u in d?Object.defineProperty(d,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[u]=p,d),m=i("phNm"),g=o.a.View.extend({selectIconRight:18,selectIconTextMargin:2,initialize:function(t){a.a.bindAll(this),this.data=t.data,this.$container=t.$container,this.environment=t.environment,this.block=t.block,this.eCommerceManager=t.eCommerceManager,this.template=f["template-common-add-to-cart-wrap"],this.product=null,this.selects=[],this.selectsMap={},this.attributes=[],this.selectsValues={},this.restrictions={},this.constraints={width:0,height:0},this.showSkus=!1,this.longestAttribute="",this.selectPadding=0,this.setData_debounced=a.a.debounce(this.setData,100),this.setModel_debounced=a.a.debounce(this.setModel,200),this.$container.html(this.template),this.setElement(this.$container.find(".add-to-cart-wrap")),this.$button=this.$el.find(".add-to-cart-button"),this.$buttonIcon=this.$button.find(".button-icon"),this.$errorBlock=this.$button.find(".add-to-cart-error-block"),this.$buttonText=this.$button.find(".button-text"),this.$attrsContainer=this.$el.find(".add-to-cart-attributes"),this.$sizesCalculatingBlock=this.$el.find(".sizes-calculating-block")},render:function(t){if(!this.rendered){if(this.provider=this.eCommerceManager.getConnectedProvider(),this.eCommerceManager.events.on("ecommerce:update:provider",this.onProviderChanged.bind(this)),!this.provider||"default"===this.data.selected_product_id)return this.rendered=!1,this.showSkus=!1,this.renderButton(this.data,t),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.recalcDimensions({width:this.data.w,height:this.data.h}),this.trigger("loaded"),void this.setMinimalDimensions();this.getProduct()}},destroy:function(){this.unbindDOMEvents(),this.eCommerceManager.events.off("ecommerce:update:provider",this.onProviderChanged.bind(this))},onProviderChanged:function(t){this.provider!==t&&(this.provider=t,this.rerender())},rerender:function(t){t&&(this.data=t),this.rendered=!1,this.render()},getProduct:function(){this.product=this.eCommerceManager.getProductById(this.data.selected_product_id),this.eCommerceManager.events.on("ecommerce:loadproducts:complete",this.getProduct.bind(this)),this.product?(this.showSkus=this.checkSkus(null,this.product),this.renderAttributes(this.data),this.renderButton(this.data),this.renderMargins(),"horizontal"===this.data.layout&&this.setHorizontalLayoutClass(),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.recalcDimensions({width:this.data.w,height:this.data.h}),this.trigger("loaded"),this.setMinimalDimensions(),this.bindDOMEvents()):(this.eCommerceManager.productsLoaded||this.eCommerceManager.productsLoadingError)&&(this.showSkus=!1,this.renderButton(this.data),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.recalcDimensions({width:this.data.w,height:this.data.h}),this.trigger("loaded"),this.setMinimalDimensions())},checkSkus:function(t,e){return!!this.provider&&(e?i=e:t?i=this.eCommerceManager.getProductById(t):this.data.selected_product_id&&"default"!==this.data.selected_product_id&&(i=this.eCommerceManager.getProductById(this.data.selected_product_id)),!!i&&(this.product=i,this.eCommerceManager.productHasActiveSku(i)));var i},renderButton:function(t,e){this.showSkus||(this.$attrsContainer.empty().css({"margin-bottom":0,"margin-right":0}),this.selects=[],this.selectsMap={},this.attributes=[]),this.$buttonText.val(t.text),"constructor"!==this.environment&&this.$button.addClass("viewer-button"),this.renderButtonIcon(t),e&&e.isNew||this.checkOutOfStock()},renderButtonIcon:function(t){if(t.icon_enabled){var e="left"===t.icon_pos?"row":"row-reverse";this.$button.css("flex-direction",e),this.$buttonIcon.css({display:"inline-block",height:t.icon_h,width:t.icon_w})}else this.$buttonIcon.css({display:"none"})},renderAttributes:function(t){var e=this;if(this.$attrsContainer.empty().css({"margin-bottom":0,"margin-right":0}),this.selects=[],this.selectsMap={},this.attributes=[],this.showSkus){var i=this.product?this.product:this.eCommerceManager.getProductById(t.selected_product_id);i&&(this.product||(this.product=i),("constructor"===this.environment||i.active)&&("constructor"!==this.environment&&this.calculateSelectRestrictions(),"stripe"===this.provider&&i.attributes.forEach((function(t){t.length>e.longestAttribute.length&&(e.longestAttribute=t);var i=e.renderStripeSelect(t);e.selects.push(i),e.selectsMap[t]=i,e.attributes.push(t)})),"ecwid"===this.provider&&i.options.forEach((function(t){if(e.eCommerceManager.isOptionValid(t)){t.name.length>e.longestAttribute.length&&(e.longestAttribute=t.name);var i=e.renderEcwidSelect(t);e.selects.push(i),e.selectsMap[t.name]=i,e.attributes.push(t.name)}}))))}},renderStripeSelect:function(t){var e;if("constructor"===this.environment){e=Object(n.a)("<select>",{class:"attributes-input",value:t}).attr("name",t);var i=Object(n.a)("<option>").attr("value",t).addClass("attributes-option default-option").text(t);e.append(i)}else e=Object(n.a)("<select>").attr("name",t).addClass("attributes-input"),this.renderSelectOptions(t,e,!0),e.on("change",this.onSelectChange.bind(this));return this.addSelectToPage(e,t),e},renderEcwidSelect:function(t){var e,i,r=(null===(e=t.nameTranslated)||void 0===e?void 0:e[this.eCommerceManager.userLocale])||t.name;if("constructor"===this.environment){i=Object(n.a)("<select>",{value:t.name}).attr("name",t.name).addClass("attributes-input");var o=Object(n.a)("<option>").attr("value",t.name).addClass("attributes-option default-option").text(r);i.append(o)}else i=Object(n.a)("<select>").attr("name",t.name).addClass("attributes-input"),this.renderEcwidSelectOptions(t.name,i,!0),i.on("change",this.onSelectChange.bind(this));return this.addSelectToPage(i,r),i},addSelectToPage:function(t,e){var i=Object(n.a)("<div>",{class:"select-container"});i.append('<div class="add-to-cart-error-block"></div>');var r=Object(n.a)("<input>",{type:"text",class:"fake-select",readonly:!0,tabindex:-1,value:e}),o=Object(n.a)('<svg class="select-dropdown-triangle" width="10px" height="16px" viewBox="0 0 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="dev" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="E-comm-W-01.4" transform="translate(-632.000000, -263.000000)" fill="#FFFFFF"><g transform="translate(494.500000, 247.000000)"><g><g transform="translate(136.000000, 15.500000)"><path d="M3.88579937,12.2407434 L8.34920863,8.41496403 C8.76853447,8.05554188 9.39983445,8.10410342 9.7592566,8.52342926 C9.91460784,8.70467237 10,8.93550936 10,9.17422064 L10,16.8257794 C10,17.3780641 9.55228475,17.8257794 9,17.8257794 C8.76128873,17.8257794 8.53045174,17.7403872 8.34920863,17.585036 L3.88579937,13.7592566 C3.46647353,13.3998345 3.41791199,12.7685345 3.77733414,12.3492086 C3.81065883,12.3103298 3.84692056,12.2740681 3.88579937,12.2407434 Z" id="arrow-copy" transform="translate(6.500000, 13.000000) scale(-1, -1) rotate(-270.000000) translate(-6.500000, -13.000000) "></path><path d="M3.88579937,3.2407434 L8.34920863,-0.585035966 C8.76853447,-0.944458116 9.39983445,-0.895896579 9.7592566,-0.476570737 C9.91460784,-0.295327627 10,-0.0644906353 10,0.174220637 L10,7.82577936 C10,8.37806411 9.55228475,8.82577936 9,8.82577936 C8.76128873,8.82577936 8.53045174,8.7403872 8.34920863,8.58503597 L3.88579937,4.7592566 C3.46647353,4.39983445 3.41791199,3.76853447 3.77733414,3.34920863 C3.81065883,3.31032982 3.84692056,3.27406809 3.88579937,3.2407434 Z" id="arrow-copy" transform="translate(6.500000, 4.000000) scale(-1, 1) rotate(-270.000000) translate(-6.500000, -4.000000) "></path></g></g></g></g></g></svg>');this.$attrsContainer.append(i),i.append(r,o,t),"constructor"===this.environment&&i.append(Object(n.a)("<div>",{class:"select-overlay"}))},renderSelectOptions:function(t,e,i){var r=this,o=this.getAllSelectOptions();e.empty();var a=Object(n.a)("<option>").attr("value","default").addClass("attributes-option default-option").text(t);e.append(a),o[t]&&o[t].forEach((function(i){var o=Object(n.a)("<option>").attr("value",i).addClass("attributes-option").text(i);r.restrictions[t]&&!r.restrictions[t].includes(i)&&o.attr("disabled",!0),e.append(o)})),i?this.selectsValues[t]="default":e.val(this.selectsValues[t])},renderEcwidSelectOptions:function(t,e,i){var r=this.getTranslatedOptions(t);e.empty();var o=Object(n.a)("<option>").attr("value","default").addClass("attributes-option default-option").text(r[t].tanslatedName);e.append(o),r[t]&&r[t].values.forEach((function(i){var o=Object(n.a)("<option>").attr("value",i).addClass("attributes-option").text(r[t].translatedValues[i]);e.append(o)})),i?this.selectsValues[t]="default":e.val(this.selectsValues[t])},getAllSelectOptions:function(){var t={};return"stripe"===this.provider&&this.product.articles.forEach((function(e){Object.keys(e.attributes).forEach((function(i){t[i]=t[i]||[],t[i].includes(e.attributes[i])||t[i].push(e.attributes[i])}))})),"ecwid"===this.provider&&this.product.options.forEach((function(e){t[e.name]=[],e.choices.forEach((function(i){return t[e.name].push(i.text)}))})),t},getTranslatedOptions:function(t){var e=this,i={};return this.product.options.forEach((function(n){var r;if(!t||n.name===t){var o=(null===(r=n.nameTranslated)||void 0===r?void 0:r[e.eCommerceManager.userLocale])||n.name;i[n.name]={tanslatedName:o,values:[],translatedValues:{}},n.choices.forEach((function(t){i[n.name].values.push(t.text);var r=t.textTranslated&&t.textTranslated[e.eCommerceManager.userLocale]?t.textTranslated[e.eCommerceManager.userLocale]:t.text;i[n.name].translatedValues[t.text]=r}))}})),i},calculateSelectRestrictions:function(){if("ecwid"===this.provider)return this.getAllSelectOptions();this.restrictions={};var t,e={},i=0;for(var n in this.selectsValues)"default"!==this.selectsValues[n]&&(e[n]=this.selectsValues[n],t=n,i+=1);this.product.articles.forEach(function(n){if(a.a.isMatch(n.attributes,e))for(var r in n.attributes)this.restrictions[r]?-1===this.restrictions[r].indexOf(n.attributes[r])&&this.restrictions[r].push(n.attributes[r]):this.restrictions[r]=[n.attributes[r]];1===i&&(this.restrictions[t]?-1===this.restrictions[t].indexOf(n.attributes[t])&&this.restrictions[t].push(n.attributes[t]):this.restrictions[t]=[n.attributes[t]])}.bind(this))},renderMargins:function(t){var e=t||this.data.layout;if(this.$attrsContainer.css({"margin-bottom":0,"margin-right":0}),this.showSkus&&this.selects.length){var i=this.selects.length-1;"horizontal"===e?(this.$attrsContainer.css({"margin-right":this.data.select_btn_margin}),this.selects.forEach(function(t,e){t.parent().css({"margin-bottom":0,"margin-right":e<i?this.data.attributes_margin:0})}.bind(this))):(this.$attrsContainer.css({"margin-bottom":this.data.select_btn_margin}),this.selects.forEach(function(t,e){t.parent().css({"margin-bottom":e<i?this.data.attributes_margin:0,"margin-right":0})}.bind(this)))}},generateIndividualStyleCSS:function(t,e,i){var n=e||"default",r=i||"both";"constructor"===this.environment?this.generateStyleCSS(t,n,r):(this.generateStyleCSS(t,n,r),this.generateHoverStyleCSS(t))},bindDOMEvents:function(){this.eCommerceManager.events.on("ecommerce:cartdata:changed",this.checkOutOfStock),"constructor"!==this.environment&&this.$button.on("click",this.onAddToCartClick)},unbindDOMEvents:function(){this.eCommerceManager.events.off("ecommerce:cartdata:changed",this.checkOutOfStock),"constructor"!==this.environment&&this.$button.off("click",this.onAddToCartClick)},getSimpleMinimalDimensions:function(){return this.showSkus?"vertical"===this.data.layout?{width:50,height:100}:{width:190,height:30}:{width:42,height:16}},getHorizontalTextMargin:function(t){return Math.ceil(t/4)},getVerticalTextMargin:function(t){return Math.ceil(t/6)},getHorizontalIconMargin:function(t){return Math.ceil(t/4)},getVerticalIconMargin:function(t){return Math.ceil(t/6)},getMinimalDimensions:function(){var t=0,e=0,i=this.data.icon_h+2*this.getVerticalIconMargin(this.data.icon_h);if("text"===this.data.tp?(t=this.data.text_w,e=this.data.text_h):"icon"===this.data.tp?(t=this.data.icon_w+2*this.getHorizontalIconMargin(this.data.icon_w),e=i):(t=this.data.text_w+this.data.icon_w+this.getHorizontalTextMargin(this.data["font-size"]),e=this.data.text_h>i?this.data.text_h:i),this.showSkus){var n=this.data["attrs-icon-h"]+2*this.getVerticalIconMargin(this.data["attrs-icon-h"]),r=this.data["attrs-text_w"]+2*this.getSelectsPadding(),o=this.data["attrs-text_h"]>n?this.data["attrs-text_h"]:n,a=t>r?t:r,s=e>o?e:o,c=(this.selects.length-1)*this.data.attributes_margin,l=0,h=0;return"vertical"===this.data.layout?(l=a,h=s*(this.selects.length+1)+c+this.data.select_btn_margin):(l=a*(this.selects.length+1)+c+this.data.select_btn_margin,h=s),{width:l,height:h}}return{width:t,height:e}},setMinimalDimensions:function(t,e){if(!a.a.isUndefined(t)&&!a.a.isUndefined(e))return this.constraints={width:t,height:e},void(this.block&&this.block.setSizeConstraints(t,e));if("constructor"===this.environment){var i=this.getMinimalDimensions();this.constraints=i,this.block.setSizeConstraints(i.width,i.height)}},recalcDimensions:function(t){if(this.rendered){var e=this.showSkus?this.data.select_btn_margin:0,i=this.showSkus?this.selects.length+1:1,n=this.showSkus?(this.selects.length-1)*this.data.attributes_margin:0;if("vertical"===this.data.layout){if(!t.height)return;var r=t.height-e-n,o=Math.round(r/i);this.$button.css({height:o+"px",width:"100%"}),this.showSkus&&this.selects.forEach((function(t){t.parent().css({height:o+"px",width:"100%"})}))}else{if(!t.width)return;var a=t.width-e-n,s=Math.round(a/i);this.$button.css({width:s+"px",height:"100%"}),this.showSkus&&this.selects.forEach((function(t){t.parent().css({width:s+"px",height:"100%"})}))}}},updateRecalcDimensionsOnProductChange:function(){var t=this.recalcDimensionsOnProductChange();this.block.updateBlockSizes(t)},recalcDimensionsOnProductChange:function(){var t,e,i=this.showSkus?this.data.select_btn_margin:0,n=this.showSkus?this.selects.length+1:1,r=this.showSkus?(this.selects.length-1)*this.data.attributes_margin:0,o=this.data.btn_h,a=this.data.btn_w;return"vertical"===this.data.layout?(t=o*n+r+i,e=a):(t=o,e=a*n+r+i),this.$button.css({height:o+"px",width:a+"px"}),this.showSkus&&this.selects.forEach((function(t){t.parent().css({height:o+"px",width:a+"px"})})),{width:e,height:t}},recalcWidgetSizesAfterChangeLayout:function(t){var e=t||this.data.layout,i=this.data.btn_h,n=this.data.btn_w,r=i,o=n;return this.showSkus&&("horizontal"===e?o=n+n*this.selects.length+this.data.select_btn_margin+this.data.attributes_margin*(this.selects.length-1):r=i+i*this.selects.length+this.data.select_btn_margin+this.data.attributes_margin*(this.selects.length-1)),this.block.updateBlockSizes({width:o,height:r}),{width:o,height:r}},isAllSelectsNotDefault:function(){var t=!0;for(var e in this.selectsValues)if("default"===this.selectsValues[e]){t=!1;break}return t},getArticleBySelectsValues:function(){return this.product?1===this.product.articles.length?this.product.articles[0]:this.product.articles.find(function(t){return a.a.isMatch(t.attributes,this.selectsValues)}.bind(this)):null},getProductPrice:function(){return this.product&&this.product.prices&&this.product.prices.length?this.product.prices.find((function(t){return t.active&&"per_unit"===t.billing_scheme})):null},onSelectChange:function(t){this.hideError();var e=Object(n.a)(t.target),i=e.find("option:selected"),r=e.attr("name");this.selectsValues[r]=e.val(),e.parent().find(".fake-select").attr("value","default"===e.val()?e.find("[value=default]").text():i.text()),this.calculateSelectRestrictions(),"stripe"===this.provider&&this.product.attributes.forEach(function(t){this.renderSelectOptions(t,this.selectsMap[t])}.bind(this))},onAddToCartClick:function(){var t=this;if(this.hideError(),this.product||this.showError(),this.isAllSelectsNotDefault()){var e=this.eCommerceManager.getProductForAddToCart(this.product,this.selectsValues);if(e){var i=this.eCommerceManager.addProductToCart(e);if(i instanceof m.a)return void(i.type===m.c.outOfStock?this.showOutOfStockError():this.showError());this.environment===c.c.environment.viewer&&RM.analytics&&RM.analytics.sendEvent("Item added to cart",e.id),Object.keys(this.selectsMap).forEach((function(e){var i=t.selectsMap[e];i.find("option").prop("selected",!1),i.find("option[value=default]").prop("selected",!0),t.selectsValues[e]="default",i.parent().find(".fake-select").attr("value",i.find("option[value=default]").text()),t.calculateSelectRestrictions()})),Object.keys(this.selectsMap).length&&"stripe"===this.provider&&this.product.attributes.forEach((function(e){return t.renderSelectOptions(e,t.selectsMap[e])}))}else this.showError()}else this.showError("select")},showError:function(t){"select"!==t?this.$button.addClass("add-to-cart-error"):this.selects.map((function(t){t.parents(".select-container").toggleClass("add-to-cart-error","default"===t.val())}))},showOutOfStockError:function(){this.showError(),this.$buttonText.val(this.eCommerceManager.getTextValue("out_of_stock"))},showInvalidError:function(){this.showError(),"constructor"===this.environment||RM.screenshot||this.$buttonText.val("No product")},checkOutOfStock:function(){if(!RM.screenshot){if(!this.product||void 0===this.eCommerceManager.checkProductActive(this.product.id))return this.showInvalidError();if("stripe"===this.provider){var t=this.getArticleBySelectsValues();if("constructor"!==this.environment&&!RM.screenshot&&t&&!this.eCommerceManager.checkItemQuantity(t))return this.showOutOfStockError()}if("ecwid"===this.provider){var e=this.eCommerceManager.isProductAvailable(this.eCommerceManager.getProductForAddToCart(this.product,this.selectsValues));if("constructor"!==this.environment&&!RM.screenshot&&!e)return this.showOutOfStockError()}this.$buttonText.val(this.data.text),this.hideError()}},hideError:function(){this.$button.removeClass("add-to-cart-error"),this.selects.map((function(t){return t.parents(".select-container").removeClass("add-to-cart-error")})),this.$buttonText.val(this.data.text)},onProductChange:function(t){t&&(this.data=t),this.rendered=!1,this.showSkus=this.checkSkus(this.data.selected_product_id),this.showSkus?this.product&&(this.renderAttributes(this.data),this.renderButton(this.data),this.renderMargins(),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.updateRecalcDimensionsOnProductChange()):(this.renderButton(this.data),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.updateRecalcDimensionsOnProductChange())},setHorizontalLayoutClass:function(){this.$el.hasClass("horizontal-layout")||this.$el.addClass("horizontal-layout")},removeHorizontalLayoutClass:function(){this.$el.hasClass("horizontal-layout")&&this.$el.removeClass("horizontal-layout")},onLayoutChange:function(t){if(this.rendered){this.data=t;var e=t.layout,i=this.recalcWidgetSizesAfterChangeLayout(e);this.renderMargins(e),"horizontal"===e?this.setHorizontalLayoutClass():this.removeHorizontalLayoutClass(),this.recalcDimensions(i),this.setMinimalDimensions()}},applyButtonTextSize:function(t){this.data=t,this.$buttonText.css({height:t.text_h+"px",width:t.text_w+"px"})},applyButtonIconSize:function(t){this.data=t,this.$buttonIcon.css({height:t.icon_h+"px",width:t.icon_w+"px"})},applyButtonIconPosition:function(t){this.data=t;var e="left"===t.icon_pos?"row":"row-reverse";this.$button.css("flex-direction",e)},applySelectsIconSize:function(t){var e=this;this.data=t,this.showSkus&&(this.selectPadding=t["attrs-icon-w"]+this.selectIconRight+this.selectIconTextMargin,this.selects.forEach((function(i){var n=i.parent();n.find(".fake-select").css({padding:"0 ".concat(e.selectPadding,"px")}),n.find(".select-dropdown-triangle").css({width:t["attrs-icon-w"]+"px",height:t["attrs-icon-h"]+"px"})})))},getButtonText:function(){return this.$buttonText.val().trim()},enterEditMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$buttonText.removeAttr("readonly").addClass("editing"),t.selectText?this.$buttonText.select():this.$buttonText.focus().setCursorPos(0),this.block.selectEditControl()},leaveEditMode:function(){this.$buttonText.blur().attr("readonly",!0).removeClass("editing")},setData:function(t){this.data=t},setModel:function(t,e){this.block.model.set(t),e&&this.block.model.save()},getColorForErrorBorder:function(t){return t.isBorderSet?s.default.getRGBA(t.border,t.borderOpacity/100):s.default.getRGBA(t.bg,t.bgOpacity/100)},getDropdownTriangleSizeFromFontSize:function(t){return{h:16*t/18,w:10*t/18}},getSelectsPadding:function(){return this.selectPadding},getLongestAttribute:function(){return this.longestAttribute},generateStyleCSS:function(t,e,i){function n(t){return(!e||"default"===e||"both"!==i&&"button"!==i?"":"hover-")+t}function r(t){return(!e||"default"===e||"both"!==i&&"selects"!==i?"attrs-":"attrs-hover-")+t}var o=this.getColorForErrorBorder({bg:t[n("background-color")],bgOpacity:t[n("background-color-opacity")],border:t[n("border-color")],borderOpacity:t[n("border-color-opacity")],isBorderSet:!!t[n("border-width")]});if(this.$errorBlock.css({borderColor:o}),this.$button.css({color:s.default.getRGBA(t[n("color")],t[n("color-opacity")]/100),"background-color":s.default.getRGBA(t[n("background-color")],t[n("background-color-opacity")]/100),"border-radius":t[n("border-radius")]+"px","box-shadow":s.default.getRGBA(t[n("border-color")],t[n("border-color-opacity")]/100)+"0px 0px 0px "+t[n("border-width")]+"px inset"}),"constructor"===this.environment)this.$button.find(".button-icon svg path").css({fill:s.default.getRGBA(t[n("icon_color")],t[n("icon_color_opacity")]/100)});else{var a=t[n("icon_raster2xUrl")]?t[n("icon_raster2xUrl")]:t[n("icon_rasterUrl")];a&&this.$buttonIcon.css({"background-image":"url("+a+")"})}this.$buttonText.css({width:t.text_w+"px",height:t.text_h+"px","line-height":t.text_h+"px","font-family":t[n("font-family")],"font-size":t[n("font-size")]+"px","font-weight":t[n("font-weight")],"font-style":t[n("font-style")],"letter-spacing":t[n("letter-spacing")],"text-align":t[n("text-align")]}),this.showSkus&&(this.selectPadding=t["attrs-icon-w"]+this.selectIconRight+this.selectIconTextMargin,this.selects.forEach(function(e){var i=e.parent();i.find(".add-to-cart-error-block").css({borderColor:o}),i.css({"background-color":s.default.getRGBA(t[r("background-color")],t[r("background-color-opacity")]/100),"border-radius":t[r("border-radius")]+"px","box-shadow":s.default.getRGBA(t[r("border-color")],t[r("border-color-opacity")]/100)+"0px 0px 0px "+t[r("border-width")]+"px inset"}),i.find(".fake-select").css({padding:"0 ".concat(this.selectPadding,"px"),"border-radius":t[r("border-radius")]+"px",color:s.default.getRGBA(t[r("color")],t[r("color-opacity")]/100),"font-family":t[r("font-family")],"font-size":t[r("font-size")]+"px","font-weight":t[r("font-weight")],"font-style":t[r("font-style")],"letter-spacing":t[r("letter-spacing")],"text-align":t[r("text-align")],"text-align-last":t[r("text-align")]}),i.find(".select-dropdown-triangle path").css({fill:s.default.getRGBA(t[r("color")],t[r("color-opacity")]/100)}),i.find(".select-dropdown-triangle").css({width:t["attrs-icon-w"],height:t["attrs-icon-h"]})}.bind(this)))},generateHoverStyleCSS:function(t){var e=this.$buttonText,i=this.$buttonIcon;this.$button.hover((function(){if(Object(n.a)(this).css({color:s.default.getRGBA(t["hover-color"],t["hover-color-opacity"]/100),"background-color":s.default.getRGBA(t["hover-background-color"],t["hover-background-color-opacity"]/100),"border-radius":t["hover-border-radius"]+"px","box-shadow":s.default.getRGBA(t["hover-border-color"],t["hover-border-color-opacity"]/100)+"0px 0px 0px "+t["hover-border-width"]+"px inset"}),"constructor"!==this.environment){var r=t["hover-icon_raster2xUrl"]?t["hover-icon_raster2xUrl"]:t["hover-icon_rasterUrl"];r&&i.css({"background-image":"url("+r+")"})}else Object(n.a)(this).find(".button-icon svg path").css({fill:s.default.getRGBA(t["hover-icon_color"],t["hover-icon_color_opacity"]/100)});e.css({"font-family":t["hover-font-family"],"font-size":t["hover-font-size"]+"px","font-weight":t["hover-font-weight"],"font-style":t["hover-font-style"],"letter-spacing":t["hover-letter-spacing"],"text-align":t["hover-text-align"]})}),(function(){if(Object(n.a)(this).css({color:s.default.getRGBA(t.color,t["color-opacity"]/100),"background-color":s.default.getRGBA(t["background-color"],t["background-color-opacity"]/100),"border-radius":t["border-radius"]+"px","box-shadow":s.default.getRGBA(t["border-color"],t["border-color-opacity"]/100)+"0px 0px 0px "+t["border-width"]+"px inset"}),"constructor"!==this.environment){var r=t.icon_raster2xUrl?t.icon_raster2xUrl:t.icon_rasterUrl;r&&i.css({"background-image":"url("+r+")"})}else Object(n.a)(this).find(".button-icon svg path").css({fill:s.default.getRGBA(t.color,t["color-opacity"]/100)});e.css({"font-family":t["font-family"],"font-size":t["font-size"]+"px","font-weight":t["font-weight"],"font-style":t["font-style"],"letter-spacing":t["letter-spacing"],"text-align":t["text-align"]})})),this.showSkus&&this.selects.forEach(function(e){e.hover((function(){Object(n.a)(this).parent().css({"background-color":s.default.getRGBA(t["attrs-hover-background-color"],t["attrs-hover-background-color-opacity"]/100),"border-radius":t["attrs-hover-border-radius"]+"px","box-shadow":s.default.getRGBA(t["attrs-hover-border-color"],t["attrs-hover-border-color-opacity"]/100)+"0px 0px 0px "+t["attrs-hover-border-width"]+"px inset"}),Object(n.a)(this).parent().find(".fake-select").css({"border-radius":t["attrs-hover-border-radius"]+"px",color:s.default.getRGBA(t["attrs-hover-color"],t["attrs-hover-color-opacity"]/100),"font-family":t["attrs-hover-font-family"],"font-size":t["attrs-hover-font-size"]+"px","font-weight":t["attrs-hover-font-weight"],"font-style":t["attrs-hover-font-style"],"letter-spacing":t["attrs-hover-letter-spacing"],"text-align":t["attrs-hover-text-align"],"text-align-last":t["attrs-hover-text-align"]}),Object(n.a)(this).parent().find(".select-dropdown-triangle path").css({fill:s.default.getRGBA(t["attrs-hover-color"],t["attrs-hover-color-opacity"]/100)})}),(function(){Object(n.a)(this).parent().css({"background-color":s.default.getRGBA(t["attrs-background-color"],t["attrs-background-color-opacity"]/100),"border-radius":t["attrs-border-radius"]+"px","box-shadow":s.default.getRGBA(t["attrs-border-color"],t["attrs-border-color-opacity"]/100)+"0px 0px 0px "+t["attrs-border-width"]+"px inset"}),Object(n.a)(this).parent().find(".fake-select").css({"border-radius":t["attrs-border-radius"]+"px",color:s.default.getRGBA(t["attrs-color"],t["attrs-color-opacity"]/100),"font-family":t["attrs-font-family"],"font-size":t["attrs-font-size"]+"px","font-weight":t["attrs-font-weight"],"font-style":t["attrs-font-style"],"letter-spacing":t["attrs-letter-spacing"],"text-align":t["attrs-text-align"],"text-align-last":t["attrs-text-align"]}),Object(n.a)(this).parent().find(".select-dropdown-triangle path").css({fill:s.default.getRGBA(t["attrs-color"],t["attrs-color-opacity"]/100)})})),setTimeout(function(){e.parent().css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"}),e.parent().find(".fake-select").css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"})}.bind(this),100),e.parent().find(".select-dropdown-triangle path").css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"})}.bind(this)),setTimeout(function(){this.$button.css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"}),e.css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"}),i.css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"})}.bind(this),100)}},{DEFAULT_ROW_HEIGHT:50,DEFAULT_ROW_WIDTH:168});e.a=g}}]);