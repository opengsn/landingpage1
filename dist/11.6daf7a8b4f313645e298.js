(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{hB7q:function(e,t,a){"use strict";a.r(t),a.d(t,"CodeExportModalWithContext",(function(){return f}));var r=a("vOnD"),n=a("q1tI"),o=a.n(n),l=a("8AXF"),c=a("wEEd"),i=a("iC7s");function s(e,t,a,r,n,o,l){try{var c=e[o](l),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(r,n)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var d=Object(r.e)(i.B).withConfig({displayName:"export___StyledFlex"})(["transition:margin-left 0.35s ease-in-out;"]),p=function(e){var t=e.numId,a=e.email,r=void 0===a?"your email":a,l=e.onDestroyed,m=u(Object(n.useState)(""),2),p=m[0],f=m[1],h=u(Object(n.useState)(!1),2),b=h[0],y=h[1],v=u(Object(n.useState)(!0),2),E=v[0],w=v[1],g=u(Object(n.useState)(!1),2),x=g[0],N=g[1],j=u(Object(n.useState)(!1),2),k=j[0],C=j[1],O=Object(c.d)(E,null,{from:{top:0,left:0,width:"100%",height:"100%",zIndex:9999,position:"absolute",opacity:0},enter:{opacity:1},leave:{opacity:0},onDestroyed:function(){l&&l()}}),S=function(){w(!1)},I=function(e){e.target===e.currentTarget&&S()},A=function(){var e,a=(e=regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),p&&!b){e.next=3;break}return e.abrupt("return");case 3:return y(!0),e.prev=4,e.next=7,fetch("/api/mag/".concat(t,"/export?origin=").concat(p));case 7:y(!1),C(!0),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),y(!1),N(!0),setTimeout((function(){N(!1)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[4,11]])})),function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function l(e){s(o,r,n,l,c,"next",e)}function c(e){s(o,r,n,l,c,"throw",e)}l(void 0)}))});return function(e){return a.apply(this,arguments)}}(),D=o.a.createElement(i.m,{width:"100%"},o.a.createElement(i.m,{p:"0 32px"},o.a.createElement("div",{className:"message"},"Please provide a full URL where the project will be hosted. ",o.a.createElement("br",null)," Typekit fonts will only work on this domain."),o.a.createElement("form",{onSubmit:A},o.a.createElement("input",{className:"domain-input",type:"text",placeholder:"domain.com or domain.com/page",value:p,onChange:function(e){return f(e.target.value)},disabled:b}),o.a.createElement("button",{className:"download ".concat(x?"error":""," ").concat(b?"preloader":""),type:"submit",disabled:x||!p},o.a.createElement("span",null,x?"Error":"Create Export"),o.a.createElement("div",{className:"rmpreloader"},o.a.createElement("div",{className:"arc"})))),o.a.createElement("ul",{className:"alerts"},o.a.createElement("li",{className:"alert-item alert-forms"},o.a.createElement("div",{className:"alert-item-icon"},o.a.createElement("span",{className:"notification-sign"},"!")),o.a.createElement("div",{className:"alert-text"},"1. Forms will not send submitted data to emails, Google Docs, or Mailchimp. Only URL option will work.",o.a.createElement("br",null),"2. In an exported project, sharing customization per page won’t work. Instead, first page settings would be used for the whole project.",o.a.createElement("br",null),"3. Exported projects can’t be password-protected.",o.a.createElement("br",null),o.a.createElement("a",{href:"https://help.readymag.com/hc/en-us/articles/360020647452-Code-export",className:"alert-learn-more",target:"_blank",rel:"noopener noreferrer"},"Learn more")))))),_=o.a.createElement(i.B,{width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},o.a.createElement(i.m,{width:240},o.a.createElement("div",{className:"message"},"Your project is being converted.",o.a.createElement("br",null),"We will send you the download link",o.a.createElement("br",null),"to ",r," when it’s ready."),o.a.createElement("button",{className:"download",onClick:S},o.a.createElement("span",null,"Done"))));return o.a.createElement(o.a.Fragment,null,O.map((function(e){var t=e.item,a=e.key,r=e.props;return t&&o.a.createElement(c.a.div,{key:a,style:r},o.a.createElement("div",{className:"export-code-popup",style:{opacity:1},role:"dialog","aria-labelledby":"export-code-title","aria-modal":"true"},o.a.createElement("div",{className:"panel-wrapper",onClick:I},o.a.createElement("div",{className:"close",onClick:S}),o.a.createElement("div",{className:"panel ".concat(k?"panel-done":"")},o.a.createElement("div",{id:"export-code-title",className:"header"},"Export code"),o.a.createElement(d,{width:"200%",ml:k?"-100%":0},D,_)))))})))},f=function(){var e=Object(n.useContext)(l.BackboneContext),t=e.model,a=e.destroy;return(o.a.createElement(p,{numId:t.num_id,email:t.user&&t.user.email,onDestroyed:a}))};t.default=p}}]);