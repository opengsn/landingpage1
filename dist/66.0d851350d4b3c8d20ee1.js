(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[66],{1134:function(e,t,n){"use strict";n.r(t),n.d(t,{ViewerRouter:function(){return z},startViewer:function(){return M}});var r=n(352),o=n.n(r),a=n(600),i=n.n(a),l=n(661),u=n(1144),c=n(1135);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(){var e=(0,c.UO)(),t=(e.user,e.project,e.pageNum,e.pageUri,{setUrlString:function(){},setTitle:function(){},getMagUri:function(){return""}});return(0,r.useEffect)((function(){window&&Promise.all([Promise.all([n.e(56),n.e(30),n.e(60),n.e(62),n.e(54),n.e(29),n.e(27),n.e(58),n.e(55),n.e(63)]).then(n.bind(n,1050)),Promise.all([n.e(56),n.e(54)]).then(n.bind(n,341)),Promise.all([n.e(56),n.e(60),n.e(54),n.e(58)]).then(n.bind(n,1055))]).then((function(e){var n=s(e,3),r=n[0],o=n[1],a=n[2],i=r.default,l=o.default,u=a.preloadWidgets,c=new i(window.ServerData.mags.mag,t);u(l.usedWidgets(c.pages||[],c.aboveGlobalWidgetsData)).finally((function(){c.render(),c.showPage(1)}))}))}),[]),o().createElement("div",null)},m=n(646),p=n(698),h=n(738),g=n.n(h),y=(0,m.default)(p.Box).withConfig({displayName:"ServicePages___StyledBox",componentId:"xgqhq9-0"})(["flex-grow:1;"]),b=function(e){var t=e.title,n=e.content,r=e.helpButton,a=e.showFooter;return o().createElement(p.Box,{display:"flex",alignItems:"center",flexDirection:"column",height:"100vh",width:"100vw",bg:"#fafafa"},o().createElement(y,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:460},o().createElement(g(),{as:"h2",textStyle:"subheading"},t),o().createElement(g(),{as:"div",mt:2,color:"gray",textAlign:"center"},n)),a&&o().createElement(p.Box,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,pl:2,pr:2},o().createElement(p.Box,{width:"100%"}),o().createElement(p.Box,{width:"100%",textAlign:"center"},o().createElement(h.StyledLink,{href:"https://readymag.com"},"readymag")),o().createElement(p.Box,{width:"100%",textAlign:"right"},r)))},v=function(){return o().createElement(b,{title:"Page not found",content:o().createElement(o().Fragment,null,"Sorry, there’s nothing here. ",o().createElement("br",null),"Visit our ",o().createElement(h.StyledLink,{href:"/"},"front page"),".")})},E=function(){return o().createElement(b,{title:"Suspended",content:o().createElement(o().Fragment,null,"Sorry, this project has been suspended due to violation of Readymag’s"," ",o().createElement(h.StyledLink,{href:"https://readymag.com/readymag/terms-and-privacy"},"content guidelines"),".")})},w=function(){return o().createElement(b,{title:"Suspended",content:o().createElement(o().Fragment,null,"Sorry, this account has been suspended due to violation of Readymag’s"," ",o().createElement(h.StyledLink,{href:"https://readymag.com/readymag/terms-and-privacy"},"content guidelines"),".")})},x=function(){return o().createElement(b,{title:"Website is Offline",content:"This project has been unpublished",showFooter:!0})},S=function(){return o().createElement(b,{title:"Website is Offline",content:o().createElement(o().Fragment,null,o().createElement(h.StyledLink,{href:"/settings/"},"Log in")," ","to manage your subscription."),showFooter:!0})},j=n(756),P=n(734),k=n.n(P),I=n(908),O=n(636),F=n(1143),_=o().createContext({});function C(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N,R=m.default.form.withConfig({displayName:"Forbidden__Form",componentId:"i0zssw-0"})(["width:100%;max-width:418px;position:relative;z-index:1;"]),U=(0,m.default)(p.Box).withConfig({displayName:"Forbidden___StyledBox",componentId:"i0zssw-1"})(["",""],(function(e){return e._css})),D=function(){var e,t,n,a,i=A((0,r.useState)(""),2),l=i[0],u=i[1],c=A((0,r.useState)(!1),2),s=c[0],d=c[1],f=(0,r.useContext)(_),m=f.publicPath,h=f.project,g=(null==h?void 0:h.pass_bg)||"".concat(m,"/img/viewer/mag-password/bg.jpg"),y=(e=g,t=A((0,r.useState)(!1),2),n=t[0],a=t[1],(0,r.useEffect)((function(){var t=new Image;t.src=e,t.onload=function(){a(!0)}}),[]),n),b=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!h){e.next=7;break}return e.next=4,(0,O.eq)(l,null==h?void 0:h.num_id);case 4:window.location.reload(),e.next=8;break;case 7:d(!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(!0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,l,"next",e)}function l(e){C(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return o().createElement(p.Box,{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",bg:"#000"},o().createElement(p.Cover,{position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundImage:"url('".concat(g,"')"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",opacity:y?1:0,transition:".4s ease opacity",zIndex:0}),o().createElement(R,{onSubmit:function(e){e.preventDefault(),b()}},o().createElement(F.Z,{state:s,onDone:function(){return d(!1)}},o().createElement(U,{display:"flex",alignItems:"center",justifyContent:"space-between",bg:"white",borderRadius:25,height:50,width:"100%",_css:I.default.fixRadiusClip()},o().createElement(p.Box,{height:"100%",width:"100%",p:"0 6px 0 25px"},o().createElement(j.default,{type:"password",value:l,onChange:function(e){return u(e.target.value)},border:"none",p:0,height:"100%",autoFocus:!0,placeholder:"Enter password"})),o().createElement(p.Box,{height:"100%"},o().createElement(k(),{borderRadius:"0 25px 25px 0",width:110,height:"100%",color:"white",background:l.length?"#0078ff":"#999",disabled:!l,onClick:b,variant:"clean"},"Open"))))))};!function(e){e.ProjectNotFound="ProjectNotFound",e.ProjectNotPublished="ProjectNotPublished",e.DomainNotFound="DomainNotFound",e.SubscriptionExpired="SubscriptionExpired",e.Forbidden="Forbidden",e.ProjectSuspended="ProjectSuspended",e.UserSuspended="UserSuspended"}(N||(N={}));var W=function(e){switch(e.type){case N.ProjectNotFound:return o().createElement(v,null);case N.ProjectSuspended:return o().createElement(E,null);case N.UserSuspended:return o().createElement(w,null);case N.ProjectNotPublished:return o().createElement(x,null);case N.SubscriptionExpired:return o().createElement(S,null);case N.Forbidden:return o().createElement(D,null);default:return o().createElement(v,null)}},L=n(1145);function T(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var z=function(e){var t=e.location,n=e.ssr,r=T(e,["location","ssr"]),a=function(e){var r=e.children;return n?o().createElement(c.gx,{location:t},r):o().createElement(u.VK,null,r)},i=r.errorPage?o().createElement(W,{type:r.errorPage}):o().createElement(a,null,o().createElement(c.rs,null,o().createElement(c.AW,{path:["/:user/:project/num/:pageNum","/:user/:project/:pageUri*"]},o().createElement(f,null))));return o().createElement(_.Provider,{value:r},o().createElement(l.Z,null,o().createElement(L.Z,null),i))},M=function(){var e=document.getElementById("root");i().hydrate(o().createElement(z,function(){try{var e=document.getElementById("__RM_PROPS__");return null!=e&&e.innerText?JSON.parse(e.innerText):{}}catch(e){return{}}}()),e)}}}]);